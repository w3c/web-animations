<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Web Animations Level 2</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="UD" name="w3c-status">
  <meta content="Bikeshed version 645534c1532bca4fdb4f3859efc66268a218d7c8" name="generator">
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
  <link href="web-animations.css" rel="stylesheet" type="text/css">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-UD" rel="stylesheet" type="text/css">
 <body class="h-entry">
  <p data-fill-with="bs-styles"></p>
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1>Web Animations Level 2</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Unofficial Proposal Draft, <time class="dt-updated" datetime="2016-11-16">16 November 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/web-animations/level-2/">https://w3c.github.io/web-animations/level-2/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/web-animations-1/">https://www.w3.org/TR/web-animations-1/</a>
     <dt>Version History:
     <dd><a href="https://github.com/w3c/web-animations/commits/master">https://github.com/w3c/web-animations/commits/master</a>
     <dt>Issue Tracking:
     <dd><a href="#issues-index">Inline In Spec</a>
     <dd><span><a href="https://github.com/w3c/fxtf-drafts/labels/web-animations-2">GitHub Issues</a></span>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="43194"><a class="p-name fn u-email email" href="mailto:bbirtles@mozilla.com">Brian Birtles</a> (<span class="p-org org">Mozilla Japan</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="47691"><a class="p-name fn u-email email" href="mailto:shans@google.com">Shane Stephens</a> (<span class="p-org org">Google Inc</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="31960"><a class="p-name fn u-email email" href="mailto:adanilo@google.com">Alex Danilo</a> (<span class="p-org org">Google Inc</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-email email" href="mailto:jackalmage@gmail.com">Tab Atkins</a> (<span class="p-org org">Google Inc</span>)
    </dl>
   </div>
   <div data-fill-with="warning">
    <details class="annoying-warning" open="">
     <summary>Not Ready For Implementation</summary>
     <p> This spec is not yet ready for implementation.
		It exists in this repository to record the ideas and promote discussion. </p>
     <p> Before attempting to implement this spec,
		please contact the editors. </p>
    </details>
   </div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This specification defines a model for synchronization and

timing of changes to the presentation of a Web page.
This specification also defines an application programming interface
for interacting with this model and it is expected that further
specifications will define declarative means for exposing these
features.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#use-cases"><span class="secno">1.1</span> <span class="content">Use cases</span></a>
      <li><a href="#changes-since-level-1"><span class="secno">1.2</span> <span class="content">Changes since level 1</span></a>
      <li><a href="#relationship-to-other-specifications"><span class="secno">1.3</span> <span class="content">Relationship to other specifications</span></a>
      <li><a href="#overview-of-this-specification"><span class="secno">1.4</span> <span class="content">Overview of this specification</span></a>
     </ol>
    <li><a href="#web-animations-model-overview"><span class="secno">2</span> <span class="content">Web Animations model overview</span></a>
    <li>
     <a href="#timing-model"><span class="secno">3</span> <span class="content">Timing model</span></a>
     <ol class="toc">
      <li>
       <a href="#the-timing-model-at-a-glance"><span class="secno">3.1</span> <span class="content">The timing model at a glance</span></a>
       <ol class="toc">
        <li><a href="#stateless"><span class="secno">3.1.1</span> <span class="content">Stateless</span></a>
        <li><a href="#hierarchical"><span class="secno">3.1.2</span> <span class="content">Hierarchical</span></a>
       </ol>
      <li><a href="#timing-model-concepts"><span class="secno">3.2</span> <span class="content">Timing model concepts</span></a>
      <li><a href="#the-global-clock"><span class="secno">3.3</span> <span class="content">The global clock</span></a>
      <li>
       <a href="#timelines"><span class="secno">3.4</span> <span class="content">Timelines</span></a>
       <ol class="toc">
        <li><a href="#document-timelines"><span class="secno">3.4.1</span> <span class="content">Document timelines</span></a>
        <li><a href="#the-documents-default-timeline"><span class="secno">3.4.2</span> <span class="content">The default document timeline</span></a>
       </ol>
      <li>
       <a href="#animations"><span class="secno">3.5</span> <span class="content">Animations</span></a>
       <ol class="toc">
        <li><a href="#setting-the-timeline"><span class="secno">3.5.1</span> <span class="content">Setting the timeline of an animation</span></a>
        <li><a href="#responding-to-a-newly-inactive-timeline"><span class="secno">3.5.2</span> <span class="content">Responding to a newly inactive
  timeline</span></a>
        <li><a href="#setting-the-target-effect"><span class="secno">3.5.3</span> <span class="content">Setting the target effect of an
  animation</span></a>
        <li><a href="#the-current-time-of-an-animation"><span class="secno">3.5.4</span> <span class="content">The current time of an animation</span></a>
        <li><a href="#setting-the-current-time-of-an-animation"><span class="secno">3.5.5</span> <span class="content">Setting the current time of an animation</span></a>
        <li><a href="#setting-the-start-time-of-an-animation"><span class="secno">3.5.6</span> <span class="content">Setting the start time of an animation</span></a>
        <li><a href="#waiting-for-the-target-effect"><span class="secno">3.5.7</span> <span class="content">Waiting for the target effect</span></a>
        <li><a href="#promise-objects"><span class="secno">3.5.8</span> <span class="content">Promise objects</span></a>
        <li><a href="#the-current-ready-promise"><span class="secno">3.5.9</span> <span class="content">The current ready promise</span></a>
        <li><a href="#playing-an-animation-section"><span class="secno">3.5.10</span> <span class="content">Playing an animation</span></a>
        <li><a href="#pausing-an-animation-section"><span class="secno">3.5.11</span> <span class="content">Pausing an animation</span></a>
        <li><a href="#reaching-the-end"><span class="secno">3.5.12</span> <span class="content">Reaching the end</span></a>
        <li><a href="#the-current-finished-promise"><span class="secno">3.5.13</span> <span class="content">The current finished promise</span></a>
        <li><a href="#updating-the-finished-state"><span class="secno">3.5.14</span> <span class="content">Updating the finished state</span></a>
        <li><a href="#finishing-an-animation-section"><span class="secno">3.5.15</span> <span class="content">Finishing an animation</span></a>
        <li><a href="#canceling-an-animation-section"><span class="secno">3.5.16</span> <span class="content">Canceling an animation</span></a>
        <li>
         <a href="#speed-control"><span class="secno">3.5.17</span> <span class="content">Speed control</span></a>
         <ol class="toc">
          <li><a href="#updating-the-playback-rate-of-an-animation"><span class="secno">3.5.17.1</span> <span class="content">Updating the playback rate of an animation</span></a>
         </ol>
        <li><a href="#reversing-an-animation-section"><span class="secno">3.5.18</span> <span class="content">Reversing an animation</span></a>
        <li><a href="#play-states"><span class="secno">3.5.19</span> <span class="content">Play states</span></a>
        <li>
         <a href="#animation-events-section"><span class="secno">3.5.20</span> <span class="content">Animation events</span></a>
         <ol class="toc">
          <li><a href="#animation-event-types"><span class="secno">3.5.20.1</span> <span class="content">Types of animation events</span></a>
          <li><a href="#animation-event-parameters"><span class="secno">3.5.20.2</span> <span class="content">Event parameters</span></a>
         </ol>
       </ol>
      <li>
       <a href="#animation-effects"><span class="secno">3.6</span> <span class="content">Animation effects</span></a>
       <ol class="toc">
        <li><a href="#animation-effects-and-animations"><span class="secno">3.6.1</span> <span class="content">Relationship between animation effects
  and animations</span></a>
        <li><a href="#types-of-animation-effects"><span class="secno">3.6.2</span> <span class="content">Types of animation effects</span></a>
        <li><a href="#the-active-interval"><span class="secno">3.6.3</span> <span class="content">The active interval</span></a>
        <li><a href="#local-time-and-inherited-time"><span class="secno">3.6.4</span> <span class="content">Local time and inherited time</span></a>
        <li><a href="#animation-effect-phases-and-states"><span class="secno">3.6.5</span> <span class="content">Animation effect phases and
states</span></a>
       </ol>
      <li>
       <a href="#fill-behavior"><span class="secno">3.7</span> <span class="content">Fill behavior</span></a>
       <ol class="toc">
        <li><a href="#fill-modes"><span class="secno">3.7.1</span> <span class="content">Fill modes</span></a>
       </ol>
      <li>
       <a href="#repeating"><span class="secno">3.8</span> <span class="content">Repeating</span></a>
       <ol class="toc">
        <li><a href="#iteration-intervals"><span class="secno">3.8.1</span> <span class="content">Iteration intervals</span></a>
        <li><a href="#controlling-iteration"><span class="secno">3.8.2</span> <span class="content">Controlling iteration</span></a>
        <li><a href="#iteration-time-space"><span class="secno">3.8.3</span> <span class="content">Iteration time space</span></a>
        <li><a href="#interval-timing"><span class="secno">3.8.4</span> <span class="content">Interval timing</span></a>
       </ol>
      <li><a href="#animation-effect-speed-control"><span class="secno">3.9</span> <span class="content">Animation effect speed control</span></a>
      <li>
       <a href="#core-animation-effect-calculations"><span class="secno">3.10</span> <span class="content">Core animation effect
calculations</span></a>
       <ol class="toc">
        <li><a href="#animation-effect-calculations-overview"><span class="secno">3.10.1</span> <span class="content">Overview</span></a>
        <li><a href="#calculating-the-active-duration"><span class="secno">3.10.2</span> <span class="content">Calculating the active duration</span></a>
        <li>
         <a href="#transforming-the-local-time"><span class="secno">3.10.3</span> <span class="content">Transforming the local time</span></a>
         <ol class="toc">
          <li><a href="#calculating-the-active-time"><span class="secno">3.10.3.1</span> <span class="content">Calculating the active time</span></a>
          <li><a href="#calculating-the-overall-progress"><span class="secno">3.10.3.2</span> <span class="content">Calculating the overall progress</span></a>
          <li><a href="#calculating-the-simple-iteration-progress"><span class="secno">3.10.3.3</span> <span class="content">Calculating the simple iteration progress</span></a>
         </ol>
        <li><a href="#calculating-the-current-iteration"><span class="secno">3.10.4</span> <span class="content">Calculating the current iteration</span></a>
       </ol>
      <li>
       <a href="#direction-control"><span class="secno">3.11</span> <span class="content">Direction control</span></a>
       <ol class="toc">
        <li><a href="#calculating-the-directed-progress"><span class="secno">3.11.1</span> <span class="content">Calculating the directed progress</span></a>
       </ol>
      <li>
       <a href="#time-transformations"><span class="secno">3.12</span> <span class="content">Time transformations</span></a>
       <ol class="toc">
        <li><a href="#scaling-the-time"><span class="secno">3.12.1</span> <span class="content">Scaling the time</span></a>
        <li><a href="#timing-functions"><span class="secno">3.12.2</span> <span class="content">Timing functions</span></a>
        <li><a href="#scaling-using-a-cubic-bezier-curve"><span class="secno">3.12.3</span> <span class="content">Scaling using a cubic Bézier curve</span></a>
        <li><a href="#timing-in-discrete-steps"><span class="secno">3.12.4</span> <span class="content">Timing in discrete steps</span></a>
        <li><a href="#calculating-the-transformed-progress"><span class="secno">3.12.5</span> <span class="content">Calculating the transformed progress</span></a>
        <li><a href="#calculating-the-transformed-time"><span class="secno">3.12.6</span> <span class="content">Calculating the transformed time</span></a>
       </ol>
      <li>
       <a href="#grouping-and-synchronization"><span class="secno">3.13</span> <span class="content">Grouping and synchronization</span></a>
       <ol class="toc">
        <li><a href="#relationship-of-group-time-to-child-time"><span class="secno">3.13.1</span> <span class="content">Relationship of group time to child time</span></a>
        <li><a href="#the-start-time-of-children-of-a-group-effect"><span class="secno">3.13.2</span> <span class="content">The start time of
  children of a group effect</span></a>
        <li><a href="#the-intrinsic-iteration-duration-of-a-group-effect"><span class="secno">3.13.3</span> <span class="content">The intrinsic
  iteration duration of a group effect</span></a>
        <li>
         <a href="#sequence-effects"><span class="secno">3.13.4</span> <span class="content">Sequence effects</span></a>
         <ol class="toc">
          <li><a href="#the-start-time-of-children-of-a-sequence-effect"><span class="secno">3.13.4.1</span> <span class="content">The start time of
  children of a sequence effect</span></a>
          <li><a href="#the-intrinsic-iteration-duration-of-a-sequence-effect"><span class="secno">3.13.4.2</span> <span class="content">The intrinsic
  iteration duration of a sequence effect</span></a>
         </ol>
        <li><a href="#calculating-the-iteration-progress"><span class="secno">3.13.5</span> <span class="content">Calculating the iteration
  progress</span></a>
       </ol>
     </ol>
    <li>
     <a href="#animation-model"><span class="secno">4</span> <span class="content">Animation model</span></a>
     <ol class="toc">
      <li><a href="#introduction-to-the-animation-model"><span class="secno">4.1</span> <span class="content">Introduction</span></a>
      <li><a href="#procedures-for-animating-properties"><span class="secno">4.2</span> <span class="content">Procedures for animating properties</span></a>
      <li>
       <a href="#animation-types"><span class="secno">4.3</span> <span class="content">Animation types</span></a>
       <ol class="toc">
        <li><a href="#not-animatable-section"><span class="secno">4.3.1</span> <span class="content">Not animatable</span></a>
        <li><a href="#discrete-animation-type-section"><span class="secno">4.3.2</span> <span class="content">Discrete</span></a>
        <li><a href="#real-number-animation-type-section"><span class="secno">4.3.3</span> <span class="content">Real number</span></a>
        <li><a href="#length-percentage-or-calc-animation-type-section"><span class="secno">4.3.4</span> <span class="content">Length, percentage, or
calc</span></a>
        <li><a href="#color-animation-type-section"><span class="secno">4.3.5</span> <span class="content">Color</span></a>
        <li><a href="#transform-list-animation-type-section"><span class="secno">4.3.6</span> <span class="content">Transform list</span></a>
        <li><a href="#other-animation-types"><span class="secno">4.3.7</span> <span class="content">Other animation types</span></a>
       </ol>
      <li>
       <a href="#keyframe-effects"><span class="secno">4.4</span> <span class="content">Keyframe effects</span></a>
       <ol class="toc">
        <li><a href="#keyframes-section"><span class="secno">4.4.1</span> <span class="content">Keyframes</span></a>
        <li>
         <a href="#spacing-keyframes"><span class="secno">4.4.2</span> <span class="content">Spacing keyframes</span></a>
         <ol class="toc">
          <li><a href="#applying-spacing-to-keyframes"><span class="secno">4.4.2.1</span> <span class="content">Applying spacing to keyframes</span></a>
         </ol>
        <li><a href="#calculating-computed-keyframes"><span class="secno">4.4.3</span> <span class="content">Calculating computed keyframes</span></a>
        <li><a href="#the-effect-value-of-a-keyframe-animation-effect"><span class="secno">4.4.4</span> <span class="content">The effect value of
  a keyframe effect</span></a>
       </ol>
      <li>
       <a href="#combining-effects"><span class="secno">4.5</span> <span class="content">Combining effects</span></a>
       <ol class="toc">
        <li><a href="#animation-classes"><span class="secno">4.5.1</span> <span class="content">Animation classes</span></a>
        <li><a href="#the-effect-stack"><span class="secno">4.5.2</span> <span class="content">The effect stack</span></a>
        <li><a href="#calculating-the-result-of-an-effect-stack"><span class="secno">4.5.3</span> <span class="content">Calculating the result of an effect stack</span></a>
        <li><a href="#effect-composition"><span class="secno">4.5.4</span> <span class="content">Effect composition</span></a>
        <li><a href="#applying-the-composited-result"><span class="secno">4.5.5</span> <span class="content">Applying the composited result</span></a>
       </ol>
      <li><a href="#effect-accumulation-section"><span class="secno">4.6</span> <span class="content">Effect accumulation</span></a>
      <li><a href="#side-effects-section"><span class="secno">4.7</span> <span class="content">Side effects of animation</span></a>
      <li>
       <a href="#custom-effects"><span class="secno">4.8</span> <span class="content">Custom effects</span></a>
       <ol class="toc">
        <li><a href="#sampling-custom-effects"><span class="secno">4.8.1</span> <span class="content">Sampling custom effects</span></a>
        <li><a href="#execution-order-of-custom-effects"><span class="secno">4.8.2</span> <span class="content">Execution order of custom effects</span></a>
       </ol>
     </ol>
    <li>
     <a href="#programming-interface"><span class="secno">5</span> <span class="content">Programming interface</span></a>
     <ol class="toc">
      <li><a href="#time-values-in-the-programming-interface"><span class="secno">5.1</span> <span class="content"> Time values in the programming interface</span></a>
      <li><a href="#the-animationtimeline-interface"><span class="secno">5.2</span> <span class="content">The <code>AnimationTimeline</code> interface</span></a>
      <li><a href="#the-documenttimeline-interface"><span class="secno">5.3</span> <span class="content">The <code>DocumentTimeline</code> interface</span></a>
      <li>
       <a href="#the-animation-interface"><span class="secno">5.4</span> <span class="content">The <code>Animation</code> interface</span></a>
       <ol class="toc">
        <li><a href="#the-animationplaystate-enumeration"><span class="secno">5.4.1</span> <span class="content">The <code>AnimationPlayState</code> enumeration</span></a>
       </ol>
      <li><a href="#the-animationeffectreadonly-interface"><span class="secno">5.5</span> <span class="content">The <code>AnimationEffectReadOnly</code> interface</span></a>
      <li><a href="#the-animationeffecttimingreadonly-interface"><span class="secno">5.6</span> <span class="content">The <code>AnimationEffectTimingReadOnly</code> interface</span></a>
      <li><a href="#the-animationeffecttiming-interface"><span class="secno">5.7</span> <span class="content">The <code>AnimationEffectTiming</code> interface</span></a>
      <li><a href="#the-animationeffecttimingproperties-dictionary"><span class="secno">5.8</span> <span class="content">The <code>AnimationEffectTimingProperties</code> dictionary</span></a>
      <li>
       <a href="#the-computedtimingproperties-dictionary"><span class="secno">5.9</span> <span class="content">The <code>ComputedTimingProperties</code> dictionary</span></a>
       <ol class="toc">
        <li><a href="#the-fillmode-enumeration"><span class="secno">5.9.1</span> <span class="content">The <code>FillMode</code> enumeration</span></a>
        <li><a href="#the-playbackdirection-enumeration"><span class="secno">5.9.2</span> <span class="content">The <code>PlaybackDirection</code> enumeration</span></a>
       </ol>
      <li>
       <a href="#the-animationgroup-interfaces"><span class="secno">5.10</span> <span class="content">The <code>GroupEffectReadOnly</code> and <code>GroupEffect</code> interfaces</span></a>
       <ol class="toc">
        <li><a href="#processing-a-timing-argument"><span class="secno">5.10.1</span> <span class="content">Processing a <code>timing</code> argument</span></a>
        <li><a href="#definitions-for-manipulating-hierarchies"><span class="secno">5.10.2</span> <span class="content">Definitions for manipulating hierarchies</span></a>
       </ol>
      <li><a href="#the-animationnodelist-interface"><span class="secno">5.11</span> <span class="content">The <code>AnimationNodeList</code> interface</span></a>
      <li><a href="#the-animationsequence-interfaces"><span class="secno">5.12</span> <span class="content">The <code>SequenceEffectReadOnly</code> and <code>SequenceEffect</code> interfaces</span></a>
      <li>
       <a href="#the-keyframeeffect-interfaces"><span class="secno">5.13</span> <span class="content">The <code>KeyframeEffectReadOnly</code> and <code>KeyframeEffect</code> interfaces</span></a>
       <ol class="toc">
        <li><a href="#creating-a-new-keyframeeffect-object"><span class="secno">5.13.1</span> <span class="content">Creating a new <code>KeyframeEffect</code> object</span></a>
        <li><a href="#property-name-conversion"><span class="secno">5.13.2</span> <span class="content">Property names and IDL names</span></a>
        <li><a href="#processing-a-keyframes-argument"><span class="secno">5.13.3</span> <span class="content">Processing a <code>keyframes</code> argument</span></a>
        <li><a href="#the-keyframeeffectoptions-dictionary"><span class="secno">5.13.4</span> <span class="content">The <code>KeyframeEffectOptions</code> dictionary</span></a>
        <li><a href="#computed-offset-keyframes-section"><span class="secno">5.13.5</span> <span class="content">Computed-offset keyframes</span></a>
       </ol>
      <li><a href="#the-iterationcompositeoperation-enumeration"><span class="secno">5.14</span> <span class="content">The <code>IterationCompositeOperation</code> enumeration</span></a>
      <li><a href="#the-compositeoperation-enumeration"><span class="secno">5.15</span> <span class="content">The <code>CompositeOperation</code> enumeration</span></a>
      <li><a href="#the-sharedkeyframelist-interface"><span class="secno">5.16</span> <span class="content">The <code>SharedKeyframeList</code> interface</span></a>
      <li><a href="#the-effectcallback-callback-function"><span class="secno">5.17</span> <span class="content">The <code>EffectCallback</code> callback function</span></a>
      <li><a href="#the-animatable-interface"><span class="secno">5.18</span> <span class="content">The <code>Animatable</code> interface</span></a>
      <li><a href="#extensions-to-the-document-interface"><span class="secno">5.19</span> <span class="content">Extensions to the <code>Document</code> interface</span></a>
      <li><a href="#extensions-to-the-element-interface"><span class="secno">5.20</span> <span class="content">Extensions to the <code>Element</code> interface</span></a>
      <li><a href="#extensions-to-the-pseudoelement-interface"><span class="secno">5.21</span> <span class="content">Extensions to the <code>CSSPseudoElement</code> interface</span></a>
      <li><a href="#the-animationplaybackevent-interface"><span class="secno">5.22</span> <span class="content">The <code>AnimationPlaybackEvent</code> interface</span></a>
      <li><a href="#model-liveness"><span class="secno">5.23</span> <span class="content">Model liveness</span></a>
     </ol>
    <li><a href="#integration-with-media-fragments"><span class="secno">6</span> <span class="content">Integration with Media Fragments</span></a>
    <li><a href="#interaction-with-page-display"><span class="secno">7</span> <span class="content">Interaction with page display</span></a>
    <li>
     <a href="#implementation-requirements"><span class="secno">8</span> <span class="content">Implementation requirements</span></a>
     <ol class="toc">
      <li><a href="#precision-of-time-values"><span class="secno">8.1</span> <span class="content">Precision of time values</span></a>
      <li><a href="#conformance-criteria"><span class="secno">8.2</span> <span class="content">Conformance criteria</span></a>
     </ol>
    <li><a href="#acknowledgements"><span class="secno">9</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({showMathMenu: false});
</script>
<script src="MathJax/MathJax.js?config=MML_SVG" type="text/javascript"></script>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>Web Animations defines a model for supporting animation and
synchronization on the Web platform.
It is intended that other specifications will build on this model and
expose its features through declarative means.
In addition, this specification also defines a programming interface to
the model that may be implemented by user agents that provide support
for scripting.</p>
    <h3 class="heading settled" data-level="1.1" id="use-cases"><span class="secno">1.1. </span><span class="content">Use cases</span><a class="self-link" href="#use-cases"></a></h3>
    <p>The Web Animations model is intended to provide the features necessary
for expressing CSS Transitions <a data-link-type="biblio" href="#biblio-css3-transitions">[CSS3-TRANSITIONS]</a>,
CSS Animations <a data-link-type="biblio" href="#biblio-css3-animations">[CSS3-ANIMATIONS]</a>, and
SVG <a data-link-type="biblio" href="#biblio-svg11">[SVG11]</a>.
As such, the use cases of Web Animations model is the union of use cases for
those three specifications.</p>
    <p>The use cases for the programming interface include the following:</p>
    <dl>
     <dt data-md="">
      <p>Inspecting running animations</p>
     <dd data-md="">
      <p>Often Web applications must wait for certain animated effects to complete
before updating some state.
The programming interface in this specification allows such applications
to wait for all currently running animation to complete,
regardless of whether they are defined by CSS Transitions, CSS Animations,
SVG animations, or created directly using the programming interface.</p>
      <div class="example" id="example-24046606">
       <a class="self-link" href="#example-24046606"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Wait until all animations have finished before removing the element
</span>Promise<span class="p">.</span>all<span class="p">(</span>
  elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>map<span class="p">(</span>animation <span class="o">=></span> animation<span class="p">.</span>finished<span class="p">)</span>
<span class="p">)</span><span class="p">.</span>then<span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="o">=></span> elem<span class="p">.</span>remove<span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
</pre>
      </div>
      <p>Alternatively, applications may wish to query the playback state of
animations without waiting.</p>
      <div class="example" id="example-61845f74">
       <a class="self-link" href="#example-61845f74"></a> 
<pre class="lang-javascript highlight"><span class="kd">var</span> isAnimating <span class="o">=</span> elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>some<span class="p">(</span>
  animation <span class="o">=></span> animation<span class="p">.</span>playState <span class="o">==</span> <span class="s1">'running'</span>
<span class="p">)</span><span class="p">;</span>
</pre>
      </div>
     <dt data-md="">
      <p>Controlling running animations</p>
     <dd data-md="">
      <p>It is sometimes useful to perform playback control on animations
so that they can respond to external inputs.
For example, it may be necessary to pause all existing animations before
displaying a modal dialog so that they do not distract the user’s
attention.</p>
      <div class="example" id="example-53aae94a">
       <a class="self-link" href="#example-53aae94a"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Pause all existing animations in the document
</span>document<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>forEach<span class="p">(</span>
  animation <span class="o">=></span> animation<span class="p">.</span>pause<span class="p">(</span><span class="p">)</span>
<span class="p">)</span><span class="p">;</span>
</pre>
      </div>
     <dt data-md="">
      <p>Creating animations from script</p>
     <dd data-md="">
      <p>While it is possible to use ECMAScript to perform animation using <code>requestAnimationFrame</code> <a data-link-type="biblio" href="#biblio-animation-timing">[ANIMATION-TIMING]</a>,
such animations behave differently to declarative animation in terms of
how they are represented in the CSS cascade and the performance
optimizations that are possible such as performing the animation on a
separate thread.
Using the Web Animations programming interface, it is possible to
create animations from script that have the same behavior and performance
characteristics as declarative animations.</p>
      <div class="example" id="example-ab20ee84">
       <a class="self-link" href="#example-ab20ee84"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Fade out quickly
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> transform<span class="o">:</span> <span class="s1">'scale(0)'</span><span class="p">,</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span><span class="p">;</span>
</pre>
      </div>
     <dt data-md="">
      <p>Animation debugging</p>
     <dd data-md="">
      <p>In a complex application, it may be difficult to determine how an
element arrived in its present state.
The Web Animations programming interface may be used to inspect
running animations to answer questions such as,
“Why is the opacity of this element changing?”</p>
      <div class="example" id="example-b941d3ef">
       <a class="self-link" href="#example-b941d3ef"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Print the id of any opacity animations on elem
</span>elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>filter<span class="p">(</span>
  animation <span class="o">=></span>
    animation<span class="p">.</span>effect <span class="k">instanceof</span> KeyframeEffectReadOnly <span class="o">&amp;&amp;</span>
    animation<span class="p">.</span>effect<span class="p">.</span>getKeyframes<span class="p">(</span><span class="p">)</span><span class="p">.</span>some<span class="p">(</span>
      frame <span class="o">=></span> frame<span class="p">.</span>hasOwnProperty<span class="p">(</span><span class="s1">'opacity'</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span><span class="p">.</span>forEach<span class="p">(</span>animation <span class="o">=></span> console<span class="p">.</span>log<span class="p">(</span>animation<span class="p">.</span>id<span class="p">)</span><span class="p">)</span><span class="p">;</span>
</pre>
      </div>
      <p>Likewise, in order to fine tune animations, it is often necessary to
reduce their playback rate and replay them.</p>
      <div class="example" id="example-173d8a44">
       <a class="self-link" href="#example-173d8a44"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Slow down and replay any transform animations
</span>elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>filter<span class="p">(</span>
  animation <span class="o">=></span>
    animation<span class="p">.</span>effect <span class="k">instanceof</span> KeyframeEffectReadOnly <span class="o">&amp;&amp;</span>
    animation<span class="p">.</span>effect<span class="p">.</span>getKeyframes<span class="p">(</span><span class="p">)</span><span class="p">.</span>some<span class="p">(</span>
      frame <span class="o">=></span> frame<span class="p">.</span>hasOwnProperty<span class="p">(</span><span class="s1">'transform'</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span><span class="p">.</span>forEach<span class="p">(</span>animation <span class="o">=></span> <span class="p">{</span>
  animation<span class="p">.</span>currentTime <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  animation<span class="p">.</span>playbackRate <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
</pre>
      </div>
     <dt data-md="">
      <p>Testing animations</p>
     <dd data-md="">
      <p>In order to test applications that make use of animations it is often
impractical to wait for such animations to run to completion.
Rather, it is desirable to seek the animations to specific times.</p>
    </dl>
    <div class="example" id="example-48d1046f">
     <a class="self-link" href="#example-48d1046f"></a>
<pre class="lang-javascript highlight"><span class="c1">// Seek to the half-way point of an animation and check that the opacity is 50%
</span>elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>forEach<span class="p">(</span>
  animation <span class="o">=></span>
    animation<span class="p">.</span>currentTime <span class="o">=</span>
      animation<span class="p">.</span>effect<span class="p">.</span>getComputedTiming<span class="p">(</span><span class="p">)</span><span class="p">.</span>delay <span class="o">+</span>
      animation<span class="p">.</span>effect<span class="p">.</span>getComputedTiming<span class="p">(</span><span class="p">)</span><span class="p">.</span>activeDuration <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">)</span><span class="p">;</span>
assert<span class="p">.</span>strictEqual<span class="p">(</span>getComputedStyle<span class="p">(</span>elem<span class="p">)</span><span class="p">.</span>opacity<span class="p">,</span> <span class="s1">'0.5'</span><span class="p">)</span><span class="p">;</span>

<p><span class="c1">// Check that the loading screen is hidden after the animations finish
</span>elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>forEach<span class="p">(</span>
  animation <span class="o">=></span> animation<span class="p">.</span>finish<span class="p">(</span><span class="p">)</span>
<span class="p">)</span><span class="p">;</span>
<span class="c1">// Wait one frame so that event handlers have a chance to run
</span>requestAnimationFrame<span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="o">=></span> <span class="p">{</span>
  assert<span class="p">.</span>strictEqual<span class="p">(</span>
    getComputedStyle<span class="p">(</span>document<span class="p">.</span>querySelector<span class="p">(</span><span class="s1">'#loading'</span><span class="p">)</span><span class="p">)</span><span class="p">.</span>display<span class="p">,</span> <span class="s1">'none'</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span></p>
</pre>
    </div>
    <h3 class="heading settled" data-level="1.2" id="changes-since-level-1"><span class="secno">1.2. </span><span class="content">Changes since level 1</span><a class="self-link" href="#changes-since-level-1"></a></h3>
    <p>This specification introduces the following changes compared to the
previous level of this specification:</p>
    <ul>
     <li data-md="">
      <p><a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-1">group effects</a> and <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-1">sequence effects</a>,</p>
     <li data-md="">
      <p>an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-1">animation effect</a>-specific <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-1">playback rate</a>,</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-1">custom effects</a>.</p>
    </ul>
    <h3 class="heading settled" data-level="1.3" id="relationship-to-other-specifications"><span class="secno">1.3. </span><span class="content">Relationship to other specifications</span><a class="self-link" href="#relationship-to-other-specifications"></a></h3>
    <p>CSS Transitions <a data-link-type="biblio" href="#biblio-css3-transitions">[CSS3-TRANSITIONS]</a>, CSS Animations <a data-link-type="biblio" href="#biblio-css3-animations">[CSS3-ANIMATIONS]</a>, and
SVG <a data-link-type="biblio" href="#biblio-svg11">[SVG11]</a> all provide mechanisms that
generate animated content on a Web page.
Although the three specifications provide many similar features,
they are described in different terms.
This specification proposes an abstract animation model that
encompasses the common features of all three specifications.
This model is backwards-compatible with the current behavior of these
specifications such that they can be defined in terms of this model
without any observable change.</p>
    <p>The animation features in SVG 1.1 are defined in terms of SMIL
Animation <a data-link-type="biblio" href="#biblio-smil-animation">[SMIL-ANIMATION]</a>.
It is intended that by defining SVG’s animation features in terms of
the Web Animations model, the dependency between SVG and SMIL
Animation can be removed.</p>
    <p>As with Timing control for script-based animations (commonly referred
to as “requestAnimationFrame”) <a data-link-type="biblio" href="#biblio-animation-timing">[ANIMATION-TIMING]</a>,
the programming interface component of this specification allows
animations to be created from script.
The animations created using the interface defined in this
specification, however, once created, are executed entirely by the
user agent meaning they share the same performance characteristics as
animations defined by markup.
Using this interface it is possible to create animations
from script in a simpler and more performant manner.</p>
    <p>The time values used within the programming interface
correspond with those used in Timing control for script-based
animations <a data-link-type="biblio" href="#biblio-animation-timing">[ANIMATION-TIMING]</a> and their execution order is defined
such that the two interfaces can be used simultaneously without conflict.</p>
    <p>The programming interface component of this specification makes
some additions to interfaces defined in HTML <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.</p>
    <h3 class="heading settled" data-level="1.4" id="overview-of-this-specification"><span class="secno">1.4. </span><span class="content">Overview of this specification</span><a class="self-link" href="#overview-of-this-specification"></a></h3>
    <p>This specification begins by defining an abstract model for animation.
This is followed by a programming interface defined in terms of the
abstract model.
The programming interface is defined in terms of the abstract model
and is only relevant to user agents that provide scripting support.</p>
   </div>
   <h2 class="heading settled" data-level="2" id="web-animations-model-overview"><span class="secno">2. </span><span class="content">Web Animations model overview</span><a class="self-link" href="#web-animations-model-overview"></a></h2>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>At a glance, the Web Animations model consists of two largely
independent pieces, a <em>timing model</em> and an <em>animation
model</em>.  The role of these pieces is as follows:</p>
    <dl>
     <dt data-md="">
      <p>Timing model</p>
     <dd data-md="">
      <p>Takes a moment in time and converts it to a proportional distance
within a single iteration of an animation called the <em>iteration
progress</em>.
The <em>iteration index</em> is also recorded since some animations vary
each time they repeat.</p>
     <dt data-md="">
      <p>Animation model</p>
     <dd data-md="">
      <p>Takes the <em>iteration progress</em> values and <em>iteration indices</em> produced by the timing model and converts them into a series of values
to apply to the target properties.</p>
    </dl>
    <p>Graphically, this flow can be represented as follows:</p>
    <figure>
      <img alt="Overview of the operation of the Web Animations model." src="img/timing-and-animation-models.svg" width="600"> 
     <figcaption> Overview of the operation of the Web Animations model.<br> The current time is input to the timing model which produces an iteration
    progress value and an iteration index.<br> These parameters are used as input to the animation model which produces
    the values to apply. </figcaption>
    </figure>
    <p>For example, consider an animation that:</p>
    <ul>
     <li data-md="">
      <p>starts after 3 seconds</p>
     <li data-md="">
      <p>runs twice,</p>
     <li data-md="">
      <p>takes 2 seconds every time, and</p>
     <li data-md="">
      <p>changes the width of a rectangle from 50 pixels to 100 pixels.</p>
    </ul>
    <p>The first three points apply to the timing model.
At a time of 6 seconds, it will calculate that the animation should be
half-way through its second iteration and produces the result 0.5.
The animation model then uses that information to calculate a width.</p>
    <p>This specification begins with the timing model and then proceeds to
the animation model.</p>
   </div>
   <h2 class="heading settled" data-level="3" id="timing-model"><span class="secno">3. </span><span class="content">Timing model</span><a class="self-link" href="#timing-model"></a></h2>
   <p>This section describes and defines the behavior of the Web Animations
timing model.</p>
   <h3 class="heading settled" data-level="3.1" id="the-timing-model-at-a-glance"><span class="secno">3.1. </span><span class="content">The timing model at a glance</span><a class="self-link" href="#the-timing-model-at-a-glance"></a></h3>
   <div class="informative-bg">
    <p><em>This section is non-normative</em></p>
    <p>Two features characterize the Web Animations timing model: it is <em>stateless</em> and it is <em>hierarchical</em>.</p>
    <h4 class="heading settled" data-level="3.1.1" id="stateless"><span class="secno">3.1.1. </span><span class="content">Stateless</span><a class="self-link" href="#stateless"></a></h4>
    <p>The Web Animations timing model operates by taking an input time and
producing an output iteration progress.
Since the output is based solely on the input time and is independent
of previous inputs, the model may be described as stateless.
This gives the model the following properties:</p>
    <dl>
     <dt data-md="">
      <p>Frame-rate independent</p>
     <dd data-md="">
      <p>Since the output is independent of previous inputs, the rate at
which the model is sampled will not affect its progress.
Provided the input times are proportional to the progress of
real-world time, animations will progress at an identical rate
regardless of the capabilities of the device running them.</p>
     <dt data-md="">
      <p>Direction-agnostic</p>
     <dd data-md="">
      <p>Since the sequence of inputs is insignificant, the model is
directionless.
This means that the model can be sampled in reverse or even in
a backwards and forwards pattern without requiring any specialized
handling.</p>
     <dt data-md="">
      <p>Constant-time seeking</p>
     <dd data-md="">
      <p>Since each input is independent of the previous input, the
processing required to perform a seek operation, even far into the
future, is at least potentially constant.</p>
    </dl>
    <p>There are a few exceptions to the stateless behavior of the timing
model.</p>
    <p>Firstly, a number of methods defined in the <a href="#programming-interface">programming interface</a> to the model
provide play control such as pausing an animation.
These methods are defined in terms of the time at which they are
called and are therefore stative.
These methods are provided primarily for convenience and are not part
of the core timing model but are layered on top.</p>
    <p>Similarly, the <a href="#reaching-the-end">finishing behavior</a> of
animations means that dynamic changes to the end time of
the media (target effect) of an animation may produce a
different result depending on when the change occurs.
This behavior is somewhat unfortunate but has been deemed intuitive
and consistent with HTML.
As a result, the model can only truly be described as stateless <em>in the absence of dynamic changes to its timing properties</em>.</p>
    <p>Finally, each time the model is sampled, it can be considered to
establish a temporary state.
While this temporary state affects the values returned from the <a href="#programming-interface">programming interface</a>, it has no
influence on the subsequent samples and hence does not conflict with
the stateless qualities described above.</p>
    <h4 class="heading settled" data-level="3.1.2" id="hierarchical"><span class="secno">3.1.2. </span><span class="content">Hierarchical</span><a class="self-link" href="#hierarchical"></a></h4>
    <p>The other characteristic feature of the Web Animations timing model is
that time is inherited.
Time begins with a monotonically increasing time source and cascades
down a number of steps to each animation.
At each step, time may be shifted backwards and forwards, scaled,
reversed, paused, and repeated.</p>
    <figure>
      <img alt="A hierarchy of timing nodes" src="img/time-hierarchy.svg" width="600"> 
     <figcaption> A hierarchy of timing nodes.
    Each node in the tree derives its time from its parent node.
    At the root of the tree is the global clock. </figcaption>
    </figure>
    <p>A consequence of this hierarchical arrangement is that complex
animation arrangements can be reversed, scheduled, accelerated and so
on as a whole unit since the manipulations applied to the parent,
cascade down to its <a data-link-type="dfn" href="#descendant" id="ref-for-descendant-1">descendants</a>.
Furthermore, since time has a common source, it is easy to synchronize
animations.</p>
   </div>
   <h3 class="heading settled" data-level="3.2" id="timing-model-concepts"><span class="secno">3.2. </span><span class="content">Timing model concepts</span><a class="self-link" href="#timing-model-concepts"></a></h3>
   <p>In Web Animations, timing is based on a hierarchy of time relationships
between timing nodes.
Parent nodes provide timing information to their child nodes in the form
of <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-1">time values</a>.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="time-value">time value</dfn> is a real number which nominally represents
a number of milliseconds from some moment.
The connection between <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-2">time values</a> and wall-clock milliseconds
may be obscured by any number of transformations applied to the value as
it passes through the time hierarchy.</p>
   <p class="annotation"> In the future we may have timelines that are based on UI gestures in
which case the connection between time values and milliseconds will be
weakened even further. </p>
   <p>A <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-3">time value</a> may also be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="unresolved">unresolved</dfn> if, for example,
a timing node is not in a state to produce a <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-4">time value</a>.</p>
   <p>Periodically, the user agent will update the timing model in a process called <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sampling">sampling</dfn>.
On each <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="single-sample" data-noexport="" id="single-sample">sample</dfn> the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-5">time values</a> of each timing node are updated.</p>
   <p>Further requirements on the frequency and sequencing of <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-1">sampling</a> are specified by HTML’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model">event loop processing model</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.</p>
   <p class="note" role="note">Note: HTML currently refers to a “<a href="https://html.spec.whatwg.org/multipage/webappapis.html#run-css-animations-and-send-events">run
  CSS animations and send events</a>” operation but this should be
understood to include sampling <em>all</em> animations covered by this
specification, not only CSS animations.
Furthermore, the <span class="param">now</span> parameter passed to this
operation is ignored in this specification since we define a more general
model that supports timelines whose time origin is not relative to <code>navigationStart</code>.</p>
   <h3 class="heading settled" data-level="3.3" id="the-global-clock"><span class="secno">3.3. </span><span class="content">The global clock</span><a class="self-link" href="#the-global-clock"></a></h3>
   <p>At the root of the Web Animations timing hierarchy is the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-1">global
clock</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="global-clock">global clock</dfn> is a source of monotonically increasing <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-6">time values</a> unaffected by adjustments to the system clock.
The <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-7">time values</a> produced by the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-2">global clock</a> represent
wall-clock milliseconds from an unspecified historical moment.
Because the zero time of the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-3">global clock</a> is not specified,
the absolute values of the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-8">time values</a> produced by the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-4">global
clock</a> are not significant, only their rate of change.</p>
   <p class="note" role="note">Note: The <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-5">global clock</a> is not exposed in the <a href="#programming-interface">programming interface</a> and nor is it
    expected to be exposed by markup.
    As a result, the moment from which <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-6">global clock</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-9">time values</a> are measured, that is, the zero time of the clock, is
    implementation-dependent.
    One user agent may measure the number of milliseconds since the user
    agent was loaded whilst another may use the time when the device was
    started.
    Both approaches are acceptable and produce no observable difference
    in the output of the model.</p>
   <h3 class="heading settled" data-level="3.4" id="timelines"><span class="secno">3.4. </span><span class="content">Timelines</span><a class="self-link" href="#timelines"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="timeline">timeline</dfn> provides a source of <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-10">time values</a> for the
purpose of synchronization.</p>
   <p>Typically, a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-1">timeline</a> is tied to the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-7">global clock</a> such
that its absolute time is calculated as a fixed offset from the time of
the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-8">global clock</a>.
This offset is established by designating some moment as the timeline’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="zero-time">zero time</dfn> and recording the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-11">time value</a> of the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-9">global clock</a> at that moment.
At subsequent moments, the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-12">time value</a> of the timeline is
calculated as the difference between the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-13">time value</a> of
the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-10">global clock</a> and the value recorded as the <a data-link-type="dfn" href="#zero-time" id="ref-for-zero-time-1">zero time</a>.</p>
   <p>On each <a data-link-type="dfn" href="#single-sample" id="ref-for-single-sample-1">sample</a>, the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-14">time value</a> of the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-11">global clock</a> at the beginning of the sample is recorded and this
recorded value is used as the time value of the global clock until the
next sample.</p>
   <p class="note" role="note">Note: We anticipate that other types of timelines may be introduced
  in the future that are not tied to the global clock.
  For example, a timeline whose time values are related to the progress of
  a scroll container or UI gesture.</p>
   <p>Since a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-2">timeline</a> may be defined relative to a moment that has yet
to occur, it may not always be able to return a meaningful <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-15">time
value</a>, but only an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-1">unresolved</a> time value.
A <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-3">timeline</a> is considered to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="inactive timeline" data-noexport="" id="inactive-timeline">inactive</dfn> when its <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-16">time value</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-2">unresolved</a>.</p>
   <h4 class="heading settled" data-level="3.4.1" id="document-timelines"><span class="secno">3.4.1. </span><span class="content">Document timelines</span><a class="self-link" href="#document-timelines"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="document-timeline">document timeline</dfn> is a type of <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-4">timeline</a> that is associated
with a document.</p>
   <p>The <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-17">time values</a> of a <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-1">document timeline</a> are calculated
as a fixed offset from the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-12">global clock</a> such that the <a data-link-type="dfn" href="#zero-time" id="ref-for-zero-time-2">zero
time</a> corresponds to the <a href="http://www.w3.org/TR/navigation-timing/#dom-performancetiming-navigationstart"> <code>navigationStart</code></a> moment <a data-link-type="biblio" href="#biblio-navigation-timing">[NAVIGATION-TIMING]</a> plus a
signed delta known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="origin-time">origin time</dfn>.
Prior to establishing the <code>navigationStart</code> moment, the <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-2">document
timeline</a> is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-1">inactive</a>.</p>
   <p>A <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-3">document timeline</a> that is associated with a document which is not
an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a> is also considered to be <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-2">inactive</a>.</p>
   <h4 class="heading settled" data-level="3.4.2" id="the-documents-default-timeline"><span class="secno">3.4.2. </span><span class="content">The default document timeline</span><a class="self-link" href="#the-documents-default-timeline"></a></h4>
   <p>Each <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">document</a> has a <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-4">document timeline</a> called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="default document timeline" data-noexport="" id="default-document-timeline">default
document timeline</dfn>.
The <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-1">default document timeline</a> is unique to each document and persists for
the lifetime of the document including calls to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-document-open">document.open()</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.</p>
   <p>The <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-2">default document timeline</a> has an <a data-link-type="dfn" href="#origin-time" id="ref-for-origin-time-1">origin time</a> of zero.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>Since the <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-5">document timelines</a> are tied to the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-13">global
clock</a> by a fixed offset, <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-18">time values</a> reported by <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-6">document timelines</a> increase monotonically.
Furthermore, since no scaling is applied, these <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-19">time values</a> are proportional to wall-clock milliseconds.</p>
    <p>Since the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-20">time values</a> of the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-3">default document timeline</a> are
relative to the <code>navigationStart</code> time, <code>document.timeline.currentTime</code> will roughly correspond to <a href="http://www.w3.org/TR/hr-time/#dom-performance-now"> <code>Performance.now()</code></a> <a data-link-type="biblio" href="#biblio-hr-time">[HR-TIME]</a> with the exception that <code>document.timeline.currentTime</code> does not change within
a <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-2">sample</a>.</p>
   </div>
   <h3 class="heading settled" data-level="3.5" id="animations"><span class="secno">3.5. </span><span class="content">Animations</span><a class="self-link" href="#animations"></a></h3>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>The children of a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-5">timeline</a> are called <em>animations</em>.
An animation takes an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-2">animation effect</a> which is a static
description of some timed behavior and binds it to a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-6">timeline</a> so that it runs.
An animation also allows run-time control of the connection between the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-3">animation effect</a> and its <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-7">timeline</a> by providing pausing,
seeking, and speed control.
The relationship between an animation and an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-4">animation effect</a> is
analogous to that of a DVD player and a DVD.</p>
   </div>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="concept-animation">animation</dfn> connects a single <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-5">animation
effect</a>, called its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="target-effect">target effect</dfn>, to a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-8">timeline</a> and
provides playback control.
Both of these associations are optional and configurable such that
an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-1">animation</a> may have no associated <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-1">target effect</a> or <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-9">timeline</a> at a given moment.</p>
   <p>An <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-2">animation</a>’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation start time" data-noexport="" id="animation-start-time">start time</dfn> is the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-21">time value</a> of its <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-10">timeline</a> when its <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-2">target effect</a> is scheduled to begin playback. An animation’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-1">start time</a> is initially <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-3">unresolved</a>.</p>
   <p>An <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-3">animation</a> also maintains a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="hold-time">hold time</dfn> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-22">time value</a> which is used to fix the animation’s output <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-23">time value</a>, called its <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-1">current time</a>, in circumstances such as pausing.
The <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-1">hold time</a> is initially <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-4">unresolved</a>.</p>
   <p>In order to establish the relative ordering of conflicting <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-4">animations</a>,
animations are appended to a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="global-animation-list">global animation list</dfn> in the order
in which they are created. Certain <a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class-1">classes of
animations</a>, however, may provide alternative means of ordering animations
(see <a href="#animation-classes">§4.5.1 Animation classes</a>).</p>
   <h4 class="heading settled" data-level="3.5.1" id="setting-the-timeline"><span class="secno">3.5.1. </span><span class="content">Setting the timeline of an animation</span><a class="self-link" href="#setting-the-timeline"></a></h4>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="set-the-timeline-of-an-animation">set the timeline of an animation</dfn>, <var>animation</var>, to <var>new timeline</var> which may be null, is as
follows:</p>
   <ol>
    <li data-md="">
     <p>Let <var>old timeline</var> be the current <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-11">timeline</a> of <var>animation</var>, if any.</p>
    <li data-md="">
     <p>If <var>new timeline</var> is the same object as <var>old timeline</var>,
abort this procedure.</p>
    <li data-md="">
     <p>Let the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-12">timeline</a> of <var>animation</var> be <var>new timeline</var>.</p>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-2">animation start time</a> of <var>animation</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-5">resolved</a>, make <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-2">hold time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-6">unresolved</a>.</p>
     <p class="note" role="note">Note: This step ensures that the <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-1">finished play state</a> of <var>animation</var> is not “sticky” but is re-evaluated
based on its updated <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-2">current time</a>.</p>
    <li data-md="">
     <p class="issue" id="issue-1e79fd76"><a class="self-link" href="#issue-1e79fd76"></a> If <var>new timeline</var> is null, we should ensure that <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-2">custom
effects</a> get called with an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-7">unresolved</a> <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-1">iteration progress</a> (unless a subsequent change in the same script execution context makes this
redundant).</p>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-1">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false, and
the <var>synchronously notify</var> flag set to false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.2" id="responding-to-a-newly-inactive-timeline"><span class="secno">3.5.2. </span><span class="content">Responding to a newly inactive
  timeline</span><a class="self-link" href="#responding-to-a-newly-inactive-timeline"></a></h4>
   <p class="issue" id="issue-3c28434b"><a class="self-link" href="#issue-3c28434b"></a> With the set of timelines defined in this level of this specification,
this situation is not expected to occur. As a result, this section will likely
be moved to a subsequent level of this specification.</p>
   <p>When the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-13">timeline</a> associated with an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-5">animation</a>, <var>animation</var>, becomes newly <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-3">inactive</a>,
if <var>animation</var>’s <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-1">previous current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-8">resolved</a>, the procedure to <a data-link-type="dfn" href="#silently-set-the-current-time" id="ref-for-silently-set-the-current-time-1">silently set the current
time</a> of <var>animation</var> to <var>previous current time</var> is run.</p>
   <div class="annotation">
    <p>This step makes the behavior when an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-6">animation</a>’s <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-14">timeline</a> becomes <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-4">inactive</a> consistent with when it is
disassociated with a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-15">timeline</a>.
Furthermore, it ensures that the only occasion on which an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-7">animation</a> becomes <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-1">idle</a>, is when the procedure to <a data-link-type="dfn" href="#cancel-an-animation" id="ref-for-cancel-an-animation-1">cancel an animation</a> is performed.</p>
   </div>
   <h4 class="heading settled" data-level="3.5.3" id="setting-the-target-effect"><span class="secno">3.5.3. </span><span class="content">Setting the target effect of an
  animation</span><a class="self-link" href="#setting-the-target-effect"></a></h4>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="set-the-target-effect-of-an-animation">set the target effect of an animation</dfn>, <var>animation</var>, to <var>new effect</var> which may be null, is as
follows:</p>
   <ol>
    <li data-md="">
     <p>Let <var>old effect</var> be the current <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-3">target effect</a> of <var>animation</var>, if any.</p>
    <li data-md="">
     <p>If <var>new effect</var> is the same object as <var>old effect</var>,
abort this procedure.</p>
    <li data-md="">
     <p>If <var>new effect</var> is null and <var>old effect</var> is not null,
run the procedure to <a data-link-type="dfn" href="#reset-an-animations-pending-tasks" id="ref-for-reset-an-animations-pending-tasks-1">reset an animation’s pending tasks</a> on <var>animation</var>.</p>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-1">pending pause task</a>, reschedule that
task to run as soon as <var>animation</var> is <a data-link-type="dfn" href="#ready" id="ref-for-ready-1">ready</a>.</p>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-1">pending play task</a>, reschedule that task
to run as soon as <var>animation</var> is <a data-link-type="dfn" href="#ready" id="ref-for-ready-2">ready</a> to play <var>new
effect</var>.</p>
    <li data-md="">
     <p>If <var>new effect</var> is not <code>null</code> and
if <var>new effect</var> has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-1">parent group</a>, <a data-link-type="dfn" href="#remove-an-animation-effect" id="ref-for-remove-an-animation-effect-1">remove</a> <var>new effect</var> from
its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-2">parent group</a>.</p>
    <li data-md="">
     <p>If <var>new effect</var> is not <code>null</code> and
if <var>new effect</var> is the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-4">target effect</a> of another <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-8">animation</a>, <var>previous animation</var>, run the procedure to <a data-link-type="dfn" href="#set-the-target-effect-of-an-animation" id="ref-for-set-the-target-effect-of-an-animation-1">set
the target effect of an animation</a> (this procedure) on <var>previous
animation</var> passing null as <var>new effect</var>.</p>
    <li data-md="">
     <p>Let the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-5">target effect</a> of <var>animation</var> be <var>new
effect</var>.</p>
    <li data-md="">
     <p>If <var>old effect</var> is not <code>null</code>, queue a task to call any <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-3">custom effects</a> associated with <a data-link-type="dfn" href="#inclusive-descendant" id="ref-for-inclusive-descendant-1">inclusive descendants</a> of <var>old effect</var> with an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-9">unresolved</a> <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-2">iteration progress</a>.</p>
     <div class="issue" id="issue-7f716dd4">
      <a class="self-link" href="#issue-7f716dd4"></a> This is not quite right. If <var>old effect</var> is attached to another
  animation in the same task then we should probably not do an extra
  callback with <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-10">unresolved</a>. 
      <p>The definition of when <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-4">custom effects</a> gets called needs to be
  audited and probably rewritten.</p>
     </div>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-2">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false, and
the <var>synchronously notify</var> flag set to false.</p>
   </ol>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="reset-an-animations-pending-tasks">reset an animation’s pending tasks</dfn> for <var>animation</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>If <var>animation</var> does not have a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-2">pending play task</a> or a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-2">pending pause task</a>, abort this procedure.</p>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-3">pending play task</a>, cancel that task.</p>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-3">pending pause task</a>, cancel that task.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#reject-a-promise" id="ref-for-reject-a-promise-1">Reject</a> <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-1">current ready
promise</a> with a DOMException named "AbortError".</p>
     <p class="issue" id="issue-9d75c2e3"><a class="self-link" href="#issue-9d75c2e3"></a> If cancelable promises materialize, we should probably cancel here
instead of rejecting.</p>
    <li data-md="">
     <p>Let <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-2">current ready promise</a> be the result of <a data-link-type="dfn" href="#create-a-new-resolved-promise" id="ref-for-create-a-new-resolved-promise-1">creating a new resolved Promise
object</a>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.4" id="the-current-time-of-an-animation"><span class="secno">3.5.4. </span><span class="content">The current time of an animation</span><a class="self-link" href="#the-current-time-of-an-animation"></a></h4>
   <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-9">Animations</a> provide a <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-24">time value</a> to their <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-6">target
effect</a> called the animation’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-time">current time</dfn>.</p>
   <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-3">current time</a> is calculated from the first
matching condition from below:</p>
   <div class="switch">
    <dl>
     <dt data-md="">
      <p>If the animation’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-3">hold time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-11">resolved</a>,</p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-4">current time</a> is the animation’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-4">hold time</a>.</p>
     <dt data-md="">
      <p>If <em>any</em> of the following are true:</p>
      <ol>
       <li data-md="">
        <p>the animation has no associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-16">timeline</a>, or</p>
       <li data-md="">
        <p>the associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-17">timeline</a> is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-5">inactive</a>, or</p>
       <li data-md="">
        <p>the animation’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-3">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-12">unresolved</a>.</p>
      </ol>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-5">current time</a> is an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-13">unresolved</a> time value.</p>
     <dt data-md="">
      <p>Otherwise,</p>
     <dd data-md="">
      <blockquote> <code><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-6">current time</a> =
  (<var>timeline time</var> - <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-4">start time</a>)
  × <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-1">playback rate</a></code> </blockquote>
      <p>Where <var>timeline time</var> is the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-25">time value</a> of
the associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-18">timeline</a>.
The <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-2">playback rate</a> value is
defined in <a href="#speed-control">§3.5.17 Speed control</a>.</p>
    </dl>
   </div>
   <h4 class="heading settled" data-level="3.5.5" id="setting-the-current-time-of-an-animation"><span class="secno">3.5.5. </span><span class="content">Setting the current time of an animation</span><a class="self-link" href="#setting-the-current-time-of-an-animation"></a></h4>
   <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-7">current time</a> of an animation can be set to a new value to <em>seek</em> the animation.
The procedure for setting the current time is split into two parts.</p>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="silently-set-the-current-time">silently set the current time</dfn> of
an animation, <var>animation</var>, to <var>seek time</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>If <var>seek time</var> is an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-14">unresolved</a> time value,
then perform the following steps.</p>
     <ol>
      <li data-md="">
       <p>If the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-8">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-15">resolved</a>, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">TypeError</span>.</p>
      <li data-md="">
       <p>Abort these steps.</p>
     </ol>
    <li data-md="">
     <p>Update either <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-5">hold time</a> or <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-5">start time</a> as follows:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <em>any</em> of the following conditions are true:</p>
        <ul>
         <li data-md="">
          <p><var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-6">hold time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-16">resolved</a>, or</p>
         <li data-md="">
          <p><var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-6">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-17">unresolved</a>, or</p>
         <li data-md="">
          <p><var>animation</var> has no associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-19">timeline</a> or the
associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-20">timeline</a> is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-6">inactive</a>, or</p>
         <li data-md="">
          <p><var>animation</var>’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-3">playback rate</a> is 0,</p>
        </ul>
       <dd data-md="">
        <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-7">hold time</a> to <var>seek time</var>.</p>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-7">start time</a> to the result of evaluating <code><var>timeline time</var> - (<var>seek time</var> / <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-4">playback rate</a>)</code> where <var>timeline time</var> is the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-26">time value</a> of <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-21">timeline</a> associated with <var>animation</var>.</p>
      </dl>
     </div>
    <li data-md="">
     <p>If <var>animation</var> has no associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-22">timeline</a> or the associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-23">timeline</a> is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-7">inactive</a>,
make <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-8">start time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-18">unresolved</a>.</p>
     <p class="annotation"> This preserves the invariant that when we don’t have an active timeline it
  is only possible to set <em>either</em> the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-9">animation start time</a> <em>or</em> the animation’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-9">current time</a>. </p>
    <li data-md="">
     <p>Make <var>animation</var>’s <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-2">previous current time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-19">unresolved</a>.</p>
   </ol>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="set-the-current-time">set the current time</dfn> of an animation, <var>animation</var>, to <var>seek time</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>Run the steps to <a data-link-type="dfn" href="#silently-set-the-current-time" id="ref-for-silently-set-the-current-time-2">silently set the current time</a> of <var>animation</var> to <var>seek time</var>.</p>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-4">pending pause task</a>, synchronously
complete the pause operation by performing the following steps:</p>
     <ol>
      <li data-md="">
       <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-8">hold time</a> to <var>seek time</var>.</p>
      <li data-md="">
       <p>Make <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-10">start time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-20">unresolved</a>.</p>
      <li data-md="">
       <p>Cancel the <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-5">pending pause task</a>.</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-1">Resolve</a> <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-3">current ready promise</a> with <var>animation</var>.</p>
     </ol>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-3">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to true, and
the <var>synchronously notify</var> flag set to false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.6" id="setting-the-start-time-of-an-animation"><span class="secno">3.5.6. </span><span class="content">Setting the start time of an animation</span><a class="self-link" href="#setting-the-start-time-of-an-animation"></a></h4>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="set-the-animation-start-time">set the animation start time</dfn> of <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-10">animation</a>, <var>animation</var>, to <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-11">start time</a>, <var>new start time</var>,
is as follows:</p>
   <ol>
    <li data-md="">
     <p>Let <var>timeline time</var> be the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-27">time value</a> of the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-24">timeline</a> that <var>animation</var> is associated with.
If there is no <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-25">timeline</a> associated with <var>animation</var> or the
associated timeline is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-8">inactive</a>,
let the <var>timeline time</var> be <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-21">unresolved</a>.</p>
    <li data-md="">
     <p>If <var>timeline time</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-22">unresolved</a> and <var>new start
time</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-23">resolved</a>, make <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-9">hold time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-24">unresolved</a>.</p>
     <p class="annotation"> This preserves the invariant that when we don’t have an active timeline it
  is only possible to set <em>either</em> the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-12">animation start time</a> <em>or</em> the animation’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-10">current time</a>. </p>
    <li data-md="">
     <p>Let <var>previous current time</var> be <var>animation</var>’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-11">current
time</a>.</p>
     <p class="note" role="note">Note: This is the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-12">current time</a> after applying the changes from the
previous step which may cause the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-13">current time</a> to become <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-25">unresolved</a>.</p>
    <li data-md="">
     <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-13">start time</a> to <var>new start time</var>.</p>
    <li data-md="">
     <p>Update <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-10">hold time</a> based on the first matching
condition from the following,</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <var>new start time</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-26">resolved</a>,</p>
       <dd data-md="">
        <p>If <var>animation</var>’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-5">playback
rate</a> is not zero, make <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-11">hold time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-27">unresolved</a>.</p>
       <dt data-md="">
        <p>Otherwise (<var>new start time</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-28">unresolved</a>),</p>
       <dd data-md="">
        <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-12">hold time</a> to <var>previous current
time</var> even if <var>previous current time</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-29">unresolved</a>.</p>
      </dl>
     </div>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-4">pending play task</a> or
a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-6">pending pause task</a>, cancel that task and <a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-2">resolve</a> <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-4">current ready promise</a> with <var>animation</var>.</p>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-4">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to true, and
the <var>synchronously notify</var> flag set to false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.7" id="waiting-for-the-target-effect"><span class="secno">3.5.7. </span><span class="content">Waiting for the target effect</span><a class="self-link" href="#waiting-for-the-target-effect"></a></h4>
   <div class="informative-bg">
    <p><em>This section is non-normative</em></p>
    <p>Some operations performed by an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-11">animation</a> may not occur
instantaneously.
For example, some user agents may delegate the playback of an
animation to a separate process or to specialized graphics hardware
each of which may incur some setup overhead.</p>
    <p>If such an animation is timed from the moment when the animation was
triggered there may be a significant jump between the first and second
frames of the animation corresponding to the setup time involved.</p>
    <p>To avoid this problem, Web Animations typically begins timing
animations from the moment when the first frame of the animation is
complete.
This is represented by an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-30">unresolved</a> <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-14">start time</a> on the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-12">animation</a> which becomes
resolved when the animation is <a data-link-type="dfn" href="#ready" id="ref-for-ready-3">ready</a>.
Content may opt out of this behavior by setting the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-15">start time</a> to a <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-31">resolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-28">time value</a>.</p>
   </div>
   <p>An animation is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="ready">ready</dfn> at the first moment where <em>both</em> of the
following conditions are true:</p>
   <ul>
    <li data-md="">
     <p>the user agent has completed any setup required to begin the playback of
each <a data-link-type="dfn" href="#inclusive-descendant" id="ref-for-inclusive-descendant-2">inclusive descendant</a> of
the animation’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-7">target effect</a> including rendering the first frame of any <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-1">keyframe
effect</a> or executing any <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-5">custom effects</a> associated with an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-6">animation effect</a>.</p>
    <li data-md="">
     <p>the animation is associated with a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-26">timeline</a> that is not <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-9">inactive</a>.</p>
   </ul>
   <h4 class="heading settled" data-level="3.5.8" id="promise-objects"><span class="secno">3.5.8. </span><span class="content">Promise objects</span><a class="self-link" href="#promise-objects"></a></h4>
   <p><a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise objects</a> are defined by <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="resolve-a-promise">resolve a Promise</dfn> with <var>value</var>,
call the [[Call]] internal [[Resolve]] method on the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promisecapability-records">PromiseCapability
record</a> for the promise, passing <code>undefined</code> as <var>thisArgument</var> and (<var>value</var>) as <var>argumentsList</var>.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="reject-a-promise">reject a Promise</dfn> with <var>reason</var>,
call the [[Call]] internal [[Reject]] method on the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promisecapability-records">PromiseCapability
record</a> for the promise, passing <code>undefined</code> as <var>thisArgument</var> and
(<var>reason</var>) as <var>argumentsList</var>.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="create-a-new-resolved-promise">create a new resolved Promise</dfn> with <var>value</var>, call <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.resolve">Promise.resolve</a>, passing <var>value</var> as <var>x</var>.</p>
   <h4 class="heading settled" data-level="3.5.9" id="the-current-ready-promise"><span class="secno">3.5.9. </span><span class="content">The current ready promise</span><a class="self-link" href="#the-current-ready-promise"></a></h4>
   <p>Each <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-13">animation</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-ready-promise">current ready promise</dfn>.
The <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-5">current ready promise</a> is initially a resolved <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise</a> created
using the procedure to <a data-link-type="dfn" href="#create-a-new-resolved-promise" id="ref-for-create-a-new-resolved-promise-2">create a new resolved Promise</a>.</p>
   <p>The object is replaced with a new <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise object</a> every time the animation
enters the <a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-1">pending play state</a> as well as when the animation is
canceled (see <a href="#canceling-an-animation-section">§3.5.16 Canceling an animation</a>).</p>
   <div class="note" role="note">
    <p>Note that since the same object is used for both pending play and
    pending pause requests, authors are advised to check the state of the
    animation when the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise object</a> is resolved.</p>
    <p>For example, in the following code fragment, the state of the animation
    will be <a data-link-type="dfn" href="#running-play-state" id="ref-for-running-play-state-1">running</a> when the <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-6">current ready promise</a> is resolved.
    This is because the animation does not leave the <a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-2">pending play state</a> in between the calls to <code>pause</code> and <code>play</code> and hence the <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-7">current ready promise</a> does
    not change.</p>
    <div class="example" id="example-20e821a6">
     <a class="self-link" href="#example-20e821a6"></a>
<pre class="lang-javascript highlight">animation<span class="p">.</span>pause<span class="p">(</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>ready<span class="p">.</span>then<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Displays 'running'
</span>  alert<span class="p">(</span>animation<span class="p">.</span>playState<span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>play<span class="p">(</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
   </div>
   <h4 class="heading settled" data-level="3.5.10" id="playing-an-animation-section"><span class="secno">3.5.10. </span><span class="content">Playing an animation</span><a class="self-link" href="#playing-an-animation-section"></a></h4>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="play-an-animation">play an animation</dfn>, <var>animation</var>, given
a flag <var>auto-rewind</var>, is as follows:</p>
   <p class="note" role="note">Note: The <var>auto-rewind</var> flag is provided for other specifications
that build on this model but do not require the rewinding behavior, such
as CSS Animations <a data-link-type="biblio" href="#biblio-css3-animations">[CSS3-ANIMATIONS]</a>.</p>
   <ol>
    <li data-md="">
     <p>Let <var>aborted pause</var> be a boolean flag that is true if <var>animation</var> has a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-7">pending pause task</a>, and false otherwise.</p>
    <li data-md="">
     <p>Let <var>has pending ready promise</var> be a boolean flag that is
initially false.</p>
    <li data-md="">
     <p>Perform the steps corresponding to the <em>first</em> matching
condition from the following, if any:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-6">animation playback rate</a> > 0,
the <var>auto-rewind</var> flag is true and <em>either</em> <var>animation</var>’s:</p>
        <ul>
         <li data-md="">
          <p><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-14">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-32">unresolved</a>, or</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-15">current time</a> &lt; zero, or</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-16">current time</a> ≥ <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-1">target effect end</a>,</p>
        </ul>
       <dd data-md="">
        <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-13">hold time</a> to zero.</p>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-7">animation playback rate</a> &lt; 0,
the <var>auto-rewind</var> flag is true and <em>either</em> <var>animation</var>’s:</p>
        <ul>
         <li data-md="">
          <p><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-17">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-33">unresolved</a>, or</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-18">current time</a> ≤ zero, or</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#current-time" id="ref-for-current-time-19">current time</a> > <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-2">target effect end</a>,</p>
        </ul>
       <dd data-md="">
        <p>If <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-3">target effect end</a> is positive infinity, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <span class="exceptionname">InvalidStateError</span> and
abort these steps.
Otherwise, set <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-14">hold time</a> to <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-4">target
effect end</a>.</p>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-8">animation playback rate</a> = 0 and <var>animation</var>’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-20">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-34">unresolved</a>,</p>
       <dd data-md="">
        <p>Set <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-15">hold time</a> to zero.</p>
      </dl>
     </div>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-5">pending play task</a> or a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-8">pending pause task</a>,</p>
     <ol>
      <li data-md="">
       <p>Cancel that task.</p>
      <li data-md="">
       <p>Set <var>has pending ready promise</var> to true.</p>
     </ol>
    <li data-md="">
     <p>If <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-16">hold time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-35">unresolved</a> and <var>aborted pause</var> is false, abort this procedure.</p>
    <li data-md="">
     <p>If <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-17">hold time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-36">resolved</a>,
let its <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-16">start time</a> be <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-37">unresolved</a>.</p>
    <li data-md="">
     <p>If <var>has pending ready promise</var> is false,
let <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-8">current ready promise</a> be a new
(pending) <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise</a> object.</p>
    <li data-md="">
     <p>Schedule a task to run as soon as <var>animation</var> is <a data-link-type="dfn" href="#ready" id="ref-for-ready-4">ready</a>.
The task shall perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Let <var>ready time</var> be the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-29">time value</a> of
the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-27">timeline</a> associated with <var>animation</var> at the moment
when <var>animation</var> became <a data-link-type="dfn" href="#ready" id="ref-for-ready-5">ready</a>.</p>
      <li data-md="">
       <p>If <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-17">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-38">unresolved</a>, perform the following steps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>new start time</var> be the result of evaluating <code><var>ready time</var> - <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-18">hold time</a> / <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-9">animation
playback rate</a></code> for <var>animation</var>.
If the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-10">animation playback rate</a> is zero, let <var>new start
time</var> be simply <var>ready time</var>.</p>
        <li data-md="">
         <p>If <var>animation</var>’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-11">playback
rate</a> is not 0, make <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-19">hold time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-39">unresolved</a>.</p>
        <li data-md="">
         <p>Set the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-18">animation start time</a> of <var>animation</var> to <var>new start time</var>.</p>
       </ol>
      <li data-md="">
       <p class="issue" id="issue-97b24030"><a class="self-link" href="#issue-97b24030"></a> We should queue a task here for sampling custom effects.
(This should happen before we resolve the ready promise.)</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-3">Resolve</a> <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-9">current
ready promise</a> with <var>animation</var>.</p>
      <li data-md="">
       <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-5">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,
and the <var>synchronously notify</var> flag set to false.</p>
       <div class="annotation"> Note that the order of the above two steps is important
    since it means that an animation with zero-length <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-8">target
    effect</a> will resolve its <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-10">current ready promise</a> before its <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-1">current finished promise</a>. </div>
       <p>So long as the above task is scheduled but has yet to run, <var>animation</var> is described as having a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="pending-play-task">pending play task</dfn>.</p>
       <p>A user agent MAY execute the above task immediately (if it
determines <var>animation</var> is immediately <a data-link-type="dfn" href="#ready" id="ref-for-ready-6">ready</a>) thereby
bypassing the <a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-3">pending play state</a> altogether.</p>
     </ol>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-6">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false, and
the <var>synchronously notify</var> flag set to false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.11" id="pausing-an-animation-section"><span class="secno">3.5.11. </span><span class="content">Pausing an animation</span><a class="self-link" href="#pausing-an-animation-section"></a></h4>
   <p>Whenever an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-14">animation</a> has an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-40">unresolved</a> <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-19">start time</a>, its <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-21">current time</a> will be suspended.</p>
   <p>As with <a data-link-type="dfn" href="#play-an-animation" id="ref-for-play-an-animation-1">playing an animation</a>, pausing may not
happen instantaneously (see <a href="#waiting-for-the-target-effect">§3.5.7 Waiting for the target effect</a>).
For example, if animation is performed by a separate process, it may
be necessary to synchronize the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-22">current time</a> to ensure that it
reflects the state drawn by the animation process.</p>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="pause-an-animation">pause an animation</dfn>, <var>animation</var>, is as
follows:</p>
   <ol>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-9">pending pause task</a>, abort these steps.</p>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-1">play state</a> of <var>animation</var> is <a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-1">paused</a>, abort these steps.</p>
    <li data-md="">
     <p>If the <var>animation</var>’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-23">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-41">unresolved</a>,
perform the steps according to the first matching condition from below:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <var>animation</var>’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-12">playback
 rate</a> is ≥ 0,</p>
       <dd data-md="">
        <p>Let <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-20">hold time</a> be zero.</p>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <p>If <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-5">target effect end</a> for <var>animation</var> is positive
 infinity, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <span class="exceptionname">InvalidStateError</span> and abort these steps.
 Otherwise, let <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-21">hold time</a> be <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-6">target effect end</a>.</p>
      </dl>
     </div>
    <li data-md="">
     <p>Let <var>has pending ready promise</var> be a boolean flag that is
initially false.</p>
    <li data-md="">
     <p>If <var>animation</var> has a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-6">pending play task</a>, cancel that task
and let <var>has pending ready promise</var> be true.</p>
    <li data-md="">
     <p>If <var>has pending ready promise</var> is false,
set <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-11">current ready promise</a> to a new
(pending) <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise</a> object.</p>
    <li data-md="">
     <p>Schedule a task to be executed at the first possible moment after
the user agent has performed any processing necessary to suspend
the playback of
any animations that are <a data-link-type="dfn" href="#inclusive-descendant" id="ref-for-inclusive-descendant-3">inclusive descendants</a> of <var>animation</var>’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-9">target effect</a>, if any.
The task shall perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Let <var>ready time</var> be the time value of the timeline associated
with <var>animation</var> at the moment when the user agent completed
processing necessary to suspend playback of <var>animation</var>’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-10">target effect</a>.</p>
      <li data-md="">
       <p>If <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-20">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-42">resolved</a> and its <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-22">hold time</a> is <em>not</em> resolved,
let <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-23">hold time</a> be the result of evaluating <code><var>ready time</var> - (<a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-21">start
time</a> / <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-13">playback rate</a>)</code>.</p>
       <p class="note" role="note">Note: The <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-24">hold time</a> might be already set if the animation
is <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-2">finished</a>, or if the animation is <a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-4">pending</a>, waiting to begin playback.
In either case we want to preserve the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-25">hold time</a> as we
enter the <a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-2">paused</a> state.</p>
      <li data-md="">
       <p>Make <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-22">start time</a> unresolved.</p>
      <li data-md="">
       <p class="issue" id="issue-c0dfc505"><a class="self-link" href="#issue-c0dfc505"></a> We should queue a task here for sampling custom effects
with the final current time.
(This should happen before we resolve the ready promise).</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-4">Resolve</a> <var>animation</var>’s <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-12">current
ready promise</a> with <var>animation</var>.</p>
      <li data-md="">
       <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-7">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,
and the <var>synchronously notify</var> flag set to false.</p>
     </ol>
     <p>So long as the above task is scheduled but has yet to run, <var>animation</var> is described as having a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="pending-pause-task">pending pause task</dfn>.
While the task is running, however, <var>animation</var> does <em>not</em> have a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-10">pending pause task</a>.</p>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-8">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,
and the <var>synchronously notify</var> flag set to false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.12" id="reaching-the-end"><span class="secno">3.5.12. </span><span class="content">Reaching the end</span><a class="self-link" href="#reaching-the-end"></a></h4>
   <div class="informative-bg">
    <p><em>This section is non-normative</em></p>
    <p>DVD players or cassette players typically continue playing until they reach
the end of their media at which point they stop.
If such players are able to play in reverse, they typically stop
playing when they reach the beginning of their media.
In order to emulate this behavior and to provide consistency
with HTML’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media elements</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a>, the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-24">current time</a> of Web
Animations' animations do not play forwards beyond the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-1">end time</a> of their <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-11">target effect</a> or play backwards past time zero.</p>
    <p>An animation that has reached the natural boundary of its playback range
is said to have <em>finished</em>.</p>
    <p>Graphically, the effect of limiting the current time is shown below.</p>
    <figure>
      <img alt="The effect of limiting the current time of an animation." src="img/limiting.svg" width="500"> 
     <figcaption> The effect of limiting the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-25">current time</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-15">animation</a> with a start time of 1s, a target effect of length 3s, and
    a positive <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-14">animation playback rate</a>.
    After the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-26">current time</a> of the animation reaches the end of the
    target effect, it is capped at 3s. </figcaption>
    </figure>
    <p>It is possible, however, to <em>seek</em> the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-27">current time</a> of
an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-16">animation</a> to a time past the end of the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-12">target effect</a>.
When doing so, the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-28">current time</a> will not progress but the
animation will act as if it had been paused at the seeked time.</p>
    <p>This allows, for example, seeking the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-29">current time</a> of
an animation with <em>no</em> <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-13">target effect</a> to 5s.
If <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-14">target effect</a> with an <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-2">end time</a> later than 5s is
later associated with the animation, playback will begin from the 5s
mark.</p>
    <p>Similar behavior to the above scenario may arise when the
length of an animation’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-15">target effect</a> changes.</p>
    <p>Similarly, when the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-15">animation playback rate</a> is negative, the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-30">current time</a> does not progress past time zero.</p>
   </div>
   <h4 class="heading settled" data-level="3.5.13" id="the-current-finished-promise"><span class="secno">3.5.13. </span><span class="content">The current finished promise</span><a class="self-link" href="#the-current-finished-promise"></a></h4>
   <p>Each animation has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-finished-promise">current finished promise</dfn>.
The <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-2">current finished promise</a> is initially a pending <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise</a> object.</p>
   <p>The object is replaced with a new (pending) <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise</a> object every time
the animation leaves the <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-3">finished play state</a>.</p>
   <h4 class="heading settled" data-level="3.5.14" id="updating-the-finished-state"><span class="secno">3.5.14. </span><span class="content">Updating the finished state</span><a class="self-link" href="#updating-the-finished-state"></a></h4>
   <p>For an animation with a positive <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-16">playback
rate</a>, the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-31">current time</a> continues to increase until it
reaches the <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-7">target effect end</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="target-effect-end">target effect end</dfn> of an animation is equal to the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-3">end
time</a> of the animation’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-16">target effect</a>.
If the animation has no <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-17">target effect</a>, the <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-8">target effect
end</a> is zero.</p>
   <p>An animation with a negative <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-17">playback
rate</a>, the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-32">current time</a> continues to decrease until it
reaches zero.</p>
   <p>A running animation that has reached this boundary (or overshot it) and has a <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-43">resolved</a> <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-23">animation start time</a> is said to be <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-4">finished</a>.</p>
   <p>The crossing of this boundary is checked on each modification to the
animation object using the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-9">update an animation’s finished
state</a> defined below. This procedure is also run on each <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-3">sample</a> and each time the timing properties of the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-18">target effect</a> associated
with an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-17">animation</a> are updated. In both cases the <var>did seek</var> flag, defined below, is set to false.</p>
   <p>For each animation, the user agent maintains a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="previous current time" data-noexport="" id="previous-current-time">previous current
time</dfn> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-30">time value</a> that is originally <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-44">unresolved</a>.</p>
   <p>Whilst during normal playback the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-33">current time</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-18">animation</a> is
limited to the boundaries described above, it is possible to seek the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-34">current
time</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-19">animation</a> to times outside those boundaries using the
procedure to <a data-link-type="dfn" href="#set-the-current-time" id="ref-for-set-the-current-time-1">set the current time</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-20">animation</a>.</p>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="update-an-animations-finished-state">update an animation’s finished state</dfn> for <var>animation</var>, given a flag <var>did seek</var> (to indicate if
the update is being performed after <a data-link-type="dfn" href="#set-the-current-time" id="ref-for-set-the-current-time-2">setting the
current time</a>), and a flag <var>synchronously notify</var> (to indicate
the update was called in a context where we expect finished event queueing
and finished promise resolution to happen immediately, if at all) is as
follows:</p>
   <ol>
    <li data-md="">
     <p>If both of the following conditions are true,</p>
     <ul>
      <li data-md="">
       <p><var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-24">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-45">resolved</a>, and</p>
      <li data-md="">
       <p><var>animation</var> does <em>not</em> have a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-7">pending play task</a> or a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-11">pending pause task</a>,</p>
     </ul>
     <p>then update <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-26">hold time</a> based on the first
matching condition for <var>animation</var> from below, if any:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-18">animation playback rate</a> > 0 and <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-35">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-46">resolved</a> and
greater than or equal to <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-9">target effect end</a>,</p>
       <dd data-md="">
        <p>If <var>did seek</var> is true, let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-27">hold time</a> be the value of <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-36">current time</a>.</p>
        <p>If <var>did seek</var> is false, let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-28">hold time</a> be the maximum
value of <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-3">previous current time</a> and <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-10">target effect end</a>.
If the <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-4">previous current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-47">unresolved</a>, let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-29">hold time</a> be <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-11">target
effect end</a>.</p>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-19">animation playback rate</a> &lt; 0 and <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-37">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-48">resolved</a> and
less than or equal to 0,</p>
       <dd data-md="">
        <p>If <var>did seek</var> is true, let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-30">hold time</a> be the value of <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-38">current time</a>.</p>
        <p>If <var>did seek</var> is false, let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-31">hold time</a> be the
minimum value of <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-5">previous current time</a> and zero.
If the <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-6">previous current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-49">unresolved</a>, let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-32">hold time</a> be zero.</p>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-39">current time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-50">resolved</a>, and <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-20">animation playback rate</a> ≠ 0, and <var>animation</var> is associated with an <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-10">active timeline</a>,</p>
       <dd data-md="">
        <p>Perform the following steps:</p>
        <ol>
         <li data-md="">
          <p>If <var>did seek</var> is true and the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-33">hold time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-51">resolved</a>, let <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-25">start time</a> be equal to the result of evaluating <code><var>timeline time</var> - (<a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-34">hold time</a> / <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-21">playback rate</a>)</code> where <var>timeline time</var> is the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-31">time value</a> of <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-28">timeline</a> associated with <var>animation</var>.</p>
         <li data-md="">
          <p>Let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-35">hold time</a> be <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-52">unresolved</a>.</p>
        </ol>
      </dl>
     </div>
    <li data-md="">
     <p>Set the <a data-link-type="dfn" href="#previous-current-time" id="ref-for-previous-current-time-7">previous current time</a> of <var>animation</var> be the
result of calculating its <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-40">current time</a>.</p>
    <li data-md="">
     <p>Let <var>current finished state</var> be true if the <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-2">play
state</a> of <var>animation</var> is <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-5">finished</a>.
Otherwise, let it be false.</p>
    <li data-md="">
     <p>If <var>current finished state</var> is true and the <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-3">current finished
promise</a> is not yet resolved, perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Let <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="finish-notification-steps">finish notification steps</dfn> refer to the following
procedure:</p>
       <ol>
        <li data-md="">
         <p>If <var>animation</var>’s <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-3">play state</a> is not equal to <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-6">finished</a>, abort these steps.</p>
        <li data-md="">
         <p><a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-5">Resolve</a> <var>animation</var>’s <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-4">current finished promise</a> object with <var>animation</var>.</p>
        <li data-md="">
         <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-fire">fire</a> a <a data-link-type="dfn" href="#finish-event" id="ref-for-finish-event-1">finish event</a> at <var>animation</var>.
The task source for this task is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">DOM manipulation task
source</a>.</p>
       </ol>
      <li data-md="">
       <p>If <var>synchronously notify</var> is true, cancel any queued
microtask to run the <a data-link-type="dfn" href="#finish-notification-steps" id="ref-for-finish-notification-steps-1">finish notification steps</a> for this <var>animation</var>, and run the <a data-link-type="dfn" href="#finish-notification-steps" id="ref-for-finish-notification-steps-2">finish notification
steps</a> immediately.</p>
       <p>Otherwise, if <var>synchronously notify</var> is false, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask">queue
a microtask</a> to run <a data-link-type="dfn" href="#finish-notification-steps" id="ref-for-finish-notification-steps-3">finish notification steps</a> for <var>animation</var> unless there is already a microtask queued to run
those steps for <var>animation</var>.</p>
     </ol>
    <li data-md="">
     <p>If <var>current finished state</var> is false and <var>animation</var>’s <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-5">current finished promise</a> is already
resolved, set <var>animation</var>’s <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-6">current finished promise</a> to
a new (pending) Promise object.</p>
   </ol>
   <div class="informative-bg">
    <p>Typically, notification about the finished state of an animation is
performed asynchronously. This allows for the animation to temporarily
enter the <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-7">finished state</a> without
triggering events to be fired or promises to be resolved.</p>
    <p>For example, in the following code fragment, <code>animation</code> temporarily
enters the finished state. If notification of the finished state occurred
synchronously this code would cause the <a data-link-type="dfn" href="#finish-event" id="ref-for-finish-event-2">finish event</a> to be queued
and the <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-7">current finished promise</a> to be resolved. However, if we
reverse the order of the two statements such that the <code>iterationCount</code> is updated first, this would not happen.
To avoid this surprising behavior, notification about the finished state of
an animation is typically performed asynchronously.</p>
    <div class="example" id="example-13b1063b">
     <a class="self-link" href="#example-13b1063b"></a>
<pre class="lang-javascript highlight"><span class="kd">var</span> animation <span class="o">=</span> elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>playbackRate <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
animation<span class="p">.</span>currentTime <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// animation is now finished
</span>animation<span class="p">.</span>effect<span class="p">.</span>timing<span class="p">.</span>iterationCount <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// animation is no longer finished
</span></pre>
    </div>
    <p>The one exception to this asynchronous behavior is when the <a data-link-type="dfn" href="#finish-an-animation" id="ref-for-finish-an-animation-1">finish an
animation</a> procedure is performed (typically by calling the <code class="idl"><a data-link-type="idl" href="#dom-animation-finish" id="ref-for-dom-animation-finish-1">finish()</a></code> method). In this case the author’s intention to finish
the animation is clear so the notification about the finished state of the
animation occurs synchronously as demonstrated below.</p>
    <div class="example" id="example-385ed826">
     <a class="self-link" href="#example-385ed826"></a>
<pre class="lang-javascript highlight"><span class="kd">var</span> animation <span class="o">=</span> elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>finish<span class="p">(</span><span class="p">)</span><span class="p">;</span> <span class="c1">// finish event is queued immediately and finished promise
</span>                    <span class="c1">// is resolved despite the fact that the following statement
</span>                    <span class="c1">// causes the animation to leave the finished state
</span>animation<span class="p">.</span>currentTime <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre>
    </div>
    <p>Note that like the procedure to <a data-link-type="dfn" href="#finish-an-animation" id="ref-for-finish-an-animation-2">finish an animation</a>,
the procedure to <a data-link-type="dfn" href="#cancel-an-animation" id="ref-for-cancel-an-animation-2">cancel an animation</a> similarly queues the <a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event-1">cancel event</a> and rejects the <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-8">current finished promise</a> and <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-13">current ready promise</a> in a <em>synchronous</em> manner.</p>
   </div>
   <h4 class="heading settled" data-level="3.5.15" id="finishing-an-animation-section"><span class="secno">3.5.15. </span><span class="content">Finishing an animation</span><a class="self-link" href="#finishing-an-animation-section"></a></h4>
   <p>An animation can be advanced to the natural end of its current playback
direction by using the procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="finish-an-animation">finish an animation</dfn> for <var>animation</var> defined below:</p>
   <ol>
    <li data-md="">
     <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-22">animation playback rate</a> is zero,
or if <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-23">animation playback rate</a> > 0 and <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-12">target effect end</a> is
infinity, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <span class="exceptionname">InvalidStateError</span> and
abort these steps.</p>
    <li data-md="">
     <p>Set <var>limit</var> as follows:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-24">animation playback rate</a> > 0,</p>
       <p></p>
       <dd data-md="">
        <p>Let <var>limit</var> be <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-13">target effect end</a>.</p>
       <p></p>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <p>Let <var>limit</var> be zero.</p>
       <p></p>
      </dl>
     </div>
    <li data-md="">
     <p><a data-link-type="dfn" href="#silently-set-the-current-time" id="ref-for-silently-set-the-current-time-3">Silently set the current time</a> to <var>limit</var>.</p>
    <li data-md="">
     <p>If <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-26">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-53">unresolved</a> and <var>animation</var> has an associated <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-11">active</a> <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-29">timeline</a>, let the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-27">start time</a> be the result of evaluating <code><var>timeline time</var> -
(<var>limit</var> / <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-25">playback
rate</a>)</code> where <var>timeline time</var> is the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-32">time
value</a> of the associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-30">timeline</a>.</p>
    <li data-md="">
     <p>If there is a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-12">pending pause task</a> and <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-28">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-54">resolved</a>,</p>
     <ol>
      <li data-md="">
       <p>Let the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-36">hold time</a> be <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-55">unresolved</a>.</p>
       <div class="note" role="note">Typically the <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-37">hold time</a> will already be
unresolved except in the case when the animation was previously <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-2">idle</a>.</div>
      <li data-md="">
       <p>Cancel the <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-13">pending pause task</a>.</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-6">Resolve</a> the <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-14">current ready promise</a> of <var>animation</var> with <var>animation</var>.</p>
     </ol>
    <li data-md="">
     <p>If there is a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-8">pending play task</a> and <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-29">start time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-56">resolved</a>,
cancel that task and <a data-link-type="dfn" href="#resolve-a-promise" id="ref-for-resolve-a-promise-7">resolve</a> the <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-15">current
ready promise</a> of <var>animation</var> with <var>animation</var>.</p>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="#update-an-animations-finished-state" id="ref-for-update-an-animations-finished-state-10">update an animation’s finished state</a> <var>animation</var> with the <var>did seek</var> flag set to true,
and the <var>synchronously notify</var> flag set to true.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.16" id="canceling-an-animation-section"><span class="secno">3.5.16. </span><span class="content">Canceling an animation</span><a class="self-link" href="#canceling-an-animation-section"></a></h4>
   <p>An animation can be canceled which causes the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-41">current time</a> to
become <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-57">unresolved</a> hence removing any effects caused by the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-19">target effect</a>.</p>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="cancel-an-animation">cancel an animation</dfn> for <var>animation</var> is
as follows:</p>
   <ol>
    <li data-md="">
     <p>If <var>animation</var>’s <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-4">play state</a> is <em>not</em> <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-3">idle</a>, perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Run the procedure to <a data-link-type="dfn" href="#reset-an-animations-pending-tasks" id="ref-for-reset-an-animations-pending-tasks-2">reset an animation’s pending tasks</a> on <var>animation</var>.</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#reject-a-promise" id="ref-for-reject-a-promise-2">Reject</a> the <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-9">current finished promise</a> with a DOMException named "AbortError".</p>
       <p class="issue" id="issue-a2bb3b58"><a class="self-link" href="#issue-a2bb3b58"></a> If cancelable promises materialize, we should cancel here instead
of rejecting.</p>
      <li data-md="">
       <p>Let <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-10">current finished promise</a> be a new (pending) <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">Promise</a> object.</p>
      <li data-md="">
       <p>If <var>animation</var> is <em>not</em> <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-4">idle</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-fire">fire</a> a <a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event-2">cancel event</a> at <var>animation</var>.
The task source for this task is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">DOM manipulation task
source</a>.</p>
       <p>The <a data-link-type="dfn" href="#event-current-time" id="ref-for-event-current-time-1">event current time</a> for the dispatched <a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event-3">cancel event</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-58">unresolved</a> and the <a data-link-type="dfn" href="#event-timeline-time" id="ref-for-event-timeline-time-1">event timeline time</a> is the current <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-33">time value</a> of the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-31">timeline</a> associated with <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-21">animation</a> at the moment the task is queued.</p>
     </ol>
    <li data-md="">
     <p>Make <var>animation</var>’s <a data-link-type="dfn" href="#hold-time" id="ref-for-hold-time-38">hold time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-59">unresolved</a>.</p>
    <li data-md="">
     <p>Make <var>animation</var>’s <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-30">start time</a> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-60">unresolved</a>.</p>
    <li data-md="">
     <p>Queue a task to call any <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-6">custom effects</a> associated with <a data-link-type="dfn" href="#inclusive-descendant" id="ref-for-inclusive-descendant-4">inclusive descendants</a> of <var>animation</var>’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-20">target effect</a> with an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-61">unresolved</a> iteration progress.</p>
     <p class="issue" id="issue-574e6f13"><a class="self-link" href="#issue-574e6f13"></a> The procedures for calling custom effects need to be reworked.
       Currently they probably involve calling too often for changes that
       could be coalesced.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.17" id="speed-control"><span class="secno">3.5.17. </span><span class="content">Speed control</span><a class="self-link" href="#speed-control"></a></h4>
   <div class="informative-bg">
    <p>The rate of play of an animation can be controlled by setting its <em>playback rate</em>.
For example, setting a playback rate of 2 will cause the animation’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-42">current time</a> to increase at twice the rate of its <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-32">timeline</a>.
Similarly, a playback rate of -1 will cause the animation’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-43">current
time</a> to decrease at the same rate as the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-34">time values</a> from
its <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-33">timeline</a> increase.</p>
    <p>Note that <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-7">animation effects</a> also have a <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-2">playback rate</a> associated
with them that behaves differently to that defined here.</p>
   </div>
   <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-22">Animations</a> have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation playback rate" data-noexport="" id="animation-playback-rate">playback rate</dfn> that provides a scaling factor from the rate of change of the associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-34">timeline</a>’s <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-35">time values</a> to the animation’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-44">current time</a>.
The <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-26">playback rate</a> is initially 1.</p>
   <p>Setting an animation’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-27">playback rate</a> to zero effectively pauses the animation (however, the <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-5">play state</a> does not necessarily become <a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-3">paused</a>).</p>
   <h5 class="heading settled" data-level="3.5.17.1" id="updating-the-playback-rate-of-an-animation"><span class="secno">3.5.17.1. </span><span class="content">Updating the playback rate of an animation</span><a class="self-link" href="#updating-the-playback-rate-of-an-animation"></a></h5>
   <p>Changes to the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-28">playback rate</a> trigger a compensatory seek so that that the animation’s <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-45">current time</a> is unaffected by the change to the playback
rate.</p>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="set-the-animation-playback-rate">set the animation playback rate</dfn> of
an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-23">animation</a>, <var>animation</var> to <var>new playback rate</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>Let <var>previous time</var> be the value of the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-46">current time</a> of <var>animation</var> before changing the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-29">playback rate</a>.</p>
    <li data-md="">
     <p>Set the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-30">playback rate</a> to <var>new playback rate</var>.</p>
    <li data-md="">
     <p>If <var>previous time</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-62">resolved</a>, <a data-link-type="dfn" href="#set-the-current-time" id="ref-for-set-the-current-time-3">set the current time</a> of <var>animation</var> to <var>previous time</var>.</p>
   </ol>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="silently-set-the-animation-playback-rate">silently set the animation playback rate</dfn> of <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-24">animation</a>, <var>animation</var> to <var>new playback rate</var> is identical to the above procedure except that rather than invoking
the procedure to <a data-link-type="dfn" href="#set-the-current-time" id="ref-for-set-the-current-time-4">set the current time</a> in the final step, the
procedure to <a data-link-type="dfn" href="#silently-set-the-current-time" id="ref-for-silently-set-the-current-time-4">silently set the current time</a> is invoked instead.</p>
   <h4 class="heading settled" data-level="3.5.18" id="reversing-an-animation-section"><span class="secno">3.5.18. </span><span class="content">Reversing an animation</span><a class="self-link" href="#reversing-an-animation-section"></a></h4>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="reverse-an-animation">reverse an animation</dfn> of <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-25">animation</a> <var>animation</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>If there is no <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-35">timeline</a> associated with <var>animation</var>, or the
associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-36">timeline</a> is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-12">inactive</a> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an <span class="exceptionname">InvalidStateError</span> and
abort these steps.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#silently-set-the-animation-playback-rate" id="ref-for-silently-set-the-animation-playback-rate-1">Silently set the animation playback rate</a> of <var>animation</var> to <code>−<a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-31">animation playback rate</a></code>.</p>
     <div class="annotation"> This must be done silently or else we may end up resolving
    the <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-16">current ready promise</a> when we do the compensatory
    seek despite the fact that we are most likely not exiting the <a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-5">pending play state</a>. </div>
    <li data-md="">
     <p>Run the steps to <a data-link-type="dfn" href="#play-an-animation" id="ref-for-play-an-animation-2">play an animation</a> for <var>animation</var> with the <var>auto-rewind</var> flag set to true.</p>
   </ol>
   <h4 class="heading settled" data-level="3.5.19" id="play-states"><span class="secno">3.5.19. </span><span class="content">Play states</span><a class="self-link" href="#play-states"></a></h4>
   <p>An <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-26">animation</a> may be described as being in one of the following <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="play state" data-noexport="" id="play-state">play states</dfn> for each of which, a 
non-normative description is also provided:</p>
   <div class="informative-bg">
    <dl>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-5">idle</a></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-47">current time</a> of the animation is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-63">unresolved</a> and
there are no pending tasks.
In this state the animation has no effect.</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-6">pending</a></p>
     <dd data-md="">
      <p>The animation is waiting on some pending task to complete.</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#running-play-state" id="ref-for-running-play-state-2">running</a></p>
     <dd data-md="">
      <p>The animation has a resolved <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-48">current time</a> that changes on each <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-4">sample</a> (provided the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-32">animation playback rate</a> is not zero).</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-4">paused</a></p>
     <dd data-md="">
      <p>The animation has been suspended and the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-49">current time</a> is no longer changing.</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-8">finished</a></p>
     <dd data-md="">
      <p>The animation has reached the natural boundary of its playback range
and the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-50">current time</a> is no longer updating.</p>
    </dl>
   </div>
   <p>The <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-6">play state</a> of <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-27">animation</a>, <var>animation</var>, at a given
moment is the state corresponding to the <em>first</em> matching
condition from the following:</p>
   <div class="switch">
    <dl>
     <dt data-md="">
      <p><var>animation</var> has a <a data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task-9">pending play task</a> or a <a data-link-type="dfn" href="#pending-pause-task" id="ref-for-pending-pause-task-14">pending pause task</a>,</p>
     <dd data-md="">
      <p>→ <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="pending play state" data-noexport="" id="pending-play-state">pending</dfn></p>
     <dt data-md="">
      <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-51">current time</a> of <var>animation</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-64">unresolved</a>,</p>
     <dd data-md="">
      <p>→ <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="idle play state" data-noexport="" id="idle-play-state">idle</dfn></p>
     <dt data-md="">
      <p>The <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-31">start time</a> of <var>animation</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-65">unresolved</a>,</p>
     <dd data-md="">
      <p>→ <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="paused play state" data-noexport="" id="paused-play-state">paused</dfn></p>
     <dt data-md="">
      <p>For <var>animation</var>, <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-33">animation playback rate</a> > 0 and <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-52">current time</a> ≥ <a data-link-type="dfn" href="#target-effect-end" id="ref-for-target-effect-end-14">target effect end</a>; or<br> <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-34">animation playback rate</a> &lt; 0 and <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-53">current time</a> ≤ 0,</p>
     <dd data-md="">
      <p>→ <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="finished play state" data-noexport="" id="finished-play-state">finished</dfn></p>
     <dt data-md="">
      <p>Otherwise,</p>
     <dd data-md="">
      <p>→ <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="running play state" data-noexport="" id="running-play-state">running</dfn></p>
    </dl>
   </div>
   <div class="note" role="note">
    <p>Note that the <a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-5">paused play state</a> effectively
“wins” over the <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-9">finished play state</a>.</p>
    <p>However, an animation that is paused outside of its natural playback range can
be converted from a <a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-6">paused</a> animation into a <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-10">finished</a> animation
without restarting by setting the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-32">animation start time</a> such as below:</p>
    <div class="example" id="example-f55ea7cc">
     <a class="self-link" href="#example-f55ea7cc"></a>
<pre class="lang-javascript highlight">animation<span class="p">.</span>effect<span class="p">.</span>timing<span class="p">.</span>duration <span class="o">=</span> <span class="mi">5000</span><span class="p">;</span>
animation<span class="p">.</span>currentTime <span class="o">=</span> <span class="mi">4000</span><span class="p">;</span>
animation<span class="p">.</span>pause<span class="p">(</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>ready<span class="p">.</span>then<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  animation<span class="p">.</span>effect<span class="p">.</span>timing<span class="p">.</span>duration <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>
  alert<span class="p">(</span>animation<span class="p">.</span>playState<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays 'paused'
</span>  animation<span class="p">.</span>startTime <span class="o">=</span>
    document<span class="p">.</span>timeline<span class="p">.</span>currentTime <span class="o">-</span> animation<span class="p">.</span>currentTime <span class="o">*</span> animation<span class="p">.</span>playbackRate<span class="p">;</span>
  alert<span class="p">(</span>animation<span class="p">.</span>playState<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays 'finished'
</span><span class="p">}</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
   </div>
   <h4 class="heading settled" data-level="3.5.20" id="animation-events-section"><span class="secno">3.5.20. </span><span class="content">Animation events</span><a class="self-link" href="#animation-events-section"></a></h4>
   <p>As <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-28">animations</a> play, they report changes to their status through <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="animation-events">animation events</dfn>.</p>
   <p><a data-link-type="dfn" href="#animation-events" id="ref-for-animation-events-1">Animation events</a> are a property of the timing model. As a result they
are dispatched even when the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-21">target effect</a> of the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-29">animation</a> is
absent or has no observable result.</p>
   <h5 class="heading settled" data-level="3.5.20.1" id="animation-event-types"><span class="secno">3.5.20.1. </span><span class="content">Types of animation events</span><a class="self-link" href="#animation-event-types"></a></h5>
   <dl>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="finish event" data-noexport="" id="finish-event">finish</dfn></p>
    <dd data-md="">
     <p>Queued whenever an animation enters the <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-11">finished play state</a>.</p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="cancel event" data-noexport="" id="cancel-event">cancel</dfn></p>
    <dd data-md="">
     <p>Queued whenever an animation enters the <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-6">idle play state</a> from
another state. Creating a new <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-30">animation</a> that is initially
idle does <em>not</em> generate a new <a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event-4">cancel event</a>.</p>
   </dl>
   <h5 class="heading settled" data-level="3.5.20.2" id="animation-event-parameters"><span class="secno">3.5.20.2. </span><span class="content">Event parameters</span><a class="self-link" href="#animation-event-parameters"></a></h5>
   <p><a data-link-type="dfn" href="#animation-events" id="ref-for-animation-events-2">Animation events</a> have an associated <a data-link-type="dfn" href="#event-current-time" id="ref-for-event-current-time-2">event current time</a> and <a data-link-type="dfn" href="#event-timeline-time" id="ref-for-event-timeline-time-2">event timeline time</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="event-current-time">event current time</dfn> is the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-54">current time</a> of the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-31">animation</a> that generated the event at the moment the event is queued.
This will be <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-66">unresolved</a> if the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-32">animation</a> was <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-7">idle</a> at the time the event was generated.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="event-timeline-time">event timeline time</dfn> is the time value of the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-37">timeline</a> with
which the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-33">animation</a> that generated the event is associated at the moment
the event is queued.
This will be <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-67">unresolved</a> if the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-34">animation</a> was not associated with
a <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-38">timeline</a> at the time the event was generated or if the associated <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-39">timeline</a> was <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-13">inactive</a>.</p>
   <h3 class="heading settled" data-level="3.6" id="animation-effects"><span class="secno">3.6. </span><span class="content">Animation effects</span><a class="self-link" href="#animation-effects"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="animation-effect">animation effect</dfn> is an abstract term referring to an item in
the timing hierarchy.</p>
   <h4 class="heading settled" data-level="3.6.1" id="animation-effects-and-animations"><span class="secno">3.6.1. </span><span class="content">Relationship between animation effects
  and animations</span><a class="self-link" href="#animation-effects-and-animations"></a></h4>
   <p>The <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-22">target effect</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-35">animation</a>, if set, is a type of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-8">animation effect</a>.
The <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-23">target effect</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-36">animation</a> is said to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="directly associated with an animation" data-noexport="" id="directly-associated-with-an-animation">directly associated</dfn> with that animation.</p>
   <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-9">Animation effects</a> can be combined together into a hierarchy using <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-2">group effects</a> (see <a href="#grouping-and-synchronization">§3.13 Grouping and synchronization</a>).
Only the <a data-link-type="dfn" href="#root" id="ref-for-root-1">root</a> <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-10">animation effect</a> of such a hierarchy can be <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-1">directly associated with an animation</a>.
If an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-11">animation effect</a> that has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-3">parent group</a> is designated as the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-24">target effect</a> of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-37">animation</a>, the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-12">animation effect</a> is removed from its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-4">parent group</a> before being
associated with the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-38">animation</a>.</p>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-13">animation effect</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="associated-with-an-animation">associated with an animation</dfn> if it
is <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-2">directly associated with an animation</a> or if it has an <a data-link-type="dfn" href="#ancestor" id="ref-for-ancestor-1">ancestor</a> <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-3">group effect</a> that is <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-3">directly associated
with an animation</a>.At a given moment, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-14">animation effect</a> can be <a data-link-type="dfn" href="#associated-with-an-animation" id="ref-for-associated-with-an-animation-1">associated</a> with at most one <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-39">animation</a>.</p>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-15">animation effect</a>, <var>effect</var>, is <dfn data-dfn-type="dfn" data-lt="associated with a timeline" data-noexport="" id="associated-with-a-timeline">associated with
a timeline<a class="self-link" href="#associated-with-a-timeline"></a></dfn>, <var>timeline</var>, if <var>effect</var> is <a data-link-type="dfn" href="#associated-with-an-animation" id="ref-for-associated-with-an-animation-2">associated with an animation</a> which, in turn, is associated with <var>timeline</var>.</p>
   <h4 class="heading settled" data-level="3.6.2" id="types-of-animation-effects"><span class="secno">3.6.2. </span><span class="content">Types of animation effects</span><a class="self-link" href="#types-of-animation-effects"></a></h4>
   <p>This specification defines two types of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-16">animation effects</a>:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-2">keyframe effects</a>, and</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-4">group effects</a>.</p>
   </ul>
   <p>All types of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-17">animation effects</a> define a number of common
properties which are described in the following sections.</p>
   <h4 class="heading settled" data-level="3.6.3" id="the-active-interval"><span class="secno">3.6.3. </span><span class="content">The active interval</span><a class="self-link" href="#the-active-interval"></a></h4>
   <div class="informative-bg">
    <p>The period that an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-18">animation effect</a> is scheduled to run is
called its <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-1">active interval</a>.
Each <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-19">animation effect</a> has only one such interval.</p>
    <p>The lower bound of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-2">active interval</a> is determined by the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-1">start time</a> of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-20">animation effect</a> but may be shifted by a <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-1">start delay</a> on
the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-21">animation effect</a>.</p>
    <p>The upper bound of the interval is determined by the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-1">active
duration</a>.</p>
    <p>The relationship between the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-2">start time</a>, <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-2">start
delay</a>, and <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-2">active duration</a> is illustrated below.</p>
    <figure>
      <img alt="Examples of the effect of the start delay on the endpoints
          of the active interval" src="img/active-interval-examples.svg" width="600"> 
     <figcaption> Examples of the effect of the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-3">start delay</a> on the endpoints of
    the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-3">active interval</a>.<br> (a) An animation effect with no delay; the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-3">start time</a> and beginning of
    the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-4">active interval</a> are coincident.<br> (b) An animation effect with a positive delay; the beginning of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-5">active interval</a> is deferred by the delay.<br> (c) An animation effect with a negative delay; the beginning of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-6">active interval</a> is brought forward by the delay. </figcaption>
    </figure>
    <p>An <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-1">end delay</a> may also be specified but is primarily only of
use when sequencing animations such as by using a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-2">sequence effect</a>.</p>
   </div>
   <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-22">Animation effects</a> define an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="active-interval">active interval</dfn> which is
the period of time during which the effect is scheduled to produce its
effect with the exception of <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-1">fill modes</a> which apply outside the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-7">active interval</a>.</p>
   <p>The lower bound of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-8">active interval</a> is defined by the
combination of the animation effect’s <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-4">start time</a> and <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-4">start delay</a>.</p>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-23">animation effect</a>’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation effect start time" data-noexport="" id="animation-effect-start-time">start time</dfn> is the moment at
which the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-5">parent group</a>,
if any, has scheduled the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-24">animation effect</a> to begin.
It is expressed in <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-1">inherited time</a>.</p>
   <p>In most cases, including the case when the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-25">animation effect</a> has
no <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-6">parent group</a>,
the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-5">start time</a> is zero.
The singular exception is <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-3">sequence effects</a> which set
the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-6">start times</a> of their
children as described in <a href="#the-start-time-of-children-of-a-sequence-effect">§3.13.4.1 The start time of
  children of a sequence effect</a>.</p>
   <p>In addition to the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-7">start
time</a>, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-26">animation effect</a> also has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="start-delay">start delay</dfn> which is an offset from the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-8">start time</a>.</p>
   <p>Unlike the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-9">start time</a> which
is determined by the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-7">parent group</a>, the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-5">start
delay</a> is a property of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-27">animation effect</a> itself.</p>
   <p>The lower bound of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-9">active interval</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-28">animation
effect</a>, expressed in <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-2">inherited time
space</a>, is the sum of the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-10">start time</a> and the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-6">start
delay</a>.</p>
   <p>These definitions are incorporated in the calculation of the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-1">local
time</a> (see <a href="#local-time-and-inherited-time">§3.6.4 Local time and inherited time</a>) and <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-1">active time</a>.
The length of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-10">active interval</a> is called the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-3">active
duration</a>, the calculation of which is defined in <a href="#calculating-the-active-duration">§3.10.2 Calculating the active duration</a>.</p>
   <p>Similar to the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-7">start delay</a>, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-29">animation effect</a> also has
an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="end-delay">end delay</dfn> which may be used to delay the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-11">start time</a> of the <a data-link-type="dfn" href="#next-sibling" id="ref-for-next-sibling-1">next
sibling</a> in a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-4">sequence effect</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="end-time">end time</dfn> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-30">animation effect</a> is
the result of evaluating <code>max(<a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-12">start
time</a> + <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-8">start delay</a> + <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-4">active duration</a> + <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-2">end delay</a>,
0)</code>.</p>
   <h4 class="heading settled" data-level="3.6.4" id="local-time-and-inherited-time"><span class="secno">3.6.4. </span><span class="content">Local time and inherited time</span><a class="self-link" href="#local-time-and-inherited-time"></a></h4>
   <div class="informative-bg">
    <p>In Web Animations all times are relative to some point of reference.
These different points of reference produce different <em>time
spaces</em>.</p>
    <p>This can be compared to coordinate spaces as used in computer
graphics.
The zero time of a time space is analogous to the origin of
a coordinate space.</p>
    <p>Just as with coordinate spaces, time spaces can also be nested. <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-5">Group effects</a> typically perform some
transformations on the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-36">time values</a> they
receive from their <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-8">parent</a> or <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-40">animation</a> before passing on the transformed <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-37">time values</a> to their children.
Child <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-31">animation effects</a> then operate <em>within</em> that
transformed time space.</p>
    <p>Children take the transformed time values from their
parent—called the <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-3">inherited time</a>—and add their <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-13">start time</a> to establish
their own <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-2">local time space</a> as illustrated
below.</p>
    <figure>
      <img alt="Inherited time and local time." src="img/local-time.svg" width="600"> 
     <figcaption> Inherited time and local time.<br> At time <var>t</var>, the <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-4">inherited time</a> is 2.5.<br> For <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-32">animation effect</a> (a) which has a <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-14">start time</a> of 1, the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-3">local time</a> is 1.5.<br> For <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-33">animation effect</a> (b) which has a <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-15">start time</a> of 1
      and a <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-9">start delay</a> of 1,
      the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-4">local time</a> is also 1.5
      since <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-5">local time</a> is based on an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-34">animation effect</a>’s <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-16">start time</a> only,
      and not on its <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-10">start delay</a>. </figcaption>
    </figure>
   </div>
   <p>For an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-35">animation effect</a>, the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="inherited-time">inherited time</dfn> at
a given moment is based on the first matching condition from the
following:</p>
   <div class="switch">
    <dl>
     <dt data-md="">
      <p>If the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-36">animation effect</a> has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-9">parent group</a>,</p>
     <dd data-md="">
      <p>the inherited time is the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-10">parent group</a>’s current <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-1">transformed time</a>.</p>
     <dt data-md="">
      <p>If the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-37">animation effect</a> is <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-4">directly associated with
an animation</a>,</p>
     <dd data-md="">
      <p>the inherited time is the <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-55">current time</a> of the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-41">animation</a>.</p>
     <dt data-md="">
      <p>Otherwise,</p>
     <dd data-md="">
      <p>the inherited time is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-68">unresolved</a>.</p>
    </dl>
   </div>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="local-time">local time</dfn> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-38">animation effect</a> is the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-39">animation effect</a>’s <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-5">inherited time</a> minus its <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-17">start time</a>.
If the <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-6">inherited time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-69">unresolved</a> then the local time
is also <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-70">unresolved</a>.</p>
   <h4 class="heading settled" data-level="3.6.5" id="animation-effect-phases-and-states"><span class="secno">3.6.5. </span><span class="content">Animation effect phases and
states</span><a class="self-link" href="#animation-effect-phases-and-states"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>At a given moment, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-40">animation effect</a> may be in one of three
possible <em>phases</em>.
If an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-41">animation effect</a> has an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-71">unresolved</a> <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-6">local
time</a> it will not be in any phase.</p>
    <p>The different phases are illustrated below.</p>
    <figure>
      <img alt="An example of the different phases and states used to
          describe an animation effect." src="img/animation-effect-phases-and-states.svg" width="700"> 
     <figcaption> An example of the different phases and states used to describe
    an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-42">animation effect</a>. </figcaption>
    </figure>
    <p>The phases are as follows:</p>
    <dl>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-1">before phase</a></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-43">animation effect</a>’s <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-7">local time</a> falls before the
effect’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-11">active interval</a> and <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-4">end time</a>, <em>or</em> occurs during the range when a negative <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-11">start delay</a> is in
effect.</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-1">active phase</a></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-44">animation effect</a>’s <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-8">local time</a> falls inside the
effect’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-12">active interval</a> and outside the range of any
negative <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-12">start delay</a> or negative <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-3">end delay</a>.</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-1">after phase</a></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-45">animation effect</a>’s <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-9">local time</a> falls after the
effect’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-13">active interval</a> or after the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-5">end time</a> if that
comes first (due to a negative <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-4">end delay</a>), but <em>not</em> during the range when a negative <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-13">start delay</a> is in effect.</p>
    </dl>
    <p>In addition to these phases, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-46">animation effect</a> may also be
described as being in one of several overlapping <em>states</em>.
These states are only established for the duration of a single
sample and are primarily a convenience for describing stative parts
of the model.</p>
    <p>These states and their useage within the model are summarized as
follows:</p>
    <dl>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#in-play" id="ref-for-in-play-1">in play</a></p>
     <dd data-md="">
      <p>Corresponds to an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-47">animation effect</a> whose <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-2">active time</a> is changing on each sample.
This occurs when the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-48">animation effect</a> <em>and all its
ancestors</em> are in the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-2">active phase</a>. <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-49">Animation effects</a> only “move” when
they are <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-2">in play</a>.</p>
      <p>It is possible for an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-50">animation effect</a> to be in the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-3">active phase</a> but not <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-3">in play</a>.
For example, if an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-51">animation effect</a> has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-11">parent
group</a> that causes the animation effect’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-14">active
interval</a> to be clipped and both parent and child apply the
same <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-2">fill mode</a>, the child <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-52">animation effect</a> may be
effectively be snapshotted within the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-4">active phase</a> despite no longer being <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-4">in play</a>.</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#current" id="ref-for-current-1">current</a></p>
     <dd data-md="">
      <p>Corresponds to an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-53">animation effect</a> that is either <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-5">in
play</a> or may become <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-6">in play</a> in the future.
This will be the case if the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-54">animation effect</a> is <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-7">in
play</a> or in its <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-2">before phase</a>, <em>or</em> it has an
ancestor for which this is true thereby opening up the
possibility that this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-55">animation effect</a> might play again
(e.g. due to repeating).</p>
     <dt data-md="">
      <p><a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-1">in effect</a></p>
     <dd data-md="">
      <p>Corresponds to an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-56">animation effect</a> that has a resolved <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-3">active time</a>.
This occurs when either the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-57">animation effect</a> is in its <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-5">active phase</a> or outside the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-6">active phase</a> but at
a time where the effect’s <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-3">fill mode</a> (see <a href="#fill-behavior">§3.7 Fill behavior</a>)
causes its <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-4">active time</a> to be resolved.
Only <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-2">in effect</a> <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-58">animation effects</a> apply
a result to their target.</p>
    </dl>
    <p>The normative definition of each of these states follows.</p>
   </div>
   <p>Determining the phase of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-59">animation effect</a> requires the following
definitions:</p>
   <dl>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="animation-direction">animation direction</dfn></p>
    <dd data-md="">
     <p>‘backwards’ if the effect is <a data-link-type="dfn" href="#associated-with-an-animation" id="ref-for-associated-with-an-animation-3">associated with an
animation</a> <em>and</em> the associated <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-42">animation</a>’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-35">playback rate</a> is less than zero;
in all other cases, the <a data-link-type="dfn" href="#animation-direction" id="ref-for-animation-direction-1">animation direction</a> is
‘forwards’.</p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="before-active-boundary-time">before-active boundary time</dfn></p>
    <dd data-md="">
     <p><code>max(min(<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-14">start delay</a>, <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-6">end time</a>), 0)</code></p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="active-after-boundary-time">active-after boundary time</dfn></p>
    <dd data-md="">
     <p><code>max(min(<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-15">start delay</a> + <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-5">active duration</a>, <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-7">end time</a>), 0)</code></p>
   </dl>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-60">animation effect</a> is in the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="before-phase">before phase</dfn> if the
animation effect’s <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-10">local time</a> is not <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-72">unresolved</a> and <em>either</em> of the following conditions are met:</p>
   <ol>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-11">local time</a> is less than the <a data-link-type="dfn" href="#before-active-boundary-time" id="ref-for-before-active-boundary-time-1">before-active boundary time</a>, <em>or</em></p>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-direction" id="ref-for-animation-direction-2">animation direction</a> is ‘backwards’ and the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-12">local
time</a> is equal to the <a data-link-type="dfn" href="#before-active-boundary-time" id="ref-for-before-active-boundary-time-2">before-active boundary time</a>.</p>
   </ol>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-61">animation effect</a> is in the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="after-phase">after phase</dfn> if the
animation effect’s <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-13">local time</a> is not <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-73">unresolved</a> and <em>either</em> of the following conditions are met:</p>
   <ol>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-14">local time</a> is greater than the <a data-link-type="dfn" href="#active-after-boundary-time" id="ref-for-active-after-boundary-time-1">active-after boundary
time</a>, <em>or</em></p>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-direction" id="ref-for-animation-direction-3">animation direction</a> is ‘forwards’ and the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-15">local
time</a> is equal to the <a data-link-type="dfn" href="#active-after-boundary-time" id="ref-for-active-after-boundary-time-2">active-after boundary time</a>.</p>
   </ol>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-62">animation effect</a> is in the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="active-phase">active phase</dfn> if the
animation effect’s <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-16">local time</a> is not <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-74">unresolved</a> and it is
not in either the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-3">before phase</a> nor the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-2">after phase</a>.</p>
   <p>Furthermore, it is often convenient to refer to the case when an animation
effect is in none of the above phases as being in the <dfn data-dfn-type="dfn" data-noexport="" id="idle-phase">idle phase<a class="self-link" href="#idle-phase"></a></dfn>.</p>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-63">animation effect</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="in-play">in play</dfn> if <em>all</em> of the following conditions are met:</p>
   <ol>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-64">animation effect</a> is in the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-7">active phase</a>, and</p>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-65">animation effect</a> has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-12">parent group</a> that
is <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-8">in play</a> or else the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-66">animation effect</a> is <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-5">directly associated with an animation</a> that is not <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-12">finished</a>.</p>
   </ol>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-67">animation effect</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current">current</dfn> if <em>any</em> of the following conditions is true:</p>
   <ul>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-68">animation effect</a> is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-4">before phase</a>, or</p>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-69">animation effect</a> is <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-9">in play</a>, or</p>
    <li data-md="">
     <p>the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-70">animation effect</a> has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-13">parent group</a> and the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-14">parent group</a> is <a data-link-type="dfn" href="#current" id="ref-for-current-2">current</a>.</p>
   </ul>
   <p>An animation effect is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="in-effect">in effect</dfn> if its <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-5">active time</a>, as
calculated according to the procedure in <a href="#calculating-the-active-time">§3.10.3.1 Calculating the active time</a>,
is <em>not</em> <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-75">unresolved</a>.</p>
   <h3 class="heading settled" data-level="3.7" id="fill-behavior"><span class="secno">3.7. </span><span class="content">Fill behavior</span><a class="self-link" href="#fill-behavior"></a></h3>
   <p>The effect of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-71">animation effect</a> when it is not <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-10">in play</a> is
determined by its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="fill-mode">fill mode</dfn>.</p>
   <p>The possible <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-4">fill modes</a> are:</p>
   <ul>
    <li data-md="">
     <p>none,</p>
    <li data-md="">
     <p>forwards,</p>
    <li data-md="">
     <p>backwards, and</p>
    <li data-md="">
     <p>both.</p>
   </ul>
   <p>The normative definition of these modes is incorporated in the
calculation of the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-6">active time</a> in <a href="#calculating-the-active-time">§3.10.3.1 Calculating the active time</a>.</p>
   <h4 class="heading settled" data-level="3.7.1" id="fill-modes"><span class="secno">3.7.1. </span><span class="content">Fill modes</span><a class="self-link" href="#fill-modes"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>The effect of each <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-5">fill mode</a> is as follows:</p>
    <dl>
     <dt data-md="">
      <p>none</p>
     <dd data-md="">
      <p>The animation effect has no effect when it is not <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-11">in play</a>.</p>
     <dt data-md="">
      <p>forwards</p>
     <dd data-md="">
      <p>When the animation effect is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-3">after phase</a>,
or when the animation effect is in the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-8">active phase</a> but an <a data-link-type="dfn" href="#ancestor" id="ref-for-ancestor-2">ancestor</a> is in its <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-4">after phase</a>,
the animation effect will produce the same <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-3">iteration progress</a> value as the last moment it is scheduled to be <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-12">in play</a>.</p>
      <p>For all other times that the animation effect is not <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-13">in play</a>,
it will have no effect.</p>
     <dt data-md="">
      <p>backwards</p>
     <dd data-md="">
      <p>When the animation effect is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-5">before phase</a>,
or when the animation effect is in the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-9">active phase</a> but an <a data-link-type="dfn" href="#ancestor" id="ref-for-ancestor-3">ancestor</a> is in its <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-6">before phase</a>,
the animation effect will produce the same <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-4">iteration progress</a> value as the earliest moment that it is scheduled to be <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-14">in play</a>.</p>
      <p>For all other times that the animation effect is not <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-15">in play</a>,
it will have no effect.</p>
     <dt data-md="">
      <p>both</p>
     <dd data-md="">
      <p>When the animation effect
or an <a data-link-type="dfn" href="#ancestor" id="ref-for-ancestor-4">ancestor</a> is in its <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-7">before phase</a>, <span class="prop-value">backwards</span> fill behavior is used.</p>
      <p>When the animation effect
or an <a data-link-type="dfn" href="#ancestor" id="ref-for-ancestor-5">ancestor</a> is in its <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-5">after phase</a>, <span class="prop-value">forwards</span> fill behavior is used.</p>
    </dl>
    <p>Some examples of the these fill modes are illustrated below.</p>
    <figure>
      <img alt="Examples of various fill modes and the states produced." src="img/animation-state-and-fill-behavior.svg" width="600"> 
     <figcaption> Examples of various fill modes and the states produced.<br> (a) fill mode ‘none’. The animation effect has no effect
        outside its active phase.<br> (b) fill mode ‘forwards’. After the active phase has
        finished, the <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-5">iteration progress</a> value continues to maintain
        a fill value.<br> (c) fill mode ‘backwards’. The animation effect produces
        a fill value until the start of the active phase.<br> (d) fill mode ‘both’. Both before and after the active
        phase the animation effect produces a fill value. </figcaption>
    </figure>
    <p class="note" role="note">Note: setting a fill mode has no bearing on the endpoints of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-15">active interval</a> or the boundaries between <a href="#animation-effect-phases-and-states">phases</a>.
    However, the fill mode <em>does</em> have an effect on various other
    properties of the timing model since the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-7">active time</a> of an
    animation effect is only defined (that is, not <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-76">unresolved</a>) inside
    the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-10">active phase</a> <em>or</em> when a fill is applied.</p>
    <div class="issue" id="issue-5b9a5216">
     <a class="self-link" href="#issue-5b9a5216"></a> Currently <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-1">timing functions</a> that generate results outside the
range [0, 1] will behave unexpectedly when applied to group
effects, as children will increase iterations or enter into fill mode
rather than continuing to extrapolate along their defined behavior
(which is what they would do if the timing function applied to them
directly). 
     <p>To fix this it is possible we will wish to introduce <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-overflow-4/#propdef-overflow">overflow</a> fill
modes that respond to time values larger than or smaller than the
active time range by extrapolating rather than filling.</p>
     <p>See <a href="http://lists.w3.org/Archives/Public/public-fx/2013AprJun/0184.html">section
15 (Overflowing fill) of minuted discussion from Tokyo 2013 F2F</a>.</p>
    </div>
   </div>
   <h3 class="heading settled" data-level="3.8" id="repeating"><span class="secno">3.8. </span><span class="content">Repeating</span><a class="self-link" href="#repeating"></a></h3>
   <h4 class="heading settled" data-level="3.8.1" id="iteration-intervals"><span class="secno">3.8.1. </span><span class="content">Iteration intervals</span><a class="self-link" href="#iteration-intervals"></a></h4>
   <p>It is possible to specify that an animation effect should repeat
a fixed number of times or indefinitely.
This repetition occurs <em>within</em> the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-16">active interval</a>.
The span of time during which a single repetition takes place is
called an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="iteration-interval">iteration interval</dfn>.</p>
   <p>Unlike the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-17">active interval</a>, an animation effect can have multiple <a data-link-type="dfn" href="#iteration-interval" id="ref-for-iteration-interval-1">iteration intervals</a> although typically only the interval
corresponding to the <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-1">current iteration</a> is of interest.</p>
   <p>The length of a single iteration is called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="iteration duration" data-noexport="" id="iteration-duration">iteration
duration</dfn>.
The initial <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-1">iteration duration</a> of an
animation effect is simply its <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-1">intrinsic iteration duration</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="intrinsic-iteration-duration">intrinsic iteration duration</dfn> of an animation effect is
zero, however some specific types of animation effect such as <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-6">group effects</a> override this behavior and provide an
alternative intrinsic duration (see <a href="#the-intrinsic-iteration-duration-of-a-group-effect">§3.13.3 The intrinsic
  iteration duration of a group effect</a> and <a href="#the-intrinsic-iteration-duration-of-a-sequence-effect">§3.13.4.2 The intrinsic
  iteration duration of a sequence effect</a>).</p>
   <p>The <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-2">iteration duration</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-72">animation effect</a> may be set
by the author to represent a value other than the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-2">intrinsic
iteration duration</a>.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>Comparing the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-3">iteration duration</a> and the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-6">active
duration</a> we have:</p>
    <dl>
     <dt data-md="">
      <p>Iteration duration</p>
     <dd data-md="">
      <p>The time taken for a single iteration of the animation effect to
complete.</p>
     <dt data-md="">
      <p>Active duration</p>
     <dd data-md="">
      <p>The time taken for the entire animation effect to complete,
including repetitions.
This may be longer or shorter than the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-4">iteration duration</a>.</p>
    </dl>
    <p>The relationship between the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-5">iteration duration</a> and <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-7">active
duration</a> is illustrated below.</p>
    <figure>
      <img alt="Comparison of the iteration duration and active time." src="img/iteration-intervals.svg" width="600"> 
     <figcaption> A comparison of the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-6">iteration duration</a> and <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-8">active
    duration</a> of an animation effect with an <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-1">iteration count</a> of
    2.5.
    Note that the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-7">iteration duration</a> for the final iteration does
    not change, it is simply cut-off by the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-9">active duration</a>. </figcaption>
    </figure>
   </div>
   <h4 class="heading settled" data-level="3.8.2" id="controlling-iteration"><span class="secno">3.8.2. </span><span class="content">Controlling iteration</span><a class="self-link" href="#controlling-iteration"></a></h4>
   <p>The number of times an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-73">animation effect</a> repeats is called its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="iteration-count">iteration count</dfn>.
The <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-2">iteration count</a> is a real number greater than or equal to
zero.
The <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-3">iteration count</a> may also be positive infinity to represent
that the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-74">animation effect</a> repeats indefinitely.</p>
   <p>In addition to the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-4">iteration count</a>, <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-75">animation effects</a> also
have an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="iteration-start">iteration start</dfn> property which specifies an offset
into the series of iterations at which the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-76">animation effect</a> should begin.
The <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-1">iteration start</a> is a finite real number greater than or
equal to zero.</p>
   <p>The behavior of these parameters is defined in the calculations in <a href="#core-animation-effect-calculations">§3.10 Core animation effect
calculations</a>.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>The effect of the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-5">iteration count</a> and <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-2">iteration start</a> parameters is illustrated below.</p>
    <figure>
      <img alt="The effect of the iteration count and iteration start parameters" src="img/iteration-count-and-start.svg" width="600"> 
     <figcaption> The effect of the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-6">iteration count</a> and <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-3">iteration start</a> parameters.<br> In the first case the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-7">iteration count</a> is 2.5 resulting in the
    third iteration being cut-off half way through its <a data-link-type="dfn" href="#iteration-interval" id="ref-for-iteration-interval-2">iteration
    interval</a>.<br> The second case is the same but with an <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-4">iteration start</a> of
    0.5.
    This causes the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-77">animation effect</a> to begin half way through the
    first iteration. </figcaption>
    </figure>
    <p>Unlike the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-8">iteration count</a> parameter, the <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-5">iteration
start</a> parameter does not effect the length of the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-10">active
duration</a>.</p>
    <p>Note that values of <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-6">iteration start</a> greater than or equal to
one are generally not useful unless used in combination with an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-78">animation effect</a> that has an <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-1">iteration composite
operation</a> of <a data-link-type="dfn" href="#iteration-composite-operation-accumulate" id="ref-for-iteration-composite-operation-accumulate-1">accumulate</a>.</p>
   </div>
   <h4 class="heading settled" data-level="3.8.3" id="iteration-time-space"><span class="secno">3.8.3. </span><span class="content">Iteration time space</span><a class="self-link" href="#iteration-time-space"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>We have already encountered different time spaces in describing <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-17">local time</a> and <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-7">inherited time</a> (see <a href="#local-time-and-inherited-time">§3.6.4 Local time and inherited time</a>).
Repetition introduces yet another time space: the iteration time
space.</p>
    <p><em>Iteration time space</em> is a time space whose zero time is the
beginning of an animation effect’s current iteration.</p>
    <p>Within the Web Animations model we also refer to <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-8">active
time</a> which is a time relative to the beginning of the active
interval.
This time space, however, is internal to the model and not exposed in
the programming interface or in markup.</p>
    <p>These time spaces are illustrated below.</p>
    <figure>
      <img alt="A comparison of local time, active time, and iteration time." src="img/time-spaces.svg" width="600"> 
     <figcaption> A comparison of local time, active time, and iteration time for an
    animation with a iteration duration of 1s and an iteration count of
    2.5. </figcaption>
    </figure>
    <p class="note" role="note">Note: While the time spaces themselves are not bounded, Web
    Animations defines <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-9">active time</a> and the <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-6">iteration
    progress</a> such that they are clamped to a set range as shown in the
    diagram.
    For example, whilst a time of -1 second is a valid time in <em>active time space</em>, the procedure for calculating the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-10">active time</a> defined in <a href="#calculating-the-active-time">§3.10.3.1 Calculating the active time</a> will
    never return a negative value.</p>
    <p>In addition to these time spaces we can also refer to the <em>document time space</em> which is time space of the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-38">time
values</a> of the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-4">default document timeline</a> of the <a href="http://www.w3.org/TR/html5/browsers.html#active-document">active
document</a>.</p>
   </div>
   <h4 class="heading settled" data-level="3.8.4" id="interval-timing"><span class="secno">3.8.4. </span><span class="content">Interval timing</span><a class="self-link" href="#interval-timing"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>When an animation effect repeats we must define the behavior at the
iteration boundaries.
For this, and indeed for all interval timing, Web Animations uses an
endpoint-exclusive timing model.
This means that whilst the begin time of an interval
is included in the interval, the end time time is not.
In interval notation this can written <code>[begin, end)</code>.
This model provides sensible behavior when intervals are repeated and
sequenced since there is no overlap between the intervals.</p>
    <p>In the examples below, for the repeated effect, at local time 1s,
the iteration time is 0. For the sequenced effects, at inherited time 1s, only effect B will be <a data-link-type="dfn" href="#in-play" id="ref-for-in-play-16">in play</a>; there is no overlap.</p>
    <figure>
      <img alt="Illustration of end-point exclusive timing." src="img/endpoint-exclusive-timing.svg" width="600"> 
     <figcaption> Illustration of end-point exclusive timing. For both repeated and
    sequenced animation effects there is no overlap at the boundaries
    between intervals. </figcaption>
    </figure>
    <p>An exception to this behavior is that when performing a <a href="#fill-behavior">fill</a>, if the fill begins at an
interval endpoint, the endpoint is used.
This behavior falls out of the algorithm given in <a href="#calculating-the-simple-iteration-progress">§3.10.3.3 Calculating the simple iteration progress</a> and is illustrated below.</p>
    <figure>
      <img alt="Effect of iterations and fill on iteration time." src="img/endpoint-exclusive-timing-and-fill.svg" width="600"> 
     <figcaption> After one iteration, the <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-7">iteration progress</a> is 0, but after two
    iterations (and there onwards), the <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-8">iteration progress</a> is 1
    due to the special behavior defined when an animation effect fills. </figcaption>
    </figure>
   </div>
   <h3 class="heading settled" data-level="3.9" id="animation-effect-speed-control"><span class="secno">3.9. </span><span class="content">Animation effect speed control</span><a class="self-link" href="#animation-effect-speed-control"></a></h3>
   <p>Like <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-43">animations</a>, <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-79">animation effects</a> also have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation effect playback rate" data-noexport="" id="animation-effect-playback-rate">playback rate</dfn> parameter.
The <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-3">playback rate</a> of
an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-80">animation effect</a> is a finite real number that acts as
a multiplier when calculating the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-81">animation effect</a>’s <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-2">transformed
time</a> from its <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-18">local time</a>.</p>
   <p>The effect of setting the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-4">playback rate</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-82">animation effect</a> differs from the
setting the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-36">playback rate</a> on
an animation.
Its behavior is defined in the timing calculations given in <a href="#core-animation-effect-calculations">§3.10 Core animation effect
calculations</a>.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>In summary, the behavior of the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-5">playback rate</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-83">animation effect</a> is as follows:</p>
    <ul>
     <li data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-6">playback rate</a> is
applied only to the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-18">active interval</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-84">animation
effect</a> and not to the time while it is <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-16">delayed</a> or <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-6">filling</a>.</p>
     <li data-md="">
      <p>Setting a negative <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-7">playback
rate</a> on an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-85">animation effect</a> causes the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-86">animation
effect</a> to begin at the end of its <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-19">active interval</a>.
This differs from the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-37">playback
rate</a> on an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-44">animation</a>.
Setting a <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-38">playback rate</a> on
an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-45">animation</a> to a negative value at a moment before the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-46">animation</a>’s target effect has begun, will result in the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-25">target effect</a> never playing.</p>
     <li data-md="">
      <p>Setting the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-8">playback
rate</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-87">animation effect</a> affects the calculated value of
the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-11">active duration</a> (see <a href="#calculating-the-active-duration">§3.10.2 Calculating the active duration</a>).</p>
     <li data-md="">
      <p>Changing the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-9">playback
rate</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-88">animation effect</a> whose <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-19">local time</a> is
within its <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-20">active interval</a> will cause it to jump.
This is because the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-12">active duration</a> will be updated but the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-20">local time</a> will not.</p>
      <p>Furthermore, if other <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-89">animation effects</a> depend on the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-90">animation effect</a>’s <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-13">active duration</a>, such as sibling <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-91">animation effect</a> in a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-5">sequence effect</a>, they
too may jump as a result of setting the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-92">animation effect</a>’s <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-10">playback rate</a>.</p>
      <p>For runtime speed control the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-39">playback rate</a> of the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-47">animation</a> should be used.</p>
    </ul>
   </div>
   <h3 class="heading settled" data-level="3.10" id="core-animation-effect-calculations"><span class="secno">3.10. </span><span class="content">Core animation effect
calculations</span><a class="self-link" href="#core-animation-effect-calculations"></a></h3>
   <h4 class="heading settled" data-level="3.10.1" id="animation-effect-calculations-overview"><span class="secno">3.10.1. </span><span class="content">Overview</span><a class="self-link" href="#animation-effect-calculations-overview"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>At the core of the Web Animations timing model is the process that
takes an <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-8">inherited time</a> value
and converts it to an <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-9">iteration progress</a>.</p>
    <p>The first step in this process is to calculate the bounds of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-21">active interval</a> which is determined by the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-14">active
duration</a>.</p>
    <p>This process is illustrated below.</p>
    <figure>
      <img alt="Calculation of the active duration." src="img/active-duration-calculation.svg" width="650"> 
     <figcaption> Calculation of the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-15">active duration</a> is based on
    multiplying the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-8">iteration duration</a> by the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-9">iteration count</a> and
  then dividing by the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-11">playback rate</a>. </figcaption>
    </figure>
    <p> The process for calculating the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-16">active duration</a> is normatively
  defined in <a href="#calculating-the-active-duration">§3.10.2 Calculating the active duration</a>. </p>
    <p> Having established the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-17">active duration</a>, the process for
  transforming an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-93">animation effect</a>’s <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-9">inherited time</a> into its <a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress-1">transformed progress</a> (<a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-10">iteration progress</a>) is illustrated below. </p>
    <figure>
      <img alt="An overview of timing model calculations." src="img/time-calculations.svg" width="650"> 
     <figcaption> An overview of timing model calculations.<br> (1) The <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-10">inherited time</a> is converted into a <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-21">local time</a> by
    incorporating the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-18">start time</a>.<br> (2) The <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-22">local time</a> is converted into an <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-11">active time</a> by
    incorporating the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-17">start
    delay</a>.<br> (3) The <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-12">active time</a> is divided by the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-9">iteration duration</a> incorporating also the <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-7">iteration start</a> property and the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-12">playback rate</a> property
    to produce the <a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-1">overall progress</a>.<br> (4) The <a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-2">overall progress</a> time is then converted to an offset
    within a single iteration: the <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-1">simple iteration progress</a>.<br> (5) The <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-2">simple iteration progress</a> is converted into a <a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress-1">directed
    progress</a> by incorporating the <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-1">playback direction</a>.<br> (6) Finally, a timing function is applied to the <a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress-2">directed
    progress</a> to produce the <a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress-2">transformed progress</a>. </figcaption>
    </figure>
    <p>The first step, calculating the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-23">local time</a> is described in <a href="#local-time-and-inherited-time">§3.6.4 Local time and inherited time</a>.
Steps 2 to 4 in the diagram are described in the following sections.
Steps 5 and 6 are described in <a href="#calculating-the-directed-progress">§3.11.1 Calculating the directed progress</a> and <a href="#calculating-the-transformed-progress">§3.12.5 Calculating the transformed progress</a> respectively.</p>
   </div>
   <h4 class="heading settled" data-level="3.10.2" id="calculating-the-active-duration"><span class="secno">3.10.2. </span><span class="content">Calculating the active duration</span><a class="self-link" href="#calculating-the-active-duration"></a></h4>
   <p>In order to calculate the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-18">active duration</a> we first define the <a data-link-type="dfn" href="#repeated-duration" id="ref-for-repeated-duration-1">repeated duration</a> as follows:</p>
   <blockquote>
     <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="repeated-duration">repeated duration</dfn> = <code><a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-10">iteration duration</a> × <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-10">iteration count</a></code> 
    <p> If either the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-11">iteration duration</a> or <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-11">iteration count</a> are zero, the <a data-link-type="dfn" href="#repeated-duration" id="ref-for-repeated-duration-2">repeated duration</a> is zero. </p>
    <p class="note" role="note"> This clarification is needed since the result of infinity
      multiplied by zero is undefined according to IEEE 754-2008. </p>
   </blockquote>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="active-duration">active duration</dfn> is calculated according to the following
steps:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-13">playback rate</a> is
  zero, return <code>Infinity</code>.</p>
    <li data-md="">
     <p>Otherwise, return <code><a data-link-type="dfn" href="#repeated-duration" id="ref-for-repeated-duration-3">repeated duration</a> / abs(<a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-14">playback rate</a>)</code>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.10.3" id="transforming-the-local-time"><span class="secno">3.10.3. </span><span class="content">Transforming the local time</span><a class="self-link" href="#transforming-the-local-time"></a></h4>
   <h5 class="heading settled" data-level="3.10.3.1" id="calculating-the-active-time"><span class="secno">3.10.3.1. </span><span class="content">Calculating the active time</span><a class="self-link" href="#calculating-the-active-time"></a></h5>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="active-time">active time</dfn> is based on the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-24">local time</a> and <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-18">start delay</a>.
However, it is only defined when the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-94">animation effect</a> should
produce an output and hence depends on its <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-7">fill mode</a> and
phase
as well as the phase of its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-15">parent group</a>, if any,
as follows,</p>
   <div class="switch">
    <dl>
     <dt data-md="">
      <p>If the animation effect is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-8">before phase</a>,</p>
     <dd data-md="">
      <p>The result depends on the first matching condition from the
following,</p>
      <div class="switch">
       <dl>
        <dt data-md="">
         <p>If the animation effect has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-16">parent group</a> and that parent group is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-6">after
phase</a>,</p>
        <dd data-md="">
         <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-77">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-39">time value</a>.</p>
        <dt data-md="">
         <p>If the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-8">fill mode</a> is <span class="prop-mode">backwards</span> or <span class="prop-mode">both</span>,</p>
        <dd data-md="">
         <p>Return the result of evaluating <code>max(<a data-link-type="dfn" href="#local-time" id="ref-for-local-time-25">local time</a> - <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-19">start delay</a>, 0)</code>.</p>
        <dt data-md="">
         <p>Otherwise,</p>
        <dd data-md="">
         <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-78">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-40">time value</a>.</p>
       </dl>
      </div>
     <dt data-md="">
      <p>If the animation effect is in the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-11">active phase</a>,</p>
     <dd data-md="">
      <p>The result depends on the first matching condition from the
following,</p>
      <div class="switch">
       <dl>
        <dt data-md="">
         <p>If the animation effect has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-17">parent group</a> and that parent group is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-9">before
phase</a>, and the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-9">fill mode</a> of this animation effect
is <span class="prop-value">none</span> or <span class="prop-value">forwards,</span></p>
        <dd data-md="">
         <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-79">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-41">time value</a>.</p>
        <dt data-md="">
         <p>If the animation effect has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-18">parent group</a> and that parent group is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-7">after
phase</a>, and the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-10">fill mode</a> of this animation effect
is <span class="prop-value">none</span> or <span class="prop-value">backwards,</span></p>
        <dd data-md="">
         <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-80">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-42">time value</a>.</p>
        <dt data-md="">
         <p>Otherwise,</p>
        <dd data-md="">
         <p>Return the result of evaluating <code><a data-link-type="dfn" href="#local-time" id="ref-for-local-time-26">local time</a> - <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-20">start delay</a></code>.</p>
       </dl>
      </div>
     <dt data-md="">
      <p>If the animation effect is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-8">after phase</a>,</p>
     <dd data-md="">
      <p>The result depends on the first matching condition from the
following,</p>
      <div class="switch">
       <dl>
        <dt data-md="">
         <p>If the animation effect has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-19">parent group</a> and that parent group is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-10">before
phase</a>,</p>
        <dd data-md="">
         <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-81">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-43">time value</a>.</p>
        <dt data-md="">
         <p>If the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-11">fill mode</a> is <span class="prop-mode">forwards</span> or <span class="prop-mode">both</span>,</p>
        <dd data-md="">
         <p>Return the result of evaluating <code>max(min(<a data-link-type="dfn" href="#local-time" id="ref-for-local-time-27">local time</a> - <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-21">start delay</a>, <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-19">active duration</a>),
          0)</code>.</p>
        <dt data-md="">
         <p>Otherwise,</p>
        <dd data-md="">
         <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-82">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-44">time value</a>.</p>
       </dl>
      </div>
     <dt data-md="">
      <p>Otherwise (the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-28">local time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-83">unresolved</a>),</p>
     <dd data-md="">
      <p>Return an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-84">unresolved</a> <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-45">time value</a>.</p>
    </dl>
   </div>
   <h5 class="heading settled" data-level="3.10.3.2" id="calculating-the-overall-progress"><span class="secno">3.10.3.2. </span><span class="content">Calculating the overall progress</span><a class="self-link" href="#calculating-the-overall-progress"></a></h5>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="overall-progress">overall progress</dfn> describes the number of iterations that
have completed (including partial iterations) and is defined as follows:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-13">active time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-85">unresolved</a>, return <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-86">unresolved</a>.</p>
    <li data-md="">
     <p>Calculate an initial value for <var>overall progress</var> based on the
first matching condition from below,</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-12">iteration duration</a> is zero,</p>
       <dd data-md="">
        <p>If the animation effect is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-11">before phase</a>, let <var>overall progress</var> be zero, otherwise, let it be equal
to the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-12">iteration count</a>.</p>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <p>Calculate the <a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-3">overall progress</a> following the first
matching condition from below:</p>
        <div class="switch">
         <dl>
          <dt data-md="">
           <p>If the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-15">animation effect playback rate</a> is less than zero,</p>
          <dd data-md="">
           <p>Let <var>overall progress</var> be <code>(<a data-link-type="dfn" href="#active-time" id="ref-for-active-time-14">active time</a> - <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-20">active duration</a>)
× <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-16">playback
rate</a> / <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-13">iteration duration</a></code>.</p>
          <dt data-md="">
           <p>If the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-17">animation effect playback rate</a> is zero,</p>
          <dd data-md="">
           <p>Let <var>overall progress</var> be zero.</p>
          <dt data-md="">
           <p>Otherwise,</p>
          <dd data-md="">
           <p>Let <var>overall progress</var> be <code>(<a data-link-type="dfn" href="#active-time" id="ref-for-active-time-15">active time</a> × <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-18">playback rate</a>) / <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-14">iteration duration</a></code>.</p>
         </dl>
        </div>
      </dl>
     </div>
    <li data-md="">
     <p>Return the result of calculating <code><var>overall
progress</var> + <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-8">iteration start</a></code>.</p>
   </ol>
   <h5 class="heading settled" data-level="3.10.3.3" id="calculating-the-simple-iteration-progress"><span class="secno">3.10.3.3. </span><span class="content">Calculating the simple iteration progress</span><a class="self-link" href="#calculating-the-simple-iteration-progress"></a></h5>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="simple-iteration-progress">simple iteration progress</dfn> is a fraction of the progress
through the current iteration that ignores transformations to the time
introduced by the <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-2">playback direction</a> or <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-2">timing functions</a> applied to the effect, and is calculated as follows:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-4">overall progress</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-87">unresolved</a>,
return <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-88">unresolved</a>.</p>
    <li data-md="">
     <p>If <a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-5">overall progress</a> is infinity, let the <var>simple iteration
progress</var> be <code><a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-9">iteration start</a> % 1.0</code>,
otherwise, let the <var>simple iteration progress</var> be <code><a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-6">overall progress</a> % 1.0</code>.</p>
    <li data-md="">
     <p>If <em>all</em> of the following conditions are true,</p>
     <ul>
      <li data-md="">
       <p>the <var>simple iteration progress</var> calculated above is zero,</p>
      <li data-md="">
       <p>the animation effect is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-9">after phase</a>, <em>and</em></p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-13">iteration count</a> is <em>not</em> equal to zero, <em>and</em></p>
      <li data-md="">
       <p><em>either</em> the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-16">active time</a> is <em>not</em> zero <em>or</em> the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-15">iteration duration</a> is zero.</p>
     </ul>
     <p>let the <var>simple iteration progress</var> be 1.0.</p>
     <div class="note" role="note">
      <p>The above step implements the behavior that when an animation’s
  active interval ends precisely at the end of an iteration, it fills by
  holding the endpoint of the final iteration rather than the start of the
  next iteration.</p>
      <p>The final two conditions prevent this from applying when we never played
  any iterations of the animation to begin with because either (a) the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-14">iteration count</a> was zero, or (b) the playback range of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-22">active interval</a> was clipped to zero using a negative <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-5">end
  delay</a>.
  In detecting if the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-23">active interval</a>’s playback range was clipped
  to zero, we check for a zero <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-17">active time</a> in the after phase, but
  if the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-16">iteration duration</a> was zero to begin with then we say that
  the animation was <em>not</em> clipped.</p>
     </div>
    <li data-md="">
     <p>Return <var>simple iteration progress</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.10.4" id="calculating-the-current-iteration"><span class="secno">3.10.4. </span><span class="content">Calculating the current iteration</span><a class="self-link" href="#calculating-the-current-iteration"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-iteration">current iteration</dfn> can be calculated using the
following steps:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-18">active time</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-89">unresolved</a>, return <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-90">unresolved</a>.</p>
    <li data-md="">
     <p>If the animation effect is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-10">after phase</a> <em>and</em> the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-15">iteration count</a> is infinity, return infinity.</p>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-3">simple iteration progress</a> is 1.0,
return <code>floor(<a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-7">overall progress</a>) - 1</code>.</p>
    <li data-md="">
     <p>Otherwise, return <code>floor(<a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress-8">overall progress</a>)</code>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.11" id="direction-control"><span class="secno">3.11. </span><span class="content">Direction control</span><a class="self-link" href="#direction-control"></a></h3>
   <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-95">Animation effects</a> may also be configured to run iterations in
alternative directions using direction control.
For this purpose, <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-96">animation effects</a> have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="playback direction" data-noexport="" id="playback-direction">playback
direction</dfn> parameter which takes one of the following values:</p>
   <ul>
    <li data-md="">
     <p>normal,</p>
    <li data-md="">
     <p>reverse,</p>
    <li data-md="">
     <p>alternate, or</p>
    <li data-md="">
     <p>alternate-reverse.</p>
   </ul>
   <p>The semantics of these values are incorporated into the calculation of
the <a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress-3">directed progress</a> which follows.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>A non-normative definition of these values is as follows:</p>
    <dl>
     <dt data-md="">
      <p>normal</p>
     <dd data-md="">
      <p>All iterations are played as specified.</p>
     <dt data-md="">
      <p>reverse</p>
     <dd data-md="">
      <p>All iterations are played in the reverse direction from the way
they are specified.</p>
     <dt data-md="">
      <p>alternate</p>
     <dd data-md="">
      <p>Even iterations are played as specified, odd iterations are played
in the reverse direction from the way they are specified.</p>
     <dt data-md="">
      <p>alternate-reverse</p>
     <dd data-md="">
      <p>Even iterations are played in the reverse direction from the way
they are specified, odd iterations are played as specified.</p>
    </dl>
   </div>
   <h4 class="heading settled" data-level="3.11.1" id="calculating-the-directed-progress"><span class="secno">3.11.1. </span><span class="content">Calculating the directed progress</span><a class="self-link" href="#calculating-the-directed-progress"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="directed-progress">directed progress</dfn> is calculated from the <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-4">simple iteration progress</a> using the following steps:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-5">simple iteration progress</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-91">unresolved</a>, return <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-92">unresolved</a>.</p>
    <li data-md="">
     <p>Calculate the <var>current direction</var> using the first
matching condition from the following list:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-3">playback direction</a> is <code>normal</code>,</p>
       <dd data-md="">
        <p>Let the <var>current direction</var> be forwards.</p>
       <dt data-md="">
        <p>If <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-4">playback direction</a> is <code>reverse</code>,</p>
       <dd data-md="">
        <p>Let the <var>current direction</var> be reverse.</p>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <ol>
         <li data-md="">
          <p>Let <var>d</var> be the <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-2">current iteration</a>.</p>
         <li data-md="">
          <p>If <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-5">playback direction</a> is <code>alternate-reverse</code> increment <var>d</var> by 1.</p>
         <li data-md="">
          <p>If <code><var>d</var> % 2 == 0</code>, let the <var>current direction</var> be forwards, otherwise let
  the <var>current direction</var> be reverse.
  If <var>d</var> is infinity, let the <var>current direction</var> be forwards.</p>
        </ol>
      </dl>
     </div>
    <li data-md="">
     <p>If the <var>current direction</var> is forwards then return
the <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-6">simple iteration progress</a>.</p>
     <p>Otherwise, return <code>1.0 - <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress-7">simple iteration progress</a></code>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.12" id="time-transformations"><span class="secno">3.12. </span><span class="content">Time transformations</span><a class="self-link" href="#time-transformations"></a></h3>
   <h4 class="heading settled" data-level="3.12.1" id="scaling-the-time"><span class="secno">3.12.1. </span><span class="content">Scaling the time</span><a class="self-link" href="#scaling-the-time"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>It is often desirable to control the rate at which an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-97">animation
effect</a> progresses.
For example, easing the rate of animation can create a sense of
momentum and produce a more natural effect.
Conversely, in other situations such as when modeling a discrete
change, a smooth transition is undesirable and instead it is necessary
for the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-98">animation effect</a> to progress in a series of distinct
steps.</p>
    <p>For such situations Web Animations provides <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-3">timing functions</a> that scale the progress of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-99">animation effect</a>.</p>
    <p><a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-4">Timing functions</a> take an input progress value and produce
a scaled output progress value.</p>
    <figure>
      <img alt="Example of a timing function that produces an ease-in effect." src="img/timing-function-example.svg" width="350"> 
     <figcaption> Example of a timing function that produces an ease-in effect.
    Given an input progress of 0.7, the timing function scales the
    value to produce an output progress of 0.52.<br> By applying this timing function, time will appear to progress more
    slowly at first but then gradually progress more quickly. </figcaption>
    </figure>
    <p><a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-5">Timing functions</a> are applied to an iteration of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-100">animation
effect</a>.</p>
   </div>
   <h4 class="heading settled" data-level="3.12.2" id="timing-functions"><span class="secno">3.12.2. </span><span class="content">Timing functions</span><a class="self-link" href="#timing-functions"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="timing-function">timing function</dfn> takes an input progress value in the range
[0, 1] and produces an output progress value whose range is unbounded
(i.e. positive and negative infinity are permitted).</p>
   <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-101">Animation effects</a> have one <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-6">timing function</a> associated with
them.
The default <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-7">timing function</a> is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="linear timing function" data-noexport="" id="linear-timing-function">linear timing
function</dfn> whose output is identical to its input.
The <a data-link-type="dfn" href="#linear-timing-function" id="ref-for-linear-timing-function-1">linear timing function</a> can be represented by the string
“linear”.</p>
   <p>The range of timing functions that may be applied to a given <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-102">animation effects</a> depends on the type of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-103">animation effects</a>.</p>
   <div class="issue" id="issue-01e7fd29">
    <a class="self-link" href="#issue-01e7fd29"></a> Currently, the set of <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-8">timing functions</a> allowed on
a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-7">group effect</a> is not restricted.
This has raised concern about complexity of implementation and also
complexity of behavior with regards to fill modes.
As a result, allowing the full set of timing functions on group
effects is considered <strong>at risk</strong>. 
    <p>Alternatives are to either restrict timing functions on group
effects to the <a data-link-type="dfn" href="#linear-timing-function" id="ref-for-linear-timing-function-2">linear timing function</a> or to a set of
“simple” timing functions that have properties that
alleviate some of the concerns with the more complex timing
functions.</p>
    <p>See <a href="http://lists.w3.org/Archives/Public/public-fx/2013JulSep/0076.html">section
2 of the discussion from August 2013</a>.</p>
   </div>
   <p></p>
   <h4 class="heading settled" data-level="3.12.3" id="scaling-using-a-cubic-bezier-curve"><span class="secno">3.12.3. </span><span class="content">Scaling using a cubic Bézier curve</span><a class="self-link" href="#scaling-using-a-cubic-bezier-curve"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>A common method of producing easing effects is to use a cubic Bézier
curve to scale the time.
The endpoints of the curve are fixed at (0, 0) and (1, 1) while two
control points <var>P1</var> and <var>P2</var> define the shape of
the curve.
Provided the <var>x</var> values of <var>P1</var> and <var>P2</var> lie within the range [0, 1] such a curve produces a function that is
used to map input times (the <var>x</var> values) onto output times
(the <var>y</var> values).
This arrangement is illustrated below.</p>
    <figure>
      <img alt="A cubic Bezier curve used as a timing function." src="img/cubic-bezier-timing-curve.svg" width="500"> 
     <figcaption> A cubic Bézier curve used as a timing function.<br> The shape of the curve is determined by the location of the control
    points <var>P1</var> and <var>P2</var>.<br> Input progress values serve as <var>x</var> values of the curve,
    whilst the <var>y</var> values are the output progress values. </figcaption>
    </figure>
    <p>Some example cubic Bézier timing functions are illustrated below.</p>
    <figure>
      <img alt="The timing functions produced by keyword values." src="img/curve-keywords.svg" width="500"> 
     <figcaption> The timing functions produced by each of the keyword values
    associated with cubic Bézier timing functions accepted by the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-easing" id="ref-for-dom-animationeffecttiming-easing-1">easing</a></code> member of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-1">AnimationEffectTiming</a></code> interface member from the <a href="#programming-interface">programming
    interface</a>. </figcaption>
    </figure>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="cubic-bzier-timing-function">cubic Bézier timing function</dfn> is a type of <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-9">timing
function</a> defined by four real numbers that specify the two control
points, <var>P1</var> and <var>P2</var>, of a cubic Bézier curve whose
end points are fixed at (0, 0) and (1, 1).
The x coordinates of <var>P1</var> and <var>P2</var> are
restricted to the range [0, 1].</p>
   <p>The evaluation of this curve is covered in many sources such as <a data-link-type="biblio" href="#biblio-fund-comp-graphics">[FUND-COMP-GRAPHICS]</a>.</p>
   <p>A <a data-link-type="dfn" href="#cubic-bzier-timing-function" id="ref-for-cubic-bzier-timing-function-1">cubic Bézier timing function</a> may be specified as a string
using the following syntax (using notation from <a data-link-type="biblio" href="#biblio-css3val">[CSS3VAL]</a>):</p>
   <blockquote>
    <div class="production"><dfn class="dfn-paneled css" data-dfn-type="type" data-export="" id="typedef-cubic-bezier-timing-function">&lt;cubic-bezier-timing-function></dfn> =
    ease | ease-in | ease-out | ease-in-out | <span class="atom">cubic-bezier(&lt;number>, &lt;number>,
      &lt;number>, &lt;number>)</span></div>
   </blockquote>
   <p>The meaning of each value is as follows:</p>
   <dl>
    <dt data-md="">
     <p>ease</p>
    <dd data-md="">
     <p>Equivalent to cubic-bezier(0.25, 0.1, 0.25, 1).</p>
    <dt data-md="">
     <p>ease-in</p>
    <dd data-md="">
     <p>Equivalent to cubic-bezier(0.42, 0, 1, 1).</p>
    <dt data-md="">
     <p>ease-out</p>
    <dd data-md="">
     <p>Equivalent to cubic-bezier(0, 0, 0.58, 1).</p>
    <dt data-md="">
     <p>ease-in-out</p>
    <dd data-md="">
     <p>Equivalent to cubic-bezier(0.42, 0, 0.58, 1).</p>
    <dt data-md="">
     <p>cubic-bezier(&lt;number>, &lt;number>, &lt;number>, &lt;number>)</p>
    <dd data-md="">
     <p>Specifies a <a data-link-type="dfn" href="#cubic-bzier-timing-function" id="ref-for-cubic-bzier-timing-function-2">cubic Bézier timing function</a>.
The four numbers specify points <var>P1</var> and <var>P2</var> of
the curve as (x1, y1, x2, y2).
Both x values must be in the range [0, 1] or the definition is
invalid.</p>
   </dl>
   <div class="issue" id="issue-9e5dcac9">
    <a class="self-link" href="#issue-9e5dcac9"></a> It has been proposed to extend <code>cubic-bezier</code> to allow
multiple segments, using syntax such as the following: 
<pre><code>cubic-bezier( [ &lt;number>{6} ; ]* &lt;number>{4} )</code>
</pre>
    <p>(i.e. the curve starts at (0, 0); each segment is defined by six
numbers where the start point is the end of the previous segment and
the numbers define the two control points and the end point. The
last segment is defined by four numbers since the end point is fixed
at (1, 1).)</p>
    <p>This would provide a simple and compact syntax for tools trying to
map arbitrary curves (e.g. bounce functions) to timing functions.</p>
   </div>
   <h4 class="heading settled" data-level="3.12.4" id="timing-in-discrete-steps"><span class="secno">3.12.4. </span><span class="content">Timing in discrete steps</span><a class="self-link" href="#timing-in-discrete-steps"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> It is possible to scale an animation effect’s timing so that the group
effect occurs in a series of discrete steps using a stepping function. 
    <p>Some example step timing functions are illustrated below.</p>
    <figure>
      <img alt="Example step timing functions." src="img/step-timing-func-examples.svg" width="700"> 
     <figcaption> Example step timing functions.
    In each case the domain is the input progress whilst the range
    represents the output progress produced by the step function.<br> The first row shows the function for each transition point when only
    one step is specified whilst the second row shows the same for three
    steps. </figcaption>
    </figure>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="step-timing-function">step timing function</dfn> is a type of <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-10">timing function</a> that divides the input time into a specified number of intervals that
are equal in duration.
The output time, starting at zero, rises by an amount equal to the
interval duration once during each interval at the transition point
which may be either the start, midpoint, or end of the interval.</p>
   <p>In keeping with Web Animations' model of endpoint exclusive
interval timing (see <a href="#interval-timing">§3.8.4 Interval timing</a>), the output time at the transition
point is the time <em>after</em> applying the increase (i.e. the top of the
step) with the following exception.</p>
   <p>When a transition point coincides with the end of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-24">active
interval</a> extra care must be taken to produce the correct result
when performing a <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-12">fill</a>.
To achieve this, when a <a data-link-type="dfn" href="#step-timing-function" id="ref-for-step-timing-function-1">step timing function</a> is
applied to an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-104">animation effect</a> or applied to an <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-1">keyframe</a> associated with a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-3">keyframe effect</a>, an additional <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="before-flag">before flag</dfn> is passed.
The value of the <a data-link-type="dfn" href="#before-flag" id="ref-for-before-flag-1">before flag</a> is determined as follows:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#active-time" id="ref-for-active-time-19">active time</a> of the animation effect is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-93">unresolved</a>, the <a data-link-type="dfn" href="#before-flag" id="ref-for-before-flag-2">before flag</a> is not set and these
steps should be aborted.</p>
    <li data-md="">
     <p>Determine the <var>current direction</var> using the procedure
defined in <a href="#calculating-the-directed-progress">§3.11.1 Calculating the directed progress</a>.</p>
    <li data-md="">
     <p>If <em>either</em> the <var>current direction</var> is <span class="prop-value">forwards</span> or the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-19">animation effect
playback rate</a> ≥ 0 (but <em>not</em> when both conditions
are true),
let <var>going forwards</var> be true, otherwise it is false.</p>
    <li data-md="">
     <p>The <a data-link-type="dfn" href="#before-flag" id="ref-for-before-flag-3">before flag</a> is set if the animation effect is in the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-12">before phase</a> and <var>going forwards</var> is true;
or if the animation effect is in the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-11">after phase</a> and <var>going forwards</var> is false.</p>
   </ol>
   <p>When a step timing function is evaluated at a transition point, if
the <a data-link-type="dfn" href="#before-flag" id="ref-for-before-flag-4">before flag</a> is set the result is the value <em>before</em> applying the increase.</p>
   <p>A <a data-link-type="dfn" href="#step-timing-function" id="ref-for-step-timing-function-2">step timing function</a> may be specified as a string
using the following syntax:</p>
   <blockquote>
    <div class="production"><dfn class="dfn-paneled css" data-dfn-type="type" data-export="" id="typedef-step-timing-function">&lt;step-timing-function></dfn> =
    step-start | step-middle | step-end | <span class="atom">steps(&lt;integer>[,
                       [ start | middle | end ] ]?)</span></div>
   </blockquote>
   <p class="issue" id="issue-fc1dd2fc"><a class="self-link" href="#issue-fc1dd2fc"></a> <code>step-middle</code> and the <code>middle</code> keyword will
likely be removed in favor of a <code>frames()</code> timing function.</p>
   <p>The meaning of each value is as follows:</p>
   <dl>
    <dt data-md="">
     <p>step-start</p>
    <dd data-md="">
     <p>Equivalent to steps(1, start);</p>
    <dt data-md="">
     <p>step-middle</p>
    <dd data-md="">
     <p>Equivalent to steps(1, middle);</p>
    <dt data-md="">
     <p>step-end</p>
    <dd data-md="">
     <p>Equivalent to steps(1, end);</p>
    <dt data-md="">
     <p>steps(&lt;integer>[, [ start | middle | end ] ]?)</p>
    <dd data-md="">
     <p>Specifies a <a data-link-type="dfn" href="#step-timing-function" id="ref-for-step-timing-function-3">step timing function</a>.
The first parameter specifies the number of intervals in the
function.
It must be a positive integer (greater than 0).
The second parameter, which is optional, specifies the point at
which the change of values occur within the interval.
If the second parameter is omitted, it is given the value <span class="prop-value">end</span>.</p>
   </dl>
   <h4 class="heading settled" data-level="3.12.5" id="calculating-the-transformed-progress"><span class="secno">3.12.5. </span><span class="content">Calculating the transformed progress</span><a class="self-link" href="#calculating-the-transformed-progress"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="transformed-progress">transformed progress</dfn> is calculated from the <a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress-4">directed progress</a> using the following steps:</p>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress-5">directed progress</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-94">unresolved</a>,
return <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-95">unresolved</a>.</p>
    <li data-md="">
     <p>Return the result of evaluating the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-105">animation effect</a>’s <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-11">timing
function</a> passing <a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress-6">directed progress</a> as the input progress.</p>
   </ol>
   <h4 class="heading settled" data-level="3.12.6" id="calculating-the-transformed-time"><span class="secno">3.12.6. </span><span class="content">Calculating the transformed time</span><a class="self-link" href="#calculating-the-transformed-time"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="transformed-time">transformed time</dfn> of an animation effect is simply the <a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress-3">transformed progress</a> multiplied by the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-17">iteration duration</a>.</p>
   <p>If the <a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress-4">transformed progress</a> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-96">unresolved</a>, then the <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-3">transformed
time</a> is also <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-97">unresolved</a>.</p>
   <p>If the <a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress-5">transformed progress</a> is zero and the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-18">iteration duration</a> is infinity, then the <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-4">transformed time</a> is zero.</p>
   <h3 class="heading settled" data-level="3.13" id="grouping-and-synchronization"><span class="secno">3.13. </span><span class="content">Grouping and synchronization</span><a class="self-link" href="#grouping-and-synchronization"></a></h3>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>While it is possible to set the timing properties of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-106">animation
effects</a> individually, it is often useful to synchronize <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-107">animation
effects</a> so that they share common timing properties and maintain
their temporal relationship.  This is achieved using an <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-8">group
effect</a>.</p>
    <p>A simple example is illustrated below.</p>
    <figure>
      <img alt="Using groups to share common timing properties." src="img/grouping-delay.svg" width="800"> 
     <figcaption> Using groups to share common timing properties.<br> (a) Shows setting a delay of 5 seconds on individual animations.<br> (b) Produces the same effect by setting the delay on the group. </figcaption>
    </figure>
    <p>When a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-9">group effect</a> is <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-6">directly associated with
an animation</a>, the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-108">animation effect</a> associated with the <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-10">group effect</a> can be seeked, paused, and stopped as a unit.</p>
    <p></p>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="group-effect">group effect</dfn> is a type of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-109">animation effect</a> that
contains an ordered sequence of zero or more <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-110">animation effects</a> known as <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="child effect" data-noexport="" id="child-effect">child effects</dfn>.</p>
   <p>At a given moment, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-111">animation effect</a> may be a <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-1">child effect</a> of at most one <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-11">group effect</a> known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="parent-group">parent group</dfn>.
The <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-20">parent group</a> cannot be the same <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-112">animation
effect</a> as the <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-2">child effect</a> itself.</p>
   <p>By nesting <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-12">group effects</a> it is possible to create hierarchical
tree structures.
The following terms are used to describe the parts and properties of
such structures and are defined in <a data-link-type="biblio" href="#biblio-dom">[DOM]</a>:</p>
   <ul>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="tree order" data-noexport="" id="tree-order"><a href="http://www.w3.org/TR/dom/#concept-tree-order"> tree order</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="root" data-noexport="" id="root"><a href="http://www.w3.org/TR/dom/#concept-tree-root"> root</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="ancestor" data-noexport="" id="ancestor"><a href="http://www.w3.org/TR/dom/#concept-tree-ancestor"> ancestor</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="descendant" data-noexport="" id="descendant"><a href="http://www.w3.org/TR/dom/#concept-tree-descendant"> descendant</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="inclusive ancestor" data-noexport="" id="inclusive-ancestor"><a href="http://www.w3.org/TR/dom/#concept-tree-inclusive-ancestor"> inclusive ancestor</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="inclusive descendant" data-noexport="" id="inclusive-descendant"><a href="http://www.w3.org/TR/dom/#concept-tree-inclusive-descendant"> inclusive descendant</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="next sibling" data-noexport="" id="next-sibling"><a href="http://www.w3.org/TR/dom/#concept-tree-next-sibling"> next sibling</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="previous sibling" data-noexport="" id="previous-sibling"><a href="http://www.w3.org/TR/dom/#concept-tree-previous-sibling"> previous sibling</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="first child" data-noexport="" id="first-child"><a href="http://www.w3.org/TR/dom/#concept-tree-first-child"> first child</a></dfn></p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="last child" data-noexport="" id="last-child"><a href="http://www.w3.org/TR/dom/#concept-tree-last-child"> last child</a></dfn></p>
   </ul>
   <p class="note" role="note">Note: in applying these definitions to <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-113">animation effects</a>, the
    term <em>parent</em> refers exclusively to a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-21">parent group</a> and does <em>not</em> include the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-48">animation</a> which with
    an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-114">animation effect</a> may be <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-7">directly associated</a> despite the fact that conceptually the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-49">animation</a> acts as a parent
    time source.</p>
   <p>The temporal relationship between a <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-3">child effect</a> and its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-22">parent group</a> is incorporated in the definition of <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-11">inherited time</a> (see <a href="#local-time-and-inherited-time">§3.6.4 Local time and inherited time</a>).</p>
   <h4 class="heading settled" data-level="3.13.1" id="relationship-of-group-time-to-child-time"><span class="secno">3.13.1. </span><span class="content">Relationship of group time to child time</span><a class="self-link" href="#relationship-of-group-time-to-child-time"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>The timing of the children of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-13">group effect</a> is based on
the timing of the group.
Specifically, times for the children are based on the parent’s <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-5">transformed time</a>.
With regards to repetition, this means the children operate <em>inside</em> an iteration of the parent.</p>
    <p>For example, if a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-14">group effect</a> has an <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-16">iteration
count</a> of 2, then the children of of the group will all play twice
since they effectively play <em>inside</em> the group’s iterations.</p>
    <figure>
      <img alt="The effect of multiple iterations on the children of a group." src="img/grouping-repetition.svg" width="600"> 
     <figcaption> Since children of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-15">group effect</a> base their timing on the
    group’s <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-6">transformed time</a>, when the group repeats, the
    children play again. </figcaption>
    </figure>
    <p>Note that even in this case, the child <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-115">animation effects</a> still
have only <em>one</em> <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-25">active interval</a>.
However, as a result of the parent’s timing, the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-26">active
interval</a> is played twice.</p>
    <p>If an <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-17">iteration count</a> is specified for the children of a group
as well as for the group itself, the effect is as if the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-18">iteration
count</a> of the group was multiplied with the <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-19">iteration count</a> of the children.</p>
    <figure>
      <img alt="Iteration counts are multiplicative." src="img/grouping-repetition-and-animation-repetition.svg" width="600"> 
     <figcaption> Specifying an <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-20">iteration count</a> of 2 on a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-16">group effect</a> and an <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-21">iteration count</a> of 3 on one of its children results in
    that child playing 6 times. </figcaption>
    </figure>
    <p>A further result of the children of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-17">group effect</a> basing
their timing on the group’s <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-7">transformed time</a> is that they
cannot animate outside of the group’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-27">active interval</a>.
This is because the <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-8">transformed time</a> of a group will not
change outside its <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-28">active interval</a>.
This allows groups to <em>clip</em> the playback of their children.</p>
    <figure>
      <img alt="Groups clip the active interval of contained children." src="img/grouping-clipping.svg" width="600"> 
     <figcaption> In the first instance, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-116">animation effect</a> has a negative delay
    and an infinite <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-22">iteration count</a>.<br> However, when a similar <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-117">animation effect</a> is placed inside
    a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-18">group effect</a> with a specified <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-19">iteration duration</a> it has the effect of clipping the child <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-118">animation effect</a>’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-29">active interval</a>. </figcaption>
    </figure>
    <p>Some further consequences of <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-19">group effect</a> children basing
their timing on their parent group’s <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-9">transformed time</a> are:</p>
    <ul>
     <li data-md="">
      <p>Setting the <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-20">playback
rate</a> of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-20">group effect</a> will speed up or slow down all
children.</p>
     <li data-md="">
      <p>Changing the <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-6">playback direction</a> of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-21">group effect</a> will change the direction of all children.</p>
     <li data-md="">
      <p>Applying a <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-12">timing function</a> to a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-22">group effect</a> will
affect the progress of all children.</p>
    </ul>
   </div>
   <h4 class="heading settled" data-level="3.13.2" id="the-start-time-of-children-of-a-group-effect"><span class="secno">3.13.2. </span><span class="content">The start time of
  children of a group effect</span><a class="self-link" href="#the-start-time-of-children-of-a-group-effect"></a></h4>
   <p>The <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-19">start time</a> of a <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-4">child
effect</a> of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-23">group effect</a> is zero.</p>
   <p>Note that specific types of <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-24">group effects</a> may override
this definition to provide other kinds of synchronization behavior.</p>
   <h4 class="heading settled" data-level="3.13.3" id="the-intrinsic-iteration-duration-of-a-group-effect"><span class="secno">3.13.3. </span><span class="content">The intrinsic
  iteration duration of a group effect</span><a class="self-link" href="#the-intrinsic-iteration-duration-of-a-group-effect"></a></h4>
   <p>The <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-3">intrinsic iteration duration</a> of a <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-25">group
effect</a> is based on the time when the last <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-5">child effect</a> completes
its <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-30">active interval</a> and depends on the
number of <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-6">child effects</a> as follows.</p>
   <div class="switch">
    <dl>
     <dt data-md="">
      <p>If the group has no <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-7">child effects</a>,</p>
     <dd data-md="">
      <p>the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-4">intrinsic iteration duration</a> is zero.</p>
     <dt data-md="">
      <p>Otherwise,</p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>Let <var>maximum end time</var> be the maximum value
after calculating the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-8">end time</a> of each <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-8">child
effect</a> in the group.</p>
       <li data-md="">
        <p>The <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-5">intrinsic iteration duration</a> is the result of
evaluating <code>max(0, <var>maximum end
time</var>)</code>.</p>
      </ol>
    </dl>
   </div>
   <p>This definition of the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-6">intrinsic iteration duration</a> may be
overridden by specific types of <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-26">group effects</a>.</p>
   <h4 class="heading settled" data-level="3.13.4" id="sequence-effects"><span class="secno">3.13.4. </span><span class="content">Sequence effects</span><a class="self-link" href="#sequence-effects"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>Specific types of <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-27">group effects</a> can be used to provide
different kinds of synchronization behavior for their children.
This specification defines one additional type of <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-28">group
effect</a>: a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-6">sequence effect</a>. <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-7">Sequence effects</a> arrange the start times of their
children so that they run one at a time, in turn.</p>
    <p>Compare the two arrangements illustrated below:</p>
    <figure>
      <img alt="Group effects and sequence effects." src="img/grouping-types.svg" width="600"> 
     <figcaption> Group effects and sequence effects.<br> (a) is a regular <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-29">group effect</a> where all the children run
        simultaneously.<br> (b) is a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-8">sequence effect</a> where the children run in turn. </figcaption>
    </figure>
    <p>Since <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-30">group effects</a> can also contain other <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-31">group
effects</a>, complex synchronization is possible by combining
different types of groups as illustrated below.</p>
    <figure>
      <img alt="Nesting of group effects." src="img/grouping-nesting.svg" width="600"> 
     <figcaption> A <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-9">sequence effect</a> that contains a regular <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-32">group
    effect</a> as a child.<br> The <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-33">group effect</a> waits for the previous child of the <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-10">sequence effect</a> to finish, and then the children of the <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-34">group effect</a> play simultaneously.
    After they have finished the next child of the <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-11">sequence
    effect</a> plays. </figcaption>
    </figure>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sequence-effect">sequence effect</dfn> is a type of <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-35">group effect</a> that schedules its <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-9">child effects</a> such that they play in
turn following their order in the group.
This sequencing is achieved by adjusting the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-20">start time</a> of each <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-10">child
effect</a> in the group.</p>
   <h5 class="heading settled" data-level="3.13.4.1" id="the-start-time-of-children-of-a-sequence-effect"><span class="secno">3.13.4.1. </span><span class="content">The start time of
  children of a sequence effect</span><a class="self-link" href="#the-start-time-of-children-of-a-sequence-effect"></a></h5>
   <p>The <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-21">start time</a> of
a <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-11">child effect</a> of a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-12">sequence effect</a> is the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-9">end time</a> of the child’s <a data-link-type="dfn" href="#previous-sibling" id="ref-for-previous-sibling-1">previous sibling</a>.
If the child has no <a data-link-type="dfn" href="#previous-sibling" id="ref-for-previous-sibling-2">previous sibling</a> the start time is zero.</p>
   <div class="note" role="note">
     When the <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-21">active duration</a> is positive infinity the behavior
for calculating the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-10">end time</a> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-119">animation effect</a> and the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-22">start time</a> of
subsequent children follows the usual behavior defined by IEEE
754-2008.
As a result, if any of the children of a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-13">sequence
effect</a> has an infinite <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-22">active duration</a>, any children
that occur later in the sequence will not play. 
    <p>Similarly, the above definition does not restrict <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-23">start times</a> to positive
values and hence some children may not play due to a negative <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-22">start delay</a> on children that occur earlier in the group
since their <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-31">active interval</a> may end before the group’s <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-24">start time</a>.</p>
   </div>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>Because the start of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-32">active interval</a> is based on the
sum of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-120">animation effect</a>’s <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-25">start time</a> <em>and</em> <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-23">start delay</a>, the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-33">active intervals</a> of
children of a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-14">sequence effect</a> need not run in strict
sequence but can be shifted back and forth by using the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-24">start
delay</a> as shown in the following diagram.</p>
    <figure>
      <img alt="Using negative start delays to overlap children of seq
        groups" src="img/sequence-groups-and-start-delays.svg" width="600"> 
     <figcaption> Example of using the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-25">start delay</a> on children of a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-15">sequence effect</a> to shift their timing so that they
    overlap (a negative delay) or are spaced apart (a positive delay). </figcaption>
    </figure>
    <p>A negative <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-26">start delay</a> can be used to cause the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-34">active
interval</a> of two children to overlap.
Note that the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-27">start delay</a> affects the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-26">start time</a> of subsequent
children in the group.</p>
   </div>
   <h5 class="heading settled" data-level="3.13.4.2" id="the-intrinsic-iteration-duration-of-a-sequence-effect"><span class="secno">3.13.4.2. </span><span class="content">The intrinsic
  iteration duration of a sequence effect</span><a class="self-link" href="#the-intrinsic-iteration-duration-of-a-sequence-effect"></a></h5>
   <p>The <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-7">intrinsic iteration duration</a> of a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-16">sequence
effect</a> is equivalent to the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-27">start time</a> of a hypothetical <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-12">child effect</a> appended to the group’s children
calculated according to the definition in <a href="#the-start-time-of-children-of-a-sequence-effect">§3.13.4.1 The start time of
  children of a sequence effect</a> unless that produces a negative value, in
which case the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-8">intrinsic iteration duration</a> is zero.</p>
   <p>As a result, if the <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-17">sequence effect</a> has no <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-13">child
effects</a> the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-9">intrinsic iteration duration</a> will be
zero.</p>
   <h4 class="heading settled" data-level="3.13.5" id="calculating-the-iteration-progress"><span class="secno">3.13.5. </span><span class="content">Calculating the iteration
  progress</span><a class="self-link" href="#calculating-the-iteration-progress"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="iteration-progress">iteration progress</dfn> of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-121">animation effect</a> is simply
its <a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress-6">transformed progress</a>.</p>
   <h2 class="heading settled" data-level="4" id="animation-model"><span class="secno">4. </span><span class="content">Animation model</span><a class="self-link" href="#animation-model"></a></h2>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>For some kinds of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-122">animation effects</a>, the Web Animations <em>animation
model</em> takes the <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-11">iteration progress</a> and <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-3">current iteration</a> values produced by the <em>timing model</em> and uses them to calculate
a corresponding output.</p>
    <p>The output of each such animation effect is then combined with
that of others using an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-1">effect stack</a> before being
applied to the target properties (see <a href="#combining-effects">§4.5 Combining effects</a>).</p>
   </div>
   <h3 class="heading settled" data-level="4.1" id="introduction-to-the-animation-model"><span class="secno">4.1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction-to-the-animation-model"></a></h3>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-123">animation effect</a> may have zero or more associated properties that
it affects in response to changes to its timing output. These properties
are referred to as the effect’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="target property" data-noexport="" id="target-property">target
properties</dfn>.</p>
   <p>Given an <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-12">iteration progress</a>, a <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-4">current iteration</a>, and an <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-1">underlying value</a>, an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-124">animation effect</a> produces
an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="effect-value">effect value</dfn> for each <a data-link-type="dfn" href="#concept-animatable" id="ref-for-concept-animatable-1">animatable</a> <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-1">target property</a> by applying the procedures from the <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-1">animation type</a> appropriate to the
property.</p>
   <h3 class="heading settled" data-level="4.2" id="procedures-for-animating-properties"><span class="secno">4.2. </span><span class="content">Procedures for animating properties</span><a class="self-link" href="#procedures-for-animating-properties"></a></h3>
   <p>Unless specifically defined otherwise, all CSS properties are considered <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="concept-animatable">animatable</dfn>.
In order to animate a property, the following procedures must be defined.</p>
   <ul>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation interpolation" data-noexport="" id="animation-interpolation">interpolation</dfn> —
given two property values <var>V</var><sub>start</sub> and <var>V</var><sub>end</sub>, produces an intermediate value <var>V</var><sub>result</sub> at a distance of <var>p</var> along the
interval between <var>V</var><sub>start</sub> and <var>V</var><sub>end</sub> such that <var>p</var> = 0 produces <var>V</var><sub>start</sub> and <var>p</var> = 1 produces <var>V</var><sub>end</sub>.
The range of <var>p</var> is (−∞, ∞) due to the
effect of <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-13">timing functions</a>.
As a result, this procedure must also define extrapolation
behavior for <var>p</var> outside [0, 1].</p>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation addition" data-noexport="" id="animation-addition">addition</dfn> — given two
property values <var>V</var><sub>a</sub> and <var>V</var><sub>b</sub>, returns the
sum of the two properties, <var>V</var><sub>result</sub>.
For addition that is not commutative (for example, matrix
multiplication) <var>V</var><sub>a</sub> represents the first term
of the operation and <var>V</var><sub>b</sub> represents the
second.</p>
     <div class="informative-bg">
      <em>This section is non-normative</em> 
      <p>While <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-1">addition</a> can often be
expressed in terms of the same weighted sum function used to
define <a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-1">interpolation</a>,
this is not always the case.
For example, interpolation of transform matrices involves
decomposing and interpolating the matrix components whilst
addition relies on matrix multiplication.</p>
     </div>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation accumulation" data-noexport="" id="animation-accumulation">accumulation</dfn> —
given two property values <var>V</var><sub>a</sub> and <var>V</var><sub>b</sub>, returns the
result, <var>V</var><sub>result</sub>, of combining
the two operands such that <var>V</var><sub>b</sub> is treated as
a <em>delta</em> from <var>V</var><sub>a</sub>.
For accumulation that is not commutative (for example,
accumulation of mismatched transform lists) <var>V</var><sub>a</sub> represents the first term of the
operation and <var>V</var><sub>b</sub> represents the second.</p>
     <div class="informative-bg">
      <em>This section is non-normative</em> 
      <p>For many types of animation such as numbers or lengths, <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-1">accumulation</a> is defined to
be identical to <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-2">addition</a>.</p>
      <p>A common case where the definitions differ is for list-based
types where <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-3">addition</a> may be
defined as appending to a list
whilst <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-2">accumulation</a> may
be defined as component-based addition.
For example, the filter list values "blur(2)" and
"blur(3)", when <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-4">added</a> together may produce "blur(2) blur(3)", but when <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-3">accumulated</a>,
may produce "blur(5)".</p>
     </div>
    <li data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="distance-computation">distance computation</dfn> — given two property
values <var>V</var><sub>start</sub> and <var>V</var><sub>end</sub>, calculates some notion of scalar
distance between the values, <var>distance</var>.</p>
   </ul>
   <p>Note that the above procedures apply to CSS <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-4/#computed-value">computed
property values</a> (see <a href="#calculating-computed-keyframes">§4.4.3 Calculating computed keyframes</a>). As a result, it
is not necessary to define, for example,  how to add a length value of "15pt"
with "5em" since such values will be resolved to pixel values before being
passed to any of the above procedures.</p>
   <h3 class="heading settled" data-level="4.3" id="animation-types"><span class="secno">4.3. </span><span class="content">Animation types</span><a class="self-link" href="#animation-types"></a></h3>
   <p>The specific procedures used for animating a given property
are referred to as the property’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="animation-type">animation type</dfn>.</p>
   <p>The <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-2">animation type</a> of each CSS property is defined by the
"Animatable:" line in the summary of the property’s definition or in <a data-link-type="biblio" href="#biblio-css3-transitions">[CSS3-TRANSITIONS]</a> for properties that lack a such a line.
For <a data-link-type="dfn" href="https://drafts.csswg.org/css-variables-1/#custom-property">custom properties</a> registered using the <code class="idl"><a data-link-type="idl" href="https://drafts.css-houdini.org/css-properties-values-api-1/#dom-css-registerproperty">registerProperty()</a></code> method for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object">current global object</a>, the <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-3">animation type</a> is
derived from the type used to define the property’s <code class="idl"><a data-link-type="idl" href="https://drafts.css-houdini.org/css-properties-values-api-1/#dom-propertydescriptor-syntax">syntax</a></code>.
Where there is no <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-4">animation type</a> that corresponds to the property’s
specified <code class="idl"><a data-link-type="idl" href="https://drafts.css-houdini.org/css-properties-values-api-1/#dom-propertydescriptor-syntax">syntax</a></code> (e.g. when the syntax is "*") the <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-5">animation type</a> is <a data-link-type="dfn" href="#discrete-animation-type" id="ref-for-discrete-animation-type-1">discrete</a>.
The <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-6">animation type</a> of all other custom properties is <a data-link-type="dfn" href="#discrete-animation-type" id="ref-for-discrete-animation-type-2">discrete</a>.</p>
   <p class="issue" id="issue-8c5dcd6e"><a class="self-link" href="#issue-8c5dcd6e"></a> The above doesn’t explain the animation type to use for of syntax
such as "&lt;length>+". We will fix this once the definition of animation
types has moved to CSS Values and Units where we should define generic handling
for list types etc.</p>
   <p>Following is a series of pre-defined <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-7">animation types</a>. <a data-link-type="biblio" href="#biblio-css3-transitions">[CSS3-TRANSITIONS]</a> provides further CSS-specific <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-8">animation
types</a>.</p>
   <p>For <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-9">animation types</a> that do not define a specific procedure
for <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-5">addition</a> or which are defined as <dfn data-dfn-type="dfn" data-noexport="" id="not-additive">not additive<a class="self-link" href="#not-additive"></a></dfn>, the <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-6">addition procedure</a> is simply <var>V</var><sub>res</sub> = <var>V</var><sub>b</sub>.</p>
   <p>For <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-10">animation types</a> that do not define a specific procedure
for <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-4">accumulation</a>, the <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-5">accumulation procedure</a> is identical
to the <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-7">addition procedure</a> for that
type.</p>
   <p>For <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-11">animation types</a> that do not define a specific procedure
for <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-1">distance computation</a> or which are defined as <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="not paceable" data-noexport="" id="not-paceable">not
paceable</dfn>, the <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-2">distance computation</a> procedure is simply <var>distance</var> = 0.</p>
   <h4 class="heading settled" data-level="4.3.1" id="not-animatable-section"><span class="secno">4.3.1. </span><span class="content">Not animatable</span><a class="self-link" href="#not-animatable-section"></a></h4>
   <p>Some properties are specifically defined as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="concept-not-animatable">not animatable</dfn>.
For example, properties defining animation parameters are <a data-link-type="dfn" href="#concept-not-animatable" id="ref-for-concept-not-animatable-1">not animatable</a> since doing so would create complex recursive behavior.</p>
   <p>Unlike other <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-12">animation types</a>, no procedures for <a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-2">interpolation</a>, <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-8">addition</a> and <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-3">distance
computation</a> are defined for properties whose <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-13">animation
type</a> is <a data-link-type="dfn" href="#concept-not-animatable" id="ref-for-concept-not-animatable-2">not animatable</a> since these
properties should not be modified.</p>
   <p>An <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-125">animation effect</a> that targets a property that is <a data-link-type="dfn" href="#concept-not-animatable" id="ref-for-concept-not-animatable-3">not animatable</a> will still exhibit the
usual behavior for an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-126">animation effect</a> such as
occupying time in a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-18">sequence effect</a> and
delaying the fulfilment of an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-50">animation</a>’s <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-11">current finished
promise</a>.</p>
   <h4 class="heading settled" data-level="4.3.2" id="discrete-animation-type-section"><span class="secno">4.3.2. </span><span class="content">Discrete</span><a class="self-link" href="#discrete-animation-type-section"></a></h4>
   <p>A property whose <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-14">animation type</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="discrete animation type" data-noexport="" id="discrete-animation-type">discrete</dfn> has the following behavior:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-3">interpolation</a>:</p>
     <div aria-describedby="math-string-interpolation" role="math" style="display: inline">
      <math xmlns="http://www.w3.org/1998/Math/MathML">
       <msub>
        <mi>V</mi>
        <mn>result</mn>
       </msub>
       <mo>=</mo>
       <mrow>
        <mfenced close="" open="{">
         <mtable>
          <mtr>
           <mtd columnalign="left">
            <msub>
             <mi>V</mi>
             <mn>start</mn>
            </msub>
           </mtd>
           <mtd columnalign="left">
            <mtext>if </mtext>
            <mi>p</mi>
            <mo>&lt;</mo>
            <mn>0.5</mn>
           </mtd>
          </mtr>
          <mtr>
           <mtd columnalign="left">
            <msub>
             <mi>V</mi>
             <mn>end</mn>
            </msub>
           </mtd>
           <mtd columnalign="left">
            <mtext>if </mtext>
            <mi>p</mi>
            <mo>≥</mo>
            <mn>0.5</mn>
           </mtd>
          </mtr>
         </mtable>
        </mfenced>
       </mrow>
      </math>
      <div class="explanation" id="math-string-interpolation"> <var>V</var><sub>result</sub> = <var>V</var><sub>start</sub>, if <var>p</var> &lt; 0.5 or <var>V</var><sub>end</sub>, if <var>p</var> ≥ 0.5 </div>
     </div>
   </ul>
   <h4 class="heading settled" data-level="4.3.3" id="real-number-animation-type-section"><span class="secno">4.3.3. </span><span class="content">Real number</span><a class="self-link" href="#real-number-animation-type-section"></a></h4>
   <p>A property whose <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-15">animation type</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="real number animation type" data-noexport="" id="real-number-animation-type">real number</dfn> has the following behavior:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-4">interpolation</a>: <var>V</var><sub>result</sub> =
  (1 - <var>p</var>) × <var>V</var><sub>start</sub> + <var>p</var> × <var>V</var><sub>end</sub></p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-9">addition</a>: <var>V</var><sub>result</sub> = <var>V</var><sub>a</sub> + <var>V</var><sub>b</sub></p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-4">distance computation</a>: <var>distance</var> =
  |<var>V</var><sub>end</sub> - <var>V</var><sub>start</sub>|</p>
   </ul>
   <h4 class="heading settled" data-level="4.3.4" id="length-percentage-or-calc-animation-type-section"><span class="secno">4.3.4. </span><span class="content">Length, percentage, or
calc</span><a class="self-link" href="#length-percentage-or-calc-animation-type-section"></a></h4>
   <p>A property whose <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-16">animation type</a> is <dfn data-dfn-type="dfn" data-lt="length, percentage, or calc animation type" data-noexport="" id="length-percentage-or-calc-animation-type">length, percentage, or
calc<a class="self-link" href="#length-percentage-or-calc-animation-type"></a></dfn> has the following behavior:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-5">interpolation</a>:
as defined in <a data-link-type="biblio" href="#biblio-css3-transitions">[CSS3-TRANSITIONS]</a>.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-10">addition</a>: <var>V</var><sub>result</sub> =
calc(<var>V</var><sub>a</sub> + <var>V</var><sub>b</sub>)<br> (Nested <code>calc()</code> functions are expanded when
determining the computed value as defined in <a href="http://www.w3.org/TR/css3-values/#calc-computed-value">CSS
Values and Units</a> <a data-link-type="biblio" href="#biblio-css3val">[CSS3VAL]</a>.)</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-5">distance computation</a>: as with <a data-link-type="dfn" href="#real-number-animation-type" id="ref-for-real-number-animation-type-1">real
number</a> but using the <a href="http://www.w3.org/TR/CSS2/cascade.html#used-value">computed
value</a> <a data-link-type="biblio" href="#biblio-css21">[CSS21]</a> for <var>V</var><sub>start</sub> and <var>V</var><sub>end</sub>.</p>
     <p class="issue" id="issue-1ec19ef8"><a class="self-link" href="#issue-1ec19ef8"></a> This whole section needs to be rewritten to account for when we
have lengths and percentages. In short, we don’t expand these to
used values since that was deemed overly complex (without compelling use
cases) and makes calculating keyframe offsets dependent on layout. So we
should probably just use the square distance of each component, despite the
fact that it will rarely produce a useful result.</p>
     <p>When there is insufficient context to calculate a computed value for all
possible values of <var>V</var><sub>start</sub> and <var>V</var><sub>end</sub>, the result of the <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-6">distance computation</a> calculation is zero (i.e. the behavior degenerates to <a data-link-type="dfn" href="#not-paceable" id="ref-for-not-paceable-1">not paceable</a>).</p>
     <div class="example" id="example-3421d0e2">
      <a class="self-link" href="#example-3421d0e2"></a> For example, for a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-4">keyframe effect</a> that does not have
  an <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-1">target element</a>, there is no context for resolving
  em-based values against.
  As a result, the following code snippet falls back to <a data-link-type="dfn" href="#not-paceable" id="ref-for-not-paceable-2">not paceable</a> <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-17">animation type</a>. 
<pre class="lang-javascript highlight"><span class="kd">var</span> effect <span class="o">=</span>
  <span class="k">new</span> KeyframeEffect<span class="p">(</span><span class="p">[</span> <span class="p">{</span> top<span class="o">:</span> <span class="s1">'10px'</span> <span class="p">}</span><span class="p">,</span>
                       <span class="p">{</span> top<span class="o">:</span> <span class="s1">'20em'</span> <span class="p">}</span><span class="p">,</span>
                       <span class="p">{</span> top<span class="o">:</span> <span class="s1">'50em'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span>
                     <span class="p">{</span> spacing<span class="o">:</span> <span class="s1">'paced(top)'</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="c1">// Prints '0, 0.5, 1'
</span>effect<span class="p">.</span>getKeyframes<span class="p">(</span><span class="p">)</span><span class="p">.</span>map<span class="p">(</span>frame <span class="o">=></span> frame<span class="p">.</span>computedOffset<span class="p">)</span><span class="p">.</span>join<span class="p">(</span><span class="s1">', '</span><span class="p">)</span><span class="p">;</span>
</pre>
      <p>For consistency, this definition applies even when a computed value
  could be calculated for each of the animation values in question.
  As such, the following code fragment produces the same result.</p>
<pre class="lang-javascript highlight"><span class="kd">var</span> effect <span class="o">=</span>
  <span class="k">new</span> KeyframeEffect<span class="p">(</span><span class="p">[</span> <span class="p">{</span> top<span class="o">:</span> <span class="s1">'10px'</span> <span class="p">}</span><span class="p">,</span>
                       <span class="p">{</span> top<span class="o">:</span> <span class="s1">'20px'</span> <span class="p">}</span><span class="p">,</span>
                       <span class="p">{</span> top<span class="o">:</span> <span class="s1">'50px'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span>
                     <span class="p">{</span> spacing<span class="o">:</span> <span class="s1">'paced(top)'</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="c1">// Prints '0, 0.5, 1'
</span>effect<span class="p">.</span>getKeyframes<span class="p">(</span><span class="p">)</span><span class="p">.</span>map<span class="p">(</span>frame <span class="o">=></span> frame<span class="p">.</span>computedOffset<span class="p">)</span><span class="p">.</span>join<span class="p">(</span><span class="s1">', '</span><span class="p">)</span><span class="p">;</span>
</pre>
     </div>
   </ul>
   <h4 class="heading settled" data-level="4.3.5" id="color-animation-type-section"><span class="secno">4.3.5. </span><span class="content">Color</span><a class="self-link" href="#color-animation-type-section"></a></h4>
   <p>A property whose <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-18">animation type</a> is <dfn data-dfn-type="dfn" data-lt="color animation type" data-noexport="" id="color-animation-type">color<a class="self-link" href="#color-animation-type"></a></dfn> has the following behavior:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-6">interpolation</a>:
as defined in <a data-link-type="biblio" href="#biblio-css3-transitions">[CSS3-TRANSITIONS]</a>.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-11">addition</a>:
as with <a data-link-type="dfn" href="#real-number-animation-type" id="ref-for-real-number-animation-type-2">real number</a> but performed on
each RGBA color component in premultiplied space.</p>
     <p class="note" role="note">Note: Since negative color is not currently supported, clamping of
      the channel values may be performed upon each addition or once
      when <a data-link-type="dfn" href="#composition" id="ref-for-composition-1">composition</a> is complete.</p>
     <p></p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-7">distance computation</a>:</p>
     <div aria-describedby="math-color-distance" role="math">
      <math xmlns="http://www.w3.org/1998/Math/MathML">
       <mrow>
        <mi>distance</mi>
        <mo>=</mo>
        <msqrt>
         <msup>
          <mrow>
           <mfenced close=")" open="(" separators=",">
            <mrow>
             <msub>
              <mi>R</mi>
              <mn>end</mn>
             </msub>
             <mo>-</mo>
             <msub>
              <mi>R</mi>
              <mn>start</mn>
             </msub>
            </mrow>
           </mfenced>
          </mrow>
          <mn>2</mn>
         </msup>
         <mo>+</mo>
         <msup>
          <mrow>
           <mfenced close=")" open="(" separators=",">
            <mrow>
             <msub>
              <mi>G</mi>
              <mn>end</mn>
             </msub>
             <mo>-</mo>
             <msub>
              <mi>G</mi>
              <mn>start</mn>
             </msub>
            </mrow>
           </mfenced>
          </mrow>
          <mn>2</mn>
         </msup>
         <mo>+</mo>
         <msup>
          <mrow>
           <mfenced close=")" open="(" separators=",">
            <mrow>
             <msub>
              <mi>B</mi>
              <mn>end</mn>
             </msub>
             <mo>-</mo>
             <msub>
              <mi>B</mi>
              <mn>start</mn>
             </msub>
            </mrow>
           </mfenced>
          </mrow>
          <mn>2</mn>
         </msup>
         <mo>+</mo>
         <msup>
          <mrow>
           <mfenced close=")" open="(" separators=",">
            <mrow>
             <msub>
              <mi>A</mi>
              <mn>end</mn>
             </msub>
             <mo>-</mo>
             <msub>
              <mi>A</mi>
              <mn>start</mn>
             </msub>
            </mrow>
           </mfenced>
          </mrow>
          <mn>2</mn>
         </msup>
        </msqrt>
       </mrow>
      </math>
      <div class="explanation" id="math-color-distance"> distance = sqrt((R<sub>end</sub> - R<sub>start</sub>)^2 + (G<sub>end</sub> - G<sub>start</sub>)^2 + (B<sub>end</sub> - B<sub>start</sub>)^2 + (A<sub>end</sub> - A<sub>start</sub>)^2) </div>
     </div>
     <p>where &lt;<var>R<var>G</var>B|A</var><sub>start|end</sub>>
represents the red, green, blue, or alpha channel of <var>V</var><sub>start</sub> or <var>V</var><sub>end</sub> respectively.
Each value is normalized to the [0.0, 1.0] range and expressed
in premultiplied color space.</p>
   </ul>
   <h4 class="heading settled" data-level="4.3.6" id="transform-list-animation-type-section"><span class="secno">4.3.6. </span><span class="content">Transform list</span><a class="self-link" href="#transform-list-animation-type-section"></a></h4>
   <p>A property whose <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-19">animation type</a> is <dfn data-dfn-type="dfn" data-lt="transform list animation type" data-noexport="" id="transform-list-animation-type">transform list<a class="self-link" href="#transform-list-animation-type"></a></dfn> has the following
behavior:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-7">interpolation</a>:
as defined in <a href="http://www.w3.org/TR/css-transforms-1/#interpolation-of-transforms">Interpolation
of Transforms</a> <a data-link-type="biblio" href="#biblio-css3-transforms">[CSS3-TRANSFORMS]</a>.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-12">addition</a>: performed by
concatenating transform lists as
‘<var>V</var><sub>a</sub> <var>V</var><sub>b</sub>’.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-6">accumulation</a>:</p>
     <ol>
      <li data-md="">
       <p>Beginning at the end of each list, <var>V</var><sub>a</sub> and <var>V</var><sub>b</sub>,
find the largest contiguous portion of each list where the
corresponding list elements from each list have the same
transform type.
Call the matching portions from <var>V</var><sub>a</sub> and <var>V</var><sub>b</sub>, <var>V</var><sub>matching-a</sub> and <var>V</var><sub>matching-b</sub> respectively and likewise <var>V</var><sub>remainder-a</sub> and <var>V</var><sub>remainder-b</sub> for the non-matching
parts.</p>
       <p class="issue" id="issue-3540bd4c"><a class="self-link" href="#issue-3540bd4c"></a> We should probably expand 2d functions to their 3d
  equivalents before matching? </p>
      <li data-md="">
       <p>Let <var>V</var><sub>combined</sub> be a transform list
combining <var>V</var><sub>matching-a</sub> and <var>V</var><sub>matching-b</sub> by adding the numeric
components of each corresponding function.</p>
       <p class="issue" id="issue-7c98bbea"><a class="self-link" href="#issue-7c98bbea"></a> This needs to be more specific, e.g. when combining <code>translate(20px)</code> and <code>translate(30px
  10px)</code> we have to expand the first function to <code>translate(20px 0px)</code> first.
  Probably need to define unit conversion too. </p>
      <li data-md="">
       <p>The result of accumulation is a transform list created by <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-13">adding</a> the combined result
with the non-matching portions of the two lists as follows:
‘<var>V</var><sub>remainder-a</sub> <var>V</var><sub>remainder-b</sub> <var>V</var><sub>combined</sub>’.</p>
     </ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-8">distance computation</a>: See issue below.</p>
   </ul>
   <div class="issue" id="issue-789f9fd1">
    <a class="self-link" href="#issue-789f9fd1"></a> 
    <p>For <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-9">distance computation</a> we previously defined it as follows:</p>
    <ol>
     <li data-md="">
      <p>Look only at the first component of the two lists</p>
     <li data-md="">
      <p>If both are translate → euclidean distance</p>
     <li data-md="">
      <p>If both are scale → absolute difference</p>
     <li data-md="">
      <p>If both are rotate → absolute difference</p>
     <li data-md="">
      <p>If both match but are something else → use linear</p>
     <li data-md="">
      <p>If they don’t match → use matrix decomposition and
euclidean distance between translate components</p>
    </ol>
    <p>This seems really arbitrary, especially part 5.</p>
    <p>Also, looking at only the first component seems odd.
    Going through each component, working out the distance and then
    getting the square of the distance also seems much more consistent
    with what we do elsewhere.</p>
   </div>
   <h4 class="heading settled" data-level="4.3.7" id="other-animation-types"><span class="secno">4.3.7. </span><span class="content">Other animation types</span><a class="self-link" href="#other-animation-types"></a></h4>
   <p>The set of <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-20">animation types</a> defined here may be extended
by other specifications.
For example, properties with using the &lt;image> type are
animated using the interpolation behavior defined in <a href="https://drafts.csswg.org/css-images/#interpolating-images">CSS Image
Values and Replaced Content</a> <a data-link-type="biblio" href="#biblio-css3-images">[CSS3-IMAGES]</a>.</p>
   <div class="issue" id="issue-b34a7893">
    <a class="self-link" href="#issue-b34a7893"></a> 
    <p>There are a bunch of CSS properties for which distance (and in
    some cases addition) is not defined or which need special
    handling.</p>
    <p>For example,</p>
    <ul>
     <li data-md="">
      <p>font-stretch (an enum but handled like an integer)</p>
     <li data-md="">
      <p>visibility (0 or 1 depending on if endpoints match or not)</p>
     <li data-md="">
      <p>flex-grow and flex-shrink which allow animation only if one of
the endpoints is 0)</p>
     <li data-md="">
      <p>value pairs, triples (use square distance)</p>
     <li data-md="">
      <p>rects (use square distance)</p>
     <li data-md="">
      <p>dash arrays (square distance but a bit weird due to
percentages)</p>
     <li data-md="">
      <p>shadows (square distance of components)</p>
     <li data-md="">
      <p>filters (undefined)</p>
     <li data-md="">
      <p>background-position (special list handling needed)</p>
     <li data-md="">
      <p>pair lists</p>
    </ul>
    <p>Should we define these here or in the CSS Transitions 2 spec?</p>
   </div>
   <h3 class="heading settled" data-level="4.4" id="keyframe-effects"><span class="secno">4.4. </span><span class="content">Keyframe effects</span><a class="self-link" href="#keyframe-effects"></a></h3>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="keyframe effect" data-noexport="" id="keyframe-effect">Keyframe effects</dfn> are a kind of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-127">animation
effect</a> that use the output of the timing model to update CSS properties for
an element or pseudo-element such as <code>::before</code> or <code>::after</code> <a data-link-type="biblio" href="#biblio-select">[SELECT]</a> referred to as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="target-element">target element</dfn>.</p>
   <h4 class="heading settled" data-level="4.4.1" id="keyframes-section"><span class="secno">4.4.1. </span><span class="content">Keyframes</span><a class="self-link" href="#keyframes-section"></a></h4>
   <p>The <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-1">effect values</a> for a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-5">keyframe effect</a> are calculated by interpolating between a series of property values
positioned at fractional offsets.
Each set of property values indexed by an offset is called
a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="keyframe">keyframe</dfn>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="keyframe offset" data-noexport="" id="keyframe-offset">offset of a keyframe</dfn> is a value
in the range [0, 1] or the special value null.
The list of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-2">keyframes</a> for a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-6">keyframe effect</a> must be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="loosely-sorted-by-offset">loosely sorted by offset</dfn> which means that for each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-3">keyframe</a> in the list that has a <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-1">keyframe offset</a> that is
not null, the offset is greater than or equal to the offset of the
previous <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-4">keyframe</a> in the list with a <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-2">keyframe offset</a> that
is not null, if any.</p>
   <p>The behavior when <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-5">keyframes</a> overlap or have unsupported values
is defined in <a href="#the-effect-value-of-a-keyframe-animation-effect">§4.4.4 The effect value of
  a keyframe effect</a>.</p>
   <p>Each keyframe also has a <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-14">timing function</a> associated with it
that is applied to the period of time between the keyframe on which it
is specified and the <em>next</em> keyframe in the list.
The <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-15">timing function</a> specified on the last keyframe in the
list is never applied.</p>
   <p>Each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-6">keyframe</a> may also have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="keyframe-specific composite operation" data-noexport="" id="keyframe-specific-composite-operation">keyframe-specific composite
operation</dfn> that is applied to all values
specified in that <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-7">keyframe</a>.
The possible operations and their meanings are identical to those defined
for the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-1">composite operation</a> associated with the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-7">keyframe effect</a> as a whole in <a href="#effect-composition">§4.5.4 Effect composition</a>.
If no <a data-link-type="dfn" href="#keyframe-specific-composite-operation" id="ref-for-keyframe-specific-composite-operation-1">keyframe-specific composite operation</a> is specified for
a <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-8">keyframe</a>, the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-2">composite operation</a> specified for the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-8">keyframe effect</a> as a whole is used for values specified in that keyframe.</p>
   <h4 class="heading settled" data-level="4.4.2" id="spacing-keyframes"><span class="secno">4.4.2. </span><span class="content">Spacing keyframes</span><a class="self-link" href="#spacing-keyframes"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative.</em> 
    <p>It is often useful to be able to provide a series of property values
without having calculate the <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-3">keyframe offset</a> of each value in
time but instead to rely on some automatic spacing.</p>
    <p>For example, rather than typing:</p>
    <div class="example" id="example-bae33431">
     <a class="self-link" href="#example-bae33431"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'blue'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'green'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'yellow'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>It should be possible to type the following and allow the user agent
to calculate the <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-4">offset</a> of each
keyframe:</p>
    <div class="example" id="example-fb345fb6">
     <a class="self-link" href="#example-fb345fb6"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'blue'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'green'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'yellow'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>Web Animations provides spacing modes for this purpose. The default
spacing mode for keyframe effects is
“<a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-1">distribute</a>” which
produces the result described above.</p>
    <p>The other spacing mode, “<a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-1">paced</a>”, is useful when
it is desirable to maintain an even rate of change such as for motion path
animation.</p>
    <p>For example, consider the following animation:</p>
    <div class="example" id="example-d40861b4">
     <a class="self-link" href="#example-d40861b4"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'0px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'-20px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'50px'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>The resulting value of the <span class="prop-name">left</span> property is illustrated below:</p>
    <figure>
      <img alt="The animated value of the left property over time when applying the distribute spacing mode.
The values are evenly spaced in time but the rate of change differs for each segment as indicated the varying slope of the graph." src="img/spacing-distribute.svg" width="350"> 
     <figcaption> The animated value of the left property over time when applying the <a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-2">distribute</a> spacing
    mode.
    The values are evenly spaced in time but the rate of change differs
    for each segment as indicated the varying slope of the graph. </figcaption>
    </figure>
    <p>We can use the <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-2">paced</a> spacing mode as follows:</p>
    <div class="example" id="example-a7c9a5e2">
     <a class="self-link" href="#example-a7c9a5e2"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'0px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'-20px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'50px'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span>
             <span class="p">{</span> duration<span class="o">:</span> <span class="mi">1000</span><span class="p">,</span> spacing<span class="o">:</span> <span class="s2">"paced(left)"</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>The result is illustrated below:</p>
    <figure>
      <img alt="The animated value of the left property over time when applying the paced spacing mode.
The absolute value of the slope is graph is equal for all segments of the animation indicating a constant rate of change." src="img/spacing-paced.svg" width="350"> 
     <figcaption> The animated value of the left property over time when applying the <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-3">paced</a> spacing mode.
    The absolute value of the slope is graph is equal for all segments
    of the animation indicating a constant rate of change. </figcaption>
    </figure>
    <p>It is also possible to combine fixed <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-5">keyframe offsets</a> with
spacing modes as follows:</p>
    <div class="example" id="example-90ddb4c4">
     <a class="self-link" href="#example-90ddb4c4"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'0px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'-20px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mf">0.5</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'50px'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span>
             <span class="p">{</span> duration<span class="o">:</span> <span class="mi">1000</span><span class="p">,</span> spacing<span class="o">:</span> <span class="s2">"paced(left)"</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>The result is illustrated below:</p>
    <figure>
      <img alt="The animated value of the left property over time when applying the paced spacing mode and a fixed offset that puts the 100px value at 0.5.
The slope of the graph is equal for the first two segments but changes for the last segment in order to accommodate the fixed offset." src="img/spacing-paced-with-offset.svg" width="350"> 
     <figcaption> The animated value of the left property over time when applying the <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-4">paced</a> spacing mode and
    a fixed <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-6">keyframe offset</a> that
    puts the 100px value at 0.5.
    The slope of the graph is equal for the first two segments but
    changes for the last segment in order to accommodate the fixed
    offset. </figcaption>
    </figure>
   </div>
   <p>Before calculating effect values from a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-9">keyframe effect</a>,
an absolute value must be computed for the <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-7">keyframe offset</a> of each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-9">keyframe</a> with a null offset.</p>
   <p>The values computed depend on the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="keyframe-spacing-mode">keyframe spacing mode</dfn> specified for the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-10">keyframe effect</a>.
The keyframe spacing modes are:</p>
   <dl>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="distribute keyframe spacing mode" data-noexport="" id="distribute-keyframe-spacing-mode">distribute</dfn></p>
    <p></p>
    <dd data-md="">
     <p>Indicates that <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-10">keyframes</a> with a null <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-8">keyframe offset</a> are positioned so that the difference between subsequent <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-9">keyframe offsets</a> are equal.</p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="paced keyframe spacing mode" data-noexport="" id="paced-keyframe-spacing-mode">paced</dfn></p>
    <p></p>
    <dd data-md="">
     <p>Indicates that <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-11">keyframes</a> with a null <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-10">keyframe offset</a> are positioned so that the <em>distance</em> between subsequent
values of a specified <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="paced-property">paced property</dfn> are equal.
The distance is calculated using the <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-10">distance computation</a> procedure defined by the <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-21">animation type</a> associated
with the <a data-link-type="dfn" href="#paced-property" id="ref-for-paced-property-1">paced property</a>.</p>
   </dl>
   <p>Since the absolute value calculated for a <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-11">keyframe offset</a> may change
depending on the keyframe values, the number of values, or external context
(such as when using <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-5">paced keyframe spacing mode</a> in combination with
em-based units), the original null values are not overwritten but rather, the
calculated absolute values are stored as a separate
value on each keyframe known as its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="computed-keyframe-offset">computed keyframe offset</dfn>.</p>
   <h5 class="heading settled" data-level="4.4.2.1" id="applying-spacing-to-keyframes"><span class="secno">4.4.2.1. </span><span class="content">Applying spacing to keyframes</span><a class="self-link" href="#applying-spacing-to-keyframes"></a></h5>
   <p>We define a generic procedure for <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="evenly distributing a keyframe" data-noexport="" id="evenly-distributing-a-keyframe">evenly distributing
a keyframe</dfn>, <var>keyframe</var>, between two reference
keyframes, <var>start</var> and <var>end</var>, whose <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-1">computed keyframe
offsets</a> are <em>not</em> null, as follows:</p>
   <ol>
    <li data-md="">
     <p>Let <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="offsetk">offset<sub><var>k</var></sub></dfn> be the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-2">computed
keyframe offset</a> of a <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-12">keyframe</a> <var>k</var>.</p>
    <li data-md="">
     <p>Let <var>n</var> be the number of keyframes <em>between</em> and
including <var>start</var> and <var>end</var> minus 1.</p>
    <li data-md="">
     <p>Let <var>index</var> refer to the position of <var>keyframe</var> in the sequence of keyframes between <var>start</var> and <var>end</var> such that the first keyframe
after <var>start</var> has an <var>index</var> of 1.</p>
    <li data-md="">
     <p>Set the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-3">computed keyframe offset</a> of <var>keyframe</var> to <a data-link-type="dfn" href="#offsetk" id="ref-for-offsetk-1">offset</a><sub><var>start</var></sub> +
(<a data-link-type="dfn" href="#offsetk" id="ref-for-offsetk-2">offset</a><sub><var>end</var></sub> − <a data-link-type="dfn" href="#offsetk" id="ref-for-offsetk-3">offset</a><sub><var>start</var></sub>)
× <var>index</var> / <var>n</var>.</p>
   </ol>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="apply-spacing-to-a-series-of-keyframes">apply spacing to a series of keyframes</dfn> takes the
following parameters:</p>
   <ul>
    <li data-md="">
     <p>a sequence of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-13">keyframes</a>: <var>keyframes</var>,</p>
    <li data-md="">
     <p>a <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-1">spacing mode</a>, <var>spacing</var>, and</p>
    <li data-md="">
     <p>a context element used for resolving relative units, <var>context
element</var>, (only required when <var>spacing</var> is <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-6">paced</a>)</p>
   </ul>
   <p>and has the following steps:</p>
   <ol>
    <li data-md="">
     <p>For each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-14">keyframe</a>, in <var>keyframes</var>,
let the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-4">computed keyframe offset</a> of the <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-15">keyframe</a> be equal to its <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-12">keyframe offset</a> value.</p>
    <li data-md="">
     <p>If <var>keyframes</var> contains more than one <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-16">keyframe</a> and the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-5">computed keyframe offset</a> of
the first <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-17">keyframe</a> in <var>keyframes</var> is null,
set the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-6">computed keyframe offset</a> of
the first <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-18">keyframe</a> to 0.</p>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-7">computed keyframe offset</a> of the last <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-19">keyframe</a> in <var>keyframes</var> is null, set its <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-8">computed keyframe offset</a> to 1.</p>
    <li data-md="">
     <p>For each pair of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-20">keyframes</a> <var>A</var> and <var>B</var> where:</p>
     <ul>
      <li data-md="">
       <p><var>A</var> appears before <var>B</var> in <var>keyframes</var>, and</p>
      <li data-md="">
       <p><var>A</var> and <var>B</var> have a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-9">computed keyframe
offset</a> that is not null, and</p>
      <li data-md="">
       <p>all <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-21">keyframes</a> between <var>A</var> and <var>B</var> have a null <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-10">computed keyframe offset</a>,</p>
     </ul>
     <p>calculate the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-11">computed keyframe offset</a> of
each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-22">keyframe</a> between <var>A</var> and <var>B</var> depending on the value of <var>spacing</var> as follows:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <var>spacing</var> is <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-7">paced</a>,</p>
       <p></p>
       <dd data-md="">
        <ol>
         <li data-md="">
          <p>Define a keyframe as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="paceable">paceable</dfn> if it
contains a value for the <a data-link-type="dfn" href="#paced-property" id="ref-for-paced-property-2">paced property</a>.</p>
         <li data-md="">
          <p>Let <var>paced A</var> be the first keyframe in the
range [<var>A</var>, <var>B</var>] that is <a data-link-type="dfn" href="#paceable" id="ref-for-paceable-1">paceable</a>, if any.</p>
         <li data-md="">
          <p>Let <var>paced B</var> be the last keyframe in the
range [<var>A</var>, <var>B</var>] that is <a data-link-type="dfn" href="#paceable" id="ref-for-paceable-2">paceable</a>, if any.</p>
         <li data-md="">
          <p>If there is no <var>paced A</var> or <var>paced
B</var> let both refer to <var>B</var>.</p>
          <p class="note" role="note">Note: In this case the spacing behavior degenerates to <a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-3">distribute</a> spacing.</p>
         <li data-md="">
          <p>For each keyframe in the range
(<var>A</var>, <var>paced A</var>] and
[<var>paced B</var>, <var>B</var>),
apply the procedure for <a data-link-type="dfn" href="#evenly-distributing-a-keyframe" id="ref-for-evenly-distributing-a-keyframe-1">evenly distributing
a keyframe</a> using <var>A</var> and <var>B</var> as
the <var>start</var> and <var>end</var> keyframes
respectively.</p>
          <div class="annotation">
           <p>Yes, this is correct.
We want, <var>index</var> and <var>n</var> in that
procedure to reflect <em>all</em> the keyframes
between <var>A</var> and <var>B</var>, not just the
keyframes between, for example, <var>A</var> and <var>paced A</var>.</p>
          </div>
         <li data-md="">
          <p>For each keyframe in the range
(<var>paced A</var>, <var>paced B</var>) that is <a data-link-type="dfn" href="#paceable" id="ref-for-paceable-3">paceable</a>:</p>
          <ol>
           <li data-md="">
            <p>Let <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="distk">dist<sub><var>k</var></sub></dfn> represent the cumulative distance to a keyframe <var>k</var> from <var>paced A</var> as calculated by applying the <a data-link-type="dfn" href="#distance-computation" id="ref-for-distance-computation-11">distance
computation</a> defined by the <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-22">animation
type</a> of the <a data-link-type="dfn" href="#paced-property" id="ref-for-paced-property-3">paced property</a> to the
values of the <a data-link-type="dfn" href="#paced-property" id="ref-for-paced-property-4">paced property</a> on each pair of
successive <a data-link-type="dfn" href="#paceable" id="ref-for-paceable-4">paceable</a> keyframes in the range
[<var>paced A</var>, <var>k</var>].
Use <var>context element</var> as the basis for resolving
context-sensitive values such as font-size based units.</p>
           <li data-md="">
            <p>Set the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-12">computed keyframe offset</a> of <var>k</var> to <a data-link-type="dfn" href="#offsetk" id="ref-for-offsetk-4">offset</a><sub><var>paced
  A</var></sub> +
(<a data-link-type="dfn" href="#offsetk" id="ref-for-offsetk-5">offset</a><sub><var>paced
  B</var></sub> − <a data-link-type="dfn" href="#offsetk" id="ref-for-offsetk-6">offset</a><sub><var>paced
  A</var></sub>) × <a data-link-type="dfn" href="#distk" id="ref-for-distk-1">dist</a><sub><var>k</var></sub> / <a data-link-type="dfn" href="#distk" id="ref-for-distk-2">dist</a><sub><var>paced
  B</var></sub>.
If <a data-link-type="dfn" href="#distk" id="ref-for-distk-3">dist</a><sub><var>paced B</var></sub> is zero, leave the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-13">computed keyframe offset</a> as
null—it will be set in the next step when we apply
distribute spacing to remaining keyframes.</p>
          </ol>
         <li data-md="">
          <p>For each keyframe in the range (<var>paced A</var>, <var>paced B</var>) that still has
a null <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-14">computed keyframe offset</a> (because it is not <a data-link-type="dfn" href="#paceable" id="ref-for-paceable-5">paceable</a>, or because the cumulative distance between
paceable properties was zero), apply the procedure
for <a data-link-type="dfn" href="#evenly-distributing-a-keyframe" id="ref-for-evenly-distributing-a-keyframe-2">evenly distributing a keyframe</a> using
the nearest <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-23">keyframe</a> before and after the
keyframe in question in <var>keyframes</var> that has
a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-15">computed keyframe offset</a> that is not null, as the <var>start</var> and <var>end</var> keyframes
respectively.</p>
        </ol>
       <dt data-md="">
        <p>Otherwise,</p>
       <p></p>
       <dd data-md="">
        <p>Apply the procedure for <a data-link-type="dfn" href="#evenly-distributing-a-keyframe" id="ref-for-evenly-distributing-a-keyframe-3">evenly distributing
a keyframe</a> to each keyframe in the range (<var>A</var>, <var>B</var>) using <var>A</var> and <var>B</var> as the <var>start</var> and <var>end</var> keyframes respectively.</p>
      </dl>
     </div>
   </ol>
   <h4 class="heading settled" data-level="4.4.3" id="calculating-computed-keyframes"><span class="secno">4.4.3. </span><span class="content">Calculating computed keyframes</span><a class="self-link" href="#calculating-computed-keyframes"></a></h4>
   <p>Before calculating the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-2">effect value</a> of a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-11">keyframe effect</a>,
we must resolve specified property values to <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-4/#computed-value">computed values</a> and applying
spacing to compute absolute values for the <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-13">keyframe offset</a> of each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-24">keyframe</a> with a null offset. The result of resolving these values is
a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="computed-keyframes">computed keyframes</dfn>.</p>
   <p><a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes-1">Computed keyframes</a> are produced using the following procedure.
Note that this procedure is only performed on a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-12">keyframe effect</a> having
a <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-2">target element</a> for which computed property values can be calculated.</p>
   <ol>
    <li data-md="">
     <p>Let <var>computed keyframes</var> be an empty list of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-25">keyframes</a>.</p>
    <li data-md="">
     <p>For each <var>keyframe</var> in the list of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-26">keyframes</a> specified on
this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-13">keyframe effect</a>, perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Add a new empty <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-27">keyframe</a>, <var>computed keyframe</var>, to <var>computed keyframes</var>.</p>
      <li data-md="">
       <p>For each property specified in <var>keyframe</var>, calculate the
computed value specified on <var>keyframe</var> using the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-3">target
element</a> as the context for computing values and add the
corresponding property and computed value to <var>computed
keyframe</var>.
For shorthand properties, add the equivalent longhand properties.</p>
       <p>For example, if <var>keyframe</var> has a value of ‘12pt’
for the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-width">border-width</a> property, the user agent may produce a computed
value of ‘16px’ for each of the longhand properties: <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-bottom-width">border-bottom-width</a>, <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-left-width">border-left-width</a>, <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-right-width">border-right-width</a>, and <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-top-width">border-top-width</a>.
As a result, <var>computed keyframe</var> would <em>not</em> have a
value for the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-width">border-width</a> property, but would instead include
each of the longhand properties, and each with the computed value,
‘16px’.</p>
       <p>If conflicts arise when expanding shorthand properties due to
shorthand properties overlapping with existing longhand properties or
other with other shorthand properties, apply the following rules in
order until the conflict is resolved:</p>
       <ol>
        <li data-md="">
         <p>Longhand properties override shorthand properties (e.g. <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-top-color">border-top-color</a> overrides <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-top">border-top</a>).</p>
        <li data-md="">
         <p>Shorthand properties with fewer longhand components override those
with more longhand components (e.g. <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-top">border-top</a> overrides <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#border-color">border-color</a>)</p>
        <li data-md="">
         <p>For shorthand properties with an equal number of longhand
components, properties whose IDL name (see the <a data-link-type="dfn" href="https://drafts.csswg.org/cssom/#css-property-to-idl-attribute">CSS property to
IDL attribute</a> algorithm <a data-link-type="biblio" href="#biblio-cssom">[CSSOM]</a>) appears earlier when
sorted in ascending order by the Unicode codepoints that make up
each IDL name, override those who appear later.</p>
       </ol>
       <p class="note" role="note">NOTE: Invalid property values and values unsupported by the
implementation MUST be preserved such that when spacing is applied
later in this procedure, the keyframes are spaced <em>as if</em> the
value was supported.</p>
     </ol>
    <li data-md="">
     <p>Perform the procedure to <a data-link-type="dfn" href="#apply-spacing-to-a-series-of-keyframes" id="ref-for-apply-spacing-to-a-series-of-keyframes-1">apply spacing to a series of keyframes</a> on <var>computed keyframes</var> using the <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-2">keyframe spacing mode</a> for
this effect as <var>spacing</var>, and the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-4">target element</a> for this effect as the <var>context element</var>.</p>
    <li data-md="">
     <p>Return <var>computed keyframes</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="4.4.4" id="the-effect-value-of-a-keyframe-animation-effect"><span class="secno">4.4.4. </span><span class="content">The effect value of
  a keyframe effect</span><a class="self-link" href="#the-effect-value-of-a-keyframe-animation-effect"></a></h4>
   <p>The <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-3">effect value</a> of a single property
referenced by a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-14">keyframe effect</a> as one of its <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-2">target properties</a>, for a given <var>iteration progress</var>, <var>current iteration</var> and <var>underlying value</var> is calculated as follows.</p>
   <ol>
    <li data-md="">
     <p>If <var>iteration progress</var> is <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-98">unresolved</a> abort this
procedure.</p>
    <li data-md="">
     <p>Let <var>target property</var> be the longhand property for which the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-4">effect value</a> is to be calculated.</p>
    <li data-md="">
     <p>If <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-23">animation type</a> of the <var>target property</var> is <a data-link-type="dfn" href="#concept-not-animatable" id="ref-for-concept-not-animatable-4">not animatable</a> abort this procedure
since the effect cannot be applied.</p>
    <li data-md="">
     <p>Define the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="neutral-value-for-composition">neutral value for composition</dfn> as a value
which, when combined with an <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-2">underlying value</a> using the <a data-link-type="dfn" href="#composite-operation-add" id="ref-for-composite-operation-add-1">add</a> <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-3">composite
operation</a>, produces the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-3">underlying value</a>.</p>
    <li data-md="">
     <p>Let <var>property-specific keyframes</var> be the result of
getting the set of <a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes-2">computed keyframes</a> for this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-15">keyframe
effect</a>.</p>
    <li data-md="">
     <p>Remove any <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-28">keyframes</a> from <var>property-specific
keyframes</var> that do not have a property value for <var>target property</var> or for which the property value is
invalid or unsupported by the implementation.</p>
    <li data-md="">
     <p>If <var>property-specific keyframes</var> is empty, return <var>underlying value</var>.</p>
    <li data-md="">
     <p>If there is no <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-29">keyframe</a> in <var>property-specific
keyframes</var> with a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-16">computed keyframe offset</a> of
0, create a new <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-30">keyframe</a> with a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-17">computed keyframe offset</a> of
0, a property value set to the <a data-link-type="dfn" href="#neutral-value-for-composition" id="ref-for-neutral-value-for-composition-1">neutral value for
composition</a>, and a <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-4">composite operation</a> of <a data-link-type="dfn" href="#composite-operation-add" id="ref-for-composite-operation-add-2">add</a>, and prepend it to the
beginning of <var>property-specific keyframes</var>.</p>
    <li data-md="">
     <p>Similarly, if there is no <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-31">keyframe</a> in <var>property-specific keyframes</var> with a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-18">computed keyframe
offset</a> of 1,
create a new <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-32">keyframe</a> with a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-19">computed keyframe offset</a> of 1,
a property value set to the <a data-link-type="dfn" href="#neutral-value-for-composition" id="ref-for-neutral-value-for-composition-2">neutral value for composition</a>,
and a <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-5">composite operation</a> of <a data-link-type="dfn" href="#composite-operation-add" id="ref-for-composite-operation-add-3">add</a>, and append it to the
end of <var>property-specific keyframes</var>.</p>
    <li data-md="">
     <p>Let <var>interval endpoints</var> be an empty sequence of
keyframes.</p>
    <li data-md="">
     <p>Populate <var>interval endpoints</var> by following the steps from
the first matching condition from below:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <var>iteration progress</var> &lt; 0 and there is more
than one <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-33">keyframe</a> in <var>property-specific
keyframes</var> with a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-20">computed keyframe offset</a> of
0,</p>
       <dd data-md="">
        <p>Add the first <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-34">keyframe</a> in <var>property-specific
keyframes</var> to <var>interval endpoints</var>.</p>
       <dt data-md="">
        <p>If <var>iteration progress</var> ≥ 1 and there is more
than one <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-35">keyframe</a> in <var>property-specific
keyframes</var> with a <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-21">computed keyframe offset</a> of
1,</p>
       <dd data-md="">
        <p>Add the last <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-36">keyframe</a> in <var>property-specific
keyframes</var> to <var>interval endpoints</var>.</p>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <ol>
         <li data-md="">
          <p>Append to <var>interval endpoints</var> the last <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-37">keyframe</a> in <var>property-specific
keyframes</var> whose <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-22">computed keyframe offset</a> is less than
or equal to <var>iteration progress</var> and less than 1.  If
there is no such <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-38">keyframe</a> (because, for example,
the <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-13">iteration progress</a> is negative), add the last <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-39">keyframe</a> whose <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-23">computed keyframe offset</a> is 0.</p>
         <li data-md="">
          <p>Append to <var>interval endpoints</var> the next <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-40">keyframe</a> in <var>property-specific keyframes</var> after the one added in the previous step.</p>
        </ol>
      </dl>
     </div>
    <li data-md="">
     <p>For each <var>keyframe</var> in <var>interval endpoints</var>:</p>
     <ol>
      <li data-md="">
       <p>If <var>keyframe</var> has a <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-6">composite operation</a> that is <em>not</em> <a data-link-type="dfn" href="#composite-operation-replace" id="ref-for-composite-operation-replace-1">replace</a>, or <var>keyframe</var> has no <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-7">composite operation</a> and the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-8">composite operation</a> of this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-16">keyframe
effect</a> is <em>not</em> <a data-link-type="dfn" href="#composite-operation-replace" id="ref-for-composite-operation-replace-2">replace</a>, then
perform the following steps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>composite operation to use</var> be the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-9">composite operation</a> of <var>keyframe</var>, or if
it has none, the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-10">composite operation</a> of this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-17">keyframe effect</a>.</p>
        <li data-md="">
         <p>Let <var>value to combine</var> be the property value of <var>target property</var> specified on <var>keyframe</var>.</p>
        <li data-md="">
         <p>Replace the property value of <var>target property</var> on <var>keyframe</var> with the result of combining <var>underlying value</var> (<var>V</var><sub>a</sub>) and <var>value to combine</var> (<var>V</var><sub>b</sub>)
using the <var>composite operation to use</var> procedure defined by the <var>target property</var>’s <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-24">animation type</a>.</p>
       </ol>
      <li data-md="">
       <p>If this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-18">keyframe effect</a> has an <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-2">iteration
composite operation</a> of <a data-link-type="dfn" href="#iteration-composite-operation-accumulate" id="ref-for-iteration-composite-operation-accumulate-2">accumulate</a>,
apply the following step <var>current iteration</var> times:</p>
       <ul>
        <li data-md="">
         <p>replace the property value of <var>target property</var> on <var>keyframe</var> with the result of combining the
property value on the final keyframe in <var>property-specific
keyframes</var> (<var>V</var><sub>a</sub>) with the
property value on <var>keyframe</var> (<var>V</var><sub>b</sub>) using the <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-7">accumulation procedure</a> defined for <var>target property</var>.</p>
       </ul>
       <p class="note" role="note">Note: The order of arguments here is important. In the case where
      the animation type of the target property does not define a
      procedure for accumulation or addition, the default definition
      for these procedures result in <var>V</var><sub>b</sub> being
      returned. When performing iteration composition on propreties
      that do not support accumulation, the result should be the
      initial property value of <var>target property</var> on <var>keyframe</var>, hence we we make this <var>V</var><sub>b</sub> in the above step.</p>
     </ol>
    <li data-md="">
     <p>If there is only one keyframe in <var>interval endpoints</var> return the property value of <var>target property</var> on that
keyframe.</p>
    <li data-md="">
     <p>Let <var>start offset</var> be the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-24">computed keyframe offset</a> of the
first keyframe in <var>interval endpoints</var>.</p>
    <li data-md="">
     <p>Let <var>end offset</var> be the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-25">computed keyframe offset</a> of
last keyframe in <var>interval endpoints</var>.</p>
    <li data-md="">
     <p>Let <var>interval distance</var> be the result of evaluating <code>(<var>iteration progress</var> - <var>start offset</var>) /
(<var>end offset</var> - <var>start offset</var>)</code>.</p>
    <li data-md="">
     <p>Let <var>transformed distance</var> be the result of evaluating
the <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-16">timing function</a> associated with the first keyframe in <var>interval endpoints</var> passing <var>interval distance</var> as the input progress.</p>
    <li data-md="">
     <p>Return the result of applying the <a data-link-type="dfn" href="#animation-interpolation" id="ref-for-animation-interpolation-8">interpolation procedure</a> defined
by the <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-25">animation type</a> of the <var>target property</var>,
to the values of the <var>target property</var> specified on the
two keyframes in <var>interval endpoints</var> taking the first such
value as <var>V</var><sub>start</sub> and the second as <var>V</var><sub>end</sub> and using <var>transformed
distance</var> as the interpolation parameter <var>p</var>.</p>
   </ol>
   <div class="note" role="note">
    <p>Note that this procedure assumes the following about the list of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-41">keyframes</a> specified on the effect:</p>
    <p></p>
    <ul>
     <li data-md="">
      <p>Each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-42">keyframe</a> has a specified <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-26">computed keyframe offset</a> in
the range [0, 1].</p>
     <li data-md="">
      <p>The list of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-43">keyframes</a> is sorted in ascending order by <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-27">computed keyframe offset</a>.</p>
     <li data-md="">
      <p>For a given property, there is at most one specified property
value on each keyframe.</p>
    </ul>
    <p>It is the responsibility of the user of the model (for example,
    a declarative markup or programming interface) to ensure these
    conditions are met.</p>
    <p>For example, for the <a href="#programming-interface">programming
    interface</a> defined by this specification, these conditions are
    met by the procedure to produce the <a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes-3">computed keyframes</a> that
    become the input to this procedure.</p>
   </div>
   <p class="note" role="note">Note: this procedure permits overlapping <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-44">keyframes</a>.
    The behavior is that at the point of overlap the output value jumps to
    the value of the last defined <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-45">keyframe</a> at that offset.
    For overlapping keyframes at 0 or 1, the output value for <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-14">iteration
    progress</a> values less than 0 or greater than
    or equal to 1 is the value of the first <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-46">keyframe</a> or the last <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-47">keyframe</a> in <var>keyframes</var> respectively.</p>
   <div class="issue" id="issue-e5c1f2ca">
    <a class="self-link" href="#issue-e5c1f2ca"></a> In the presence of certain timing functions, the input iteration
    progress to an animation effect is not limited to the range [0, 1].
    Currently, however, keyframe offsets <em>are</em> limited to the
    range [0, 1] and property values are simply extrapolated for input
    iteration progress values outside this range. 
    <p>We have considered removing this restriction since some cases exist
    where it is useful to be able to specify non-linear
    changes in property values at iteration progress values outside the
    range [0, 1].
    One example is an animation that interpolates from green to yellow
    but has an overshoot timing function that makes it temporarily
    interpolate ‘beyond’ yellow to red before settling back
    to yellow.</p>
    <p>While this effect could be achieved by modification of the keyframes
    and timing function, this approach seems to break the model’s
    separation of timing concerns from animation effects.</p>
    <p>It is not clear how this effect should be achieved but we note that
    allowing keyframe offsets outside [0, 1] may make the currently
    specified behavior where keyframes at offset 0 and 1 are synthesized
    as necessary, inconsistent.</p>
    <p>See <a href="http://lists.w3.org/Archives/Public/public-fx/2013AprJun/0184.html">section
    4 (Keyframe offsets outside [0, 1]) of minuted discussion from Tokyo
      2013 F2F</a>.</p>
   </div>
   <h3 class="heading settled" data-level="4.5" id="combining-effects"><span class="secno">4.5. </span><span class="content">Combining effects</span><a class="self-link" href="#combining-effects"></a></h3>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>After calculating the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-5">effect values</a> for a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-19">keyframe effect</a>, they are applied to the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-128">animation
effect</a>’s <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-3">target properties</a>.</p>
    <p>Since it is possible for multiple <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-3">in effect</a> <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-20">keyframe effects</a> to
target the same property it is often necessary to combine the results of several <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-21">keyframe effects</a> together.
This process is called <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="composition" data-noexport="" id="composition">compositing</dfn> and is
based on establishing an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-2">effect stack</a> for each property
targeted by an <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-4">in effect</a> <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-129">animation effect</a>.</p>
    <p>After compositing the results of <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-22">keyframe
effects</a> together, the composited result is combined with other
values specified for the <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-4">target property</a>.</p>
    <p>The arrangement is illustrated below:</p>
    <figure>
      <img alt="Overview of the application of effect values to their target properties" src="img/animation-cascade.svg" width="500"> 
     <figcaption> Overview of the application of <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-6">effect values</a> to
    their <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-5">target properties</a>.<br> The results of <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-23">keyframe effects</a> targeting the same property
    are composited together using an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-3">effect stack</a>.<br> The result of this composition is then inserted into the CSS cascade
    at an appropriate point. </figcaption>
    </figure>
    <p>For the first part of this operation—combining <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-7">effect values</a> that
target the same <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-6">property</a>— it is necessary to
determine both <em>how</em> <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-24">keyframe effects</a> are combined with one another,
as well as the <em>order</em> in which they are applied, that is,
their relative <em>composite order</em>.</p>
    <p>The matter of <em>how</em> <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-8">effect values</a> are
combined is governed by the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-11">composite operation</a> of
the corresponding <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-25">keyframe effects</a>.</p>
    <p>The relative <em>composite order</em> of <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-9">effect values</a> is determined by an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-4">effect stack</a> established for each
animated property.</p>
   </div>
   <h4 class="heading settled" data-level="4.5.1" id="animation-classes"><span class="secno">4.5.1. </span><span class="content">Animation classes</span><a class="self-link" href="#animation-classes"></a></h4>
   <p>This specification provides a common animation model intended to be used
by other specifications that define markup or programming interfaces on
top of this model. The particular markup or programming interface that
generated an <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-51">animation</a> defines its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="animation-class">animation class</dfn>.</p>
   <p>Further specifications may define specialized behavior for composite
ordering between different classes of animations or within a particular class.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>For example, animations whose <a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class-2">class</a> is ‘CSS
animation’ are defined as having a <em>higher</em> composite order than
animations whose class is ‘CSS transition’ but <em>lower</em> than
other animations without a specific class.</p>
    <p>Within the set of ‘CSS animation’ objects, specialized
composite ordering is defined based on the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-animations-1/#propdef-animation-name">animation-name</a> property
amongst other factors.</p>
   </div>
   <h4 class="heading settled" data-level="4.5.2" id="the-effect-stack"><span class="secno">4.5.2. </span><span class="content">The effect stack</span><a class="self-link" href="#the-effect-stack"></a></h4>
   <p>Associated with each property <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-7">targeted</a> by one or more <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-26">keyframe effects</a> is an <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="effect stack" data-noexport="" id="effect-stack">effect
stack</dfn> that establishes the relative composite order of the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-27">keyframe
effects</a>.</p>
   <p>The relative composite order of any two <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-28">keyframe effects</a>, <var>A</var> and <var>B</var>, within an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-5">effect stack</a> is
established by comparing their properties as follows:</p>
   <ol>
    <li data-md="">
     <p>Let the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="associated-animation-of-an-animation-effect">associated animation of an animation effect</dfn> be the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-52">animation</a> <a data-link-type="dfn" href="#associated-with-an-animation" id="ref-for-associated-with-an-animation-4">associated</a> with the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-130">animation effect</a> that affecting the property with which this <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-6">effect stack</a> is associated.</p>
    <li data-md="">
     <p>Sort <var>A</var> and <var>B</var> by applying the following
conditions in turn until the order is resolved,</p>
     <ol>
      <li data-md="">
       <p>If <var>A</var> and <var>B</var>’s associated animations differ by <a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class-3">class</a>, sort by any inter-class composite
order defined for the corresponding classes.</p>
      <li data-md="">
       <p>If <var>A</var> and <var>B</var> are still not sorted,
sort by any <a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class-4">class</a>-specific composite order
defined by the common class of <var>A</var> and <var>B</var>’s
associated animations.</p>
      <li data-md="">
       <p>If <var>A</var> and <var>B</var> are still not sorted,
sort by their corresponding position in the <a data-link-type="dfn" href="#global-animation-list" id="ref-for-global-animation-list-1">global animation
list</a>.</p>
      <li data-md="">
       <p>Sort <var>A</var> and <var>B</var> in <a data-link-type="dfn" href="#tree-order" id="ref-for-tree-order-1">tree order</a>.
(By this point, <var>A</var> and <var>B</var> must have the
same <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-53">animation</a> since otherwise the order would have been
resolved in the previous step.)</p>
     </ol>
   </ol>
   <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-131">Animation effects</a> that sort earlier have <em>lower</em> composite order.</p>
   <h4 class="heading settled" data-level="4.5.3" id="calculating-the-result-of-an-effect-stack"><span class="secno">4.5.3. </span><span class="content">Calculating the result of an effect stack</span><a class="self-link" href="#calculating-the-result-of-an-effect-stack"></a></h4>
   <p>In order to calculate the final value of an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-7">effect stack</a>,
the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-10">effect values</a> of each <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-29">keyframe effect</a> in the stack are
combined in composite order.</p>
   <p>Each step in the process of evaluating an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-8">effect stack</a> takes
an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="underlying-value">underlying value</dfn> as input.</p>
   <p>For each <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-30">keyframe effect</a> in the stack, the appropriate <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-11">effect value</a> from the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-31">keyframe effect</a> is combined with the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-4">underlying value</a> to produce a new value.
This resulting value becomes the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-5">underlying value</a> for combining
the next <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-32">keyframe effect</a> in the stack.</p>
   <p>The final value of an <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-9">effect stack</a>, called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="composited-value">composited value</dfn>, is simply the result of combining the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-12">effect value</a> of the final (highest composite order) <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-33">keyframe effect</a> in the stack with the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-6">underlying value</a> at that point.</p>
   <h4 class="heading settled" data-level="4.5.4" id="effect-composition"><span class="secno">4.5.4. </span><span class="content">Effect composition</span><a class="self-link" href="#effect-composition"></a></h4>
   <p>The specific operation used to combine an <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-13">effect value</a> with an <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-7">underlying value</a> is determined by the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="composite-operation">composite operation</dfn> of the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-34">keyframe effect</a> that
produced the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-14">effect value</a>.</p>
   <p>This specification defines three <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-12">composite operations</a> as
follows:</p>
   <dl>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="composite operation replace" data-noexport="" id="composite-operation-replace">replace</dfn></p>
    <dd data-md="">
     <p>The result of compositing the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-15">effect value</a> with the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-8">underlying value</a> is simply the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-16">effect value</a>.</p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="composite operation add" data-noexport="" id="composite-operation-add">add</dfn></p>
    <dd data-md="">
     <p>The <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-17">effect value</a> is <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-14">added</a> to the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-9">underlying
value</a>.
For <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-26">animation types</a> where the <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-15">addition operation</a> is defined
such that it is not commutative, the order of the operands is <code><a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-10">underlying value</a> + <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-18">effect value</a></code>.</p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="composite operation accumulate" data-noexport="" id="composite-operation-accumulate">accumulate</dfn></p>
    <p></p>
    <dd data-md="">
     <p>The <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-19">effect value</a> is <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-8">accumulated</a> onto the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-11">underlying value</a>.
For <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-27">animation types</a> where the <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-9">accumulation operation</a> is
defined such that it is not commutative, the order of the operands
is <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-12">underlying value</a> followed by <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-20">effect value</a>.</p>
   </dl>
   <h4 class="heading settled" data-level="4.5.5" id="applying-the-composited-result"><span class="secno">4.5.5. </span><span class="content">Applying the composited result</span><a class="self-link" href="#applying-the-composited-result"></a></h4>
   <p>Applying a <a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value-1">composited value</a> to a <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-8">target property</a> is achieved by adding a specified value to the CSS cascade.</p>
   <p>The level of the cascade to which this specified value is added
depends on the <a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class-5">class</a> of the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-54">animation</a> <a data-link-type="dfn" href="#associated-animation-of-an-animation-effect" id="ref-for-associated-animation-of-an-animation-effect-1">associated with</a> the
effect with the highest composite order in the <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-10">effect stack</a> for a given
property.
By default, the specified value is added to the ‘Animation
declarations’ level of the cascade (<a data-link-type="biblio" href="#biblio-css-cascade-3">[css-cascade-3]</a>).</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>For example, if the effect with the highest composite order is associated with
a ‘CSS transition’-class animation, the <a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value-2">composited value</a> will be added to ‘Transition declarations’ level of the cascade.</p>
   </div>
   <p>The <a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value-3">composited value</a> calculated for a CSS <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-9">target
property</a> is applied using the following process.</p>
   <ol>
    <li data-md="">
     <p>Calculate the <var>base value</var> of the property as
the value generated for that property by computing the computed value
for that property in the absence of animations.</p>
    <li data-md="">
     <p>Establish the <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-11">effect stack</a> for the property (see <a href="#the-effect-stack">§4.5.2 The effect stack</a>).</p>
    <li data-md="">
     <p>Calculate the <a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value-4">composited value</a> of the <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-12">effect
stack</a> passing in the <var>base value</var> of the property
as the initial <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-13">underlying value</a> (see <a href="#calculating-the-result-of-an-effect-stack">§4.5.3 Calculating the result of an effect stack</a>).</p>
    <li data-md="">
     <p>Insert the <a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value-5">composited value</a> into the CSS cascade at the
level defined for the <a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class-6">class</a> of the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-55">animation</a> <a data-link-type="dfn" href="#associated-animation-of-an-animation-effect" id="ref-for-associated-animation-of-an-animation-effect-2">associated with</a> the
effect at the top of the <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-13">effect stack</a> established for the target
property.</p>
   </ol>
   <h3 class="heading settled" data-level="4.6" id="effect-accumulation-section"><span class="secno">4.6. </span><span class="content">Effect accumulation</span><a class="self-link" href="#effect-accumulation-section"></a></h3>
   <p>Similar to the compositing performed between <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-21">effect values</a> (see <a href="#effect-composition">§4.5.4 Effect composition</a>), the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="iteration-composite-operation">iteration composite operation</dfn> determines how values are combined between successive iterations of
the same <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-35">keyframe effect</a>.</p>
   <p>This specification defines two <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-3">iteration composite operations</a> as follows:</p>
   <dl>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="iteration composite operation replace" data-noexport="" id="iteration-composite-operation-replace">replace</dfn></p>
    <dd data-md="">
     <p>Each successive iteration is calculated independently of previous
iterations.</p>
    <dt data-md="">
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="iteration composite operation accumulate" data-noexport="" id="iteration-composite-operation-accumulate">accumulate</dfn></p>
    <dd data-md="">
     <p>Successive iterations of the animation are <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-10">accumulated</a> with the
final value of the previous iteration.</p>
     <p>The application of the <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-4">iteration composite operation</a> is
incorporated in the calculation of the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-22">effect value</a> in <a href="#the-effect-value-of-a-keyframe-animation-effect">§4.4.4 The effect value of
  a keyframe effect</a>.</p>
   </dl>
   <h3 class="heading settled" data-level="4.7" id="side-effects-section"><span class="secno">4.7. </span><span class="content">Side effects of animation</span><a class="self-link" href="#side-effects-section"></a></h3>
   <p>For every property targeted by at least one <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-132">animation effect</a> that is <a data-link-type="dfn" href="#current" id="ref-for-current-3">current</a> or <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-5">in effect</a>, the user agent must act as if the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-will-change-1/#propdef-will-change">will-change</a> property (<a data-link-type="biblio" href="#biblio-css-will-change-1">[css-will-change-1]</a>) on the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-5">target element</a> includes the property.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>As a result of the above requirement, if an animation targets, for example,
the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-transforms-1/#propdef-transform">transform</a> property of an element, a <a data-link-type="dfn" href="https://drafts.csswg.org/css-position-3/#stacking-context">stacking context</a> will be
created for the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-6">target element</a> so long as the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-56">animation</a> is in
the <a data-link-type="dfn" href="#before-phase" id="ref-for-before-phase-13">before phase</a>, the <a data-link-type="dfn" href="#active-phase" id="ref-for-active-phase-12">active phase</a> or, if it has a <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-13">fill
mode</a> of ‘forwards’ or ‘both’, the <a data-link-type="dfn" href="#after-phase" id="ref-for-after-phase-12">after
phase</a>.</p>
   </div>
   <h3 class="heading settled" data-level="4.8" id="custom-effects"><span class="secno">4.8. </span><span class="content">Custom effects</span><a class="self-link" href="#custom-effects"></a></h3>
   <p class="issue" id="issue-621ca06d"><a class="self-link" href="#issue-621ca06d"></a> This whole feature needs to be revisited. The current thinking is that
       rather than having custom effects, we should simply have an <code>onsample</code> callback on each <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-133">animation effect</a>.  That
       would allow, for example, augmenting an existing effect with a function
       that performs logging or triggers additional actions at certain times.
       With the current arrangement, doing this would require adding a parent
       group just to achieve this.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>In some situations the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-134">animation
effects</a> provided by Web Animations may be insufficient.
For example, the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-135">animation effects</a> defined here are only able to target certain CSS properties.
They are unable, therefore, to modify the <a href="http://www.w3.org/TR/SVG11/struct.html#__svg__SVGSVGElement__currentScale"><code>currentScale</code></a> property of an SVG element to smoothly zoom the viewport without
affecting the document content.</p>
    <p>In such cases, where the provided <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-136">animation
effects</a> do not provide needed functionality, an effect defined by
script may be used.
Such <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-7">custom effects</a> receive an <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-15">iteration
progress</a> and <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-5">current iteration</a> from the timing model and
are responsible for producing an effect corresponding to the specified
time.</p>
    <p>Using an effect defined in script it is possible to animate not only
otherwise un-animatable attributes and properties, but potentially
anything that is accessible via script, including even producing audio
or creating vibrations.</p>
    <p>For example, using a <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-8">custom effect</a> that draws to a <a href="http://www.w3.org/TR/html5/scripting-1.html#the-canvas-element"><code>canvas</code></a> element, it is possible to produce a complex animated effect
featuring patterns that may be difficult to create using CSS or
SVG.
Compared to using <a href="http://www.w3.org/TR/animation-timing/">Timing control for
script-based animations</a>,
this approach ensures the animation is frame-rate
independent and can be paused, reversed, eased with timing effects,
accelerated, synchronized with other animations, and be controlled
in the same manner as any other Web Animations animation without any
additional programming.</p>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="custom-effect">custom effect</dfn> is an author-defined programming callback
that is passed timing information when <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-5">sampling</a> is performed.</p>
   <h4 class="heading settled" data-level="4.8.1" id="sampling-custom-effects"><span class="secno">4.8.1. </span><span class="content">Sampling custom effects</span><a class="self-link" href="#sampling-custom-effects"></a></h4>
   <p><a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-9">Custom effects</a> are called for each referencing <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-137">animation effect</a> when a <a data-link-type="dfn" href="#single-sample" id="ref-for-single-sample-2">sample</a> is performed based on the 
following criteria.</p>
   <ol>
    <li data-md="">
     <p>If, on the previous sample, the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-138">animation effect</a> referencing the <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-10">custom effect</a>:</p>
     <ul>
      <li data-md="">
       <p>was <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-6">in effect</a>, and</p>
      <li data-md="">
       <p>referenced this same <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-11">custom effect</a>, and</p>
      <li data-md="">
       <p>had a different <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-7">target element</a></p>
     </ul>
     <p>Call the callback passing an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-99">unresolved</a> <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-16">iteration progress</a> and the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-8">target element</a> from the previous sample as parameters to
the callback.</p>
    <li data-md="">
     <p>Call the callback for the current <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-9">target element</a> based on
the first matching condition from the following:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-139">animation effect</a> referencing the custom
effect is not <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-7">in effect</a> but was <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-8">in effect</a> in the previous
sample,</p>
       <dd data-md="">
        <p>Call the callback passing an <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-100">unresolved</a> <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-17">iteration progress</a> and the current <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-10">target element</a> as parameters to the callback.</p>
       <dt data-md="">
        <p>Otherwise, if the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-140">animation effect</a> referencing
the custom effect:</p>
       <dd data-md="">
        <ul>
         <li data-md="">
          <p><strong>is <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-9">in effect</a>, and</strong></p>
         <li data-md="">
          <p><strong>was not <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-10">in effect</a> in the previous <a data-link-type="dfn" href="#single-sample" id="ref-for-single-sample-3">sample</a>, or
  was <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-11">in effect</a> but with a different <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-18">iteration
  progress</a> or <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-6">current iteration</a>,</strong></p>
        </ul>
       <dd data-md="">
        <p>Call the callback passing with the referencing <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-141">animation effect</a>’s current <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-19">iteration
progress</a> and <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-11">target element</a> as parameters to the callback.</p>
      </dl>
     </div>
   </ol>
   <div class="issue" id="issue-70b6b88f">
    <a class="self-link" href="#issue-70b6b88f"></a> There may be use cases where an action needs to be triggered at
a specific point in an animation tree.
In many cases this can be achieved by inserting a custom effect with
a step-start easing that spans the period during which the action
should be triggered.
However, this can impose additional layout requirements on the
content which might be cumbersome to accomodate. 
    <p>Some alternatives under consideration:</p>
    <ul>
     <li data-md="">
      <p>Additional calling conditions could be defined to accommodate
zero-width custom effects. For example, it could be required
that the callback be called if (given infinite precision) there
was a time between the previous and current sample times that
aligned with the custom effect.</p>
     <li data-md="">
      <p>Instead of adding special calling conditions to custom effects,
a new type of animation effect, Trigger, could be introduced. The
trigger would only ever act as a zero-width custom effect as
described above, its constructor would take a callback function,
but not require a target or timing. It could also specify other
calling conventions, for example whether it should only trigger
in a specific playback direction.</p>
    </ul>
   </div>
   <h4 class="heading settled" data-level="4.8.2" id="execution-order-of-custom-effects"><span class="secno">4.8.2. </span><span class="content">Execution order of custom effects</span><a class="self-link" href="#execution-order-of-custom-effects"></a></h4>
   <p>Since <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-12">custom effects</a>, unlike <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-142">animation effects</a>, are not limited to
a single <a data-link-type="dfn" href="#target-property" id="ref-for-target-property-10">target property</a>, the steps for assessing their
order of execution differs from <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-143">animation effects</a>.f</p>
   <p><a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-13">Custom effects</a> are executed after all <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-144">animation effects</a> have completed and
applied their result to their targets (see <a href="#applying-the-composited-result">§4.5.5 Applying the composited result</a>).</p>
   <p class="issue" id="issue-8b46f38c"><a class="self-link" href="#issue-8b46f38c"></a> Need to define this more precisely.
    Are styles flushed?
    Presumably they are.
    Can we suspend reflow for the duration of executing the script-based
    animation effects and just do it once afterwards?</p>
   <p>Within the set of <a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-14">custom effects</a>, the
order of execution is the same as that defined for <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-145">animation effects</a> in <a href="#the-effect-stack">§4.5.2 The effect stack</a>.
Items sorted earlier are executed before those sorted later.</p>
   <h2 class="heading settled" data-level="5" id="programming-interface"><span class="secno">5. </span><span class="content">Programming interface</span><a class="self-link" href="#programming-interface"></a></h2>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>In addition to the abstract model described above, Web Animations also
defines a programming interface to the model.
This interface can be used to inspect and extend animations produced
by declarative means or for directly producing animations when
a procedural approach is more suitable.</p>
   </div>
   <h3 class="heading settled" data-level="5.1" id="time-values-in-the-programming-interface"><span class="secno">5.1. </span><span class="content"> Time values in the programming interface</span><a class="self-link" href="#time-values-in-the-programming-interface"></a></h3>
   <p><a data-link-type="dfn" href="#time-value" id="ref-for-time-value-46">Time values</a> are represented in the programming interface with
the type <code>double</code>. <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-101">Unresolved</a> time values are
represented by the value <code>null</code>.</p>
   <h3 class="heading settled" data-level="5.2" id="the-animationtimeline-interface"><span class="secno">5.2. </span><span class="content">The <code>AnimationTimeline</code> interface</span><a class="self-link" href="#the-animationtimeline-interface"></a></h3>
   <p><a data-link-type="dfn" href="#timeline" id="ref-for-timeline-40">Timelines</a> are represented in the Web Animations API by the <code class="idl"><a data-link-type="idl" href="#animationtimeline" id="ref-for-animationtimeline-1">AnimationTimeline</a></code> interface.</p>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationtimeline">AnimationTimeline</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double?" href="#dom-animationtimeline-currenttime" id="ref-for-dom-animationtimeline-currenttime-1">currentTime</a>;
    <a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-1">Animation</a>           <a class="nv idl-code" data-link-type="method" href="#dom-animationtimeline-play" id="ref-for-dom-animationtimeline-play-1">play</a> (<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-1">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-animationtimeline-play-effect-effect" id="ref-for-dom-animationtimeline-play-effect-effect-1">effect</a> = <span class="kt">null</span>);
};
</pre>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationTimeline" data-dfn-type="attribute" data-export="" id="dom-animationtimeline-currenttime">currentTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>Returns the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-47">time value</a> for this timeline or <code>null</code> if this timeline is <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline-14">inactive</a>.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationTimeline" data-dfn-type="method" data-export="" data-lt="play()" id="dom-animationtimeline-play"> Animation play(optional AnimationEffectReadOnly? effect = null)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-2">Animation</a></code> object associated with
this <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-41">timeline</a> that begins playback as soon as it is <a data-link-type="dfn" href="#ready" id="ref-for-ready-7">ready</a>.</p>
      <p>If <var>effect</var> is specified, it will be used as the animation’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-26">target effect</a>.</p>
      <p class="issue" id="issue-d0344606"><a class="self-link" href="#issue-d0344606"></a> It has been suggested this method be renamed, or even removed
(see <a href="https://github.com/w3ctag/spec-reviews/blob/master/2013/10/Web%20Animations.md#issue-play-method">TAG
feedback</a>).</p>
      <p class="issue" id="issue-56fe90e0"><a class="self-link" href="#issue-56fe90e0"></a> Need to define the start behavior when <var>effect</var> is null.</p>
      <p>The new <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-3">Animation</a></code> object is created using the <code class="idl"><a data-link-type="idl" href="#dom-animation-animation" id="ref-for-dom-animation-animation-1">Animation()</a></code> constructor passing this <code class="idl"><a data-link-type="idl" href="#animationtimeline" id="ref-for-animationtimeline-2">AnimationTimeline</a></code> object as the <var>timeline</var> parameter and <var>effect</var> as the <var>effect</var> parameter.</p>
      <p>Following construction of the <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-4">Animation</a></code> object, the procedure to <a data-link-type="dfn" href="#play-an-animation" id="ref-for-play-an-animation-3">play an animation</a> is performed on the newly constructed object
with the <var>auto-rewind</var> flag set to true.</p>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationTimeline/play(effect)" data-dfn-type="argument" data-export="" id="dom-animationtimeline-play-effect-effect">effect</dfn></p>
        <dd data-md="">
         <p>the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-27">target effect</a> to assign to the newly-created <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-5">Animation</a></code> object.</p>
       </dl>
      </div>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.3" id="the-documenttimeline-interface"><span class="secno">5.3. </span><span class="content">The <code>DocumentTimeline</code> interface</span><a class="self-link" href="#the-documenttimeline-interface"></a></h3>
   <p><a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-7">Document timelines</a>, including the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-5">default document
timeline</a> are represented in the Web Animations API by the <code class="idl"><a data-link-type="idl" href="#documenttimeline" id="ref-for-documenttimeline-1">DocumentTimeline</a></code> interface.</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-documenttimelineoptions">DocumentTimelineOptions</dfn> {
  <a class="n" data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a> <a class="nv idl-code" data-default="0" data-link-type="dict-member" data-type="DOMHighResTimeStamp " href="#dom-documenttimelineoptions-origintime" id="ref-for-dom-documenttimelineoptions-origintime-1">originTime</a> = 0;
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-documenttimeline-documenttimeline" id="ref-for-dom-documenttimeline-documenttimeline-1">Constructor</a> (<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-documenttimelineoptions" id="ref-for-dictdef-documenttimelineoptions-1">DocumentTimelineOptions</a> <a class="nv idl-code" data-link-type="argument" href="#dom-documenttimeline-documenttimeline-options-options" id="ref-for-dom-documenttimeline-documenttimeline-options-options-1">options</a>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="documenttimeline">DocumentTimeline</dfn> : <a class="n" data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline-3">AnimationTimeline</a> {
};
</pre>
   <div class="members">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentTimelineOptions" data-dfn-type="dict-member" data-export="" id="dom-documenttimelineoptions-origintime">originTime</dfn>, <span> of type <a data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a>, defaulting to <code>0</code></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#zero-time" id="ref-for-zero-time-3">zero time</a> for the timeline specified as a real number of
milliseconds relative to <a href="http://www.w3.org/TR/navigation-timing/#dom-performancetiming-navigationstart"> <code>navigationStart</code></a> moment <a data-link-type="biblio" href="#biblio-navigation-timing">[NAVIGATION-TIMING]</a> of
the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a> for the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>.</p>
    </dl>
   </div>
   <div class="constructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentTimeline" data-dfn-type="constructor" data-export="" data-lt="DocumentTimeline(options)" id="dom-documenttimeline-documenttimeline">DocumentTimeline (options)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#documenttimeline" id="ref-for-documenttimeline-2">DocumentTimeline</a></code> object associated with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active
document</a> of the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>.</p>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentTimeline/DocumentTimeline(options)" data-dfn-type="argument" data-export="" id="dom-documenttimeline-documenttimeline-options-options">options</dfn></p>
        <dd data-md="">
         <p>Configuration parameters for the newly-created timeline.
This specification defines only the <code class="idl"><a data-link-type="idl" href="#dom-documenttimelineoptions-origintime" id="ref-for-dom-documenttimelineoptions-origintime-2">originTime</a></code> member but other specifications
may extend this set.</p>
       </dl>
      </div>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.4" id="the-animation-interface"><span class="secno">5.4. </span><span class="content">The <code>Animation</code> interface</span><a class="self-link" href="#the-animation-interface"></a></h3>
   <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-57">Animations</a> are represented in the Web Animations
API by the <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-6">Animation</a></code> interface.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-animation-animation" id="ref-for-dom-animation-animation-2">Constructor</a> (<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-2">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-effect" id="ref-for-dom-animation-animation-effect-timeline-effect-1">effect</a> = <span class="kt">null</span>,
              <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline-4">AnimationTimeline</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-timeline" id="ref-for-dom-animation-animation-effect-timeline-timeline-1">timeline</a>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animation">Animation</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
             <span class="kt">attribute</span> <span class="kt">DOMString</span>                <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-animation-id" id="ref-for-dom-animation-id-1">id</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-3">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-type="AnimationEffectReadOnly?" href="#dom-animation-effect" id="ref-for-dom-animation-effect-1">effect</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline-5">AnimationTimeline</a>?       <a class="nv idl-code" data-link-type="attribute" data-type="AnimationTimeline?" href="#dom-animation-timeline" id="ref-for-dom-animation-timeline-1">timeline</a>;
             <span class="kt">attribute</span> <span class="kt">double</span>?                  <a class="nv idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-starttime" id="ref-for-dom-animation-starttime-1">startTime</a>;
             <span class="kt">attribute</span> <span class="kt">double</span>?                  <a class="nv idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-currenttime" id="ref-for-dom-animation-currenttime-1">currentTime</a>;
             <span class="kt">attribute</span> <span class="kt">double</span>                   <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animation-playbackrate" id="ref-for-dom-animation-playbackrate-1">playbackRate</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-animationplaystate" id="ref-for-enumdef-animationplaystate-1">AnimationPlayState</a>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationPlayState" href="#dom-animation-playstate" id="ref-for-dom-animation-playstate-1">playState</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-7">Animation</a>>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Promise<Animation>" href="#dom-animation-ready" id="ref-for-dom-animation-ready-1">ready</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-8">Animation</a>>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Promise<Animation>" href="#dom-animation-finished" id="ref-for-dom-animation-finished-1">finished</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>             <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-onfinish" id="ref-for-dom-animation-onfinish-1">onfinish</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>             <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-oncancel" id="ref-for-dom-animation-oncancel-1">oncancel</a>;
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-cancel" id="ref-for-dom-animation-cancel-1">cancel</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-finish" id="ref-for-dom-animation-finish-2">finish</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-play" id="ref-for-dom-animation-play-1">play</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-pause" id="ref-for-dom-animation-pause-1">pause</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-reverse" id="ref-for-dom-animation-reverse-1">reverse</a> ();
};
</pre>
   <div class="constructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="constructor" data-export="" data-lt="Animation(effect, timeline)" id="dom-animation-animation">Animation (effect, timeline)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-9">Animation</a></code> object using the following procedure.</p>
      <ol>
       <li data-md="">
        <p>Let <var>animation</var> be a new <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-10">Animation</a></code> object.</p>
       <li data-md="">
        <p>Run the procedure to <a data-link-type="dfn" href="#set-the-timeline-of-an-animation" id="ref-for-set-the-timeline-of-an-animation-1">set the timeline of an animation</a> on <var>animation</var> passing <var>timeline</var> as the <var>new
timeline</var> or, if a <var>timeline</var> argument is not provided,
passing the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-6">default document timeline</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active
document</a>.</p>
       <li data-md="">
        <p>Run the procedure to <a data-link-type="dfn" href="#set-the-target-effect-of-an-animation" id="ref-for-set-the-target-effect-of-an-animation-2">set the target effect of an animation</a> on <var>animation</var> passing <var>source</var> as the <var>new
effect</var>.</p>
      </ol>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation/Animation(effect, timeline)" data-dfn-type="argument" data-export="" id="dom-animation-animation-effect-timeline-effect">effect</dfn></p>
        <dd data-md="">
         <p>An optional value which, if not null, specifies the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-28">target
effect</a> to assign to the newly created <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-58">animation</a>.</p>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation/Animation(effect, timeline)" data-dfn-type="argument" data-export="" id="dom-animation-animation-effect-timeline-timeline">timeline</dfn></p>
        <dd data-md="">
         <p>An optional value which, if provided, specifies the <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-42">timeline</a> with which to associate the newly-created <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-59">animation</a>.
If not provided, the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-7">default document timeline</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a> is used.</p>
       </dl>
      </div>
    </dl>
   </div>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-id">id</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span></p>
     <dd data-md="">
      <p>A string used to identify the animation.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-effect">effect</dfn>, <span> of type <a data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-4">AnimationEffectReadOnly</a>, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-29">target effect</a> associated with this animation.
Setting this attribute updates the object’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-30">target effect</a> using
the procedure to <a data-link-type="dfn" href="#set-the-target-effect-of-an-animation" id="ref-for-set-the-target-effect-of-an-animation-3">set the target effect of an animation</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-timeline">timeline</dfn>, <span> of type <a data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline-6">AnimationTimeline</a>, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-43">timeline</a> associated with this animation.
Setting this attribute updates the object’s <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-44">timeline</a> using
the procedure to <a data-link-type="dfn" href="#set-the-timeline-of-an-animation" id="ref-for-set-the-timeline-of-an-animation-2">set the timeline of an animation</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-starttime">startTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, nullable</span></p>
     <dd data-md="">
      <p>Returns the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-33">start time</a> of this
animation.
Setting this attribute updates the <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time-34">animation start time</a> using
the procedure to <a data-link-type="dfn" href="#set-the-animation-start-time" id="ref-for-set-the-animation-start-time-1">set the animation start time</a> of this object
to the new value.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-currenttime">currentTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#current-time" id="ref-for-current-time-56">current time</a> of this animation.
Setting this attribute follows the procedure to <a data-link-type="dfn" href="#set-the-current-time" id="ref-for-set-the-current-time-5">set the current time</a> of this object to the new value.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-playbackrate">playbackRate</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-40">playback rate</a> of this
animation.
Setting this attribute follows the procedure to <a data-link-type="dfn" href="#set-the-animation-playback-rate" id="ref-for-set-the-animation-playback-rate-1">set the animation
playback rate</a> of this object to the new value.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-playstate">playState</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-animationplaystate" id="ref-for-enumdef-animationplaystate-2">AnimationPlayState</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#play-state" id="ref-for-play-state-7">play state</a> of this animation.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-ready">ready</dfn>, <span> of type Promise&lt;<a data-link-type="idl-name" href="#animation" id="ref-for-animation-11">Animation</a>>, readonly</span></p>
     <dd data-md="">
      <p>Returns the <a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise-17">current ready promise</a> for this object.</p>
      <p class="issue" id="issue-d29947cf"><a class="self-link" href="#issue-d29947cf"></a> This should become a cancelable promise when (if) such things exist.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-finished">finished</dfn>, <span> of type Promise&lt;<a data-link-type="idl-name" href="#animation" id="ref-for-animation-12">Animation</a>>, readonly</span></p>
     <dd data-md="">
      <p>Returns the <a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise-12">current finished promise</a> for this object.</p>
      <p class="issue" id="issue-d29947cf0"><a class="self-link" href="#issue-d29947cf0"></a> This should become a cancelable promise when (if) such things exist.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-onfinish">onfinish</dfn>, <span> of type <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span></p>
     <dd data-md="">
      <p>The event handler for the <a data-link-type="dfn" href="#finish-event" id="ref-for-finish-event-3">finish event</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute" data-export="" id="dom-animation-oncancel">oncancel</dfn>, <span> of type <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span></p>
     <dd data-md="">
      <p>The event handler for the <a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event-5">cancel event</a>.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method" data-export="" data-lt="cancel()" id="dom-animation-cancel">void cancel()</dfn></p>
     <dd data-md="">
      <p>Clears all effects caused by this animation and aborts its playback
by running the <a data-link-type="dfn" href="#cancel-an-animation" id="ref-for-cancel-an-animation-3">cancel an animation</a> procedure for this object.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method" data-export="" data-lt="finish()" id="dom-animation-finish">void finish()</dfn></p>
     <dd data-md="">
      <p>Seeks the animation to the end of the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-31">target effect</a> in the
current direction by running the <a data-link-type="dfn" href="#finish-an-animation" id="ref-for-finish-an-animation-3">finish an animation</a> procedure
for this object.</p>
      <div class="exceptions">
       <dl>
        <dt data-md="">
         <p>DOMException of type <code>InvalidStateError</code></p>
        <dd data-md="">
         <p>Raised if this animation’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-41">playback
rate</a> is zero, or if this animation’s <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-42">playback rate</a> is > zero and the <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-11">end time</a> of this animation’s <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-32">target effect</a> is infinity.</p>
       </dl>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method" data-export="" data-lt="play()" id="dom-animation-play">void play()</dfn></p>
     <dd data-md="">
      <p>Unpauses the animation and rewinds if it has finished playing using
the procedure to <a data-link-type="dfn" href="#play-an-animation" id="ref-for-play-an-animation-4">play an animation</a> for this object
with the <var>auto-rewind</var> flag set to true.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method" data-export="" data-lt="pause()" id="dom-animation-pause">void pause()</dfn></p>
     <dd data-md="">
      <p>Suspends the playback of this animation by running the procedure to <a data-link-type="dfn" href="#pause-an-animation" id="ref-for-pause-an-animation-1">pause an animation</a> for this object.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method" data-export="" data-lt="reverse()" id="dom-animation-reverse">void reverse()</dfn></p>
     <dd data-md="">
      <p>Inverts the <a data-link-type="dfn" href="#animation-playback-rate" id="ref-for-animation-playback-rate-43">playback rate</a> of
this animation and plays it using the <a data-link-type="dfn" href="#reverse-an-animation" id="ref-for-reverse-an-animation-1">reverse an animation</a> procedure
for this object.
As with <a class="idl-code" data-link-type="method" href="#dom-animation-play" id="ref-for-dom-animation-play-2">play()</a>, this
method unpauses the animation and, if the animation has already finished
playing in the reversed direction, seeks to the start of the <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-33">target
effect</a>.</p>
    </dl>
   </div>
   <h4 class="heading settled" data-level="5.4.1" id="the-animationplaystate-enumeration"><span class="secno">5.4.1. </span><span class="content">The <code>AnimationPlayState</code> enumeration</span><a class="self-link" href="#the-animationplaystate-enumeration"></a></h4>
<pre class="idl highlight def"><span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-animationplaystate">AnimationPlayState</dfn> { <dfn class="s idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export="" data-lt="&quot;idle&quot;|idle" id="dom-animationplaystate-idle">"idle"<a class="self-link" href="#dom-animationplaystate-idle"></a></dfn>, <dfn class="s idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export="" data-lt="&quot;pending&quot;|pending" id="dom-animationplaystate-pending">"pending"<a class="self-link" href="#dom-animationplaystate-pending"></a></dfn>, <dfn class="s idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export="" data-lt="&quot;running&quot;|running" id="dom-animationplaystate-running">"running"<a class="self-link" href="#dom-animationplaystate-running"></a></dfn>, <dfn class="s idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export="" data-lt="&quot;paused&quot;|paused" id="dom-animationplaystate-paused">"paused"<a class="self-link" href="#dom-animationplaystate-paused"></a></dfn>, <dfn class="s idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export="" data-lt="&quot;finished&quot;|finished" id="dom-animationplaystate-finished">"finished"<a class="self-link" href="#dom-animationplaystate-finished"></a></dfn> };
</pre>
   <dl>
    <dt data-md="">
     <p><code>idle</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#idle-play-state" id="ref-for-idle-play-state-8">idle play state</a>.</p>
    <dt data-md="">
     <p><code>pending</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#pending-play-state" id="ref-for-pending-play-state-7">pending play state</a>.</p>
    <dt data-md="">
     <p><code>running</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#running-play-state" id="ref-for-running-play-state-3">running play state</a>.</p>
    <dt data-md="">
     <p><code>paused</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#paused-play-state" id="ref-for-paused-play-state-7">paused play state</a>.</p>
    <dt data-md="">
     <p><code>finished</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#finished-play-state" id="ref-for-finished-play-state-13">finished play state</a>.</p>
   </dl>
   <h3 class="heading settled" data-level="5.5" id="the-animationeffectreadonly-interface"><span class="secno">5.5. </span><span class="content">The <code>AnimationEffectReadOnly</code> interface</span><a class="self-link" href="#the-animationeffectreadonly-interface"></a></h3>
   <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-146">Animation effects</a> are represented in the Web
Animations API by the <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-5">AnimationEffectReadOnly</a></code> interface.</p>
   <p>Interfaces that inherit from <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-6">AnimationEffectReadOnly</a></code> that are intended
to be mutable must also implement the additional <code class="idl"><a data-link-type="idl" href="#animationeffectmutable" id="ref-for-animationeffectmutable-1">AnimationEffectMutable</a></code> interface.</p>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationeffectreadonly">AnimationEffectReadOnly</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-1">AnimationEffectTimingReadOnly</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectTimingReadOnly" href="#dom-animationeffectreadonly-timing" id="ref-for-dom-animationeffectreadonly-timing-1">timing</a>;
    <a class="n" data-link-type="idl-name" href="#dictdef-computedtimingproperties" id="ref-for-dictdef-computedtimingproperties-1">ComputedTimingProperties</a> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectreadonly-getcomputedtiming" id="ref-for-dom-animationeffectreadonly-getcomputedtiming-1">getComputedTiming</a>();
    // Timing hierarchy
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-1">GroupEffectReadOnly</a>?     <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="GroupEffectReadOnly?" href="#dom-animationeffectreadonly-parent" id="ref-for-dom-animationeffectreadonly-parent-1">parent</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-7">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-animationeffectreadonly-previoussibling" id="ref-for-dom-animationeffectreadonly-previoussibling-1">previousSibling</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-8">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-animationeffectreadonly-nextsibling" id="ref-for-dom-animationeffectreadonly-nextsibling-1">nextSibling</a>;
};
[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationeffectmutable">AnimationEffectMutable</dfn> {
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-before" id="ref-for-dom-animationeffectmutable-before-1">before</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-9">AnimationEffectReadOnly</a>... <dfn class="nv idl-code" data-dfn-for="AnimationEffectMutable/before(effects...), AnimationEffectMutable/before(effects)" data-dfn-type="argument" data-export="" id="dom-animationeffectmutable-before-effects-effects">effects<a class="self-link" href="#dom-animationeffectmutable-before-effects-effects"></a></dfn>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-after" id="ref-for-dom-animationeffectmutable-after-1">after</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-10">AnimationEffectReadOnly</a>... <dfn class="nv idl-code" data-dfn-for="AnimationEffectMutable/after(effects...), AnimationEffectMutable/after(effects)" data-dfn-type="argument" data-export="" id="dom-animationeffectmutable-after-effects-effects">effects<a class="self-link" href="#dom-animationeffectmutable-after-effects-effects"></a></dfn>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-replace" id="ref-for-dom-animationeffectmutable-replace-1">replace</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-11">AnimationEffectReadOnly</a>... <dfn class="nv idl-code" data-dfn-for="AnimationEffectMutable/replace(effects...), AnimationEffectMutable/replace(effects)" data-dfn-type="argument" data-export="" id="dom-animationeffectmutable-replace-effects-effects">effects<a class="self-link" href="#dom-animationeffectmutable-replace-effects-effects"></a></dfn>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-remove" id="ref-for-dom-animationeffectmutable-remove-1">remove</a> ();
};
</pre>
   <div class="annotation"> In future, we may expose <code>any sample (double? progress,
double currentIteration, Animatable? target, any
underlyingValue)</code> so that the animation effects can be driven
apart from the timing model. </div>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffectreadonly-timing">timing</dfn>, <span> of type <a data-link-type="idl-name" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-2">AnimationEffectTimingReadOnly</a>, readonly</span></p>
     <dd data-md="">
      <p>Returns the input timing properties specified for this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-147">animation effect</a>.
This is comparable to the specified style on an Element, <code>elem.style</code>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectReadOnly" data-dfn-type="method" data-export="" id="dom-animationeffectreadonly-getcomputedtiming">getComputedTiming()</dfn></p>
     <dd data-md="">
      <p>Returns the calculated timing properties for this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-148">animation
effect</a>.
This is comparable to the computed style of an Element, <code>window.getComputedStyle(elem)</code>.</p>
      <p>Although many of the attributes of the returned object are common
to the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-3">AnimationEffectTimingReadOnly</a></code> object returned by the <code class="idl"><a data-link-type="idl" href="#dom-animationeffectreadonly-timing" id="ref-for-dom-animationeffectreadonly-timing-2">timing</a></code> attribute,
the values returned by this object differ in the following ways:</p>
      <ul>
       <li data-md="">
        <p><code>duration</code> – returns the calculated value of
the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-20">iteration duration</a>. If <code>timing.duration</code> is the string <code>auto</code>, this attribute will return
the current calculated value of the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-10">intrinsic iteration duration</a>.</p>
       <li data-md="">
        <p><code>fill</code> – the <code>auto</code> value is
replaced with the specific <a class="idl-code" data-link-type="enum" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-1">FillMode</a> depending on the type
of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-149">animation effect</a> (see <a href="#the-fillmode-enumeration">§5.9.1 The FillMode enumeration</a>).</p>
      </ul>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffectreadonly-parent">parent</dfn>, <span> of type <a data-link-type="idl-name" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-2">GroupEffectReadOnly</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-23">parent group</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-150">animation effect</a> or <code>null</code> if this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-151">animation effect</a> does not have
a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-24">parent group</a>.</p>
      <p class="issue" id="issue-894adfa6"><a class="self-link" href="#issue-894adfa6"></a> Should this be <code>parentGroup</code>?</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffectreadonly-previoussibling">previousSibling</dfn>, <span> of type <a data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-12">AnimationEffectReadOnly</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#previous-sibling" id="ref-for-previous-sibling-3">previous sibling</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-152">animation effect</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffectreadonly-nextsibling">nextSibling</dfn>, <span> of type <a data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-13">AnimationEffectReadOnly</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#next-sibling" id="ref-for-next-sibling-2">next sibling</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-153">animation effect</a>.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectMutable" data-dfn-type="method" data-export="" data-lt="before()" id="dom-animationeffectmutable-before"> void before (AnimationEffectReadOnly... effects)</dfn></p>
     <dd data-md="">
      <p>Inserts <var>effects</var> before this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-154">animation effect</a>.</p>
      <ol>
       <li data-md="">
        <p>If there is no <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-25">parent group</a>, abort these steps.</p>
       <li data-md="">
        <p>If any of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-155">animation effects</a> in <var>effects</var> is an <a data-link-type="dfn" href="#inclusive-ancestor" id="ref-for-inclusive-ancestor-1">inclusive ancestor</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-156">animation effect</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">HierarchyRequestError</span> exception and abort these steps.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#insert-children" id="ref-for-insert-children-1">Insert</a> <var>effects</var> before
this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-157">animation effect</a>.</p>
      </ol>
      <div class="note" role="note">
        Note that this definition precludes the following usage since <code>effect</code> is an <a data-link-type="dfn" href="#inclusive-ancestor" id="ref-for-inclusive-ancestor-2">inclusive ancestor</a> of itself: 
<pre class="lang-javascript highlight">effect<span class="p">.</span>before<span class="p">(</span>effect<span class="p">)</span><span class="p">;</span> <span class="c1">// throws HierarchyRequestError</span></pre>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectMutable" data-dfn-type="method" data-export="" data-lt="after()" id="dom-animationeffectmutable-after"> void after(AnimationEffectReadOnly... effects)</dfn></p>
     <dd data-md="">
      <p>Inserts <var>effects</var> after this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-158">animation effect</a>.</p>
      <ol>
       <li data-md="">
        <p>If there is no <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-26">parent group</a>, abort these steps.</p>
       <li data-md="">
        <p>If any of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-159">animation effects</a> in <var>effects</var> is an <a data-link-type="dfn" href="#inclusive-ancestor" id="ref-for-inclusive-ancestor-3">inclusive ancestor</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-160">animation effect</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">HierarchyRequestError</span> exception and abort these steps.</p>
       <li data-md="">
        <p>Let <var>reference child</var> be the <a data-link-type="dfn" href="#next-sibling-not-included" id="ref-for-next-sibling-not-included-1">next sibling of
this animation effect not in <var>effects</var></a>.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#insert-children" id="ref-for-insert-children-2">Insert</a> <var>effects</var> before <var>reference child</var>.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectMutable" data-dfn-type="method" data-export="" data-lt="replace()" id="dom-animationeffectmutable-replace"> void replace(AnimationEffectReadOnly... effects)</dfn></p>
     <dd data-md="">
      <p>Replaces this <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-14">AnimationEffectReadOnly</a></code> with the passed in <var>effects</var>.</p>
      <ol>
       <li data-md="">
        <p>If there is no <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-27">parent group</a>, abort these steps.</p>
       <li data-md="">
        <p>If any of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-161">animation effects</a> in <var>effects</var> is an <a data-link-type="dfn" href="#inclusive-ancestor" id="ref-for-inclusive-ancestor-4">inclusive ancestor</a> of the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-28">parent group</a> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">HierarchyRequestError</span> exception and abort these steps.</p>
       <li data-md="">
        <p>Let <var>reference child</var> be the <a data-link-type="dfn" href="#next-sibling-not-included" id="ref-for-next-sibling-not-included-2">next sibling of
this animation effect not in <var>effects</var></a>.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#remove-an-animation-effect" id="ref-for-remove-an-animation-effect-2">Remove</a> this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-162">animation effect</a> from its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-29">parent group</a>.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#insert-children" id="ref-for-insert-children-3">Insert</a> <var>effects</var> before <var>reference child</var>.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectMutable" data-dfn-type="method" data-export="" data-lt="remove()" id="dom-animationeffectmutable-remove">void remove()</dfn></p>
     <dd data-md="">
      <p><a data-link-type="dfn" href="#remove-an-animation-effect" id="ref-for-remove-an-animation-effect-3">Removes</a> this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-163">animation
effect</a> from its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-30">parent group</a> or <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-60">animation</a>.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.6" id="the-animationeffecttimingreadonly-interface"><span class="secno">5.6. </span><span class="content">The <code>AnimationEffectTimingReadOnly</code> interface</span><a class="self-link" href="#the-animationeffecttimingreadonly-interface"></a></h3>
   <p class="issue" id="issue-f6fa9df9"><a class="self-link" href="#issue-f6fa9df9"></a> This interface needs a constructor.</p>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationeffecttimingreadonly">AnimationEffectTimingReadOnly</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-delay" id="ref-for-dom-animationeffecttimingreadonly-delay-1">delay</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-enddelay" id="ref-for-dom-animationeffecttimingreadonly-enddelay-1">endDelay</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-2">FillMode</a>                           <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="FillMode" href="#dom-animationeffecttimingreadonly-fill" id="ref-for-dom-animationeffecttimingreadonly-fill-1">fill</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-iterationstart" id="ref-for-dom-animationeffecttimingreadonly-iterationstart-1">iterationStart</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unrestricted</span> <span class="kt">double</span>                <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unrestricted double" href="#dom-animationeffecttimingreadonly-iterations" id="ref-for-dom-animationeffecttimingreadonly-iterations-1">iterations</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <span class="kt">DOMString</span>) <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="(unrestricted double or DOMString)" href="#dom-animationeffecttimingreadonly-duration" id="ref-for-dom-animationeffecttimingreadonly-duration-1">duration</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-playbackrate" id="ref-for-dom-animationeffecttimingreadonly-playbackrate-1">playbackRate</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection-1">PlaybackDirection</a>                  <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="PlaybackDirection" href="#dom-animationeffecttimingreadonly-direction" id="ref-for-dom-animationeffecttimingreadonly-direction-1">direction</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-animationeffecttimingreadonly-easing" id="ref-for-dom-animationeffecttimingreadonly-easing-1">easing</a>;
};
</pre>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-delay">delay</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-28">start delay</a> which represents the number of milliseconds
from an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-164">animation effect</a>’s <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-28">start
time</a> to the start of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-35">active interval</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-enddelay">endDelay</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-6">end delay</a> which represents the number of milliseconds
from the end of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-165">animation effect</a>’s <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-36">active interval</a> until the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-29">start time</a> of any <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-166">animation effect</a> that may
follow, for example, in a <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-19">sequence effect</a>.
until its <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-12">end time</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-fill">fill</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-3">FillMode</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-14">fill mode</a> which defines the behavior of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-167">animation
effect</a> outside its <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-37">active interval</a>.</p>
      <p>When performing timing calculations the special value <span class="enum-value">auto</span> is expanded
to one of the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-15">fill modes</a> recognized by the timing model as
follows,</p>
      <div class="switch">
       <dl>
        <dt data-md="">
         <p>If the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-168">animation effect</a> to which the fill mode is being is
applied is a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-36">keyframe effect</a>,</p>
        <dd data-md="">
         <p>Use <span class="enum-value">none</span> as the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-16">fill
mode</a>.</p>
        <dt data-md="">
         <p>Otherwise,</p>
        <dd data-md="">
         <p>Use <span class="enum-value">both</span> as the <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode-17">fill
mode</a>.</p>
       </dl>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-iterationstart">iterationStart</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-169">animation effect</a>’s <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start-10">iteration start</a> property which is a
finite real number greater than or equal to zero representing the iteration
index at which the animation effect begins and its progress through that
iteration.</p>
      <p>For example, a value of 0.5 indicates that the animation effect begins half
way through its first iteration. A value of 1.2 indicates the animation
effect begins 20% of the way through its second iteration.</p>
      <div class="note" role="note">
        Note that the value of <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-iterations" id="ref-for-dom-animationeffecttimingreadonly-iterations-2">iterations</a></code> is effectively <em>added</em> to the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-iterationstart" id="ref-for-dom-animationeffecttimingreadonly-iterationstart-2">iterationStart</a></code> such that
an animation effect with an <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-iterationstart" id="ref-for-dom-animationeffecttimingreadonly-iterationstart-3">iterationStart</a></code> of
‘0.5’ and <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-iterations" id="ref-for-dom-animationeffecttimingreadonly-iterations-3">iterations</a></code> of
‘2’ will still repeat twice however it will begin
and end half-way through its <a data-link-type="dfn" href="#iteration-interval" id="ref-for-iteration-interval-3">iteration interval</a>. 
       <p><code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-iterationstart" id="ref-for-dom-animationeffecttiming-iterationstart-1">iterationStart</a></code> values greater than
or equal to one are typically only useful in combination with an
animation effect that has an <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-5">iteration composite
operation</a> of <span class="enum-value">accumulate</span> or when the <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-7">current iteration</a> index is otherwise significant.</p>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-iterations">iterations</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-170">animation effect</a>’s <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count-23">iteration count</a> property which is
a real number greater than or equal to zero (including positive
infinity) representing the number of times to the animation effect repeats.</p>
      <p>A value of positive infinity indicates that the animation effect repeats
forever.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-duration">duration</dfn>, <span> of type <code class="idl-code">(unrestricted double or DOMString)</code>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-21">iteration duration</a> which is a real number greater than
or equal to zero (including positive infinity) representing the
time taken to complete a single iteration of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-171">animation
effect</a>.
The string value <code>auto</code> is used to indicate that the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-22">iteration duration</a> reflects the animation effect’s <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-11">intrinsic iteration duration</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-playbackrate">playbackRate</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-172">animation effect</a>’s <a data-link-type="dfn" href="#animation-effect-playback-rate" id="ref-for-animation-effect-playback-rate-21">playback rate</a> property
which is a multiplier applied to the <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-29">local time</a> potentially
causing the effect to run at a different rate to its natural speed.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-direction">direction</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection-2">PlaybackDirection</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction-7">playback direction</a> of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-173">animation effect</a> which
defines whether playback proceeds forwards, backwards, or alternates
on each iteration.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingReadOnly" data-dfn-type="attribute" data-export="" id="dom-animationeffecttimingreadonly-easing">easing</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, readonly</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-17">timing function</a> used to scale the time to
produce easing effects.</p>
      <p>The syntax of the string is defined by the following production:</p>
      <blockquote>
       <div class="production"> "linear"
      | <a class="css" data-link-type="type" href="#typedef-cubic-bezier-timing-function" id="ref-for-typedef-cubic-bezier-timing-function-1">&lt;cubic-bezier-timing-function></a> | <a class="css" data-link-type="type" href="#typedef-step-timing-function" id="ref-for-typedef-step-timing-function-1">&lt;step-timing-function></a> </div>
      </blockquote>
      <div class="annotation"> In future we may extend this so that it is possible to query the
  individual functions in the string.
  It may be possible to do this by extending this attribute using
  some stringifier magic, or else we could just add <code>easingList</code> similar to HTML’s <code>classList</code>. </div>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.7" id="the-animationeffecttiming-interface"><span class="secno">5.7. </span><span class="content">The <code>AnimationEffectTiming</code> interface</span><a class="self-link" href="#the-animationeffecttiming-interface"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-2">AnimationEffectTiming</a></code> interface is a mutable subclass of <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-4">AnimationEffectTimingReadOnly</a></code> returned for the <code>timing</code> attribute
of a mutable <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-174">animation effect</a> such as<code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-1">KeyframeEffect</a></code>, <code class="idl"><a data-link-type="idl" href="#groupeffect" id="ref-for-groupeffect-1">GroupEffect</a></code>, or <code class="idl"><a data-link-type="idl" href="#sequenceeffect" id="ref-for-sequenceeffect-1">SequenceEffect</a></code>.</p>
   <p class="issue" id="issue-f6fa9df90"><a class="self-link" href="#issue-f6fa9df90"></a> This interface needs a constructor.</p>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationeffecttiming">AnimationEffectTiming</dfn> : <a class="n" data-link-type="idl-name" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-5">AnimationEffectTimingReadOnly</a> {
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-delay" id="ref-for-dom-animationeffecttiming-delay-1">delay</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-enddelay" id="ref-for-dom-animationeffecttiming-enddelay-1">endDelay</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-4">FillMode</a>                           <a class="nv idl-code" data-link-type="attribute" data-type="FillMode" href="#dom-animationeffecttiming-fill" id="ref-for-dom-animationeffecttiming-fill-1">fill</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-iterationstart" id="ref-for-dom-animationeffecttiming-iterationstart-2">iterationStart</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">unrestricted</span> <span class="kt">double</span>                <a class="nv idl-code" data-link-type="attribute" data-type="unrestricted double" href="#dom-animationeffecttiming-iterations" id="ref-for-dom-animationeffecttiming-iterations-1">iterations</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <span class="kt">DOMString</span>) <a class="nv idl-code" data-link-type="attribute" data-type="(unrestricted double or DOMString)" href="#dom-animationeffecttiming-duration" id="ref-for-dom-animationeffecttiming-duration-1">duration</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-playbackrate" id="ref-for-dom-animationeffecttiming-playbackrate-1">playbackRate</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection-3">PlaybackDirection</a>                  <a class="nv idl-code" data-link-type="attribute" data-type="PlaybackDirection" href="#dom-animationeffecttiming-direction" id="ref-for-dom-animationeffecttiming-direction-1">direction</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                          <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-animationeffecttiming-easing" id="ref-for-dom-animationeffecttiming-easing-2">easing</a>;
};
</pre>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-delay">delay</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-delay" id="ref-for-dom-animationeffecttimingreadonly-delay-2">delay</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-6">AnimationEffectTimingReadOnly</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-enddelay">endDelay</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-enddelay" id="ref-for-dom-animationeffecttimingreadonly-enddelay-2">endDelay</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-7">AnimationEffectTimingReadOnly</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-fill">fill</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-5">FillMode</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-fill" id="ref-for-dom-animationeffecttimingreadonly-fill-2">fill</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-8">AnimationEffectTimingReadOnly</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-iterationstart">iterationStart</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-iterationstart" id="ref-for-dom-animationeffecttimingreadonly-iterationstart-4">iterationStart</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-9">AnimationEffectTimingReadOnly</a></code> interface.</p>
      <p>If an attempt is made to set this attribute to a value less than zero,
a <span class="exceptionname">TypeError</span> must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">thrown</a> and the
value of the iterationStart attribute left unchanged.</p>
      <p class="note" role="note">Note: The reasoning for using a <span class="exceptionname">TypeError</span> rather than a <span class="exceptionname">RangeError</span> is to mirror
the behavior of WebIDL’s <a data-link-type="dfn" href="https://heycam.github.io/webidl/#EnforceRange">[EnforceRange]</a> annotation should that
annotation be able to be used with floating-point values in the future.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-iterations">iterations</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-iterations" id="ref-for-dom-animationeffecttimingreadonly-iterations-4">iterations</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-10">AnimationEffectTimingReadOnly</a></code> interface.</p>
      <p>This may be set to <code class="esvalue">+Infinity</code> to cause
the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-175">animation effect</a> to repeat indefinitely.</p>
      <p>If an attempt is made to set this attribute to a value less than zero or a <code class="esvalue">NaN</code> value, a <span class="exceptionname">TypeError</span> must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">thrown</a> and the value of
the iterations attribute left unchanged.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-duration">duration</dfn>, <span> of type <code class="idl-code">(unrestricted double or DOMString)</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-duration" id="ref-for-dom-animationeffecttimingreadonly-duration-2">duration</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-11">AnimationEffectTimingReadOnly</a></code> interface.</p>
      <p>If an attempt is made to set this attribute to a value less than zero, a <code class="esvalue">NaN</code> value, or a string other than the lowercase
value <code>auto</code>, a <span class="exceptionname">TypeError</span> must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">thrown</a> and the value of the duration attribute left
unchanged.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-playbackrate">playbackRate</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-playbackrate" id="ref-for-dom-animationeffecttimingreadonly-playbackrate-2">playbackRate</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-12">AnimationEffectTimingReadOnly</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-direction">direction</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection-4">PlaybackDirection</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-direction" id="ref-for-dom-animationeffecttimingreadonly-direction-2">direction</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-13">AnimationEffectTimingReadOnly</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTiming" data-dfn-type="attribute" data-export="" id="dom-animationeffecttiming-easing">easing</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-easing" id="ref-for-dom-animationeffecttimingreadonly-easing-2">easing</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-14">AnimationEffectTimingReadOnly</a></code> interface.</p>
      <p>If an attempt is made to set this attribute to an invalid value, a <span class="exceptionname">TypeError</span> must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">thrown</a> and the
value of the easing attribute left unchanged.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.8" id="the-animationeffecttimingproperties-dictionary"><span class="secno">5.8. </span><span class="content">The <code>AnimationEffectTimingProperties</code> dictionary</span><a class="self-link" href="#the-animationeffecttimingproperties-dictionary"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-1">AnimationEffectTimingProperties</a></code> dictionary encapsulates the timing
properties of an <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-15">AnimationEffectReadOnly</a></code> so that they can be set in bulk (as
with the <code class="idl"><a data-link-type="idl" href="#dom-animation-animation" id="ref-for-dom-animation-animation-3">Animation()</a></code> constructor) or returned as a readonly snapshot (as
with the <code class="idl"><a data-link-type="idl" href="#dom-animationeffectreadonly-getcomputedtiming" id="ref-for-dom-animationeffectreadonly-getcomputedtiming-2">getComputedTiming()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-16">AnimationEffectReadOnly</a></code> interface).</p>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-2">AnimationEffectTimingProperties</a></code> is simply a dictionary-equivalent of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-3">AnimationEffectTiming</a></code> interface.
The meaning and acceptable values for each of its members are identical.</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-animationeffecttimingproperties">AnimationEffectTimingProperties</dfn> {
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-delay" id="ref-for-dom-animationeffecttimingproperties-delay-1">delay</a> = 0;
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-enddelay" id="ref-for-dom-animationeffecttimingproperties-enddelay-1">endDelay</a> = 0;
    <a class="n" data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-6">FillMode</a>                           <a class="nv idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="FillMode                           " href="#dom-animationeffecttimingproperties-fill" id="ref-for-dom-animationeffecttimingproperties-fill-1">fill</a> = "auto";
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="0.0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-iterationstart" id="ref-for-dom-animationeffecttimingproperties-iterationstart-1">iterationStart</a> = 0.0;
    <span class="kt">unrestricted</span> <span class="kt">double</span>                <a class="nv idl-code" data-default="1.0" data-link-type="dict-member" data-type="unrestricted double                " href="#dom-animationeffecttimingproperties-iterations" id="ref-for-dom-animationeffecttimingproperties-iterations-1">iterations</a> = 1.0;
    (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <span class="kt">DOMString</span>) <a class="nv idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="(unrestricted double or DOMString) " href="#dom-animationeffecttimingproperties-duration" id="ref-for-dom-animationeffecttimingproperties-duration-1">duration</a> = "auto";
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="1.0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-playbackrate" id="ref-for-dom-animationeffecttimingproperties-playbackrate-1">playbackRate</a> = 1.0;
    <a class="n" data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection-5">PlaybackDirection</a>                  <a class="nv idl-code" data-default="&quot;normal&quot;" data-link-type="dict-member" data-type="PlaybackDirection                  " href="#dom-animationeffecttimingproperties-direction" id="ref-for-dom-animationeffecttimingproperties-direction-1">direction</a> = "normal";
    <span class="kt">DOMString</span>                          <a class="nv idl-code" data-default="&quot;linear&quot;" data-link-type="dict-member" data-type="DOMString                          " href="#dom-animationeffecttimingproperties-easing" id="ref-for-dom-animationeffecttimingproperties-easing-1">easing</a> = "linear";
};
</pre>
   <div class="members">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-delay">delay</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, defaulting to <code>0</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-delay" id="ref-for-dom-animationeffecttiming-delay-2">delay</a></code> attribute of
the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-4">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-enddelay">endDelay</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, defaulting to <code>0</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-enddelay" id="ref-for-dom-animationeffecttiming-enddelay-2">endDelay</a></code> attribute of
the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-5">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-fill">fill</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode-7">FillMode</a>, defaulting to <code>"auto"</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-fill" id="ref-for-dom-animationeffecttiming-fill-2">fill</a></code> attribute of
the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-6">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-iterationstart">iterationStart</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, defaulting to <code>0.0</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-iterationstart" id="ref-for-dom-animationeffecttiming-iterationstart-3">iterationStart</a></code> attribute
of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-7">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-iterations">iterations</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a>, defaulting to <code>1.0</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-iterations" id="ref-for-dom-animationeffecttiming-iterations-2">iterations</a></code> attribute
of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-8">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-duration">duration</dfn>, <span> of type <code class="idl-code">(unrestricted double or DOMString)</code>, defaulting to <code>"auto"</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-duration" id="ref-for-dom-animationeffecttiming-duration-2">duration</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-9">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-playbackrate">playbackRate</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, defaulting to <code>1.0</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-playbackrate" id="ref-for-dom-animationeffecttiming-playbackrate-2">playbackRate</a></code> attribute
of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-10">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-direction">direction</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection-6">PlaybackDirection</a>, defaulting to <code>"normal"</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-direction" id="ref-for-dom-animationeffecttiming-direction-2">direction</a></code> attribute
of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-11">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffectTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-animationeffecttimingproperties-easing">easing</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, defaulting to <code>"linear"</code></span></p>
     <dd data-md="">
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-easing" id="ref-for-dom-animationeffecttiming-easing-3">easing</a></code> attribute
of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-12">AnimationEffectTiming</a></code> interface.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.9" id="the-computedtimingproperties-dictionary"><span class="secno">5.9. </span><span class="content">The <code>ComputedTimingProperties</code> dictionary</span><a class="self-link" href="#the-computedtimingproperties-dictionary"></a></h3>
   <p>Timing parameters calculated by the timing model are exposed using <code class="idl"><a data-link-type="idl" href="#dictdef-computedtimingproperties" id="ref-for-dictdef-computedtimingproperties-2">ComputedTimingProperties</a></code> dictionary objects.</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-computedtimingproperties">ComputedTimingProperties</dfn> : <a class="n" data-link-type="idl-name" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-3">AnimationEffectTimingProperties</a> {
    <span class="kt">double</span>               <a class="nv idl-code" data-link-type="dict-member" data-type="double               " href="#dom-computedtimingproperties-starttime" id="ref-for-dom-computedtimingproperties-starttime-1">startTime</a>;
    <span class="kt">unrestricted</span> <span class="kt">double</span>  <a class="nv idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedtimingproperties-endtime" id="ref-for-dom-computedtimingproperties-endtime-1">endTime</a>;
    <span class="kt">unrestricted</span> <span class="kt">double</span>  <a class="nv idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedtimingproperties-activeduration" id="ref-for-dom-computedtimingproperties-activeduration-1">activeDuration</a>;
    <span class="kt">double</span>?              <a class="nv idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedtimingproperties-localtime" id="ref-for-dom-computedtimingproperties-localtime-1">localTime</a>;
    <span class="kt">double</span>?              <a class="nv idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedtimingproperties-progress" id="ref-for-dom-computedtimingproperties-progress-1">progress</a>;
    <span class="kt">unrestricted</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="dict-member" data-type="unrestricted double? " href="#dom-computedtimingproperties-currentiteration" id="ref-for-dom-computedtimingproperties-currentiteration-1">currentIteration</a>;
};
</pre>
   <div class="members">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-computedtimingproperties-starttime">startTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-30">start time</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-176">animation effect</a> in milliseconds.
This is the time at which the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-31">parent group</a>, if
any, has scheduled this child to run within its <a data-link-type="dfn" href="#transformed-time" id="ref-for-transformed-time-10">transformed time space</a>, that is, the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-177">animation effect</a>’s <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-12">inherited time
space</a>.</p>
      <p>The start of the <a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval-38">active interval</a> is based on the sum of
the <a data-link-type="dfn" href="#animation-effect-start-time" id="ref-for-animation-effect-start-time-31">start time</a> and <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-29">start delay</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-computedtimingproperties-endtime">endTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#end-time" id="ref-for-end-time-13">end time</a> of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-178">animation effect</a> expressed
in    milliseconds in <a data-link-type="dfn" href="#inherited-time" id="ref-for-inherited-time-13">inherited time
space</a>.
This corresponds to the end of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-179">animation effect</a>’s active
interval plus any <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay-7">end delay</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-computedtimingproperties-activeduration">activeDuration</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration-23">active duration</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-180">animation effect</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-computedtimingproperties-localtime">localTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#local-time" id="ref-for-local-time-30">local time</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-181">animation effect</a>.</p>
      <p>This will be <code>null</code> if this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-182">animation effect</a> is not <a data-link-type="dfn" href="#associated-with-an-animation" id="ref-for-associated-with-an-animation-5">associated with an animation</a> or if it has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-32">parent group</a> that is not <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-12">in effect</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-computedtimingproperties-progress">progress</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, nullable</span></p>
     <dd data-md="">
      <p>The current <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-20">iteration progress</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-183">animation effect</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedTimingProperties" data-dfn-type="dict-member" data-export="" id="dom-computedtimingproperties-currentiteration">currentIteration</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a>, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-8">current iteration</a> index beginning with zero for the first
iteration.</p>
      <p>In most cases this will be a (positive) integer. However, for
a zero-duration animation that repeats infinite times, the value
will be positive <span class="esvalue">Infinity</span>.</p>
      <p>As with <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved-102">unresolved</a> times, an unresolved <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-9">current iteration</a> is
represented by a <span class="esvalue">null</span> value.</p>
    </dl>
   </div>
   <h4 class="heading settled" data-level="5.9.1" id="the-fillmode-enumeration"><span class="secno">5.9.1. </span><span class="content">The <code>FillMode</code> enumeration</span><a class="self-link" href="#the-fillmode-enumeration"></a></h4>
<pre class="idl highlight def"><span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-fillmode">FillMode</dfn> { <dfn class="s idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;none&quot;|none" id="dom-fillmode-none">"none"<a class="self-link" href="#dom-fillmode-none"></a></dfn>, <dfn class="s idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;forwards&quot;|forwards" id="dom-fillmode-forwards">"forwards"<a class="self-link" href="#dom-fillmode-forwards"></a></dfn>, <dfn class="s idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;backwards&quot;|backwards" id="dom-fillmode-backwards">"backwards"<a class="self-link" href="#dom-fillmode-backwards"></a></dfn>, <dfn class="s idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;both&quot;|both" id="dom-fillmode-both">"both"<a class="self-link" href="#dom-fillmode-both"></a></dfn>, <dfn class="s idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;auto&quot;|auto" id="dom-fillmode-auto">"auto"<a class="self-link" href="#dom-fillmode-auto"></a></dfn> };
</pre>
   <dl>
    <dt data-md="">
     <p><code>none</code></p>
    <dd data-md="">
     <p>No fill.</p>
    <dt data-md="">
     <p><code>forwards</code></p>
    <dd data-md="">
     <p>Fill forwards.</p>
    <dt data-md="">
     <p><code>backwards</code></p>
    <dd data-md="">
     <p>Fill backwards.</p>
    <dt data-md="">
     <p><code>both</code></p>
    <dd data-md="">
     <p>Fill backwards and forwards.</p>
    <dt data-md="">
     <p><code>auto</code></p>
    <dd data-md="">
     <p>Fill backwards and forwards when applied to an <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-3">GroupEffectReadOnly</a></code> and no fill when applied to an <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-1">KeyframeEffectReadOnly</a></code>.</p>
   </dl>
   <h4 class="heading settled" data-level="5.9.2" id="the-playbackdirection-enumeration"><span class="secno">5.9.2. </span><span class="content">The <code>PlaybackDirection</code> enumeration</span><a class="self-link" href="#the-playbackdirection-enumeration"></a></h4>
<pre class="idl highlight def"><span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-playbackdirection">PlaybackDirection</dfn> { <dfn class="s idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;normal&quot;|normal" id="dom-playbackdirection-normal">"normal"<a class="self-link" href="#dom-playbackdirection-normal"></a></dfn>, <dfn class="s idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;reverse&quot;|reverse" id="dom-playbackdirection-reverse">"reverse"<a class="self-link" href="#dom-playbackdirection-reverse"></a></dfn>, <dfn class="s idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;alternate&quot;|alternate" id="dom-playbackdirection-alternate">"alternate"<a class="self-link" href="#dom-playbackdirection-alternate"></a></dfn>, <dfn class="s idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export="" data-lt="&quot;alternate-reverse&quot;|alternate-reverse" id="dom-playbackdirection-alternate-reverse">"alternate-reverse"<a class="self-link" href="#dom-playbackdirection-alternate-reverse"></a></dfn> };
</pre>
   <dl>
    <dt data-md="">
     <p><code>normal</code></p>
    <dd data-md="">
     <p>All iterations are played as specified.</p>
    <dt data-md="">
     <p><code>reverse</code></p>
    <dd data-md="">
     <p>All iterations are played in the reverse direction from the way
they are specified.</p>
    <dt data-md="">
     <p><code>alternate</code></p>
    <dd data-md="">
     <p>Even iterations are played as specified, odd iterations are played
in the reverse direction from the way they are specified.</p>
    <dt data-md="">
     <p><code>alternate-reverse</code></p>
    <dd data-md="">
     <p>Even iterations are played in the reverse direction from the way
they are specified, odd iterations are played as specified.</p>
   </dl>
   <h3 class="heading settled" data-level="5.10" id="the-animationgroup-interfaces"><span class="secno">5.10. </span><span class="content">The <code>GroupEffectReadOnly</code> and <code>GroupEffect</code> interfaces</span><a class="self-link" href="#the-animationgroup-interfaces"></a></h3>
   <p><a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-36">Group effects</a> are represented by the <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-4">GroupEffectReadOnly</a></code> interface.
Mutable <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-37">group effects</a> are represented by the <code class="idl"><a data-link-type="idl" href="#groupeffect" id="ref-for-groupeffect-2">GroupEffect</a></code> interface.</p>
<pre class="idl highlight def">[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="groupeffectreadonly">GroupEffectReadOnly</dfn> : <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-17">AnimationEffectReadOnly</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationnodelist" id="ref-for-animationnodelist-1">AnimationNodeList</a>      <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationNodeList" href="#dom-groupeffectreadonly-children" id="ref-for-dom-groupeffectreadonly-children-1">children</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-18">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-groupeffectreadonly-firstchild" id="ref-for-dom-groupeffectreadonly-firstchild-1">firstChild</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-19">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-groupeffectreadonly-lastchild" id="ref-for-dom-groupeffectreadonly-lastchild-1">lastChild</a>;
    <a class="n" data-link-type="idl-name" href="#groupeffect" id="ref-for-groupeffect-3">GroupEffect</a> <a class="nv idl-code" data-link-type="method" href="#dom-groupeffectreadonly-clone" id="ref-for-dom-groupeffectreadonly-clone-1">clone</a> ();
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="groupeffectmutable">GroupEffectMutable</dfn> {
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-groupeffectmutable-prepend" id="ref-for-dom-groupeffectmutable-prepend-1">prepend</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-20">AnimationEffectReadOnly</a>... <dfn class="nv idl-code" data-dfn-for="GroupEffectMutable/prepend(effects...), GroupEffectMutable/prepend(effects)" data-dfn-type="argument" data-export="" id="dom-groupeffectmutable-prepend-effects-effects">effects<a class="self-link" href="#dom-groupeffectmutable-prepend-effects-effects"></a></dfn>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-groupeffectmutable-append" id="ref-for-dom-groupeffectmutable-append-1">append</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-21">AnimationEffectReadOnly</a>... <dfn class="nv idl-code" data-dfn-for="GroupEffectMutable/append(effects...), GroupEffectMutable/append(effects)" data-dfn-type="argument" data-export="" id="dom-groupeffectmutable-append-effects-effects">effects<a class="self-link" href="#dom-groupeffectmutable-append-effects-effects"></a></dfn>);
};

[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="groupeffect">GroupEffect</dfn> : <a class="n" data-link-type="idl-name" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-5">GroupEffectReadOnly</a> {
};
<a class="n" data-link-type="idl-name" href="#groupeffect" id="ref-for-groupeffect-4">GroupEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animationeffectmutable" id="ref-for-animationeffectmutable-2">AnimationEffectMutable</a>;
<a class="n" data-link-type="idl-name" href="#groupeffect" id="ref-for-groupeffect-5">GroupEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#groupeffectmutable" id="ref-for-groupeffectmutable-1">GroupEffectMutable</a>;
</pre>
   <div class="constructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly" data-dfn-type="constructor" data-export="" data-lt="GroupEffectReadOnly(children, timing)" id="dom-groupeffectreadonly-groupeffectreadonly"> GroupEffectReadOnly ()</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-6">GroupEffectReadOnly</a></code> object using the following
procedure:</p>
      <ol>
       <li data-md="">
        <p>Create a new <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-7">GroupEffectReadOnly</a></code> object, <var>group</var>.</p>
       <li data-md="">
        <p>Let <var>timing input</var> be the result of applying the
procedure to <a data-link-type="dfn" href="#process-a-timing-argument" id="ref-for-process-a-timing-argument-1">process a timing argument</a> to <code class="idl"><a data-link-type="idl" href="#dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing" id="ref-for-dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing-1">timing</a></code>.</p>
       <li data-md="">
        <p>Set <code><var>group</var>.timing</code> to a new <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-15">AnimationEffectTimingReadOnly</a></code> object created in the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-execution-contexts">current realm</a> (that is, the same <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-code-realms">realm</a> used to create <var>effect</var>)
whose attributes are assigned the value of the member of the same name
on <var>timing input</var>.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#insert-children" id="ref-for-insert-children-4">Insert</a> <code class="idl"><a data-link-type="idl" href="#dom-groupeffectreadonly-groupeffectreadonly-children-timing-children" id="ref-for-dom-groupeffectreadonly-groupeffectreadonly-children-timing-children-1">children</a></code> before <code>null</code>.</p>
      </ol>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly/GroupEffectReadOnly(children, timing)" data-dfn-type="argument" data-export="" id="dom-groupeffectreadonly-groupeffectreadonly-children-timing-children">children</dfn></p>
        <dd data-md="">
         <p>A sequence of animation effects to add as children of this group.</p>
         <p>These children are appended in sequence using the same
semantics as the <code class="idl"><a data-link-type="idl" href="#dom-groupeffectmutable-append" id="ref-for-dom-groupeffectmutable-append-2">append()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#groupeffectmutable" id="ref-for-groupeffectmutable-2">GroupEffectMutable</a></code> interface.</p>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly/GroupEffectReadOnly(children, timing)" data-dfn-type="argument" data-export="" id="dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing">timing</dfn></p>
        <dd data-md="">
         <p>The timing properties or <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-23">iteration duration</a> of the new
group effect.</p>
       </dl>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffect" data-dfn-type="constructor" data-export="" data-lt="GroupEffect(children, timing)" id="dom-groupeffect-groupeffect"> GroupEffect ()</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#groupeffect" id="ref-for-groupeffect-6">GroupEffect</a></code> object using the same procedure as with
the <code class="idl"><a data-link-type="idl" href="#dom-groupeffectreadonly-groupeffectreadonly" id="ref-for-dom-groupeffectreadonly-groupeffectreadonly-1">GroupEffectReadOnly()</a></code> constructor with the following differences:</p>
      <ul>
       <li data-md="">
        <p><var>group</var> is initialized to a new <code class="idl"><a data-link-type="idl" href="#groupeffect" id="ref-for-groupeffect-7">GroupEffect</a></code> object
rather than a new <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-8">GroupEffectReadOnly</a></code> object.</p>
       <li data-md="">
        <p><code><var>group</var>.timing</code> is set to a new <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-13">AnimationEffectTiming</a></code> object rather than a new <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-16">AnimationEffectTimingReadOnly</a></code> object.</p>
      </ul>
    </dl>
   </div>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-groupeffectreadonly-children">children</dfn>, <span> of type <a data-link-type="idl-name" href="#animationnodelist" id="ref-for-animationnodelist-2">AnimationNodeList</a>, readonly</span></p>
     <dd data-md="">
      <p>The list of <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-14">child effects</a> in the group.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-groupeffectreadonly-firstchild">firstChild</dfn>, <span> of type <a data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-22">AnimationEffectReadOnly</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#first-child" id="ref-for-first-child-1">first child</a> of this <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-38">group effect</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-groupeffectreadonly-lastchild">lastChild</dfn>, <span> of type <a data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-23">AnimationEffectReadOnly</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#last-child" id="ref-for-last-child-1">last child</a> of this <a data-link-type="dfn" href="#group-effect" id="ref-for-group-effect-39">group effect</a>.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectMutable" data-dfn-type="method" data-export="" data-lt="prepend()" id="dom-groupeffectmutable-prepend"></dfn></p>
     <dt data-md="">
      <p>void prepend (AnimationEffectReadOnly... effects)</p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>If any of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-184">animation effects</a> in <var>effects</var> is an <a data-link-type="dfn" href="#inclusive-ancestor" id="ref-for-inclusive-ancestor-5">inclusive ancestor</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-185">animation effect</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">HierarchyRequestError</span> exception and abort these steps.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#insert-children" id="ref-for-insert-children-5">Insert</a> <var>effects</var> before
the <a data-link-type="dfn" href="#first-child" id="ref-for-first-child-2">first child</a>.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectMutable" data-dfn-type="method" data-export="" data-lt="append()" id="dom-groupeffectmutable-append"> void append (AnimationEffectReadOnly... effects)</dfn></p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>If any of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-186">animation effects</a> in <var>effects</var> is an <a data-link-type="dfn" href="#inclusive-ancestor" id="ref-for-inclusive-ancestor-6">inclusive ancestor</a> of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-187">animation effect</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">HierarchyRequestError</span> exception and abort these steps.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="#insert-children" id="ref-for-insert-children-6">Insert</a> <var>effects</var> before <code>null</code>.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="GroupEffectReadOnly" data-dfn-type="method" data-export="" data-lt="clone()" id="dom-groupeffectreadonly-clone"> GroupEffect clone ()</dfn></p>
     <dd data-md="">
      <p>Creates a deep copy of this <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-9">GroupEffectReadOnly</a></code> object using the
following procedure.</p>
      <ol>
       <li data-md="">
        <p>Let <var>source</var> be this <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-10">GroupEffectReadOnly</a></code> object,
the object to be cloned.</p>
       <li data-md="">
        <p>Let <var>cloned timing</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-4">AnimationEffectTimingProperties</a></code> object whose members are assigned
the value of the attribute with the same name on <code><var>source</var>.timing</code>.</p>
       <li data-md="">
        <p>Let <var>cloned children</var> be an empty sequence of <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-24">AnimationEffectReadOnly</a></code> objects.</p>
       <li data-md="">
        <p>For each <var>child</var> in <code><var>source</var>.children</code>, append the result
of calling <code><var>child</var>.clone()</code> to <var>cloned children</var>.</p>
       <li data-md="">
        <p>Return a new <code class="idl"><a data-link-type="idl" href="#groupeffect" id="ref-for-groupeffect-8">GroupEffect</a></code> object created by
calling the <code class="idl"><a data-link-type="idl" href="#dom-groupeffect-groupeffect" id="ref-for-dom-groupeffect-groupeffect-1">GroupEffect()</a></code> constructor with parameters <code>GroupEffect(<var>cloned children</var>, <var>cloned timing</var>)</code>.</p>
      </ol>
    </dl>
   </div>
   <h4 class="heading settled" data-level="5.10.1" id="processing-a-timing-argument"><span class="secno">5.10.1. </span><span class="content">Processing a <code>timing</code> argument</span><a class="self-link" href="#processing-a-timing-argument"></a></h4>
   <p>The <var>timing</var> parameter passed to the <code class="idl"><a data-link-type="idl" href="#dom-groupeffectreadonly-groupeffectreadonly" id="ref-for-dom-groupeffectreadonly-groupeffectreadonly-2">GroupEffectReadOnly()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-groupeffect-groupeffect" id="ref-for-dom-groupeffect-groupeffect-2">GroupEffect()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sequenceeffectreadonly-sequenceeffectreadonly" id="ref-for-dom-sequenceeffectreadonly-sequenceeffectreadonly-1">SequenceEffectReadOnly()</a></code>, or <code class="idl"><a data-link-type="idl" href="#dom-sequenceeffect-sequenceeffect" id="ref-for-dom-sequenceeffect-sequenceeffect-1">SequenceEffect()</a></code> constructor may be an <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-5">AnimationEffectTimingProperties</a></code> object, a double
representing the duration of the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-188">animation effect</a> in milliseconds, or
undefined.</p>
   <p>The following procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="process-a-timing-argument">process a timing argument</dfn>, <var>timing</var>, normalizes the above inputs into
a <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-6">AnimationEffectTimingProperties</a></code> object.</p>
   <dl>
    <dt data-md="">
     <p>If <var>timing</var> is an <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-7">AnimationEffectTimingProperties</a></code> object,</p>
    <dd data-md="">
     <p>Return <var>timing</var>.</p>
    <dt data-md="">
     <p>If <var>timing</var> is a <code>double</code>,</p>
    <dd data-md="">
     <p>Return a new <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-8">AnimationEffectTimingProperties</a></code> object with all members set
to their default values and <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingproperties-duration" id="ref-for-dom-animationeffecttimingproperties-duration-2">duration</a></code> set
to <var>timing</var>.</p>
    <dt data-md="">
     <p>Otherwise (<var>timing</var> is undefined),</p>
    <dd data-md="">
     <p>Return a new <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-9">AnimationEffectTimingProperties</a></code> object with all members set
to their default values.</p>
   </dl>
   <div class="note" role="note">
    <p>Note that since <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-17">AnimationEffectTimingReadOnly</a></code> objects have the same
member keys as <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-10">AnimationEffectTimingProperties</a></code> dictionaries, it is
also possible to pass the <code class="idl"><a data-link-type="idl" href="#dom-animationeffectreadonly-timing" id="ref-for-dom-animationeffectreadonly-timing-3">timing</a></code> member of another <code class="idl"><a data-link-type="idl" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-25">AnimationEffectReadOnly</a></code> to the any of the methods that invoke this method
as the <var>timing</var> parameter.</p>
    <p>Doing so will cause the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-18">AnimationEffectTimingReadOnly</a></code> object to be
treated as an <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-11">AnimationEffectTimingProperties</a></code> dictionary and thus it
will effectively be cloned, not shared.</p>
    <div class="example" id="example-f7d33ece">
     <a class="self-link" href="#example-f7d33ece"></a> 
     <p>For example, the timing of two animations may be aligned as follows:</p>
<pre class="lang-javascript highlight"><span class="kd">var</span> effectA <span class="o">=</span> elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">.</span>effect<span class="p">;</span>
<span class="kd">var</span> effectB <span class="o">=</span> elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> width<span class="o">:</span> <span class="s1">'0px'</span> <span class="p">}</span><span class="p">,</span> effectA<span class="p">.</span>timing<span class="p">)</span><span class="p">.</span>effect<span class="p">;</span>
alert<span class="p">(</span>effectA<span class="p">.</span>timing <span class="o">!==</span> effectB<span class="p">.</span>timing<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays 'true'
</span>alert<span class="p">(</span>effectA<span class="p">.</span>timing<span class="p">.</span>duration <span class="o">===</span> effectB<span class="p">.</span>timing<span class="p">.</span>duration<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays 'true'</span></pre>
    </div>
   </div>
   <h4 class="heading settled" data-level="5.10.2" id="definitions-for-manipulating-hierarchies"><span class="secno">5.10.2. </span><span class="content">Definitions for manipulating hierarchies</span><a class="self-link" href="#definitions-for-manipulating-hierarchies"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="next sibling not included" data-noexport="" id="next-sibling-not-included">next sibling of <var>effect</var> not included</dfn> in a set of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-189">animation
effects</a>, <var>effects</var> is determined using the following
teps:</p>
   <p></p>
   <ol>
    <li data-md="">
     <p>Let <var>context effect</var> be <var>effect</var>.</p>
    <li data-md="">
     <p>While the <a data-link-type="dfn" href="#next-sibling" id="ref-for-next-sibling-3">next sibling</a> of <var>context effect</var> is not <code>null</code> perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Let <var>context effect</var> be the <a data-link-type="dfn" href="#next-sibling" id="ref-for-next-sibling-4">next sibling</a> of <var>context effect</var>.</p>
      <li data-md="">
       <p>If <var>context effect</var> is not in <var>effects</var> return <var>context effect</var> and abort these steps.</p>
     </ol>
    <li data-md="">
     <p>Return <code>null</code>.</p>
   </ol>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="remove an animation effect" data-noexport="" id="remove-an-animation-effect">remove</dfn> a <var>effect</var> from its <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-33">parent group</a> or <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-61">animation</a>, perform the steps corresponding to the first
matching condition from below, if any:</p>
   <div class="switch">
    <dl>
     <dt data-md="">
      <p>If <var>effect</var> has a <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-34">parent group</a>,</p>
     <dd data-md="">
      <p>Remove <var>effect</var> from the <a data-link-type="dfn" href="#parent-group" id="ref-for-parent-group-35">parent group</a>’s
list of <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-15">child effects</a>.</p>
     <dt data-md="">
      <p>If <var>effect</var> is <a data-link-type="dfn" href="#directly-associated-with-an-animation" id="ref-for-directly-associated-with-an-animation-8">directly associated with
an animation</a>,</p>
     <dd data-md="">
      <p>Disassociate <var>effect</var> from the <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-62">animation</a>.</p>
    </dl>
   </div>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="insert children" data-noexport="" id="insert-children">insert</dfn> a series of zero or
more <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-190">animation effects</a>, <var>effects</var>, to <var>parent</var>’s list of <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-16">child effects</a> before <var>reference child</var> perform the following steps for each <var>effect</var> in <var>effects</var>:</p>
   <p></p>
   <ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#remove-an-animation-effect" id="ref-for-remove-an-animation-effect-4">Remove</a> <var>effect</var> from its parent.</p>
    <li data-md="">
     <p>Insert <var>effect</var> to <var>parent</var>’s list of <a data-link-type="dfn" href="#child-effect" id="ref-for-child-effect-17">child
effects</a> before <var>reference child</var></p>
   </ol>
   <h3 class="heading settled" data-level="5.11" id="the-animationnodelist-interface"><span class="secno">5.11. </span><span class="content">The <code>AnimationNodeList</code> interface</span><a class="self-link" href="#the-animationnodelist-interface"></a></h3>
   <p>A list of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-191">animation effects</a> may be represented by
an <code class="idl"><a data-link-type="idl" href="#animationnodelist" id="ref-for-animationnodelist-3">AnimationNodeList</a></code>.</p>
   <p>The <code>AnimationNodeList</code> interface supports indexed
properties with indices in the range 0 ≤ <var>index</var> &lt; <code>length</code>.</p>
   <p class="annotation"> The only reason this interface exists is to provide a familiar
experience for authors familiar with DOM interfaces where child nodes
are accessed via a <code>children</code> member. </p>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationnodelist">AnimationNodeList</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long" href="#dom-animationnodelist-length" id="ref-for-dom-animationnodelist-length-1">length</a>;
    <span class="kt">getter</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-26">AnimationEffectReadOnly</a>? <dfn class="nv idl-code" data-dfn-for="AnimationNodeList" data-dfn-type="method" data-export="" data-lt="item(index)" id="dom-animationnodelist-item">item<a class="self-link" href="#dom-animationnodelist-item"></a></dfn> (<span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="AnimationNodeList/item(index)" data-dfn-type="argument" data-export="" id="dom-animationnodelist-item-index-index">index<a class="self-link" href="#dom-animationnodelist-item-index-index"></a></dfn>);
};
</pre>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationNodeList" data-dfn-type="attribute" data-export="" id="dom-animationnodelist-length">length</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a>, readonly</span></p>
     <dd data-md="">
      <p>The number of <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-192">animation effects</a> in the list.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="idl-code" data-dfn-for="AnimationNodeList" data-dfn-type="method" data-export="" data-lt="item()" id="dom-animationnodelist-item"> getter AnimationEffectReadOnly? item(unsigned long index)<a class="self-link" href="#dom-animationnodelist-item"></a></dfn></p>
     <dd data-md="">
      <p>Returns the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-193">animation effect</a> at <code>index</code>.
If <code>index</code> is greater than or equal to <code>length</code> returns <code>null</code>.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.12" id="the-animationsequence-interfaces"><span class="secno">5.12. </span><span class="content">The <code>SequenceEffectReadOnly</code> and <code>SequenceEffect</code> interfaces</span><a class="self-link" href="#the-animationsequence-interfaces"></a></h3>
   <p><a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-20">Sequence effects</a> are represented by the <code class="idl"><a data-link-type="idl" href="#sequenceeffectreadonly" id="ref-for-sequenceeffectreadonly-1">SequenceEffectReadOnly</a></code> interface.
Mutable <a data-link-type="dfn" href="#sequence-effect" id="ref-for-sequence-effect-21">sequence effects</a> are represented by the <code class="idl"><a data-link-type="idl" href="#sequenceeffect" id="ref-for-sequenceeffect-2">SequenceEffect</a></code> interface.</p>
<pre class="idl highlight def">[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sequenceeffectreadonly">SequenceEffectReadOnly</dfn> : <a class="n" data-link-type="idl-name" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-11">GroupEffectReadOnly</a> {
    <a class="n" data-link-type="idl-name" href="#sequenceeffect" id="ref-for-sequenceeffect-3">SequenceEffect</a> <a class="nv idl-code" data-link-type="method" href="#dom-sequenceeffectreadonly-clone" id="ref-for-dom-sequenceeffectreadonly-clone-1">clone</a> ();
};

[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sequenceeffect">SequenceEffect</dfn> : <a class="n" data-link-type="idl-name" href="#sequenceeffectreadonly" id="ref-for-sequenceeffectreadonly-2">SequenceEffectReadOnly</a> {
};
<a class="n" data-link-type="idl-name" href="#sequenceeffect" id="ref-for-sequenceeffect-4">SequenceEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animationeffectmutable" id="ref-for-animationeffectmutable-3">AnimationEffectMutable</a>;
<a class="n" data-link-type="idl-name" href="#sequenceeffect" id="ref-for-sequenceeffect-5">SequenceEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#groupeffectmutable" id="ref-for-groupeffectmutable-3">GroupEffectMutable</a>;
</pre>
   <div class="contructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="SequenceEffect" data-dfn-type="constructor" data-export="" data-lt="SequenceEffect()" id="dom-sequenceeffect-sequenceeffect"><dfn class="dfn-paneled idl-code" data-dfn-for="SequenceEffectReadOnly" data-dfn-type="constructor" data-export="" data-lt="SequenceEffectReadOnly()" id="dom-sequenceeffectreadonly-sequenceeffectreadonly"> Constructor (sequence&lt;AnimationEffectReadOnly>? children,
optional (unrestricted double or AnimationEffectTimingProperties) timing)</dfn></dfn></p>
     <dd data-md="">
      <p>The meaning and handling of each of the parameters in this
constructor is identical to the <code class="idl"><a data-link-type="idl" href="#dom-groupeffect-groupeffect" id="ref-for-dom-groupeffect-groupeffect-3">GroupEffect()</a></code> constructor.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="SequenceEffectReadOnly" data-dfn-type="method" data-export="" data-lt="clone()" id="dom-sequenceeffectreadonly-clone"> SequenceEffect clone ()</dfn></p>
     <dd data-md="">
      <p>Creates a deep copy of this <code class="idl"><a data-link-type="idl" href="#sequenceeffectreadonly" id="ref-for-sequenceeffectreadonly-3">SequenceEffectReadOnly</a></code> object using
the same procedure as defined for the <code class="idl"><a data-link-type="idl" href="#dom-groupeffectreadonly-clone" id="ref-for-dom-groupeffectreadonly-clone-2">clone()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#groupeffectreadonly" id="ref-for-groupeffectreadonly-12">GroupEffectReadOnly</a></code> interface except that a new <code class="idl"><a data-link-type="idl" href="#sequenceeffect" id="ref-for-sequenceeffect-6">SequenceEffect</a></code> object is created.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.13" id="the-keyframeeffect-interfaces"><span class="secno">5.13. </span><span class="content">The <code>KeyframeEffectReadOnly</code> and <code>KeyframeEffect</code> interfaces</span><a class="self-link" href="#the-keyframeeffect-interfaces"></a></h3>
   <p><a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-37">Keyframe effects</a> are represented by the <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-2">KeyframeEffectReadOnly</a></code> interface.
Mutable <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-38">keyframe effects</a> are represented by the <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-2">KeyframeEffect</a></code> interface.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-1">Constructor</a> (<a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-1">Animatable</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target-1">target</a>,
              <span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes-1">keyframes</a>,
              <span class="kt">optional</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-1">KeyframeEffectOptions</a>) <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options-1">options</a>),
 <a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-1">Constructor</a> (<a class="n" data-link-type="idl-name" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-3">KeyframeEffectReadOnly</a> <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source-1">source</a>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="keyframeeffectreadonly">KeyframeEffectReadOnly</dfn> : <a class="n" data-link-type="idl-name" href="#animationeffectreadonly" id="ref-for-animationeffectreadonly-27">AnimationEffectReadOnly</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-2">Animatable</a>?                 <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Animatable?" href="#dom-keyframeeffectreadonly-target" id="ref-for-dom-keyframeeffectreadonly-target-1">target</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-iterationcompositeoperation" id="ref-for-enumdef-iterationcompositeoperation-1">IterationCompositeOperation</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IterationCompositeOperation" href="#dom-keyframeeffectreadonly-iterationcomposite" id="ref-for-dom-keyframeeffectreadonly-iterationcomposite-1">iterationComposite</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-1">CompositeOperation</a>          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="CompositeOperation" href="#dom-keyframeeffectreadonly-composite" id="ref-for-dom-keyframeeffectreadonly-composite-1">composite</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                   <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-keyframeeffectreadonly-spacing" id="ref-for-dom-keyframeeffectreadonly-spacing-1">spacing</a>;
    <span class="kt">sequence</span>&lt;<span class="kt">object</span>> <a class="nv idl-code" data-link-type="method" href="#dom-keyframeeffectreadonly-getkeyframes" id="ref-for-dom-keyframeeffectreadonly-getkeyframes-1">getKeyframes</a> ();
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-1">Constructor</a> (<a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-3">Animatable</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target" id="ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-target-1">target</a>,
              <span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes" id="ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes-1">keyframes</a>,
              <span class="kt">optional</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-2">KeyframeEffectOptions</a>) <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options" id="ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-options-1">options</a>),
 <a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect-source" id="ref-for-dom-keyframeeffect-keyframeeffect-source-1">Constructor</a> (<a class="n" data-link-type="idl-name" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-4">KeyframeEffectReadOnly</a> <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-source-source" id="ref-for-dom-keyframeeffect-keyframeeffect-source-source-1">source</a>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="keyframeeffect">KeyframeEffect</dfn> : <a class="n" data-link-type="idl-name" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-5">KeyframeEffectReadOnly</a> {
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-4">Animatable</a>?                 <a class="nv idl-code" data-link-type="attribute" data-type="Animatable?" href="#dom-keyframeeffect-target" id="ref-for-dom-keyframeeffect-target-1">target</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-iterationcompositeoperation" id="ref-for-enumdef-iterationcompositeoperation-2">IterationCompositeOperation</a> <a class="nv idl-code" data-link-type="attribute" data-type="IterationCompositeOperation" href="#dom-keyframeeffect-iterationcomposite" id="ref-for-dom-keyframeeffect-iterationcomposite-1">iterationComposite</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-2">CompositeOperation</a>          <a class="nv idl-code" data-link-type="attribute" data-type="CompositeOperation" href="#dom-keyframeeffect-composite" id="ref-for-dom-keyframeeffect-composite-1">composite</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                   <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-keyframeeffect-spacing" id="ref-for-dom-keyframeeffect-spacing-1">spacing</a>;
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes-1">setKeyframes</a> (<span class="kt">object</span>? <dfn class="nv idl-code" data-dfn-for="KeyframeEffect/setKeyframes(keyframes)" data-dfn-type="argument" data-export="" id="dom-keyframeeffect-setkeyframes-keyframes-keyframes">keyframes<a class="self-link" href="#dom-keyframeeffect-setkeyframes-keyframes-keyframes"></a></dfn>);
};
<a class="n" data-link-type="idl-name" href="#keyframeeffect" id="ref-for-keyframeeffect-3">KeyframeEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animationeffectmutable" id="ref-for-animationeffectmutable-4">AnimationEffectMutable</a>;
</pre>
   <div class="constructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="constructor" data-export="" data-lt="KeyframeEffectReadOnly(target, keyframes, options)" id="dom-keyframeeffectreadonly-keyframeeffectreadonly"> KeyframeEffectReadOnly (target, keyframes, options)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-6">KeyframeEffectReadOnly</a></code> object
using the following procedure:</p>
      <ol>
       <li data-md="">
        <p>Create a new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-7">KeyframeEffectReadOnly</a></code> object, <var>effect</var>.</p>
       <p></p>
       <li data-md="">
        <p>Set the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-12">target element</a> of <var>effect</var> to <var>target</var>.</p>
       <li data-md="">
        <p>Let <var>timing input</var> be the result corresponding to the first
matching condition from below.</p>
        <dl>
         <dt data-md="">
          <p>If <var>options</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-3">KeyframeEffectOptions</a></code> object,</p>
         <dd data-md="">
          <p>Let <var>timing input</var> be <var>options</var>.</p>
         <dt data-md="">
          <p>If <var>options</var> is a <code>double</code>,</p>
         <dd data-md="">
          <p>Let <var>timing input</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-12">AnimationEffectTimingProperties</a></code> object with all members set to their default values and <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingproperties-duration" id="ref-for-dom-animationeffecttimingproperties-duration-3">duration</a></code> set to <var>options</var>.</p>
         <dt data-md="">
          <p>Otherwise (<var>options</var> is undefined),</p>
         <dd data-md="">
          <p>Let <var>timing input</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-13">AnimationEffectTimingProperties</a></code> object with all members set to their default values.</p>
        </dl>
       <li data-md="">
        <p>Set <code><var>effect</var>.timing</code> to a new <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-19">AnimationEffectTimingReadOnly</a></code> object created in the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-execution-contexts">current realm</a> (that is, the same <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-code-realms">realm</a> used to create <var>effect</var>) whose attributes are
assigned the value of the member of the same name on <var>timing
input</var>.</p>
        <p>When assigning the attributes, apply the same error-handling as defined
for setters on the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-14">AnimationEffectTiming</a></code> interface.
If any of those setters require an exception to be thrown, the same
exception must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">thrown</a> by this procedure, aborting
all further steps.</p>
        <p>For example, the setter for the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttiming-duration" id="ref-for-dom-animationeffecttiming-duration-3">duration</a></code> attribute on the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-15">AnimationEffectTiming</a></code> interface requires that a <span class="exceptionname">TypeError</span> be thrown if an attempt
is made to set the duration to a value less than zero.
Likewise, if the duration specified on <var>timing input</var> is
less that zero, this procedure too must <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">TypeError</span> and abort all further steps.</p>
        <p>Attributes must be assigned in the order in which they appear in the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-20">AnimationEffectTimingReadOnly</a></code> interface.</p>
        <p class="issue" id="issue-c84185b9"><a class="self-link" href="#issue-c84185b9"></a> Make a constructor for <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-21">AnimationEffectTimingReadOnly</a></code> and call
that here.</p>
       <li data-md="">
        <p>If <var>options</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-4">KeyframeEffectOptions</a></code> object,
assign the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-iterationcomposite" id="ref-for-dom-keyframeeffectreadonly-iterationcomposite-2">iterationComposite</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-composite" id="ref-for-dom-keyframeeffectreadonly-composite-2">composite</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-spacing" id="ref-for-dom-keyframeeffectreadonly-spacing-2">spacing</a></code> properties of <var>effect</var> to
the corresponding value from <var>options</var>.</p>
        <p>As with <var>timing input</var>, when assigning these properties the
error-handling defined for the corresponding setters on the <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-4">KeyframeEffect</a></code> interface is applied.
As such, if any of those setters require an exception to be thrown
for the values specified by <var>options</var>, this procedure must <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> the same exception and abort all further steps.</p>
       <li data-md="">
        <p>Initialize the set of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-48">keyframes</a> by performing the procedure
defined for <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes-2">setKeyframes()</a></code> passing <var>keyframes</var> as the input.</p>
      </ol>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly/KeyframeEffectReadOnly(target, keyframes, options)" data-dfn-type="argument" data-export="" data-lt="target" id="dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target"></dfn><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect/KeyframeEffect(target, keyframes, options)" data-dfn-type="argument" data-export="" data-lt="target" id="dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">Animatable? target</dfn></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-13">target element</a> or target pseudo-element.
This may be <code>null</code> for animations that do not target
a specific element.</p>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly/KeyframeEffectReadOnly(target, keyframes, options)" data-dfn-type="argument" data-export="" data-lt="keyframes" id="dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes"></dfn><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect/KeyframeEffect(target, keyframes, options)" data-dfn-type="argument" data-export="" data-lt="keyframes" id="dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">object? keyframes</dfn></p>
        <dd data-md="">
         <p>The set of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-49">keyframes</a> to use.
The format and processing of this argument is defined in <a href="#processing-a-keyframes-argument">§5.13.3 Processing a keyframes
argument</a>.</p>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly/KeyframeEffectReadOnly(target, keyframes, options)" data-dfn-type="argument" data-export="" data-lt="options" id="dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options"></dfn><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect/KeyframeEffect(target, keyframes, options)" data-dfn-type="argument" data-export="" data-lt="options" id="dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">optional KeyframeEffectOptions options</dfn></p>
        <dd data-md="">
         <p>Either a number specifying the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-24">iteration duration</a> of the effect,
or a collection of properties specifying the timing and behavior of
the effect.</p>
       </dl>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="constructor" data-export="" data-lt="KeyframeEffectReadOnly(source)" id="dom-keyframeeffectreadonly-keyframeeffectreadonly-source"> KeyframeEffectReadOnly (source)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-8">KeyframeEffectReadOnly</a></code> object with the same properties
as <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source-2">source</a></code> using the following procedure:</p>
      <ol>
       <li data-md="">
        <p>Create a new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-9">KeyframeEffectReadOnly</a></code> object, <var>effect</var>.</p>
       <li data-md="">
        <p>Set the following properties of <var>effect</var> using the
corresponding values of <var>source</var>:</p>
        <ul>
         <li data-md="">
          <p><a data-link-type="dfn" href="#target-element" id="ref-for-target-element-14">target element</a>,</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-50">keyframes</a>,</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-6">iteration composite operation</a>,</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-13">composite operation</a>, and</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-3">spacing mode</a>.</p>
        </ul>
        <p class="issue" id="issue-ffa5fa19"><a class="self-link" href="#issue-ffa5fa19"></a> If <var>source</var> is using a <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-1">SharedKeyframeList</a></code> should
we continue to share it?</p>
       <li data-md="">
        <p>Set <var>effect</var>’s <code class="idl"><a data-link-type="idl" href="#dom-animationeffectreadonly-timing" id="ref-for-dom-animationeffectreadonly-timing-4">timing</a></code> member
to a new <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-22">AnimationEffectTimingReadOnly</a></code> object
created in the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-execution-contexts">current realm</a> (that is,
the same <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-code-realms">realm</a> used to create <var>effect</var>)
whose attributes are assigned the value of the member of the same name
on <var>source</var>’s <code class="idl"><a data-link-type="idl" href="#dom-animationeffectreadonly-timing" id="ref-for-dom-animationeffectreadonly-timing-5">timing</a></code> object.</p>
        <p class="note" role="note">Note: Unlike the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-2">KeyframeEffectReadOnly(target, keyframes,
options)</a></code> constructor, we do not need to re-throw exceptions or
specify the order in which members are assigned since the values
specified on <var>source</var>’s <code class="idl"><a data-link-type="idl" href="#dom-animationeffectreadonly-timing" id="ref-for-dom-animationeffectreadonly-timing-6">timing</a></code> can be assumed to be valid.</p>
      </ol>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly/KeyframeEffectReadOnly(source)" data-dfn-type="argument" data-export="" data-lt="source" id="dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source"></dfn><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect/KeyframeEffect(source)" data-dfn-type="argument" data-export="" data-lt="source" id="dom-keyframeeffect-keyframeeffect-source-source">KeyframeEffectReadOnly source</dfn></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-39">keyframe effect</a> from which to copy the various properties
that define the new <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-40">keyframe effect</a>.</p>
       </dl>
      </div>
      <p class="annotation"> This method is largely provided for consistency with <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect-source" id="ref-for-dom-keyframeeffect-keyframeeffect-source-2">KeyframeEffect(source)</a></code>. </p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="constructor" data-export="" data-lt="KeyframeEffect(target, keyframes, options)" id="dom-keyframeeffect-keyframeeffect"> KeyframeEffect (target, keyframes, options)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-5">KeyframeEffect</a></code> object using the same procedure as with
the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-3">KeyframeEffectReadOnly(target, keyframes, options)</a></code> constructor with
the following differences:</p>
      <ul>
       <li data-md="">
        <p><var>effect</var> is initialized to a new <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-6">KeyframeEffect</a></code> object
rather than a new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-10">KeyframeEffectReadOnly</a></code> object.</p>
       <li data-md="">
        <p><code><var>effect</var>.timing</code> is set to a new <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-16">AnimationEffectTiming</a></code> object rather than a new <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-23">AnimationEffectTimingReadOnly</a></code> object.</p>
      </ul>
      <p>Examples of the usage of this constructor are given in <a href="#creating-a-new-keyframeeffect-object">§5.13.1 Creating a new KeyframeEffect object</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="constructor" data-export="" data-lt="KeyframeEffect(source)" id="dom-keyframeeffect-keyframeeffect-source">KeyframeEffect (source)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-7">KeyframeEffect</a></code> object using the same procedure as with
the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-2">KeyframeEffectReadOnly(source)</a></code> constructor with the following
differences:</p>
      <ul>
       <li data-md="">
        <p><var>effect</var> is initialized to a new <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-8">KeyframeEffect</a></code> object
rather than a new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-11">KeyframeEffectReadOnly</a></code> object.</p>
       <li data-md="">
        <p><code><var>effect</var>.timing</code> is set to a new <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-17">AnimationEffectTiming</a></code> object rather than a new <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-24">AnimationEffectTimingReadOnly</a></code> object.</p>
      </ul>
      <div class="informative-bg">
       <em>This section is non-normative</em> 
       <p>This constructor is provided so that authors can take the animations
generated by declarative markup, which are returned in a read-only format,
and produce a mutable copy.</p>
       <div class="example" id="example-a87509b3">
        <a class="self-link" href="#example-a87509b3"></a> 
        <p>For example, it is possible to define an animation using CSS and
subsequently replace its <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-194">animation effect</a> as follows:</p>
<pre class="lang-javascript highlight"><span class="c1">// Create and get a CSSAnimation
</span>elem<span class="p">.</span>style<span class="p">.</span>animation <span class="o">=</span> <span class="s1">'swellMargin 2s'</span><span class="p">;</span>
<span class="kr">const</span> animation <span class="o">=</span> elem<span class="p">.</span>getAnimations<span class="p">(</span><span class="p">)</span><span class="p">.</span>find<span class="p">(</span>
  animation <span class="o">=></span> animation<span class="p">.</span>animationName <span class="o">==</span> <span class="s1">'swellMargin'</span><span class="p">)</span><span class="p">;</span>
console<span class="p">.</span>log<span class="p">(</span>animation<span class="p">.</span>effect<span class="p">.</span>constructor<span class="p">.</span>name<span class="p">)</span><span class="p">;</span> <span class="c1">// "KeyframeEffectReadOnly"
</span>
<span class="c1">// Make a mutable copy
</span>animation<span class="p">.</span>effect <span class="o">=</span> <span class="k">new</span> KeyframeEffect<span class="p">(</span>animation<span class="p">.</span>effect<span class="p">)</span><span class="p">;</span>
console<span class="p">.</span>log<span class="p">(</span>animation<span class="p">.</span>effect<span class="p">.</span>constructor<span class="p">.</span>name<span class="p">)</span><span class="p">;</span> <span class="c1">// "KeyframeEffect"
</span>
<span class="c1">// It is now possible to manipulate the effect
</span><span class="c1">// e.g. apply 'paced' spacing
</span><span class="kr">const</span> keyframes <span class="o">=</span> animation<span class="p">.</span>effect<span class="p">.</span>getKeyframes<span class="p">(</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>setKeyframes<span class="p">(</span>keyframes<span class="p">.</span>map<span class="p">(</span>
  keyframe <span class="o">=></span> Object<span class="p">.</span>assign<span class="p">(</span>keyframe<span class="p">,</span> <span class="p">{</span> offset<span class="o">:</span> <span class="kc">null</span> <span class="p">}</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>effect<span class="p">.</span>spacing <span class="o">=</span> <span class="s1">'paced(margin-left)'</span><span class="p">;</span>

<span class="c1">// Note that changing 'animation-*' properties will not affect the
</span><span class="c1">// new effect.
</span>elem<span class="p">.</span>style<span class="p">.</span>animationDuration <span class="o">=</span> <span class="s1">'3s'</span><span class="p">;</span>
console<span class="p">.</span>log<span class="p">(</span>animation<span class="p">.</span>effect<span class="p">.</span>timing<span class="p">.</span>duration<span class="p">)</span><span class="p">;</span> <span class="c1">// 2000
</span>
<span class="c1">// However, 'animation-*' properties still affect the /Animation/
</span>elem<span class="p">.</span>style<span class="p">.</span>animationPlayState <span class="o">=</span> <span class="s1">'paused'</span><span class="p">;</span>
console<span class="p">.</span>log<span class="p">(</span>animation<span class="p">.</span>playState<span class="p">)</span><span class="p">;</span> <span class="c1">// "pending" (waiting to pause)
</span>
<span class="c1">// Likewise:
</span>elem<span class="p">.</span>style<span class="p">.</span>animation <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
console<span class="p">.</span>log<span class="p">(</span>animation<span class="p">.</span>playState<span class="p">)</span><span class="p">;</span> <span class="c1">// "idle" (animation has been cancelled)
</span></pre>
       </div>
      </div>
    </dl>
   </div>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-keyframeeffectreadonly-target">target</dfn>, <span> of type <a data-link-type="idl-name" href="#animatable" id="ref-for-animatable-5">Animatable</a>, readonly, nullable</span><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute" data-export="" data-lt="target" id="dom-keyframeeffect-target"></dfn></p>
     <dd data-md="">
      <p>The element or pseudo-element being animated by this object.
This may be <code>null</code> for animations that do not target
a specific element such as an animation that produces a sound
using an audio API.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-keyframeeffectreadonly-iterationcomposite">iterationComposite</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-iterationcompositeoperation" id="ref-for-enumdef-iterationcompositeoperation-3">IterationCompositeOperation</a>, readonly</span><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute" data-export="" data-lt="iterationComposite" id="dom-keyframeeffect-iterationcomposite"></dfn></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-7">iteration composite operation</a> property of this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-41">keyframe effect</a> as specified by one of the <a data-link-type="dfn" href="#iterationcompositeoperation" id="ref-for-iterationcompositeoperation-1">IterationCompositeOperation</a> enumeration values.</p>
      <p>On setting, sets the <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-8">iteration composite operation</a> property of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-195">animation effect</a> to the provided value.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-keyframeeffectreadonly-composite">composite</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-3">CompositeOperation</a>, readonly</span><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute" data-export="" data-lt="composite" id="dom-keyframeeffect-composite"></dfn></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-14">composite operation</a> used to composite this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-42">keyframe effect</a> with the <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-14">effect stack</a>, as
specified by one of the <a data-link-type="dfn" href="#compositeoperation" id="ref-for-compositeoperation-1">CompositeOperation</a> enumeration
values.</p>
      <p>On setting, sets the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-15">composite operation</a> property of this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-196">animation effect</a> to the provided value.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="attribute" data-export="" id="dom-keyframeeffectreadonly-spacing">spacing</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, readonly</span><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute" data-export="" data-lt="spacing" id="dom-keyframeeffect-spacing"></dfn></p>
     <dd data-md="">
      <p>On getting, returns the <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-4">spacing mode</a> to
use for this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-43">keyframe effect</a>.</p>
      <p>On setting, sets the <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-5">spacing mode</a> property of this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-44">keyframe effect</a> to the provided value.</p>
      <p>Recognized values are defined by the following grammar:</p>
      <blockquote>
<pre class="prod">distribute <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one">|</a> paced(<a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#typedef-ident">&lt;ident></a>)</pre>
      </blockquote>
      <p>The meaning of each value is as follows:</p>
      <dl>
       <dt data-md="">
        <p>distribute</p>
       <dd data-md="">
        <p>Use the <a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-4">distribute keyframe spacing mode</a>.</p>
       <dt data-md="">
        <p>paced(<a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#typedef-ident">&lt;ident></a>)</p>
       <dd data-md="">
        <p>Use the <a data-link-type="dfn" href="#paced-keyframe-spacing-mode" id="ref-for-paced-keyframe-spacing-mode-8">paced keyframe spacing mode</a> with the property
name indicated by <code>&lt;ident></code> as the <a data-link-type="dfn" href="#paced-property" id="ref-for-paced-property-5">paced
property</a>.</p>
        <p>For example, <code>paced(transform)</code> would indicate that
the keyframes should be spaced such that changes to the <span class="prop-name">transform</span> property occur at
a constant rate.</p>
      </dl>
      <p>If an attempt is made to set the spacing mode to a value that does not
conform to the above grammar, a <span class="exceptionname">TypeError</span> must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">thrown</a> and the value of the <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-6">spacing mode</a> left unaffected.</p>
      <p>If the <a data-link-type="dfn" href="#paced-property" id="ref-for-paced-property-6">paced property</a> is not a property supported by the
implementation, or is not animatable by the implementation, the <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-7">spacing mode</a> must be set to <a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-5">distribute</a>.
A property is considered to be animatable if its <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-28">animation type</a> is
anything other than <a data-link-type="dfn" href="#concept-not-animatable" id="ref-for-concept-not-animatable-5">not animatable</a>, or, for shorthand properties, if
at least one of its component longhand properties has an <a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type-29">animation
type</a> other than <a data-link-type="dfn" href="#concept-not-animatable" id="ref-for-concept-not-animatable-6">not animatable</a>.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectReadOnly" data-dfn-type="method" data-export="" data-lt="getKeyframes()" id="dom-keyframeeffectreadonly-getkeyframes"> sequence&lt;object> getKeyframes()</dfn></p>
     <dd data-md="">
      <p>Returns the <a data-link-type="dfn" href="#computed-offset-keyframes" id="ref-for-computed-offset-keyframes-1">computed-offset keyframes</a> that make up this effect.</p>
      <div class="informative-bg">
       <em>This section is non-normative</em> 
       <p>The result of this method is a sequence of objects of the following
  format:</p>
<pre class="lang-idl highlight"><span class="kt">dictionary</span> <span class="nv">ComputedKeyframe</span> {
    // ... property-value pairs ...
    // i.e. DOMString propertyName
    <span class="kt">double</span>?             <span class="nv">offset</span> = <span class="kt">null</span>;
    <span class="kt">double</span>              <span class="nv">computedOffset</span>;
    <span class="kt">DOMString</span>           <span class="nv">easing</span> = "linear";
    <span class="n">CompositeOperation</span>? <span class="nv">composite</span>;
};
</pre>
       <p>The meaning and values of each member is as follows:</p>
       <dl>
        <dt data-md="">
         <p><code>offset</code></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-14">keyframe offset</a> of the <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-51">keyframe</a> specified as
  a number between 0.0 and 1.0 inclusive or <code>null</code>.</p>
         <p>This will be <code>null</code> if the <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-52">keyframe</a> is
  automatically spaced using the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-45">keyframe effect</a>’s <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-8">keyframe spacing mode</a>.</p>
        <dt data-md="">
         <p><code>computedOffset</code></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-28">computed keyframe offset</a> for this <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-53">keyframe</a> calculated by applying the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-46">keyframe effect</a>’s <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-9">keyframe
  spacing mode</a> when the list of <a data-link-type="dfn" href="#computed-offset-keyframes" id="ref-for-computed-offset-keyframes-2">computed-offset keyframes</a> was produced.</p>
         <p>Unlike the <code>offset</code> member, the <code>computedOffset</code> is never null.</p>
        <dt data-md="">
         <p><code>easing</code></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-18">timing function</a> used to transform the progress of time
  from this keyframe until the next keyframe in the series.</p>
        <dt data-md="">
         <p><code>composite</code></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#keyframe-specific-composite-operation" id="ref-for-keyframe-specific-composite-operation-2">keyframe-specific composite operation</a> used to combine the
  values specified in this keyframe with the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-14">underlying value</a>.</p>
         <p>This member will be absent if the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-16">composite operation</a> specified on the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-47">keyframe effect</a> is being used.</p>
       </dl>
      </div>
      <p>Since <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-54">keyframes</a> are represented by a partially open-ended dictionary
type that is not currently able to be expressed with WebIDL, the procedure
used to prepare the result of this method is defined in prose below:</p>
      <ol>
       <li data-md="">
        <p>Let <var>result</var> be an empty sequence of objects.</p>
       <li data-md="">
        <p>Let <var>keyframes</var> be the result of calculating the <a data-link-type="dfn" href="#computed-offset-keyframes" id="ref-for-computed-offset-keyframes-3">computed-offset keyframes</a> for this <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-48">keyframe effect</a> (see <a href="#computed-offset-keyframes-section">§5.13.5 Computed-offset keyframes</a>).</p>
       <li data-md="">
        <p>For each <var>keyframe</var> in <var>keyframes</var> perform the following steps:</p>
        <ol>
         <li data-md="">
          <p>Initialize a dictionary object, <var>output keyframe</var>, using
the following definition:</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-basecomputedkeyframe">BaseComputedKeyframe<a class="self-link" href="#dictdef-basecomputedkeyframe"></a></dfn> {
     <span class="kt">double</span>?            <dfn class="nv dfn-paneled idl-code" data-default="null" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export="" data-type="double?            " id="dom-basecomputedkeyframe-offset">offset</dfn> = <span class="kt">null</span>;
     <span class="kt">double</span>             <dfn class="nv dfn-paneled idl-code" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export="" data-type="double             " id="dom-basecomputedkeyframe-computedoffset">computedOffset</dfn>;
     <span class="kt">DOMString</span>          <dfn class="nv dfn-paneled idl-code" data-default="&quot;linear&quot;" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export="" data-type="DOMString          " id="dom-basecomputedkeyframe-easing">easing</dfn> = "linear";
     <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-4">CompositeOperation</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export="" data-type="CompositeOperation " id="dom-basecomputedkeyframe-composite">composite</dfn>;
};
</pre>
         <li data-md="">
          <p>Set <code class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-offset" id="ref-for-dom-basecomputedkeyframe-offset-1">offset</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-computedoffset" id="ref-for-dom-basecomputedkeyframe-computedoffset-1">computedOffset</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-easing" id="ref-for-dom-basecomputedkeyframe-easing-1">easing</a></code> members of <var>output keyframe</var> to the respective values <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-15">keyframe offset</a>, <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-29">computed keyframe offset</a>, and
keyframe-specific <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-19">timing function</a> of <var>keyframe</var>.</p>
         <li data-md="">
          <p>If <var>keyframe</var> has a <a data-link-type="dfn" href="#keyframe-specific-composite-operation" id="ref-for-keyframe-specific-composite-operation-3">keyframe-specific composite
operation</a>, set <code class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-composite" id="ref-for-dom-basecomputedkeyframe-composite-1">composite</a></code> to that value.</p>
         <li data-md="">
          <p>For each animation property-value pair specified on <var>keyframe</var>, <var>declaration</var>, perform the following
steps:</p>
          <ol>
           <li data-md="">
            <p>Let <var>property name</var> be the result of applying the <a data-link-type="dfn" href="#animation-property-name-to-idl-attribute-name" id="ref-for-animation-property-name-to-idl-attribute-name-1">animation property name to IDL attribute name</a> algorithm
to the property name of <var>declaration</var>.</p>
           <li data-md="">
            <p>Let <var>IDL value</var> be result of serializing the
the property value of <var>declaration</var> by passing <var>declaration</var> to the algorithm to <a data-link-type="dfn" href="https://drafts.csswg.org/cssom/#serialize-a-css-value">serialize a CSS
value</a> <a data-link-type="biblio" href="#biblio-cssom">[CSSOM]</a>.</p>
           <li data-md="">
            <p>Let <var>value</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#DOMString-to-es">converting</a> <var>IDL value</var> to an
ECMAScript String value.</p>
           <li data-md="">
            <p>Call the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">[[DefineOwnProperty]]</a> internal method on <var>output keyframe</var> with property name <var>property
name</var>,
Property Descriptor {
[[Writable]]: <span class="esvalue">true</span>,
[[Enumerable]]: <span class="esvalue">true</span>,
[[Configurable]]: <span class="esvalue">true</span>,
[[Value]]: <var>value</var> }
and Boolean flag <span class="esvalue">false.</span></p>
          </ol>
         <li data-md="">
          <p>Append <var>output keyframe</var> to <var>result</var>.</p>
        </ol>
       <li data-md="">
        <p>Return <var>result</var>.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="method" data-export="" data-lt="setKeyframes(keyframes)" id="dom-keyframeeffect-setkeyframes"> void setKeyframes(object? keyframes)</dfn></p>
     <dd data-md="">
      <p>Replaces the set of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-55">keyframes</a> that make up this effect.</p>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="idl-code" data-dfn-for="KeyframeEffect/setKeyframes" data-dfn-type="argument" data-export="" data-lt="keyframes" id="dom-keyframeeffect-setkeyframes-keyframes">object? keyframes<a class="self-link" href="#dom-keyframeeffect-setkeyframes-keyframes"></a></dfn></p>
        <dd data-md="">
         <p>A series of keyframes whose format and processing is defined by <a href="#processing-a-keyframes-argument">§5.13.3 Processing a keyframes
argument</a>.</p>
         <p>This effect’s set of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-56">keyframes</a> is replaced with the result
of performing the procedure to <a data-link-type="dfn" href="#process-a-keyframes-argument" id="ref-for-process-a-keyframes-argument-1">process a keyframes argument</a>.
If that procedure throws an exception, this effect’s <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-57">keyframes</a> are not modified.</p>
       </dl>
      </div>
    </dl>
   </div>
   <h4 class="heading settled" data-level="5.13.1" id="creating-a-new-keyframeeffect-object"><span class="secno">5.13.1. </span><span class="content">Creating a new <code>KeyframeEffect</code> object</span><a class="self-link" href="#creating-a-new-keyframeeffect-object"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>The <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-4">KeyframeEffectReadOnly</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-2">KeyframeEffect</a></code> constructors offer a number of approaches to creating
new <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-12">KeyframeEffectReadOnly</a></code> and <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-9">KeyframeEffect</a></code> objects.</p>
    <p>At its simplest, an <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-10">KeyframeEffect</a></code> object that changes the
‘left’ property of <code>elem</code> to 100px over three
seconds can be constructed as follows:</p>
    <div class="example" id="example-666265a4">
     <a class="self-link" href="#example-666265a4"></a>
<pre class="lang-javascript highlight"><span class="kd">var</span> effect <span class="o">=</span> <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">3000</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>The second parameter, representing the list of keyframes, may
specify multiple properties. (See <a href="#processing-a-keyframes-argument">§5.13.3 Processing a keyframes
argument</a>.)</p>
    <div class="example" id="example-87642ade">
     <a class="self-link" href="#example-87642ade"></a>
<pre class="lang-javascript highlight"><span class="c1">// Specify multiple properties at once
</span><span class="kd">var</span> effectA <span class="o">=</span> <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span><span class="p">,</span> top<span class="o">:</span> <span class="s1">'300px'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">3000</span><span class="p">)</span><span class="p">;</span>

<p><span class="c1">// Specify multiple keyframes
</span><span class="kd">var</span> effectB <span class="o">=</span> <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">[</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'300px'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">3000</span><span class="p">)</span><span class="p">;</span></p></pre>
    </div>
    <p></p>
    <p>The third parameter, representing the animation’s timing, may
simply be a number representing the <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-25">iteration duration</a> in
milliseconds as above, or, to specify further timing properties such
as the <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay-30">start delay</a>, an <code class="idl"><a data-link-type="idl" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-14">AnimationEffectTimingProperties</a></code> object can
be used, as follows:</p>
    <div class="example" id="example-b231783a">
     <a class="self-link" href="#example-b231783a"></a>
<pre class="lang-javascript highlight"><span class="kd">var</span> effect <span class="o">=</span>
  <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span> <span class="p">{</span> duration<span class="o">:</span> <span class="mi">3000</span><span class="p">,</span> delay<span class="o">:</span> <span class="mi">2000</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>If the duration is not specified, the <a data-link-type="dfn" href="#intrinsic-iteration-duration" id="ref-for-intrinsic-iteration-duration-12">intrinsic iteration
duration</a> is used which, for a <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-49">keyframe effect</a>, is zero.
It is possible to create an animation that simply sets a property
without any interpolation as follows:</p>
    <div class="example" id="example-a0a5fc9d">
     <a class="self-link" href="#example-a0a5fc9d"></a>
<pre class="lang-javascript highlight"><span class="kd">var</span> effect <span class="o">=</span> <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> visibility<span class="o">:</span> <span class="s1">'hidden'</span> <span class="p">}</span><span class="p">,</span> <span class="p">{</span> fill<span class="o">:</span> <span class="s1">'forwards'</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
    <p>This is particularly useful in combination with other <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-197">animation effects</a>.
For example, fading an element before switching <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css21/visufx.html#propdef-visibility">visibility</a> to ‘hidden’ can be achieved as
follows,</p>
    <div class="example" id="example-ee500db4">
     <a class="self-link" href="#example-ee500db4"></a>
<pre class="lang-javascript highlight"><span class="k">new</span> SequenceEffect<span class="p">(</span>
  <span class="p">[</span>
    <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">,</span>
    <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> visibility<span class="o">:</span> <span class="s1">'hidden'</span> <span class="p">}</span><span class="p">,</span> <span class="p">{</span> fill<span class="o">:</span> <span class="s1">'forwards'</span> <span class="p">}</span><span class="p">)</span>
  <span class="p">]</span>
<span class="p">)</span><span class="p">;</span></pre>
    </div>
     Having created a <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-11">KeyframeEffect</a></code>, it can be played by adding it to
an <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-13">Animation</a></code> and then playing that animation.
For simple effects, however, the <a href="#extensions-to-the-element-interface"><code>Element.animate</code></a> shortcut is more convenient since it performs these steps
automatically. For example, 
    <div class="example" id="example-f0e5c14c">
     <a class="self-link" href="#example-f0e5c14c"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">3000</span><span class="p">)</span><span class="p">;</span></pre>
    </div>
   </div>
   <h4 class="heading settled" data-level="5.13.2" id="property-name-conversion"><span class="secno">5.13.2. </span><span class="content">Property names and IDL names</span><a class="self-link" href="#property-name-conversion"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="animation-property-name-to-idl-attribute-name">animation property name to IDL attribute name</dfn> algorithm for <var>property</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>If <var>property</var> follows the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-variables-1/#typedef-custom-property-name">&lt;custom-property-name></a> production,
return <var>property</var>.</p>
    <li data-md="">
     <p>If <var>property</var> refers to the CSS <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css21/visuren.html#propdef-float">float</a> property,
return the string "cssFloat".</p>
    <li data-md="">
     <p>Otherwise, return the result of applying the <a data-link-type="dfn" href="https://drafts.csswg.org/cssom/#css-property-to-idl-attribute">CSS property to IDL
attribute</a> algorithm <a data-link-type="biblio" href="#biblio-cssom">[CSSOM]</a> to <var>property</var>.</p>
   </ol>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="idl-attribute-name-to-animation-property-name">IDL attribute name to animation property name</dfn> algorithm for <var>attribute</var> is as follows:</p>
   <ol>
    <li data-md="">
     <p>If <var>attribute</var> conforms to the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-variables-1/#typedef-custom-property-name">&lt;custom-property-name></a> production,
return <var>attribute</var>.</p>
    <li data-md="">
     <p>If <var>attribute</var> is the string "cssFloat", then return
an animation property representing the CSS <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css21/visuren.html#propdef-float">float</a> property.</p>
    <li data-md="">
     <p>Otherwise, return the result of applying the <a data-link-type="dfn" href="https://drafts.csswg.org/cssom/#idl-attribute-to-css-property">IDL attribute to CSS
property</a> algorithm <a data-link-type="biblio" href="#biblio-cssom">[CSSOM]</a> to <var>attribute</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="5.13.3" id="processing-a-keyframes-argument"><span class="secno">5.13.3. </span><span class="content">Processing a <code>keyframes</code> argument</span><a class="self-link" href="#processing-a-keyframes-argument"></a></h4>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>The following methods all accept a set of keyframes as an argument:</p>
    <ul>
     <li data-md="">
      <p>the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-5">KeyframeEffectReadOnly(target, keyframes, options)</a></code> constructor,</p>
     <li data-md="">
      <p>the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-3">KeyframeEffect(target, keyframes, options)</a></code> constructor,</p>
     <li data-md="">
      <p>the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes-3">setKeyframes()</a></code> method on the <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-12">KeyframeEffect</a></code> interface,</p>
     <li data-md="">
      <p>the <code class="idl"><a data-link-type="idl" href="#dom-sharedkeyframelist-sharedkeyframelist" id="ref-for-dom-sharedkeyframelist-sharedkeyframelist-1">SharedKeyframeList()</a></code> constructor, and</p>
     <li data-md="">
      <p>the <code class="idl"><a data-link-type="idl" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate-1">animate()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#animatable" id="ref-for-animatable-6">Animatable</a></code> interface.</p>
    </ul>
    <p>This argument may be specified in the one of two forms as illustrated below.</p>
    <div class="example" id="example-e821216b">
     <a class="self-link" href="#example-e821216b"></a> 
<pre class="lang-javascript highlight"><span class="c1">// The following two expressions produce the same result:
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'blue'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'green'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'yellow'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>
elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> color<span class="o">:</span> <span class="p">[</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">,</span> <span class="s1">'yellow'</span> <span class="p">]</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>

<span class="c1">// Likewise, for a multi-property animation, the following two
</span><span class="c1">// expressions are equivalent:
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'blue'</span><span class="p">,</span> left<span class="o">:</span> <span class="s1">'0px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'green'</span><span class="p">,</span> left<span class="o">:</span> <span class="s1">'-20px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span><span class="p">,</span> left<span class="o">:</span> <span class="s1">'100px'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'yellow'</span><span class="p">,</span> left<span class="o">:</span> <span class="s1">'50px'</span><span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>
elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> color<span class="o">:</span> <span class="p">[</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">,</span> <span class="s1">'yellow'</span> <span class="p">]</span><span class="p">,</span>
               left<span class="o">:</span> <span class="p">[</span> <span class="s1">'0px'</span><span class="p">,</span> <span class="s1">'-20px'</span><span class="p">,</span> <span class="s1">'100px'</span><span class="p">,</span> <span class="s1">'50px'</span> <span class="p">]</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>

<span class="c1">// Incidentally, the following three expressions are all equivalent:
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">;</span>
elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> color<span class="o">:</span> <span class="p">[</span> <span class="s1">'red'</span> <span class="p">]</span> <span class="p">}</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">;</span>
elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">;</span>
</pre>
    </div>
    <p>The first form (the array-form) consists of an array of keyframes where each
keyframe may specify at most one value per animation property.
The second form (the object-form) consists of an object where each animation
property may specify a single animation value or an array of animation values.</p>
    <p>The first array-form is the canonical form and is the form returned by the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-getkeyframes" id="ref-for-dom-keyframeeffectreadonly-getkeyframes-2">getKeyframes()</a></code> method.</p>
    <p><a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-16">Keyframe offsets</a> and <a data-link-type="dfn" href="#keyframe-specific-composite-operation" id="ref-for-keyframe-specific-composite-operation-4">keyframe-specific composite operations</a> can
only be specified using the array-form as illustrated below:</p>
    <div class="example" id="example-141dd143">
     <a class="self-link" href="#example-141dd143"></a> 
<pre class="lang-javascript highlight"><span class="c1">// The keyframes without offsets will automatically have offsets computed
</span><span class="c1">// as 0 for the first keyframe, 0.65 for the middle keyframe, and 1 for the
</span><span class="c1">// final keyframe
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'blue'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'green'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mf">0.5</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'yellow'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mf">0.8</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'pink'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>

<span class="c1">// An SVG-style to-animation
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> left<span class="o">:</span> <span class="s1">'0px'</span><span class="p">,</span> composite<span class="o">:</span> <span class="s1">'add'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> left<span class="o">:</span> <span class="s1">'200px'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>
</pre>
    </div>
    <p><a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-20">Timing functions</a> may be specified in either form. The array-form allows
specifying different <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-21">timing functions</a> for each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-58">keyframe</a> whilst
the object-form allows specifying a <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-22">timing function</a> that will be applied
to all keyframes.</p>
    <div class="example" id="example-547663b6">
     <a class="self-link" href="#example-547663b6"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Each keyframe can have a different timing function.
</span><span class="c1">// The timing function specified for the last keyframe is not used.
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> color<span class="o">:</span> <span class="s1">'blue'</span><span class="p">,</span> easing<span class="o">:</span> <span class="s1">'ease-in'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'green'</span><span class="p">,</span> easing<span class="o">:</span> <span class="s1">'ease-out'</span> <span class="p">}</span><span class="p">,</span>
               <span class="p">{</span> color<span class="o">:</span> <span class="s1">'yellow'</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>

<span class="c1">// Each keyframe will have a timing function of 'ease-in-out'
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> color<span class="o">:</span> <span class="p">[</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'yellow'</span> <span class="p">]</span><span class="p">,</span>
               easing<span class="o">:</span> <span class="s1">'ease-in-out'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>
</pre>
    </div>
    <p>Note that the <code>easing</code> property in either form sets the <em>keyframe-specific timing function</em>.
This is independent from the <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-23">timing function</a> that applies to the
entire <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration-26">iteration duration</a> of the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-50">keyframe effect</a> as specified
using a <code class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-5">KeyframeEffectOptions</a></code> object (or <code class="idl"><a data-link-type="idl" href="#dictdef-keyframeanimationoptions" id="ref-for-dictdef-keyframeanimationoptions-1">KeyframeAnimationOptions</a></code> object when using the <code class="idl"><a data-link-type="idl" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate-2">animate()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#animatable" id="ref-for-animatable-7">Animatable</a></code> interface).</p>
    <p>The type of this argument cannot be expressed in WebIDL since it relies on
a partially-open dictionary type.</p>
    <p>Conceptually, the type of this argument is equivalent to the following
WebIDL-like definition:</p>
<pre class="lang-idl highlight"><span class="kt">dictionary</span> <span class="nv">Keyframe</span> {
    // ... property-value pairs ...
    // i.e. DOMString propertyName
    <span class="kt">double</span>?             <span class="nv">offset</span> = <span class="kt">null</span>;
    <span class="kt">DOMString</span>           <span class="nv">easing</span> = "linear";
    <span class="n">CompositeOperation</span>  <span class="nv">composite</span>;
};

<span class="kt">dictionary</span> <span class="nv">PropertyIndexedKeyframes</span> {
    // ... property-value and property-valuelist pairs ...
    // i.e. (DOMString or sequence&lt;DOMString>) propertyName
    <span class="kt">DOMString</span>           <span class="nv">easing</span> = "linear";
};

<span class="kt">typedef</span> (<span class="kt">sequence</span>&lt;<span class="n">Keyframe</span>> <span class="kt">or</span>
         <span class="n">PropertyIndexedKeyframes</span> <span class="kt">or</span>
         <span class="n">SharedKeyframeList</span>) <span class="nv">KeyframeArgument</span>;
</pre>
    <p>The meaning and allowed values of each argument is as follows:</p>
    <dl>
     <dt data-md="">
      <p><dfn data-dfn-type="dfn" data-noexport="" id="dom-keyframe-offset">offset<a class="self-link" href="#dom-keyframe-offset"></a></dfn> (<code>Keyframe</code> only)</p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-17">keyframe offset</a> of the <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-59">keyframe</a> specified as
a number between 0.0 and 1.0 inclusive or <code>null</code>.</p>
      <p>A <code>null</code> value indicates that the <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-60">keyframe</a> should be positioned using the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-51">keyframe effect</a>’s <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-10">keyframe spacing mode</a>.</p>
      <p>Specifying an offset outside the range [0.0, 1.0] will cause
a <span class="exceptionname">TypeError</span> to be thrown.</p>
      <p>Keyframes that specify an offset must be provided in increasing
order of offset. Overlapping offsets, however, are permitted.</p>
     <dt data-md="">
      <p><dfn data-dfn-type="dfn" data-noexport="" id="dom-keyframe-easing">easing<a class="self-link" href="#dom-keyframe-easing"></a></dfn></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-24">timing function</a> used to transform the progress of time
from this keyframe until the next keyframe in the series.</p>
      <p>The syntax and error-handling associated with parsing this string
is identical to that defined for the <code>easing</code> attribute
of the <code class="idl"><a data-link-type="idl" href="#animationeffecttiming" id="ref-for-animationeffecttiming-18">AnimationEffectTiming</a></code> interface.</p>
     <dt data-md="">
      <p><dfn data-dfn-type="dfn" data-noexport="" id="dom-keyframe-composite">composite<a class="self-link" href="#dom-keyframe-composite"></a></dfn> (<code>Keyframe</code> only)</p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#keyframe-specific-composite-operation" id="ref-for-keyframe-specific-composite-operation-5">keyframe-specific composite operation</a> used to combine the values
specified in this keyframe with the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-15">underlying value</a>.</p>
      <p>If absent, the <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-17">composite operation</a> specified on the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-52">keyframe
effect</a> will be used.</p>
    </dl>
    <p>Since this type cannot be expressed in WebIDL, its processing is defined in
prose following.</p>
   </div>
   <p>For each method that takes a <code>keyframes</code> argument, the
procedure to <a data-link-type="dfn" href="#process-a-keyframes-argument" id="ref-for-process-a-keyframes-argument-2">process a keyframes argument</a> is run on the input and
the result of that procedure is retained.</p>
   <p>First we define two supporting definitions.</p>
   <p>The instruction, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="check-the-completion-record">check the completion record</dfn> of <var>result</var>,
where <var>result</var> is a <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type">completion record</a> from calling
an ECMAScript operation, is equivalent to the following steps:</p>
   <ol>
    <li data-md="">
     <p>If <var>result</var> is an <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type">abrupt completion</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> the exception contained in the [[value]] field of <var>result</var> and abort the procedure.</p>
     <p class="issue" id="issue-60682dbc"><a class="self-link" href="#issue-60682dbc"></a> What should we do if the [[type]] is <span class="esvalue">break</span>, <span class="esvalue">continue</span>, or <span class="esvalue">return</span>? Can it be?</p>
    <li data-md="">
     <p>Replace <var>result</var> with the value contained in the [[value]] field
of <var>result</var>.</p>
   </ol>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="process-a-keyframe-like-object">process a keyframe-like object</dfn>, takes two
arguments:</p>
   <ul>
    <li data-md="">
     <p>an ECMAScript object, <var>keyframe input</var>, and</p>
    <li data-md="">
     <p>an <var>allow lists</var> boolean flag</p>
   </ul>
   <p>and returns a map from either property names to DOMString values if <var>allow
lists</var> is false, or from property names to sequences of DOMString values
otherwise, using the following procedure:</p>
   <ol>
    <li data-md="">
     <p>Run the procedure to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-to-dictionary">convert an ECMAScript
value to a dictionary type</a> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> with <var>keyframe input</var> as the ECMAScript value, and the dictionary type depending on the value of
the <var>allow lists</var> flag as follows:</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <var>allow lists</var> is true,</p>
       <dd data-md="">
        <p>Use the following dictionary type:</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-basepropertyindexedkeyframe">BasePropertyIndexedKeyframe<a class="self-link" href="#dictdef-basepropertyindexedkeyframe"></a></dfn> {
    <span class="kt">DOMString</span>          <dfn class="nv idl-code" data-default="&quot;linear&quot;" data-dfn-for="BasePropertyIndexedKeyframe" data-dfn-type="dict-member" data-export="" data-type="DOMString          " id="dom-basepropertyindexedkeyframe-easing">easing<a class="self-link" href="#dom-basepropertyindexedkeyframe-easing"></a></dfn> = "linear";
    <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-5">CompositeOperation</a> <dfn class="nv idl-code" data-dfn-for="BasePropertyIndexedKeyframe" data-dfn-type="dict-member" data-export="" data-type="CompositeOperation " id="dom-basepropertyindexedkeyframe-composite">composite<a class="self-link" href="#dom-basepropertyindexedkeyframe-composite"></a></dfn>;
};
</pre>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <p>Use the following dictionary type,</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-basekeyframe">BaseKeyframe<a class="self-link" href="#dictdef-basekeyframe"></a></dfn> {
    <span class="kt">double</span>?            <dfn class="nv idl-code" data-default="null" data-dfn-for="BaseKeyframe" data-dfn-type="dict-member" data-export="" data-type="double?            " id="dom-basekeyframe-offset">offset<a class="self-link" href="#dom-basekeyframe-offset"></a></dfn> = <span class="kt">null</span>;
    <span class="kt">DOMString</span>          <dfn class="nv idl-code" data-default="&quot;linear&quot;" data-dfn-for="BaseKeyframe" data-dfn-type="dict-member" data-export="" data-type="DOMString          " id="dom-basekeyframe-easing">easing<a class="self-link" href="#dom-basekeyframe-easing"></a></dfn> = "linear";
    <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-6">CompositeOperation</a> <dfn class="nv idl-code" data-dfn-for="BaseKeyframe" data-dfn-type="dict-member" data-export="" data-type="CompositeOperation " id="dom-basekeyframe-composite">composite<a class="self-link" href="#dom-basekeyframe-composite"></a></dfn>;
};
</pre>
        <p class="issue" id="issue-361f2071"><a class="self-link" href="#issue-361f2071"></a> Do we need null offsets or is it enough to just test for the
absence of the property?</p>
      </dl>
     </div>
     <p>Store the result of this procedure as <var>keyframe output</var>.</p>
    <li data-md="">
     <p>Build up a list of <var>animatable properties</var> as follows:</p>
     <ol>
      <li data-md="">
       <p>Let <var>animatable properties</var> be a list of property
names (including shorthand properties that have longhand sub-properties
that are animatable) that can be animated by the implementation.</p>
      <li data-md="">
       <p>Convert each property name in <var>animatable properties</var> to the equivalent IDL attribute by applying the <a data-link-type="dfn" href="#animation-property-name-to-idl-attribute-name" id="ref-for-animation-property-name-to-idl-attribute-name-2">animation property name to IDL attribute name</a> algorithm.</p>
     </ol>
    <li data-md="">
     <p>Let <var>input properties</var> be the result of calling the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-enumerableownnames">EnumerableOwnNames</a> operation with <var>keyframe input</var> as
the object.</p>
    <li data-md="">
     <p>Make up a new list <var>animation properties</var> that consists of
all of the properties that are in <em>both</em> <var>input
properties</var> and <var>animatable properties</var>, <em>or</em> which are in <var>input properties</var> and conform to the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-variables-1/#typedef-custom-property-name">&lt;custom-property-name></a> production.</p>
    <li data-md="">
     <p>Sort <var>animation properties</var> in ascending order by the Unicode
codepoints that define each property name.</p>
    <li data-md="">
     <p>For each <var>property name</var> in <var>animation properties</var>,</p>
     <ol>
      <li data-md="">
       <p>Let <var>raw value</var> be the result of calling the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">[[Get]]</a> internal method on <var>keyframe input</var>, with <var>property
name</var> as the property key and <var>keyframe input</var> as the
receiver.</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#check-the-completion-record" id="ref-for-check-the-completion-record-1">Check the completion record</a> of <var>raw value</var>.</p>
      <li data-md="">
       <p>Convert <var>raw value</var> to a DOMString or sequence of DOMStrings <var>property values</var> as follows:</p>
       <div class="switch">
        <dl>
         <dt data-md="">
          <p>If <var>allow lists</var> is true,</p>
         <dd data-md="">
          <p>Let <var>property values</var> be the result of converting <var>raw
value</var> to IDL type <code>(DOMString or
sequence&lt;DOMString>)</code> using the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">procedures
defined for converting an ECMAScript value to an IDL value</a> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>.</p>
          <p>If <var>property values</var> is a single DOMString, replace <var>property values</var> with a sequence of DOMStrings with the
original value of <var>property values</var> as the only element.</p>
         <dt data-md="">
          <p>Otherwise,</p>
         <dd data-md="">
          <p>Let <var>property values</var> be the result of converting <var>raw
value</var> to a DOMString using the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-to-DOMString">procedure for converting an ECMAScript value to
a DOMString</a> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>.</p>
        </dl>
       </div>
      <li data-md="">
       <p>Calculate the <var>normalized property name</var> as the result of
applying the <a data-link-type="dfn" href="#idl-attribute-name-to-animation-property-name" id="ref-for-idl-attribute-name-to-animation-property-name-1">IDL attribute name to animation property name</a> algorithm to <var>property name</var>.</p>
      <li data-md="">
       <p>Add a property to to <var>keyframe output</var> with <var>normalized
property name</var> as the property name, and <var>property values</var> as the property value.</p>
     </ol>
    <li data-md="">
     <p>Return <var>keyframe output</var>.</p>
   </ol>
   <p>The procedure to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="process-a-keyframes-argument">process a keyframes argument</dfn> takes a nullable
ECMAScript object, <var>object</var>, as input and returns either a sequence of
keyframes or a <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-2">SharedKeyframeList</a></code> object using the following procedure:</p>
   <ol>
    <li data-md="">
     <p>If <var>object</var> is null, return an empty sequence of keyframes.</p>
    <li data-md="">
     <p>If <var>object</var> is a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-platform-object">platform object</a> that implements <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-3">SharedKeyframeList</a></code>, return <var>object</var>.</p>
    <li data-md="">
     <p>Let <var>processed keyframes</var> be an empty sequence of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-61">keyframes</a>.</p>
    <li data-md="">
     <p>Let <var>method</var> be the result of <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod">GetMethod</a>(<var>object</var>, <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-well-known-symbols">@@iterator</a>).</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#check-the-completion-record" id="ref-for-check-the-completion-record-2">Check the completion record</a> of <var>method</var>.</p>
    <li data-md="">
     <p>Perform the steps corresponding to the first matching condition from below,</p>
     <div class="switch">
      <dl>
       <dt data-md="">
        <p>If <var>method</var> is not <span class="esvalue">undefined</span>,</p>
       <dd data-md="">
        <ol>
         <li data-md="">
          <p>Let <var>iter</var> be <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator">GetIterator</a>(<var>object</var>, <var>method</var>).</p>
         <li data-md="">
          <p><a data-link-type="dfn" href="#check-the-completion-record" id="ref-for-check-the-completion-record-3">Check the completion record</a> of <var>iter</var>.</p>
         <li data-md="">
          <p>Repeat:</p>
          <ol>
           <li data-md="">
            <p>Let <var>next</var> be <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorstep">IteratorStep</a>(<var>iter</var>).</p>
           <li data-md="">
            <p><a data-link-type="dfn" href="#check-the-completion-record" id="ref-for-check-the-completion-record-4">Check the completion record</a> of <var>next</var>.</p>
           <li data-md="">
            <p>If <var>next</var> is false abort this loop.</p>
           <li data-md="">
            <p>Let <var>nextItem</var> be <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorvalue">IteratorValue</a>(next).</p>
           <li data-md="">
            <p><a data-link-type="dfn" href="#check-the-completion-record" id="ref-for-check-the-completion-record-5">Check the completion record</a> of <var>nextItem</var>.</p>
           <li data-md="">
            <p>If <var>nextItem</var> is not an object, throw a <span class="exceptionname">TypeError</span> and abort these
steps.</p>
           <li data-md="">
            <p>Append to <var>processed keyframes</var> the result of
running the procedure to <a data-link-type="dfn" href="#process-a-keyframe-like-object" id="ref-for-process-a-keyframe-like-object-1">process a keyframe-like object</a> passing <var>nextItem</var> as the <var>keyframe input</var> and with the <var>allow lists</var> flag set to false.</p>
          </ol>
         <li data-md="">
          <p>If <var>processed keyframes</var> is not <a data-link-type="dfn" href="#loosely-sorted-by-offset" id="ref-for-loosely-sorted-by-offset-1">loosely sorted by
offset</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">TypeError</span> and abort these steps.</p>
         <li data-md="">
          <p>If there exist any <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-62">keyframe</a> in <var>processed keyframes</var> whose <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-18">keyframe offset</a> is non-null and less
than zero or greater than one, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <span class="exceptionname">TypeError</span> and abort these steps.</p>
        </ol>
       <dt data-md="">
        <p>Otherwise,</p>
       <dd data-md="">
        <ol>
         <li data-md="">
          <p>Let <var>property-indexed keyframe</var> be the result of
running the procedure to <a data-link-type="dfn" href="#process-a-keyframe-like-object" id="ref-for-process-a-keyframe-like-object-2">process a keyframe-like object</a> passing <var>object</var> as the <var>keyframe input</var> and with the <var>allow lists</var> flag set to true.</p>
         <li data-md="">
          <p>Let <var>easing</var> be the value of the
“easing” member of <var>property-indexed keyframe</var>.</p>
         <li data-md="">
          <p>For each member, <var>m</var>, in <var>property-indexed
keyframe</var>, perform the following steps:</p>
          <ol>
           <li data-md="">
            <p>Let <var>property name</var> be the key for <var>m</var>.</p>
           <li data-md="">
            <p>If <var>property name</var> is “composite” or
“easing” skip the remaining steps in this loop
and continue from the next member in <var>property-indexed
keyframe</var> after <var>m</var>.</p>
           <li data-md="">
            <p>Let <var>property values</var> be the value for <var>m</var>.</p>
           <li data-md="">
            <p>Let <var>property keyframes</var> be an empty sequence of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-63">keyframes</a>.</p>
           <li data-md="">
            <p>For each value, <var>v</var>, in <var>property values</var> perform the following steps:</p>
            <ol>
             <li data-md="">
              <p>Let <var>k</var> be a new <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-64">keyframe</a> with a null <a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset-19">keyframe offset</a>.</p>
             <li data-md="">
              <p>Let <var>k</var> have a property, “easing”
with the value of <var>easing</var>.</p>
             <li data-md="">
              <p>Add the property-value pair, <var>property name</var> → <var>v</var>, to <var>k</var>.</p>
             <li data-md="">
              <p>Append <var>k</var> to <var>property keyframes</var>.</p>
            </ol>
           <li data-md="">
            <p>Apply the procedure to <a data-link-type="dfn" href="#apply-spacing-to-a-series-of-keyframes" id="ref-for-apply-spacing-to-a-series-of-keyframes-2">apply spacing to a series of
keyframes</a> to <var>property keyframes</var> using a <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-11">spacing mode</a> of <a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-6">distribute</a>.</p>
            <div class="note" role="note">
             <p>We unconditionally apply distribute spacing simply for the
purposes of merging keyframes. This produces consistent and
intuitive results.</p>
             <p>Paced spacing can produce different results depending on the
context in which relative values are resolved. Using paced
spacing to calculate offsets and then merging would mean that
the merge results could differ over time. It would also mean
that the keyframes returned from <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-getkeyframes" id="ref-for-dom-keyframeeffectreadonly-getkeyframes-3">getKeyframes()</a></code> would
produce a different result if passed back to <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes-4">setKeyframes()</a></code> since the merge result which,
until that point, was dynamic, would suddenly become fixed.</p>
             <p>Due to these considerations we apply merging once when updating
the keyframes using distribute spacing which does not vary in
its results.</p>
             <p>Before computing the effect result or returning keyframes from <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-getkeyframes" id="ref-for-dom-keyframeeffectreadonly-getkeyframes-4">getKeyframes()</a></code> the specified <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-12">spacing mode</a> is applied.</p>
            </div>
           <li data-md="">
            <p>Add <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-65">keyframes</a> in <var>property keyframes</var> to <var>processed keyframes</var>.</p>
          </ol>
         <li data-md="">
          <p>Sort <var>processed keyframes</var> by the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-30">computed
keyframe offset</a> of each <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-66">keyframe</a> in increasing order.</p>
         <li data-md="">
          <p>Merge adjacent <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-67">keyframes</a> in <var>processed keyframes</var> when they have equal <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-31">computed keyframe offsets</a>.</p>
        </ol>
      </dl>
     </div>
    <li data-md="">
     <p>For each <var>frame</var> in <var>processed keyframes</var>, perform the
following steps:</p>
     <ol>
      <li data-md="">
       <p>For each property-value pair in <var>frame</var>, parse the property
value using the syntax specified for that property.</p>
       <p>If the property value is invalid according to the syntax for the
property, store the original DOMString used for the property value.</p>
       <p>User agents that provide support for diagnosing errors in content
SHOULD produce an appropriate warning highlighting the unrecognized
property value.</p>
      <li data-md="">
       <p>Let the <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-25">timing function</a> of <var>frame</var> be the result of
parsing the “easing” property on <var>frame</var> using the
CSS syntax defined for the <code class="idl"><a data-link-type="idl" href="#dom-animationeffecttimingreadonly-easing" id="ref-for-dom-animationeffecttimingreadonly-easing-3">easing</a></code> property of the <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly" id="ref-for-animationeffecttimingreadonly-25">AnimationEffectTimingReadOnly</a></code> interface.</p>
       <p>If parsing the “easing” property fails, let the <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-26">timing
function</a> of <var>frame</var> be “linear”.</p>
       <p>User agents that provide support for diagnosing errors in content
SHOULD produce an appropriate warning highlighting the unrecognized <a data-link-type="dfn" href="#timing-function" id="ref-for-timing-function-27">timing function</a> in this case.</p>
       <p class="note" role="note">Note: Using the CSS parser in both of the above steps implies that CSS
comments and escaping are allowed but are not retained when the value
is successfully parsed.</p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="5.13.4" id="the-keyframeeffectoptions-dictionary"><span class="secno">5.13.4. </span><span class="content">The <code>KeyframeEffectOptions</code> dictionary</span><a class="self-link" href="#the-keyframeeffectoptions-dictionary"></a></h4>
   <p>Additional parameters may be passed to the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly" id="ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-6">KeyframeEffectReadOnly(target,
keyframes, options)</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-4">KeyframeEffect(target, keyframes, options)</a></code> constructors by providing a <code class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-6">KeyframeEffectOptions</a></code> object.</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-keyframeeffectoptions">KeyframeEffectOptions</dfn> : <a class="n" data-link-type="idl-name" href="#dictdef-animationeffecttimingproperties" id="ref-for-dictdef-animationeffecttimingproperties-15">AnimationEffectTimingProperties</a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-iterationcompositeoperation" id="ref-for-enumdef-iterationcompositeoperation-4">IterationCompositeOperation</a> <a class="nv idl-code" data-default="&quot;replace&quot;" data-link-type="dict-member" data-type="IterationCompositeOperation " href="#dom-keyframeeffectoptions-iterationcomposite" id="ref-for-dom-keyframeeffectoptions-iterationcomposite-1">iterationComposite</a> = "replace";
    <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-7">CompositeOperation</a>          <a class="nv idl-code" data-default="&quot;replace&quot;" data-link-type="dict-member" data-type="CompositeOperation          " href="#dom-keyframeeffectoptions-composite" id="ref-for-dom-keyframeeffectoptions-composite-1">composite</a> = "replace";
    <span class="kt">DOMString</span>                   <a class="nv idl-code" data-default="&quot;distribute&quot;" data-link-type="dict-member" data-type="DOMString                   " href="#dom-keyframeeffectoptions-spacing" id="ref-for-dom-keyframeeffectoptions-spacing-1">spacing</a> = "distribute";
};
</pre>
   <div class="members">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectOptions" data-dfn-type="dict-member" data-export="" id="dom-keyframeeffectoptions-iterationcomposite">iterationComposite</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-iterationcompositeoperation" id="ref-for-enumdef-iterationcompositeoperation-5">IterationCompositeOperation</a>, defaulting to <code>"replace"</code></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-9">iteration composite operation</a> used to define the way
animation values build from iteration to iteration.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectOptions" data-dfn-type="dict-member" data-export="" id="dom-keyframeeffectoptions-composite">composite</dfn>, <span> of type <a data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation-8">CompositeOperation</a>, defaulting to <code>"replace"</code></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-18">composite operation</a> used to composite this
animation with the <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack-15">effect stack</a>, as specified by one
of the <a data-link-type="dfn" href="#compositeoperation" id="ref-for-compositeoperation-2">CompositeOperation</a> enumeration values.
This is used for all <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-68">keyframes</a> that do not specify
a <a data-link-type="dfn" href="#keyframe-specific-composite-operation" id="ref-for-keyframe-specific-composite-operation-6">keyframe-specific composite operation</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectOptions" data-dfn-type="dict-member" data-export="" id="dom-keyframeeffectoptions-spacing">spacing</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, defaulting to <code>"distribute"</code></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-13">spacing mode</a> to apply
to this <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-198">animation effect</a>’s <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-69">keyframes</a>.</p>
      <p>See the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-spacing" id="ref-for-dom-keyframeeffect-spacing-2">spacing</a></code> attribute of the <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-13">KeyframeEffect</a></code> interface for the recognized values and
their meanings.</p>
    </dl>
   </div>
   <h4 class="heading settled" data-level="5.13.5" id="computed-offset-keyframes-section"><span class="secno">5.13.5. </span><span class="content">Computed-offset keyframes</span><a class="self-link" href="#computed-offset-keyframes-section"></a></h4>
   <p>The set of keyframes returned by <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffectreadonly-getkeyframes" id="ref-for-dom-keyframeeffectreadonly-getkeyframes-5">getKeyframes()</a></code> is based on the specified keyframes for the <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-53">keyframe effect</a> (i.e. the
result of running the <a data-link-type="dfn" href="#process-a-keyframes-argument" id="ref-for-process-a-keyframes-argument-3">process a keyframes argument</a> procedure) but also
includes the offsets from the <a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes-4">computed keyframes</a>.
This combined result is referred to as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="computed-offset-keyframes">computed-offset keyframes</dfn> and, for <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-14">KeyframeEffect</a></code> <var>effect</var>, is produced as follows:</p>
   <ol>
    <li data-md="">
     <p>Let <var>computed-offset keyframes</var> be a copy of the keyframes
specified for <var>effect</var>.</p>
    <li data-md="">
     <p>If there is a <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-15">target element</a> specified for <var>effect</var> that
can be used to calculate CSS computed values, perform the following steps.</p>
     <ol>
      <li data-md="">
       <p>Let <var>computed keyframes</var> be the result of calculating
 the <a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes-5">computed keyframes</a> for <var>effect</var>.</p>
      <li data-md="">
       <p>Copy the <a data-link-type="dfn" href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset-32">computed keyframe offset</a> values from <var>computed
 keyframes</var> to their corresponding keyframes in <var>computed-offset keyframes</var>.</p>
     </ol>
     <p>Otherwise, if there is no <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-16">target element</a> specified for <var>effect</var>, or the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-17">target element</a> is not able to be used to
calculate CSS computed values, perform the following steps:</p>
     <ol>
      <li data-md="">
       <p>Apply the procedure to <a data-link-type="dfn" href="#apply-spacing-to-a-series-of-keyframes" id="ref-for-apply-spacing-to-a-series-of-keyframes-3">apply spacing to a series of
 keyframes</a> to <var>computed-offset keyframes</var> using a <a data-link-type="dfn" href="#keyframe-spacing-mode" id="ref-for-keyframe-spacing-mode-14">spacing mode</a> of <a data-link-type="dfn" href="#distribute-keyframe-spacing-mode" id="ref-for-distribute-keyframe-spacing-mode-7">distribute</a>.</p>
     </ol>
    <li data-md="">
     <p>Return <var>computed-offset keyframes</var>.</p>
   </ol>
   <p class="issue" id="issue-78a48448"><a class="self-link" href="#issue-78a48448"></a> This procedure needs to be updated to correctly return
a <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-4">SharedKeyframeList</a></code> object when specified. This is currently deferred
since <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-5">SharedKeyframeList</a></code> is awaiting implementation experience.</p>
   <h3 class="heading settled" data-level="5.14" id="the-iterationcompositeoperation-enumeration"><span class="secno">5.14. </span><span class="content">The <code>IterationCompositeOperation</code> enumeration</span><a class="self-link" href="#the-iterationcompositeoperation-enumeration"></a></h3>
   <p>The possible values of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-199">animation effect</a>’s <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-10">iteration composite operation</a> are represented by the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="iterationcompositeoperation">IterationCompositeOperation</dfn> enumeration.</p>
<pre class="idl highlight def"><span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-iterationcompositeoperation">IterationCompositeOperation</dfn> {<dfn class="s idl-code" data-dfn-for="IterationCompositeOperation" data-dfn-type="enum-value" data-export="" data-lt="&quot;replace&quot;|replace" id="dom-iterationcompositeoperation-replace">"replace"<a class="self-link" href="#dom-iterationcompositeoperation-replace"></a></dfn>, <dfn class="s idl-code" data-dfn-for="IterationCompositeOperation" data-dfn-type="enum-value" data-export="" data-lt="&quot;accumulate&quot;|accumulate" id="dom-iterationcompositeoperation-accumulate">"accumulate"<a class="self-link" href="#dom-iterationcompositeoperation-accumulate"></a></dfn>};
</pre>
   <dl>
    <dt data-md="">
     <p><code>replace</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#iteration-composite-operation-replace" id="ref-for-iteration-composite-operation-replace-1">replace</a> <a data-link-type="dfn" href="#iteration-composite-operation" id="ref-for-iteration-composite-operation-11">iteration composite operation</a> value such that the <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value-23">effect value</a> produced is independent of the <a data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration-10">current iteration</a>.</p>
    <dt data-md="">
     <p><code>accumulate</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#iteration-composite-operation-accumulate" id="ref-for-iteration-composite-operation-accumulate-3">accumulate</a> iteration composite operation value such that
subsequent iterations of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-200">animation effect</a> build
on the final value of the previous iteration.</p>
   </dl>
   <h3 class="heading settled" data-level="5.15" id="the-compositeoperation-enumeration"><span class="secno">5.15. </span><span class="content">The <code>CompositeOperation</code> enumeration</span><a class="self-link" href="#the-compositeoperation-enumeration"></a></h3>
   <p>The possible values of an <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-201">animation effect</a>’s
composition behavior are represented by the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="compositeoperation">CompositeOperation</dfn> enumeration.</p>
<pre class="idl highlight def"><span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-compositeoperation">CompositeOperation</dfn> {<dfn class="s idl-code" data-dfn-for="CompositeOperation" data-dfn-type="enum-value" data-export="" data-lt="&quot;replace&quot;|replace" id="dom-compositeoperation-replace">"replace"<a class="self-link" href="#dom-compositeoperation-replace"></a></dfn>, <dfn class="s idl-code" data-dfn-for="CompositeOperation" data-dfn-type="enum-value" data-export="" data-lt="&quot;add&quot;|add" id="dom-compositeoperation-add">"add"<a class="self-link" href="#dom-compositeoperation-add"></a></dfn>, <dfn class="s idl-code" data-dfn-for="CompositeOperation" data-dfn-type="enum-value" data-export="" data-lt="&quot;accumulate&quot;|accumulate" id="dom-compositeoperation-accumulate">"accumulate"<a class="self-link" href="#dom-compositeoperation-accumulate"></a></dfn>};
</pre>
   <dl>
    <dt data-md="">
     <p><code>replace</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#composite-operation-replace" id="ref-for-composite-operation-replace-3">replace</a> <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-19">composite operation</a> value such that
the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-202">animation effect</a> overrides the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-16">underlying value</a> it
is combined with.</p>
    <dt data-md="">
     <p><code>add</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#composite-operation-add" id="ref-for-composite-operation-add-4">add</a> <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-20">composite operation</a> value such that
the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-203">animation effect</a> is <a data-link-type="dfn" href="#animation-addition" id="ref-for-animation-addition-16">added</a> to the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-17">underlying value</a> with which it is combined.</p>
    <dt data-md="">
     <p><code>accumulate</code></p>
    <dd data-md="">
     <p>Corresponds to the <a data-link-type="dfn" href="#composite-operation-accumulate" id="ref-for-composite-operation-accumulate-1">accumulate</a> <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation-21">composite operation</a> value such that
the <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-204">animation effect</a> is <a data-link-type="dfn" href="#animation-accumulation" id="ref-for-animation-accumulation-11">accumulated</a> on to the <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value-18">underlying value</a>.</p>
   </dl>
   <h3 class="heading settled" data-level="5.16" id="the-sharedkeyframelist-interface"><span class="secno">5.16. </span><span class="content">The <code>SharedKeyframeList</code> interface</span><a class="self-link" href="#the-sharedkeyframelist-interface"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-6">SharedKeyframeList</a></code> interface represents a sequence of <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-70">keyframes</a> that can be shared between <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-15">KeyframeEffect</a></code> objects.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>By using <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-7">SharedKeyframeList</a></code> objects, multiple <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-16">KeyframeEffect</a></code> objects
can re-use the same <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-71">keyframes</a> without paying the cost of parsing them
multiple times.</p>
    <p>For example:</p>
    <div class="example" id="example-d0cc8d72">
     <a class="self-link" href="#example-d0cc8d72"></a>
<pre class="lang-javascript highlight"><span class="kd">var</span> keyframes <span class="o">=</span> <span class="k">new</span> SharedKeyframeList<span class="p">(</span><span class="p">[</span>
 <span class="p">{</span> left<span class="o">:</span> <span class="s1">'100px'</span><span class="p">,</span> backgroundColor<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span><span class="p">,</span>
 <span class="p">{</span> left<span class="o">:</span> <span class="s1">'200px'</span><span class="p">,</span> backgroundColor<span class="o">:</span> <span class="s1">'green'</span><span class="p">,</span> offset<span class="o">:</span> <span class="mf">0.4</span> <span class="p">}</span><span class="p">,</span>
 <span class="p">{</span> left<span class="o">:</span> <span class="s1">'400px'</span><span class="p">,</span> backgroundColor<span class="o">:</span> <span class="s1">'blue'</span> <span class="p">}</span> <span class="p">]</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> player1 <span class="o">=</span> element1<span class="p">.</span>animate<span class="p">(</span>keyframes<span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> player2 <span class="o">=</span> element2<span class="p">.</span>animate<span class="p">(</span>keyframes<span class="p">,</span> <span class="p">{</span> duration<span class="o">:</span> <span class="mi">1000</span><span class="p">,</span> delay<span class="o">:</span> <span class="mi">1000</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span>
</pre>
    </div>
   </div>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-sharedkeyframelist-sharedkeyframelist" id="ref-for-dom-sharedkeyframelist-sharedkeyframelist-2">Constructor</a> (<span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes" id="ref-for-dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes-1">keyframes</a>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sharedkeyframelist">SharedKeyframeList</dfn> {
};
</pre>
   <div class="constructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="SharedKeyframeList" data-dfn-type="constructor" data-export="" data-lt="SharedKeyframeList(keyframes)" id="dom-sharedkeyframelist-sharedkeyframelist"> SharedKeyframeList(keyframes)</dfn></p>
     <dd data-md="">
      <p>Creates a new <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist" id="ref-for-sharedkeyframelist-8">SharedKeyframeList</a></code> object.</p>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="SharedKeyframeList/SharedKeyframeList(keyframes)" data-dfn-type="argument" data-export="" id="dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes">keyframes</dfn></p>
        <dd data-md="">
         <p>The keyframes to be shared. This argument is processed using the
procedure defined in <a href="#processing-a-keyframes-argument">§5.13.3 Processing a keyframes
argument</a>.</p>
       </dl>
      </div>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.17" id="the-effectcallback-callback-function"><span class="secno">5.17. </span><span class="content">The <code>EffectCallback</code> callback function</span><a class="self-link" href="#the-effectcallback-callback-function"></a></h3>
   <p><a data-link-type="dfn" href="#custom-effect" id="ref-for-custom-effect-15">Custom effects</a> can be defined in script by providing an <code class="idl"><a data-link-type="idl" href="#callbackdef-effectcallback" id="ref-for-callbackdef-effectcallback-1">EffectCallback</a></code> callback function.</p>
<pre class="idl highlight def"><span class="kt">callback</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="callback" data-export="" id="callbackdef-effectcallback">EffectCallback</dfn> = <span class="kt">void</span> (<span class="kt">double</span>? <dfn class="nv idl-code" data-dfn-for="EffectCallback" data-dfn-type="argument" data-export="" id="dom-effectcallback-progress">progress<a class="self-link" href="#dom-effectcallback-progress"></a></dfn>, <a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-8">Animatable</a> <dfn class="nv idl-code" data-dfn-for="EffectCallback" data-dfn-type="argument" data-export="" id="dom-effectcallback-currenttarget">currentTarget<a class="self-link" href="#dom-effectcallback-currenttarget"></a></dfn>,
                                <a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-14">Animation</a> <dfn class="nv idl-code" data-dfn-for="EffectCallback" data-dfn-type="argument" data-export="" id="dom-effectcallback-animation">animation<a class="self-link" href="#dom-effectcallback-animation"></a></dfn>);
</pre>
   <p>An <code class="idl"><a data-link-type="idl" href="#callbackdef-effectcallback" id="ref-for-callbackdef-effectcallback-2">EffectCallback</a></code> is called each time an <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-13">KeyframeEffectReadOnly</a></code> object
with which it is
associated is <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-6">sampled</a>.</p>
   <div class="parameters">
    <dl>
     <dt data-md="">
      <p>double? progress</p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress-21">iteration progress</a> value for which to produce an effect.
When this is <code>null</code>, the function SHOULD
remove the effect.</p>
     <dt data-md="">
      <p>Animatable currentTarget</p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-18">target element</a> on which this callback is expected
to operate.</p>
      <div class="note" role="note">
       <p>Note that <var>currentTarget</var> may differ from <code><var>animation</var>.target</code>.</p>
       <p>If the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-19">target element</a> of <var>animation</var> is changed between samples, this method will be
called once with a null <var>progress</var> and the
previous <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-20">target element</a> as the <var>currentTarget</var>, then again with the current <var>progress</var> and the updated <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-21">target
element</a> as the <var>currentTarget</var>.
This allows the animation effect to be removed from the old <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-22">target element</a>.</p>
      </div>
     <dt data-md="">
      <p>Animation animation</p>
     <dd data-md="">
      <p>The <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-15">Animation</a></code> object that is being sampled.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.18" id="the-animatable-interface"><span class="secno">5.18. </span><span class="content">The <code>Animatable</code> interface</span><a class="self-link" href="#the-animatable-interface"></a></h3>
   <p>Objects that may be the target of an <code class="idl"><a data-link-type="idl" href="#keyframeeffectreadonly" id="ref-for-keyframeeffectreadonly-14">KeyframeEffectReadOnly</a></code> object implement
the <code class="idl"><a data-link-type="idl" href="#animatable" id="ref-for-animatable-9">Animatable</a></code> interface.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animatable">Animatable</dfn> {
    <a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-16">Animation</a>           <a class="nv idl-code" data-link-type="method" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate-3">animate</a> (<span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-keyframes" id="ref-for-dom-animatable-animate-keyframes-options-keyframes-1">keyframes</a>,
                                 <span class="kt">optional</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#dictdef-keyframeanimationoptions" id="ref-for-dictdef-keyframeanimationoptions-2">KeyframeAnimationOptions</a>) <a class="nv idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-options" id="ref-for-dom-animatable-animate-keyframes-options-options-1">options</a>);
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-17">Animation</a>> <a class="nv idl-code" data-link-type="method" href="#dom-animatable-getanimations" id="ref-for-dom-animatable-getanimations-1">getAnimations</a> ();
};
<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-keyframeanimationoptions">KeyframeAnimationOptions</dfn> : <a class="n" data-link-type="idl-name" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions-7">KeyframeEffectOptions</a> {
    <span class="kt">DOMString</span> <a class="nv idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-keyframeanimationoptions-id" id="ref-for-dom-keyframeanimationoptions-id-1">id</a> = "";
};
</pre>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animatable" data-dfn-type="method" data-export="" data-lt="animate(keyframes, options)" id="dom-animatable-animate">Animation animate(keyframes, options)</dfn></p>
     <dd data-md="">
      <p>Performs the following steps:</p>
      <ol>
       <li data-md="">
        <p>Let <var>target</var> be the object on which this method was called.</p>
       <li data-md="">
        <p>Construct a new <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-17">KeyframeEffect</a></code> object, <var>effect</var>,
in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">relevant Realm</a> of <var>target</var> by using the same
procedure as the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-5">KeyframeEffect(target, keyframes,
options)</a></code> constructor, passing <var>target</var> as the <var>target</var> argument, and the <var>keyframes</var> and <var>options</var> arguments as supplied.</p>
        <p>If the above procedure caused an exception to be thrown, propagate the
exception and abort this procedure.</p>
       <li data-md="">
        <p>Construct a new <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-18">Animation</a></code> object, <var>animation</var>, in
the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">relevant Realm</a> of <var>target</var> by using the
same procedure as the <code class="idl"><a data-link-type="idl" href="#dom-animation-animation" id="ref-for-dom-animation-animation-4">Animation()</a></code> constructor, passing <var>effect</var> as the argument of the same name, and
the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-8">default document timeline</a> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> of the element on which this method was called as the <var>timeline</var> argument.</p>
       <li data-md="">
        <p>Assign the value of the <code>id</code> member of <var>options</var> to <var>animation</var>’s <code class="idl"><a data-link-type="idl" href="#dom-animation-id" id="ref-for-dom-animation-id-2">id</a></code> attribute.</p>
       <li data-md="">
        <p>Run the procedure to <a data-link-type="dfn" href="#play-an-animation" id="ref-for-play-an-animation-5">play an animation</a> for <var>animation</var> with the <var>auto-rewind</var> flag set to true.</p>
       <li data-md="">
        <p>Return <var>animation</var>.</p>
      </ol>
      <div class="informative-bg">
       <em>This section is non-normative</em> 
       <p>The following code fragment:</p>
<pre class="lang-javascript highlight"><span class="kd">var</span> animation <span class="o">=</span> elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span></pre>
       <p>is roughly equivalent to:</p>
<pre class="lang-javascript highlight"><span class="kd">var</span> effect <span class="o">=</span> <span class="k">new</span> KeyframeEffect<span class="p">(</span>elem<span class="p">,</span> <span class="p">{</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> animation <span class="o">=</span> <span class="k">new</span> Animation<span class="p">(</span>effect<span class="p">,</span> elem<span class="p">.</span>ownerDocument<span class="p">.</span>timeline<span class="p">)</span><span class="p">;</span>
animation<span class="p">.</span>play<span class="p">(</span><span class="p">)</span><span class="p">;</span></pre>
      </div>
      <div class="parameters">
       <dl>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animatable/animate(keyframes, options)" data-dfn-type="argument" data-export="" id="dom-animatable-animate-keyframes-options-keyframes">keyframes</dfn></p>
        <dd data-md="">
         <p>The <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe-72">keyframes</a> to use.
This value is passed to the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-6">KeyframeEffect(target, keyframes,
options)</a></code> constructor as the <var>keyframes</var> parameter and has the
same interpretation as defined for that constructor.</p>
        <dt data-md="">
         <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animatable/animate(keyframes, options)" data-dfn-type="argument" data-export="" id="dom-animatable-animate-keyframes-options-options">options</dfn></p>
        <dd data-md="">
         <p>The timing and animation options for the created <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-18">KeyframeEffect</a></code>.
This value is passed to the <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect-7">KeyframeEffect(target, keyframes,
options)</a></code> constructor as the <var>options</var> parameter and has the
same interpretation as defined for that constructor.</p>
       </dl>
      </div>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Animatable" data-dfn-type="method" data-export="" data-lt="getAnimations()" id="dom-animatable-getanimations"> sequence&lt;Animation> getAnimations()</dfn></p>
     <dd data-md="">
      <p>Returns the set of <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-19">Animation</a></code> objects
whose <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-34">target effect</a> is <a data-link-type="dfn" href="#current" id="ref-for-current-4">current</a> or <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-13">in effect</a> and
contains at least one <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-205">animation effect</a> whose <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-23">target element</a> is this object.</p>
      <p>If this object is the <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-24">target element</a> of two or more <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-206">animation effects</a> which are associated with the
same <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-63">animation</a>, the corresponding <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-20">Animation</a></code> object will still only appear in the returned list once.
The returned list is sorted using the composite order described
for the associated <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-64">animations</a> of effects in <a href="#the-effect-stack">§4.5.2 The effect stack</a>.</p>
      <p>The returned list reflects the state <em>after</em> applying any pending
changes to animation such as changes to animation-related style properties
that have yet to be processed.</p>
    </dl>
   </div>
   <div class="members">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeAnimationOptions" data-dfn-type="dict-member" data-export="" id="dom-keyframeanimationoptions-id">id</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, defaulting to <code>""</code></span></p>
     <dd data-md="">
      <p>The string to assign to the generated <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-21">Animation</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-animation-id" id="ref-for-dom-animation-id-3">id</a></code> attribute.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.19" id="extensions-to-the-document-interface"><span class="secno">5.19. </span><span class="content">Extensions to the <code>Document</code> interface</span><a class="self-link" href="#extensions-to-the-document-interface"></a></h3>
   <p>The following extensions are made to the <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/#document">Document
interface</a> defined in <a data-link-type="biblio" href="#biblio-dom">[DOM]</a>.</p>
<pre class="idl highlight def"><span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/#document">Document</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#documenttimeline" id="ref-for-documenttimeline-3">DocumentTimeline</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DocumentTimeline" href="#dom-document-timeline" id="ref-for-dom-document-timeline-1">timeline</a>;
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#animation" id="ref-for-animation-22">Animation</a>> <a class="nv idl-code" data-link-type="method" href="#dom-document-getanimations" id="ref-for-dom-document-getanimations-1">getAnimations</a>();
};
</pre>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export="" id="dom-document-timeline">timeline</dfn>, <span> of type <a data-link-type="idl-name" href="#documenttimeline" id="ref-for-documenttimeline-4">DocumentTimeline</a>, readonly</span></p>
     <dd data-md="">
      <p>The <code class="idl"><a data-link-type="idl" href="#documenttimeline" id="ref-for-documenttimeline-5">DocumentTimeline</a></code> object representing
the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-9">default document timeline</a>.</p>
    </dl>
   </div>
   <div class="methods">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export="" data-lt="getAnimations()" id="dom-document-getanimations"> sequence&lt;Animation> getAnimations()</dfn></p>
     <dd data-md="">
      <p>Returns the set of <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-23">Animation</a></code> objects
that have an associated <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-35">target effect</a> which is <a data-link-type="dfn" href="#current" id="ref-for-current-5">current</a> or <a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect-14">in effect</a> and whose <a data-link-type="dfn" href="#target-element" id="ref-for-target-element-25">target element</a> is a <a data-link-type="dfn" href="#descendant" id="ref-for-descendant-2">descendant</a> of the document.</p>
      <p>The returned list is sorted using the composite order described
for the associated <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-65">animations</a> of effects in <a href="#the-effect-stack">§4.5.2 The effect stack</a>.</p>
      <p>The returned list reflects the state <em>after</em> applying any pending
changes to animation such as changes to animation-related style properties
that have yet to be processed.</p>
      <p class="issue" id="issue-8748c168"><a class="self-link" href="#issue-8748c168"></a> Both this method and <code class="idl"><a data-link-type="idl" href="#dom-animatable-getanimations" id="ref-for-dom-animatable-getanimations-2">getAnimations()</a></code> on the <code class="idl"><a data-link-type="idl" href="#animatable" id="ref-for-animatable-10">Animatable</a></code> interface require retaining forwards-filling <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect-207">animation effects</a> and their <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation-66">animations</a> such that a document that
       repeatedly produces forwards-filling animations will consume memory
       in an unbounded fashion.
       We may need to revise this definition (previously these methods
       only returned animations whose <a data-link-type="dfn" href="#target-effect" id="ref-for-target-effect-36">target effect</a> was <a data-link-type="dfn" href="#current" id="ref-for-current-6">current</a>) or provide a loophole for implementations to discard
       old animations in such conditions.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.20" id="extensions-to-the-element-interface"><span class="secno">5.20. </span><span class="content">Extensions to the <code>Element</code> interface</span><a class="self-link" href="#extensions-to-the-element-interface"></a></h3>
   <p>Since DOM Elements may be the target of an animation,
the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code> interface <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> is extended as follows:</p>
<pre class="idl highlight def"><a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-11">Animatable</a>;
</pre>
   <p>This allows the following kind of usage.</p>
   <div class="example" id="example-77d1235d">
    <a class="self-link" href="#example-77d1235d"></a>
<pre class="lang-javascript highlight">elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> color<span class="o">:</span> <span class="s1">'red'</span> <span class="p">}</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span><span class="p">;</span></pre>
   </div>
   <h3 class="heading settled" data-level="5.21" id="extensions-to-the-pseudoelement-interface"><span class="secno">5.21. </span><span class="content">Extensions to the <code>CSSPseudoElement</code> interface</span><a class="self-link" href="#extensions-to-the-pseudoelement-interface"></a></h3>
   <p>Since <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect-54">keyframe effects</a> may also target pseudo-elements, the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/css-pseudo-4/#csspseudoelement">CSSPseudoElement</a></code> interface <a data-link-type="biblio" href="#biblio-css-pseudo-4">[css-pseudo-4]</a> is also defined to be
animatable.</p>
<pre class="idl highlight def"><a class="n" data-link-type="idl-name" href="https://drafts.csswg.org/css-pseudo-4/#csspseudoelement">CSSPseudoElement</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animatable" id="ref-for-animatable-12">Animatable</a>;
</pre>
   <h3 class="heading settled" data-level="5.22" id="the-animationplaybackevent-interface"><span class="secno">5.22. </span><span class="content">The <code>AnimationPlaybackEvent</code> interface</span><a class="self-link" href="#the-animationplaybackevent-interface"></a></h3>
   <p><a data-link-type="dfn" href="#animation-events" id="ref-for-animation-events-3">Animation events</a> are represented using the <code class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent-1">AnimationPlaybackEvent</a></code> interface.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-animationplaybackevent-animationplaybackevent" id="ref-for-dom-animationplaybackevent-animationplaybackevent-1">Constructor</a> (<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="AnimationPlaybackEvent/AnimationPlaybackEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-type">type<a class="self-link" href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-type"></a></dfn>, <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-animationplaybackeventinit" id="ref-for-dictdef-animationplaybackeventinit-1">AnimationPlaybackEventInit</a> <dfn class="nv idl-code" data-dfn-for="AnimationPlaybackEvent/AnimationPlaybackEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-eventinitdict">eventInitDict<a class="self-link" href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-eventinitdict"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="animationplaybackevent">AnimationPlaybackEvent</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double?" href="#dom-animationplaybackevent-currenttime" id="ref-for-dom-animationplaybackevent-currenttime-1">currentTime</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double?" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime-1">timelineTime</a>;
};
<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-animationplaybackeventinit">AnimationPlaybackEventInit</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
    <span class="kt">double</span>? <a class="nv idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-currenttime" id="ref-for-dom-animationplaybackeventinit-currenttime-1">currentTime</a> = <span class="kt">null</span>;
    <span class="kt">double</span>? <a class="nv idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-timelinetime" id="ref-for-dom-animationplaybackeventinit-timelinetime-1">timelineTime</a> = <span class="kt">null</span>;
};
</pre>
   <div class="constructors">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEvent" data-dfn-type="constructor" data-export="" data-lt="AnimationPlaybackEvent(type, eventInitDict)" id="dom-animationplaybackevent-animationplaybackevent"> AnimationPlaybackEvent(type, eventInitDict)</dfn></p>
     <dd data-md="">
      <p>Constructs a new <code class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent-2">AnimationPlaybackEvent</a></code> object using the procedure
defined for <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#constructing-events">constructing events</a> <a data-link-type="biblio" href="#biblio-dom">[DOM]</a>.</p>
    </dl>
   </div>
   <div class="attributes">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEvent" data-dfn-type="attribute" data-export="" id="dom-animationplaybackevent-currenttime">currentTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#event-current-time" id="ref-for-event-current-time-3">event current time</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEvent" data-dfn-type="attribute" data-export="" id="dom-animationplaybackevent-timelinetime">timelineTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, readonly, nullable</span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#event-timeline-time" id="ref-for-event-timeline-time-3">event timeline time</a>.</p>
    </dl>
   </div>
   <div class="members">
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEventInit" data-dfn-type="dict-member" data-export="" id="dom-animationplaybackeventinit-currenttime">currentTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, nullable, defaulting to <code>null</code></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#event-current-time" id="ref-for-event-current-time-4">event current time</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEventInit" data-dfn-type="dict-member" data-export="" id="dom-animationplaybackeventinit-timelinetime">timelineTime</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double">double</a>, nullable, defaulting to <code>null</code></span></p>
     <dd data-md="">
      <p>The <a data-link-type="dfn" href="#event-timeline-time" id="ref-for-event-timeline-time-4">event timeline time</a>.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="5.23" id="model-liveness"><span class="secno">5.23. </span><span class="content">Model liveness</span><a class="self-link" href="#model-liveness"></a></h3>
   <p>Changes made to any part of the model, cause the entire timing model to be
updated and any dependent style.</p>
   <div class="informative-bg">
    <em>This section is non-normative</em> 
    <p>Based on the above requirement and normative requirements elsewhere
in this specification, the following invariants can be observed:</p>
    <dl>
     <dt data-md="">
      <p>Changes made to the Web Animations model take effect immediately</p>
     <dd data-md="">
      <p>For example, if the <code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect-19">KeyframeEffect</a></code> associated with an <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-24">Animation</a></code> is seeked (see <a href="#setting-the-current-time-of-an-animation">§3.5.5 Setting the current time of an animation</a>) via the programming
interface, the value returned when querying the
animation’s <code>startTime</code> will reflect updated state of
the model immediately.</p>
      <div class="example" id="example-47276eec">
       <a class="self-link" href="#example-47276eec"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Initially animation.effect.getComputedTiming().localTime is 3000
</span>animation<span class="p">.</span>currentTime <span class="o">+=</span> <span class="mi">2000</span><span class="p">;</span>
alert<span class="p">(</span>animation<span class="p">.</span>effect<span class="p">.</span>getComputedTiming<span class="p">(</span><span class="p">)</span><span class="p">.</span>localTime<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays ‘5000’</span></pre>
      </div>
      <p>The same concept applies to more complex modifications of the
Web Animations model such as adding and removing children from
an <code class="idl"><a data-link-type="idl" href="#groupeffect" id="ref-for-groupeffect-9">GroupEffect</a></code>.</p>
     <dt data-md="">
      <p>Querying the computed style of a property affected by animation
returns the fully up-to-date state of the animation</p>
     <dd data-md="">
      <p>For example, if the used style of an element is queried
immediately after applying a new <code class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation-25">Animation</a></code> to that
element, the result of the new animation will be
incorporated in the value returned.</p>
      <div class="example" id="example-b8c53d50">
       <a class="self-link" href="#example-b8c53d50"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Set opacity to 0 immediately
</span>elem<span class="p">.</span>animate<span class="p">(</span><span class="p">{</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="p">,</span> <span class="p">{</span> fill<span class="o">:</span> <span class="s1">'forwards'</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span>
alert<span class="p">(</span>window<span class="p">.</span>getComputedStyle<span class="p">(</span>elem<span class="p">)</span><span class="p">.</span>opacity<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays ‘0’</span></pre>
      </div>
     <dt data-md="">
      <p>Changes made to the model using the programming interface do <em>not</em> cause any <code class="idl"><a data-link-type="idl" href="#callbackdef-effectcallback" id="ref-for-callbackdef-effectcallback-3">EffectCallback</a></code> functions to be
called</p>
     <dd data-md="">
      <p>For example, in the following code, the callback function will
not be called until <em>after</em> the script block has
completed during regular <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-7">sampling</a>.</p>
      <div class="example" id="example-1cb26757">
       <a class="self-link" href="#example-1cb26757"></a> 
<pre class="lang-javascript highlight"><span class="kd">var</span> timesCalled <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
elem<span class="p">.</span>animate<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  timesCalled<span class="o">++</span><span class="p">;</span>
<span class="p">}</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span><span class="p">;</span>
alert<span class="p">(</span>timesCalled<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays ‘0’</span></pre>
      </div>
      <p class="note" role="note">Note: Need to spec this properly somewhere.</p>
     <dt data-md="">
      <p>Changes made within the same task are synchronized such
that the whole set of changes is rendered together</p>
     <dd data-md="">
      <p>As a result of changes to the model taking effect immediately
combined with ECMAScript’s run-to-completion semantics,
there should never be a situation where, for example, <em>only</em> the changes to specified style are rendered without
applying animation.</p>
      <div class="example" id="example-1c78ebac">
       <a class="self-link" href="#example-1c78ebac"></a> 
<pre class="lang-javascript highlight"><span class="c1">// Fade the opacity with fallback for browsers that don’t
</span><span class="c1">// support Element.animate
</span>elem<span class="p">.</span>style<span class="p">.</span>opacity <span class="o">=</span> <span class="s1">'0'</span><span class="p">;</span>
elem<span class="p">.</span>animate<span class="p">(</span><span class="p">[</span> <span class="p">{</span> opacity<span class="o">:</span> <span class="mi">1</span> <span class="p">}</span><span class="p">,</span> <span class="p">{</span> opacity<span class="o">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">]</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span><span class="p">;</span></pre>
      </div>
      <p class="note" role="note">Note, however, that in the example above, a user agent may render a
frame with <em>none</em> of the above changes applied.
This might happen, for example, if rendering occurs in
a separate process that is scheduled to run shortly after
the above task completes but before the changes
can be communicated to the process.</p>
     <dt data-md="">
      <p>The value returned by the <code>currentTime</code> attribute of
a <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline-8">document timeline</a> will not change within a task</p>
     <dd data-md="">
      <p>Due to the requirement on <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-45">timelines</a> to store the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-48">time value</a> of the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-14">global clock</a> at the start of a <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-8">sample</a> (see <a href="#timelines">§3.4 Timelines</a>), querying the <code>currentTime</code> twice within
a long block of code that is executed in the same script block
will return the same value as shown in the following example.</p>
      <div class="example" id="example-4cf704b9">
       <a class="self-link" href="#example-4cf704b9"></a> 
<pre class="lang-javascript highlight"><span class="kd">var</span> a <span class="o">=</span> document<span class="p">.</span>timeline<span class="p">.</span>currentTime<span class="p">;</span>
<span class="c1">// ... many lines of code ...
</span><span class="kd">var</span> b <span class="o">=</span> document<span class="p">.</span>timeline<span class="p">.</span>currentTime<span class="p">;</span>
alert<span class="p">(</span>b <span class="o">-</span> a<span class="p">)</span><span class="p">;</span> <span class="c1">// Displays 0</span></pre>
      </div>
     <dt data-md="">
      <p>The time passed to a <code>requestAnimationFrame</code> callback
will be equal to <code>document.timeline.currentTime</code></p>
     <dd data-md="">
      <p>For user agent that support Timing control for script-based
animations <a data-link-type="biblio" href="#biblio-animation-timing">[ANIMATION-TIMING]</a>,
HTML’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model">event loop processing model</a> defines that animations are
updated prior to running animation frame callbacks.</p>
      <p>Furthermore, the time passed to such callbacks is the stored value of
the <code>Performance</code> object’s <code>now()</code> method
as recorded at the beginning of the <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-9">sample</a>.</p>
      <p>Since both <code>performance.now()</code> and <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-49">time values</a> from the <a data-link-type="dfn" href="#default-document-timeline" id="ref-for-default-document-timeline-10">default document timeline</a> are measured from the <code>navigationStart</code> moment, and since both <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-46">timelines</a> and animation frame callbacks use the time recorded at the start of the <a data-link-type="dfn" href="#sampling" id="ref-for-sampling-10">sample</a>, they should be equivalent.</p>
      <div class="example" id="example-ba1467fe">
       <a class="self-link" href="#example-ba1467fe"></a> 
<pre class="lang-javascript highlight">window<span class="p">.</span>requestAnimationFrame<span class="p">(</span><span class="kd">function</span><span class="p">(</span>sampleTime<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Displays ‘0’
</span>  alert<span class="p">(</span>sampleTime <span class="o">-</span> document<span class="p">.</span>timeline<span class="p">.</span>currentTime<span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span></pre>
      </div>
    </dl>
   </div>
   <h2 class="heading settled" data-level="6" id="integration-with-media-fragments"><span class="secno">6. </span><span class="content">Integration with Media Fragments</span><a class="self-link" href="#integration-with-media-fragments"></a></h2>
   <p>The Media Fragments specification <a data-link-type="biblio" href="#biblio-media-frags">[MEDIA-FRAGS]</a> defines a means
for addressing a temporal range of a media resource.
The application of media fragments depends on the MIME type of the
resource on which they are specified.
For resources with the <a data-link-type="dfn" href="https://svgwg.org/svg2-draft/mimereg.html#mime-registration">SVG MIME type</a> <a data-link-type="biblio" href="#biblio-svg11">[SVG11]</a>, the application of temporal parameters is defined in the <a href="https://svgwg.org/specs/animation-elements/"> Animation Elements</a> specification.</p>
   <p class="note" role="note">Note: media fragments are defined to operate on resources based on
    their MIME type.
    As a result, temporal addressing may not be supported in all situations
    where Web Animations content is used.</p>
   <h2 class="heading settled" data-level="7" id="interaction-with-page-display"><span class="secno">7. </span><span class="content">Interaction with page display</span><a class="self-link" href="#interaction-with-page-display"></a></h2>
   <p>HTML permits user agents to store <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#an-entry-with-persisted-user-state">user-agent defined state</a> along with
a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#session-history-entry">session history entry</a> so that as a user navigates between pages, the
previous state of the page can be restored including state such as
scroll position <a data-link-type="biblio" href="#biblio-html">[HTML]</a>.</p>
   <p>User agents that pause and resume <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media elements</a> when the referencing document is unloaded and traversed,
are encouraged to apply consistent handling to documents containing Web
Animations content.
If provided, this behavior SHOULD be achieved by adjusting the <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-50">time
values</a> of any <a data-link-type="dfn" href="#timeline" id="ref-for-timeline-47">timelines</a> bound to the <a data-link-type="dfn" href="#global-clock" id="ref-for-global-clock-15">global clock</a>.</p>
   <p class="issue" id="issue-d06e8e73"><a class="self-link" href="#issue-d06e8e73"></a> Is this at odds with those <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-51">time values</a> being relative to <code>navigationStart</code> and with <code>requestAnimationFrame</code> using the same time as <code>document.timeline.currentTime</code>?</p>
   <h2 class="heading settled" data-level="8" id="implementation-requirements"><span class="secno">8. </span><span class="content">Implementation requirements</span><a class="self-link" href="#implementation-requirements"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="precision-of-time-values"><span class="secno">8.1. </span><span class="content">Precision of time values</span><a class="self-link" href="#precision-of-time-values"></a></h3>
   <p>The internal representation of time values is implementation dependent
however, it is RECOMMENDED that user agents be able to represent input
time values with microsecond precision so that a <a data-link-type="dfn" href="#time-value" id="ref-for-time-value-52">time value</a> (which
nominally represents milliseconds) of 0.001 is distinguishable from 0.0.</p>
   <h3 class="heading settled" data-level="8.2" id="conformance-criteria"><span class="secno">8.2. </span><span class="content">Conformance criteria</span><a class="self-link" href="#conformance-criteria"></a></h3>
   <p>This specification defines an abstract model for animation and, as
such, for user agents that do not support scripting, there are no
conformance criteria since there is no testable surface area.</p>
   <p>User agents that do not support scripting, however, may implement
additional technologies defined in terms of this specification in
which case the definitions provided in this specification will form
part of the conformance criteria of the additional technology.</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="conforming-scripted-web-animations-user-agent">conforming scripted Web Animations user agent<a class="self-link" href="#conforming-scripted-web-animations-user-agent"></a></dfn> is a user
agent that implements the <abbr title="Application Programming Interface">API</abbr> defined in <a href="#programming-interface">§5 Programming interface</a>.</p>
   <h2 class="heading settled" data-level="9" id="acknowledgements"><span class="secno">9. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>Thank you to Michiel “Pomax” Kamermans for help with the
equations for a proposed smooth timing function although this feature
has been deferred to a subsequent specification.</p>
   <p>Our deep gratitude goes out to <a href="http://www.endemolshine.com.au">Southern Star
Animation</a> for their kind generosity and patience in introducing the
editors to the processes and techniques used producing broadcast
animations.</p>
   <p>The <a href="https://github.com/w3c/web-animations/commits/master">changelog</a> provides a more detailed history.</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
  <h3 class="no-ref heading settled" id="conventions"><span class="content"> Document conventions</span><a class="self-link" href="#conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="example-f839f6c8">
   <a class="self-link" href="#example-f839f6c8"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong> </p>
  <p>This specification defines a number of procedures.
    User agents are not required to implement these procedures as specified but
    may alter the steps and data structures freely provided the observable
    result is equivalent. </p>
  <p>
   Some procedures <dfn data-dfn-type="dfn" data-noexport="" id="assert">assert<a class="self-link" href="#assert"></a></dfn> an invariant condition.
    Such assertions are intended to clarify the expected behavior and do not
    constitute implementation requirements. 
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  </p>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li>
    "accumulate"
    <ul>
     <li><a href="#dom-iterationcompositeoperation-accumulate">enum-value for IterationCompositeOperation</a><span>, in §5.14</span>
     <li><a href="#dom-compositeoperation-accumulate">enum-value for CompositeOperation</a><span>, in §5.15</span>
    </ul>
   <li>
    accumulate
    <ul>
     <li><a href="#dom-iterationcompositeoperation-accumulate">enum-value for IterationCompositeOperation</a><span>, in §5.14</span>
     <li><a href="#dom-compositeoperation-accumulate">enum-value for CompositeOperation</a><span>, in §5.15</span>
    </ul>
   <li><a href="#active-after-boundary-time">active-after boundary time</a><span>, in §3.6.5</span>
   <li><a href="#active-duration">active duration</a><span>, in §3.10.2</span>
   <li><a href="#dom-computedtimingproperties-activeduration">activeDuration</a><span>, in §5.9</span>
   <li><a href="#active-interval">active interval</a><span>, in §3.6.3</span>
   <li><a href="#active-phase">active phase</a><span>, in §3.6.5</span>
   <li><a href="#active-time">active time</a><span>, in §3.10.3.1</span>
   <li><a href="#dom-compositeoperation-add">"add"</a><span>, in §5.15</span>
   <li><a href="#dom-compositeoperation-add">add</a><span>, in §5.15</span>
   <li><a href="#dom-animationeffectmutable-after">after()</a><span>, in §5.5</span>
   <li><a href="#after-phase">after phase</a><span>, in §3.6.5</span>
   <li><a href="#dom-playbackdirection-alternate">"alternate"</a><span>, in §5.9.2</span>
   <li><a href="#dom-playbackdirection-alternate">alternate</a><span>, in §5.9.2</span>
   <li><a href="#dom-playbackdirection-alternate-reverse">"alternate-reverse"</a><span>, in §5.9.2</span>
   <li><a href="#dom-playbackdirection-alternate-reverse">alternate-reverse</a><span>, in §5.9.2</span>
   <li><a href="#ancestor">ancestor</a><span>, in §3.13</span>
   <li><a href="#concept-animatable">animatable</a><span>, in §4.2</span>
   <li><a href="#animatable">Animatable</a><span>, in §5.18</span>
   <li><a href="#dom-animatable-animate">animate(keyframes, options)</a><span>, in §5.18</span>
   <li><a href="#concept-animation">animation</a><span>, in §3.5</span>
   <li><a href="#animation">Animation</a><span>, in §5.4</span>
   <li><a href="#animation-accumulation">animation accumulation</a><span>, in §4.2</span>
   <li><a href="#animation-addition">animation addition</a><span>, in §4.2</span>
   <li><a href="#animation-class">animation class</a><span>, in §4.5.1</span>
   <li><a href="#animation-direction">animation direction</a><span>, in §3.6.5</span>
   <li><a href="#animation-effect">animation effect</a><span>, in §3.6</span>
   <li><a href="#animationeffectmutable">AnimationEffectMutable</a><span>, in §5.5</span>
   <li><a href="#animation-effect-playback-rate">animation effect playback rate</a><span>, in §3.9</span>
   <li><a href="#animationeffectreadonly">AnimationEffectReadOnly</a><span>, in §5.5</span>
   <li><a href="#animation-effect-start-time">animation effect start time</a><span>, in §3.6.3</span>
   <li><a href="#dom-animation-animation">Animation(effect, timeline)</a><span>, in §5.4</span>
   <li><a href="#animationeffecttiming">AnimationEffectTiming</a><span>, in §5.7</span>
   <li><a href="#dictdef-animationeffecttimingproperties">AnimationEffectTimingProperties</a><span>, in §5.8</span>
   <li><a href="#animationeffecttimingreadonly">AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
   <li><a href="#animation-events">animation events</a><span>, in §3.5.20</span>
   <li><a href="#animation-interpolation">animation interpolation</a><span>, in §4.2</span>
   <li><a href="#animationnodelist">AnimationNodeList</a><span>, in §5.11</span>
   <li><a href="#animationplaybackevent">AnimationPlaybackEvent</a><span>, in §5.22</span>
   <li><a href="#dictdef-animationplaybackeventinit">AnimationPlaybackEventInit</a><span>, in §5.22</span>
   <li><a href="#dom-animationplaybackevent-animationplaybackevent">AnimationPlaybackEvent(type, eventInitDict)</a><span>, in §5.22</span>
   <li><a href="#animation-playback-rate">animation playback rate</a><span>, in §3.5.17</span>
   <li><a href="#enumdef-animationplaystate">AnimationPlayState</a><span>, in §5.4.1</span>
   <li><a href="#animation-property-name-to-idl-attribute-name">animation property name to IDL attribute name</a><span>, in §5.13.2</span>
   <li><a href="#animation-start-time">animation start time</a><span>, in §3.5</span>
   <li><a href="#animationtimeline">AnimationTimeline</a><span>, in §5.2</span>
   <li><a href="#animation-type">animation type</a><span>, in §4.3</span>
   <li><a href="#dom-groupeffectmutable-append">append()</a><span>, in §5.10</span>
   <li><a href="#apply-spacing-to-a-series-of-keyframes">apply spacing to a series of keyframes</a><span>, in §4.4.2.1</span>
   <li><a href="#assert">assert</a><span>, in §Unnumbered section</span>
   <li><a href="#associated-animation-of-an-animation-effect">associated animation of an animation effect</a><span>, in §4.5.2</span>
   <li><a href="#associated-with-an-animation">associated with an animation</a><span>, in §3.6.1</span>
   <li><a href="#associated-with-a-timeline">associated with a timeline</a><span>, in §3.6.1</span>
   <li><a href="#dom-fillmode-auto">auto</a><span>, in §5.9.1</span>
   <li><a href="#dom-fillmode-auto">"auto"</a><span>, in §5.9.1</span>
   <li><a href="#dom-fillmode-backwards">"backwards"</a><span>, in §5.9.1</span>
   <li><a href="#dom-fillmode-backwards">backwards</a><span>, in §5.9.1</span>
   <li><a href="#dictdef-basecomputedkeyframe">BaseComputedKeyframe</a><span>, in §5.13</span>
   <li><a href="#dictdef-basekeyframe">BaseKeyframe</a><span>, in §5.13.3</span>
   <li><a href="#dictdef-basepropertyindexedkeyframe">BasePropertyIndexedKeyframe</a><span>, in §5.13.3</span>
   <li><a href="#dom-animationeffectmutable-before">before()</a><span>, in §5.5</span>
   <li><a href="#before-active-boundary-time">before-active boundary time</a><span>, in §3.6.5</span>
   <li><a href="#before-flag">before flag</a><span>, in §3.12.4</span>
   <li><a href="#before-phase">before phase</a><span>, in §3.6.5</span>
   <li><a href="#dom-fillmode-both">both</a><span>, in §5.9.1</span>
   <li><a href="#dom-fillmode-both">"both"</a><span>, in §5.9.1</span>
   <li><a href="#dom-animation-cancel">cancel()</a><span>, in §5.4</span>
   <li><a href="#cancel-an-animation">cancel an animation</a><span>, in §3.5.16</span>
   <li><a href="#cancel-event">cancel event</a><span>, in §3.5.20.1</span>
   <li><a href="#check-the-completion-record">check the completion record</a><span>, in §5.13.3</span>
   <li><a href="#child-effect">child effect</a><span>, in §3.13</span>
   <li><a href="#dom-groupeffectreadonly-children">children</a><span>, in §5.10</span>
   <li>
    clone()
    <ul>
     <li><a href="#dom-groupeffectreadonly-clone">method for GroupEffectReadOnly</a><span>, in §5.10</span>
     <li><a href="#dom-sequenceeffectreadonly-clone">method for SequenceEffectReadOnly</a><span>, in §5.12</span>
    </ul>
   <li><a href="#color-animation-type">color animation type</a><span>, in §4.3.5</span>
   <li>
    composite
    <ul>
     <li><a href="#dom-keyframeeffectreadonly-composite">attribute for KeyframeEffectReadOnly</a><span>, in §5.13</span>
     <li><a href="#dom-keyframeeffect-composite">attribute for KeyframeEffect</a><span>, in §5.13</span>
     <li><a href="#dom-basecomputedkeyframe-composite">dict-member for BaseComputedKeyframe</a><span>, in §5.13</span>
     <li><a href="#dom-keyframe-composite">definition of</a><span>, in §5.13.3</span>
     <li><a href="#dom-basepropertyindexedkeyframe-composite">dict-member for BasePropertyIndexedKeyframe</a><span>, in §5.13.3</span>
     <li><a href="#dom-basekeyframe-composite">dict-member for BaseKeyframe</a><span>, in §5.13.3</span>
     <li><a href="#dom-keyframeeffectoptions-composite">dict-member for KeyframeEffectOptions</a><span>, in §5.13.4</span>
    </ul>
   <li><a href="#composited-value">composited value</a><span>, in §4.5.3</span>
   <li>
    CompositeOperation
    <ul>
     <li><a href="#compositeoperation">definition of</a><span>, in §5.15</span>
     <li><a href="#enumdef-compositeoperation">(enum)</a><span>, in §5.15</span>
    </ul>
   <li><a href="#composite-operation">composite operation</a><span>, in §4.5.4</span>
   <li><a href="#composite-operation-accumulate">composite operation accumulate</a><span>, in §4.5.4</span>
   <li><a href="#composite-operation-add">composite operation add</a><span>, in §4.5.4</span>
   <li><a href="#composite-operation-replace">composite operation replace</a><span>, in §4.5.4</span>
   <li><a href="#composition">composition</a><span>, in §4.5</span>
   <li><a href="#computed-keyframe-offset">computed keyframe offset</a><span>, in §4.4.2</span>
   <li><a href="#computed-keyframes">computed keyframes</a><span>, in §4.4.3</span>
   <li><a href="#dom-basecomputedkeyframe-computedoffset">computedOffset</a><span>, in §5.13</span>
   <li><a href="#computed-offset-keyframes">computed-offset keyframes</a><span>, in §5.13.5</span>
   <li><a href="#dictdef-computedtimingproperties">ComputedTimingProperties</a><span>, in §5.9</span>
   <li><a href="#conforming-scripted-web-animations-user-agent">conforming scripted Web Animations user agent</a><span>, in §8.2</span>
   <li><a href="#create-a-new-resolved-promise">create a new resolved Promise</a><span>, in §3.5.8</span>
   <li><a href="#typedef-cubic-bezier-timing-function">&lt;cubic-bezier-timing-function></a><span>, in §3.12.3</span>
   <li><a href="#cubic-bzier-timing-function">cubic Bézier timing function</a><span>, in §3.12.3</span>
   <li><a href="#current">current</a><span>, in §3.6.5</span>
   <li><a href="#current-finished-promise">current finished promise</a><span>, in §3.5.13</span>
   <li><a href="#current-iteration">current iteration</a><span>, in §3.10.4</span>
   <li><a href="#dom-computedtimingproperties-currentiteration">currentIteration</a><span>, in §5.9</span>
   <li><a href="#current-ready-promise">current ready promise</a><span>, in §3.5.9</span>
   <li><a href="#current-time">current time</a><span>, in §3.5.4</span>
   <li>
    currentTime
    <ul>
     <li><a href="#dom-animationtimeline-currenttime">attribute for AnimationTimeline</a><span>, in §5.2</span>
     <li><a href="#dom-animation-currenttime">attribute for Animation</a><span>, in §5.4</span>
     <li><a href="#dom-animationplaybackevent-currenttime">attribute for AnimationPlaybackEvent</a><span>, in §5.22</span>
     <li><a href="#dom-animationplaybackeventinit-currenttime">dict-member for AnimationPlaybackEventInit</a><span>, in §5.22</span>
    </ul>
   <li><a href="#custom-effect">custom effect</a><span>, in §4.8</span>
   <li><a href="#default-document-timeline">default document timeline</a><span>, in §3.4.2</span>
   <li>
    delay
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-delay">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-delay">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-delay">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li><a href="#descendant">descendant</a><span>, in §3.13</span>
   <li><a href="#directed-progress">directed progress</a><span>, in §3.11.1</span>
   <li>
    direction
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-direction">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-direction">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-direction">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li><a href="#directly-associated-with-an-animation">directly associated with an animation</a><span>, in §3.6.1</span>
   <li><a href="#discrete-animation-type">discrete animation type</a><span>, in §4.3.2</span>
   <li><a href="#distance-computation">distance computation</a><span>, in §4.2</span>
   <li><a href="#distk">distk</a><span>, in §4.4.2.1</span>
   <li><a href="#distribute-keyframe-spacing-mode">distribute keyframe spacing mode</a><span>, in §4.4.2</span>
   <li><a href="#document-timeline">document timeline</a><span>, in §3.4.1</span>
   <li><a href="#documenttimeline">DocumentTimeline</a><span>, in §5.3</span>
   <li><a href="#dictdef-documenttimelineoptions">DocumentTimelineOptions</a><span>, in §5.3</span>
   <li><a href="#dom-documenttimeline-documenttimeline">DocumentTimeline(options)</a><span>, in §5.3</span>
   <li>
    duration
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-duration">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-duration">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-duration">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li>
    easing
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-easing">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-easing">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-easing">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
     <li><a href="#dom-basecomputedkeyframe-easing">dict-member for BaseComputedKeyframe</a><span>, in §5.13</span>
     <li><a href="#dom-keyframe-easing">definition of</a><span>, in §5.13.3</span>
     <li><a href="#dom-basepropertyindexedkeyframe-easing">dict-member for BasePropertyIndexedKeyframe</a><span>, in §5.13.3</span>
     <li><a href="#dom-basekeyframe-easing">dict-member for BaseKeyframe</a><span>, in §5.13.3</span>
    </ul>
   <li><a href="#dom-animation-effect">effect</a><span>, in §5.4</span>
   <li><a href="#callbackdef-effectcallback">EffectCallback</a><span>, in §5.17</span>
   <li><a href="#effect-stack">effect stack</a><span>, in §4.5.2</span>
   <li><a href="#effect-value">effect value</a><span>, in §4.1</span>
   <li><a href="#end-delay">end delay</a><span>, in §3.6.3</span>
   <li>
    endDelay
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-enddelay">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-enddelay">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-enddelay">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li><a href="#dom-computedtimingproperties-endtime">endTime</a><span>, in §5.9</span>
   <li><a href="#end-time">end time</a><span>, in §3.6.3</span>
   <li><a href="#evenly-distributing-a-keyframe">evenly distributing a keyframe</a><span>, in §4.4.2.1</span>
   <li><a href="#event-current-time">event current time</a><span>, in §3.5.20.2</span>
   <li><a href="#event-timeline-time">event timeline time</a><span>, in §3.5.20.2</span>
   <li>
    fill
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-fill">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-fill">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-fill">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li><a href="#fill-mode">fill mode</a><span>, in §3.7</span>
   <li><a href="#enumdef-fillmode">FillMode</a><span>, in §5.9.1</span>
   <li><a href="#dom-animation-finish">finish()</a><span>, in §5.4</span>
   <li><a href="#finish-an-animation">finish an animation</a><span>, in §3.5.15</span>
   <li>
    finished
    <ul>
     <li><a href="#dom-animation-finished">attribute for Animation</a><span>, in §5.4</span>
     <li><a href="#dom-animationplaystate-finished">enum-value for AnimationPlayState</a><span>, in §5.4.1</span>
    </ul>
   <li><a href="#dom-animationplaystate-finished">"finished"</a><span>, in §5.4.1</span>
   <li><a href="#finished-play-state">finished play state</a><span>, in §3.5.19</span>
   <li><a href="#finish-event">finish event</a><span>, in §3.5.20.1</span>
   <li><a href="#finish-notification-steps">finish notification steps</a><span>, in §3.5.14</span>
   <li><a href="#dom-groupeffectreadonly-firstchild">firstChild</a><span>, in §5.10</span>
   <li><a href="#first-child">first child</a><span>, in §3.13</span>
   <li><a href="#dom-fillmode-forwards">"forwards"</a><span>, in §5.9.1</span>
   <li><a href="#dom-fillmode-forwards">forwards</a><span>, in §5.9.1</span>
   <li>
    getAnimations()
    <ul>
     <li><a href="#dom-animatable-getanimations">method for Animatable</a><span>, in §5.18</span>
     <li><a href="#dom-document-getanimations">method for Document</a><span>, in §5.19</span>
    </ul>
   <li><a href="#dom-animationeffectreadonly-getcomputedtiming">getComputedTiming()</a><span>, in §5.5</span>
   <li><a href="#dom-keyframeeffectreadonly-getkeyframes">getKeyframes()</a><span>, in §5.13</span>
   <li><a href="#global-animation-list">global animation list</a><span>, in §3.5</span>
   <li><a href="#global-clock">global clock</a><span>, in §3.3</span>
   <li><a href="#group-effect">group effect</a><span>, in §3.13</span>
   <li><a href="#groupeffect">GroupEffect</a><span>, in §5.10</span>
   <li><a href="#dom-groupeffect-groupeffect">GroupEffect(children, timing)</a><span>, in §5.10</span>
   <li><a href="#groupeffectmutable">GroupEffectMutable</a><span>, in §5.10</span>
   <li><a href="#groupeffectreadonly">GroupEffectReadOnly</a><span>, in §5.10</span>
   <li><a href="#dom-groupeffectreadonly-groupeffectreadonly">GroupEffectReadOnly(children, timing)</a><span>, in §5.10</span>
   <li><a href="#hold-time">hold time</a><span>, in §3.5</span>
   <li>
    id
    <ul>
     <li><a href="#dom-animation-id">attribute for Animation</a><span>, in §5.4</span>
     <li><a href="#dom-keyframeanimationoptions-id">dict-member for KeyframeAnimationOptions</a><span>, in §5.18</span>
    </ul>
   <li><a href="#idl-attribute-name-to-animation-property-name">IDL attribute name to animation property name</a><span>, in §5.13.2</span>
   <li><a href="#dom-animationplaystate-idle">"idle"</a><span>, in §5.4.1</span>
   <li><a href="#dom-animationplaystate-idle">idle</a><span>, in §5.4.1</span>
   <li><a href="#idle-phase">idle phase</a><span>, in §3.6.5</span>
   <li><a href="#idle-play-state">idle play state</a><span>, in §3.5.19</span>
   <li><a href="#inactive-timeline">inactive timeline</a><span>, in §3.4</span>
   <li><a href="#inclusive-ancestor">inclusive ancestor</a><span>, in §3.13</span>
   <li><a href="#inclusive-descendant">inclusive descendant</a><span>, in §3.13</span>
   <li><a href="#in-effect">in effect</a><span>, in §3.6.5</span>
   <li><a href="#inherited-time">inherited time</a><span>, in §3.6.4</span>
   <li><a href="#in-play">in play</a><span>, in §3.6.5</span>
   <li><a href="#insert-children">insert children</a><span>, in §5.10.2</span>
   <li><a href="#intrinsic-iteration-duration">intrinsic iteration duration</a><span>, in §3.8.1</span>
   <li><a href="#dom-animationnodelist-item">item()</a><span>, in §5.11</span>
   <li><a href="#dom-animationnodelist-item">item(index)</a><span>, in §5.11</span>
   <li>
    iterationComposite
    <ul>
     <li><a href="#dom-keyframeeffectreadonly-iterationcomposite">attribute for KeyframeEffectReadOnly</a><span>, in §5.13</span>
     <li><a href="#dom-keyframeeffect-iterationcomposite">attribute for KeyframeEffect</a><span>, in §5.13</span>
     <li><a href="#dom-keyframeeffectoptions-iterationcomposite">dict-member for KeyframeEffectOptions</a><span>, in §5.13.4</span>
    </ul>
   <li>
    IterationCompositeOperation
    <ul>
     <li><a href="#iterationcompositeoperation">definition of</a><span>, in §5.14</span>
     <li><a href="#enumdef-iterationcompositeoperation">(enum)</a><span>, in §5.14</span>
    </ul>
   <li><a href="#iteration-composite-operation">iteration composite operation</a><span>, in §4.6</span>
   <li><a href="#iteration-composite-operation-accumulate">iteration composite operation accumulate</a><span>, in §4.6</span>
   <li><a href="#iteration-composite-operation-replace">iteration composite operation replace</a><span>, in §4.6</span>
   <li><a href="#iteration-count">iteration count</a><span>, in §3.8.2</span>
   <li><a href="#iteration-duration">iteration duration</a><span>, in §3.8.1</span>
   <li><a href="#iteration-interval">iteration interval</a><span>, in §3.8.1</span>
   <li><a href="#iteration-progress">iteration progress</a><span>, in §3.13.5</span>
   <li>
    iterations
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-iterations">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-iterations">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-iterations">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li>
    iterationStart
    <ul>
     <li><a href="#dom-animationeffecttimingreadonly-iterationstart">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-iterationstart">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-iterationstart">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li><a href="#iteration-start">iteration start</a><span>, in §3.8.2</span>
   <li><a href="#keyframe">keyframe</a><span>, in §4.4.1</span>
   <li><a href="#dictdef-keyframeanimationoptions">KeyframeAnimationOptions</a><span>, in §5.18</span>
   <li><a href="#keyframeeffect">KeyframeEffect</a><span>, in §5.13</span>
   <li><a href="#keyframe-effect">keyframe effect</a><span>, in §4.4</span>
   <li><a href="#dictdef-keyframeeffectoptions">KeyframeEffectOptions</a><span>, in §5.13.4</span>
   <li><a href="#keyframeeffectreadonly">KeyframeEffectReadOnly</a><span>, in §5.13</span>
   <li><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source">KeyframeEffectReadOnly(source)</a><span>, in §5.13</span>
   <li><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly">KeyframeEffectReadOnly(target, keyframes, options)</a><span>, in §5.13</span>
   <li><a href="#dom-keyframeeffect-keyframeeffect-source">KeyframeEffect(source)</a><span>, in §5.13</span>
   <li><a href="#dom-keyframeeffect-keyframeeffect">KeyframeEffect(target, keyframes, options)</a><span>, in §5.13</span>
   <li><a href="#keyframe-offset">keyframe offset</a><span>, in §4.4.1</span>
   <li><a href="#keyframe-spacing-mode">keyframe spacing mode</a><span>, in §4.4.2</span>
   <li><a href="#keyframe-specific-composite-operation">keyframe-specific composite operation</a><span>, in §4.4.1</span>
   <li><a href="#dom-groupeffectreadonly-lastchild">lastChild</a><span>, in §5.10</span>
   <li><a href="#last-child">last child</a><span>, in §3.13</span>
   <li><a href="#dom-animationnodelist-length">length</a><span>, in §5.11</span>
   <li><a href="#length-percentage-or-calc-animation-type">length, percentage, or calc animation type</a><span>, in §4.3.4</span>
   <li><a href="#linear-timing-function">linear timing function</a><span>, in §3.12.2</span>
   <li><a href="#local-time">local time</a><span>, in §3.6.4</span>
   <li><a href="#dom-computedtimingproperties-localtime">localTime</a><span>, in §5.9</span>
   <li><a href="#loosely-sorted-by-offset">loosely sorted by offset</a><span>, in §4.4.1</span>
   <li><a href="#neutral-value-for-composition">neutral value for composition</a><span>, in §4.4.4</span>
   <li><a href="#next-sibling">next sibling</a><span>, in §3.13</span>
   <li><a href="#dom-animationeffectreadonly-nextsibling">nextSibling</a><span>, in §5.5</span>
   <li><a href="#next-sibling-not-included">next sibling not included</a><span>, in §5.10.2</span>
   <li><a href="#dom-fillmode-none">none</a><span>, in §5.9.1</span>
   <li><a href="#dom-fillmode-none">"none"</a><span>, in §5.9.1</span>
   <li><a href="#dom-playbackdirection-normal">"normal"</a><span>, in §5.9.2</span>
   <li><a href="#dom-playbackdirection-normal">normal</a><span>, in §5.9.2</span>
   <li><a href="#not-additive">not additive</a><span>, in §4.3</span>
   <li><a href="#concept-not-animatable">not animatable</a><span>, in §4.3.1</span>
   <li><a href="#not-paceable">not paceable</a><span>, in §4.3</span>
   <li>
    offset
    <ul>
     <li><a href="#dom-basecomputedkeyframe-offset">dict-member for BaseComputedKeyframe</a><span>, in §5.13</span>
     <li><a href="#dom-keyframe-offset">definition of</a><span>, in §5.13.3</span>
     <li><a href="#dom-basekeyframe-offset">dict-member for BaseKeyframe</a><span>, in §5.13.3</span>
    </ul>
   <li><a href="#offsetk">offsetk</a><span>, in §4.4.2.1</span>
   <li><a href="#dom-animation-oncancel">oncancel</a><span>, in §5.4</span>
   <li><a href="#dom-animation-onfinish">onfinish</a><span>, in §5.4</span>
   <li><a href="#dom-documenttimelineoptions-origintime">originTime</a><span>, in §5.3</span>
   <li><a href="#origin-time">origin time</a><span>, in §3.4.1</span>
   <li><a href="#overall-progress">overall progress</a><span>, in §3.10.3.2</span>
   <li><a href="#paceable">paceable</a><span>, in §4.4.2.1</span>
   <li><a href="#paced-keyframe-spacing-mode">paced keyframe spacing mode</a><span>, in §4.4.2</span>
   <li><a href="#paced-property">paced property</a><span>, in §4.4.2</span>
   <li><a href="#dom-animationeffectreadonly-parent">parent</a><span>, in §5.5</span>
   <li><a href="#parent-group">parent group</a><span>, in §3.13</span>
   <li><a href="#dom-animation-pause">pause()</a><span>, in §5.4</span>
   <li><a href="#pause-an-animation">pause an animation</a><span>, in §3.5.11</span>
   <li><a href="#dom-animationplaystate-paused">"paused"</a><span>, in §5.4.1</span>
   <li><a href="#dom-animationplaystate-paused">paused</a><span>, in §5.4.1</span>
   <li><a href="#paused-play-state">paused play state</a><span>, in §3.5.19</span>
   <li><a href="#dom-animationplaystate-pending">pending</a><span>, in §5.4.1</span>
   <li><a href="#dom-animationplaystate-pending">"pending"</a><span>, in §5.4.1</span>
   <li><a href="#pending-pause-task">pending pause task</a><span>, in §3.5.11</span>
   <li><a href="#pending-play-state">pending play state</a><span>, in §3.5.19</span>
   <li><a href="#pending-play-task">pending play task</a><span>, in §3.5.10</span>
   <li>
    play()
    <ul>
     <li><a href="#dom-animationtimeline-play">method for AnimationTimeline</a><span>, in §5.2</span>
     <li><a href="#dom-animation-play">method for Animation</a><span>, in §5.4</span>
    </ul>
   <li><a href="#play-an-animation">play an animation</a><span>, in §3.5.10</span>
   <li><a href="#enumdef-playbackdirection">PlaybackDirection</a><span>, in §5.9.2</span>
   <li><a href="#playback-direction">playback direction</a><span>, in §3.11</span>
   <li>
    playbackRate
    <ul>
     <li><a href="#dom-animation-playbackrate">attribute for Animation</a><span>, in §5.4</span>
     <li><a href="#dom-animationeffecttimingreadonly-playbackrate">attribute for AnimationEffectTimingReadOnly</a><span>, in §5.6</span>
     <li><a href="#dom-animationeffecttiming-playbackrate">attribute for AnimationEffectTiming</a><span>, in §5.7</span>
     <li><a href="#dom-animationeffecttimingproperties-playbackrate">dict-member for AnimationEffectTimingProperties</a><span>, in §5.8</span>
    </ul>
   <li><a href="#dom-animation-playstate">playState</a><span>, in §5.4</span>
   <li><a href="#play-state">play state</a><span>, in §3.5.19</span>
   <li><a href="#dom-groupeffectmutable-prepend">prepend()</a><span>, in §5.10</span>
   <li><a href="#previous-current-time">previous current time</a><span>, in §3.5.14</span>
   <li><a href="#previous-sibling">previous sibling</a><span>, in §3.13</span>
   <li><a href="#dom-animationeffectreadonly-previoussibling">previousSibling</a><span>, in §5.5</span>
   <li><a href="#process-a-keyframe-like-object">process a keyframe-like object</a><span>, in §5.13.3</span>
   <li><a href="#process-a-keyframes-argument">process a keyframes argument</a><span>, in §5.13.3</span>
   <li><a href="#process-a-timing-argument">process a timing argument</a><span>, in §5.10.1</span>
   <li><a href="#dom-computedtimingproperties-progress">progress</a><span>, in §5.9</span>
   <li>
    ready
    <ul>
     <li><a href="#ready">definition of</a><span>, in §3.5.7</span>
     <li><a href="#dom-animation-ready">attribute for Animation</a><span>, in §5.4</span>
    </ul>
   <li><a href="#real-number-animation-type">real number animation type</a><span>, in §4.3.3</span>
   <li><a href="#reject-a-promise">reject a Promise</a><span>, in §3.5.8</span>
   <li><a href="#dom-animationeffectmutable-remove">remove()</a><span>, in §5.5</span>
   <li><a href="#remove-an-animation-effect">remove an animation effect</a><span>, in §5.10.2</span>
   <li><a href="#repeated-duration">repeated duration</a><span>, in §3.10.2</span>
   <li>
    "replace"
    <ul>
     <li><a href="#dom-iterationcompositeoperation-replace">enum-value for IterationCompositeOperation</a><span>, in §5.14</span>
     <li><a href="#dom-compositeoperation-replace">enum-value for CompositeOperation</a><span>, in §5.15</span>
    </ul>
   <li><a href="#dom-animationeffectmutable-replace">replace()</a><span>, in §5.5</span>
   <li>
    replace
    <ul>
     <li><a href="#dom-iterationcompositeoperation-replace">enum-value for IterationCompositeOperation</a><span>, in §5.14</span>
     <li><a href="#dom-compositeoperation-replace">enum-value for CompositeOperation</a><span>, in §5.15</span>
    </ul>
   <li><a href="#reset-an-animations-pending-tasks">reset an animation’s pending tasks</a><span>, in §3.5.3</span>
   <li><a href="#resolve-a-promise">resolve a Promise</a><span>, in §3.5.8</span>
   <li><a href="#dom-animation-reverse">reverse()</a><span>, in §5.4</span>
   <li><a href="#dom-playbackdirection-reverse">reverse</a><span>, in §5.9.2</span>
   <li><a href="#dom-playbackdirection-reverse">"reverse"</a><span>, in §5.9.2</span>
   <li><a href="#reverse-an-animation">reverse an animation</a><span>, in §3.5.18</span>
   <li><a href="#root">root</a><span>, in §3.13</span>
   <li><a href="#dom-animationplaystate-running">running</a><span>, in §5.4.1</span>
   <li><a href="#dom-animationplaystate-running">"running"</a><span>, in §5.4.1</span>
   <li><a href="#running-play-state">running play state</a><span>, in §3.5.19</span>
   <li><a href="#sampling">sampling</a><span>, in §3.2</span>
   <li><a href="#sequence-effect">sequence effect</a><span>, in §3.13.4</span>
   <li><a href="#sequenceeffect">SequenceEffect</a><span>, in §5.12</span>
   <li><a href="#dom-sequenceeffect-sequenceeffect">SequenceEffect()</a><span>, in §5.12</span>
   <li><a href="#dom-sequenceeffectreadonly-sequenceeffectreadonly">SequenceEffectReadOnly()</a><span>, in §5.12</span>
   <li><a href="#sequenceeffectreadonly">SequenceEffectReadOnly</a><span>, in §5.12</span>
   <li><a href="#dom-keyframeeffect-setkeyframes">setKeyframes(keyframes)</a><span>, in §5.13</span>
   <li><a href="#set-the-animation-playback-rate">set the animation playback rate</a><span>, in §3.5.17.1</span>
   <li><a href="#set-the-animation-start-time">set the animation start time</a><span>, in §3.5.6</span>
   <li><a href="#set-the-current-time">set the current time</a><span>, in §3.5.5</span>
   <li><a href="#set-the-target-effect-of-an-animation">set the target effect of an animation</a><span>, in §3.5.3</span>
   <li><a href="#set-the-timeline-of-an-animation">set the timeline of an animation</a><span>, in §3.5.1</span>
   <li><a href="#sharedkeyframelist">SharedKeyframeList</a><span>, in §5.16</span>
   <li><a href="#dom-sharedkeyframelist-sharedkeyframelist">SharedKeyframeList(keyframes)</a><span>, in §5.16</span>
   <li><a href="#silently-set-the-animation-playback-rate">silently set the animation playback rate</a><span>, in §3.5.17.1</span>
   <li><a href="#silently-set-the-current-time">silently set the current time</a><span>, in §3.5.5</span>
   <li><a href="#simple-iteration-progress">simple iteration progress</a><span>, in §3.10.3.3</span>
   <li><a href="#single-sample">single-sample</a><span>, in §3.2</span>
   <li>
    spacing
    <ul>
     <li><a href="#dom-keyframeeffectreadonly-spacing">attribute for KeyframeEffectReadOnly</a><span>, in §5.13</span>
     <li><a href="#dom-keyframeeffect-spacing">attribute for KeyframeEffect</a><span>, in §5.13</span>
     <li><a href="#dom-keyframeeffectoptions-spacing">dict-member for KeyframeEffectOptions</a><span>, in §5.13.4</span>
    </ul>
   <li><a href="#start-delay">start delay</a><span>, in §3.6.3</span>
   <li>
    startTime
    <ul>
     <li><a href="#dom-animation-starttime">attribute for Animation</a><span>, in §5.4</span>
     <li><a href="#dom-computedtimingproperties-starttime">dict-member for ComputedTimingProperties</a><span>, in §5.9</span>
    </ul>
   <li><a href="#typedef-step-timing-function">&lt;step-timing-function></a><span>, in §3.12.4</span>
   <li><a href="#step-timing-function">step timing function</a><span>, in §3.12.4</span>
   <li>
    target
    <ul>
     <li><a href="#dom-keyframeeffectreadonly-target">attribute for KeyframeEffectReadOnly</a><span>, in §5.13</span>
     <li><a href="#dom-keyframeeffect-target">attribute for KeyframeEffect</a><span>, in §5.13</span>
    </ul>
   <li><a href="#target-effect">target effect</a><span>, in §3.5</span>
   <li><a href="#target-effect-end">target effect end</a><span>, in §3.5.14</span>
   <li><a href="#target-element">target element</a><span>, in §4.4</span>
   <li><a href="#target-property">target property</a><span>, in §4.1</span>
   <li>
    timeline
    <ul>
     <li><a href="#timeline">definition of</a><span>, in §3.4</span>
     <li><a href="#dom-animation-timeline">attribute for Animation</a><span>, in §5.4</span>
     <li><a href="#dom-document-timeline">attribute for Document</a><span>, in §5.19</span>
    </ul>
   <li>
    timelineTime
    <ul>
     <li><a href="#dom-animationplaybackevent-timelinetime">attribute for AnimationPlaybackEvent</a><span>, in §5.22</span>
     <li><a href="#dom-animationplaybackeventinit-timelinetime">dict-member for AnimationPlaybackEventInit</a><span>, in §5.22</span>
    </ul>
   <li><a href="#time-value">time value</a><span>, in §3.2</span>
   <li><a href="#dom-animationeffectreadonly-timing">timing</a><span>, in §5.5</span>
   <li><a href="#timing-function">timing function</a><span>, in §3.12.2</span>
   <li><a href="#transformed-progress">transformed progress</a><span>, in §3.12.5</span>
   <li><a href="#transformed-time">transformed time</a><span>, in §3.12.6</span>
   <li><a href="#transform-list-animation-type">transform list animation type</a><span>, in §4.3.6</span>
   <li><a href="#tree-order">tree order</a><span>, in §3.13</span>
   <li><a href="#underlying-value">underlying value</a><span>, in §4.5.3</span>
   <li><a href="#unresolved">unresolved</a><span>, in §3.2</span>
   <li><a href="#update-an-animations-finished-state">update an animation’s finished state</a><span>, in §3.5.14</span>
   <li><a href="#zero-time">zero time</a><span>, in §3.4</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[css-animations-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-animations-1/#propdef-animation-name">animation-name</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-backgrounds-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-bottom-width">border-bottom-width</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-color">border-color</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-left-width">border-left-width</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-right-width">border-right-width</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-top">border-top</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-top-color">border-top-color</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-top-width">border-top-width</a>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#border-width">border-width</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-cascade-4]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-cascade-4/#computed-value">computed value</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-overflow-4]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-overflow-4/#propdef-overflow">overflow</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-position-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-position-3/#stacking-context">stacking context</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-properties-values-api-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.css-houdini.org/css-properties-values-api-1/#dom-css-registerproperty">registerProperty(descriptor)</a>
     <li><a href="https://drafts.css-houdini.org/css-properties-values-api-1/#dom-propertydescriptor-syntax">syntax</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-pseudo-4]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-pseudo-4/#csspseudoelement">CSSPseudoElement</a>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3-TRANSFORMS]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-transforms-1/#propdef-transform">transform</a>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3VAL]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-values-3/#typedef-ident">&lt;ident></a>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3VAL]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-values-4/#comb-one">|</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-variables-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-variables-1/#typedef-custom-property-name">&lt;custom-property-name></a>
     <li><a href="https://drafts.csswg.org/css-variables-1/#custom-property">custom property</a>
    </ul>
   <li>
    <a data-link-type="biblio">[css-will-change-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-will-change-1/#propdef-will-change">will-change</a>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS21]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css21/visuren.html#propdef-float">float</a>
     <li><a href="https://drafts.csswg.org/css21/visufx.html#propdef-visibility">visibility</a>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/cssom/#css-property-to-idl-attribute">css property to idl attribute</a>
     <li><a href="https://drafts.csswg.org/cssom/#idl-attribute-to-css-property">idl attribute to css property</a>
     <li><a href="https://drafts.csswg.org/cssom/#serialize-a-css-value">serialize a css value</a>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#element">Element</a>
     <li><a href="https://dom.spec.whatwg.org/#event">Event</a>
     <li><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a>
     <li><a href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-document">document</a>
    </ul>
   <li>
    <a data-link-type="biblio">[dom-ls]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#constructing-events">constructing events</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMA-262]</a> defines the following terms:
    <ul>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">[[defineownproperty]]</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">[[get]]</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-code-realms">code realms</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type">completion record specification type</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-enumerableownnames">enumerableownnames</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-execution-contexts">execution contexts</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator">getiterator</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod">getmethod</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorstep">iteratorstep</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorvalue">iteratorvalue</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">promise</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">promise object</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.resolve">promise.resolve</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promisecapability-records">promisecapability record</a>
     <li><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-well-known-symbols">well known symbols</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/#document">Document</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#an-entry-with-persisted-user-state">an entry with persisted user state</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object">current global object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-document-open">document.open()</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">dom manipulation task source</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model">event loop processing model</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-fire">fire</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask">queue a microtask</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">relevant realm</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#session-history-entry">session history entry</a>
    </ul>
   <li>
    <a data-link-type="biblio">[SVG2]</a> defines the following terms:
    <ul>
     <li><a href="https://svgwg.org/svg2-draft/mimereg.html#mime-registration">svg mime type</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>
     <li><a href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>
     <li><a href="https://heycam.github.io/webidl/#EnforceRange">[enforcerange]</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">convert ecmascript to idl value</a>
     <li><a href="https://heycam.github.io/webidl/#DOMString-to-es">domstring to es</a>
     <li><a href="https://heycam.github.io/webidl/#idl-double">double</a>
     <li><a href="https://heycam.github.io/webidl/#es-to-dictionary">es to dictionary</a>
     <li><a href="https://heycam.github.io/webidl/#es-to-DOMString">es to domstring</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-platform-object">platform object</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">thrown</a>
     <li><a href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a>
     <li><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-animations-1">[CSS-ANIMATIONS-1]
   <dd>CSS Animations Module Level 1 URL: <a href="https://drafts.csswg.org/css-animations-1/">https://drafts.csswg.org/css-animations-1/</a>
   <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
   <dd>CSS Backgrounds and Borders Module Level 3 URL: <a href="https://drafts.csswg.org/css-backgrounds-3/">https://drafts.csswg.org/css-backgrounds-3/</a>
   <dt id="biblio-css-cascade-3">[CSS-CASCADE-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-cascade-3/">CSS Cascading and Inheritance Level 3</a>. URL: <a href="https://drafts.csswg.org/css-cascade-3/">https://drafts.csswg.org/css-cascade-3/</a>
   <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="http://dev.w3.org/csswg/css-cascade/">CSS Cascading and Inheritance Level 4</a>. URL: <a href="http://dev.w3.org/csswg/css-cascade/">http://dev.w3.org/csswg/css-cascade/</a>
   <dt id="biblio-css-overflow-4">[CSS-OVERFLOW-4]
   <dd>CSS Overflow Module Level 4 URL: <a href="https://drafts.csswg.org/css-overflow-4/">https://drafts.csswg.org/css-overflow-4/</a>
   <dt id="biblio-css-position-3">[CSS-POSITION-3]
   <dd>Rossen Atanassov; Arron Eicholz. <a href="https://drafts.csswg.org/css-position/">CSS Positioned Layout Module Level 3</a>. URL: <a href="https://drafts.csswg.org/css-position/">https://drafts.csswg.org/css-position/</a>
   <dt id="biblio-css-properties-values-api-1">[CSS-PROPERTIES-VALUES-API-1]
   <dd>Tab Atkins Jr.; et al. <a href="https://drafts.css-houdini.org/css-properties-values-api-1/">CSS Properties and Values API Level 1</a>. URL: <a href="https://drafts.css-houdini.org/css-properties-values-api-1/">https://drafts.css-houdini.org/css-properties-values-api-1/</a>
   <dt id="biblio-css-pseudo-4">[CSS-PSEUDO-4]
   <dd>Daniel Glazman; Elika Etemad; Alan Stearns. <a href="https://drafts.csswg.org/css-pseudo-4/">CSS Pseudo-Elements Module Level 4</a>. URL: <a href="https://drafts.csswg.org/css-pseudo-4/">https://drafts.csswg.org/css-pseudo-4/</a>
   <dt id="biblio-css-variables-1">[CSS-VARIABLES-1]
   <dd>Tab Atkins Jr.. <a href="http://dev.w3.org/csswg/css-variables/">CSS Custom Properties for Cascading Variables Module Level 1</a>. URL: <a href="http://dev.w3.org/csswg/css-variables/">http://dev.w3.org/csswg/css-variables/</a>
   <dt id="biblio-css-will-change-1">[CSS-WILL-CHANGE-1]
   <dd>Tab Atkins Jr.. <a href="http://dev.w3.org/csswg/css-will-change/">CSS Will Change Module Level 1</a>. URL: <a href="http://dev.w3.org/csswg/css-will-change/">http://dev.w3.org/csswg/css-will-change/</a>
   <dt id="biblio-css21">[CSS21]
   <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS2">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. REC. URL: <a href="https://www.w3.org/TR/CSS2">https://www.w3.org/TR/CSS2</a>
   <dt id="biblio-css3-transforms">[CSS3-TRANSFORMS]
   <dd>Simon Fraser; et al. <a href="http://dev.w3.org/csswg/css-transforms/">CSS Transforms Module Level 1</a>. URL: <a href="http://dev.w3.org/csswg/css-transforms/">http://dev.w3.org/csswg/css-transforms/</a>
   <dt id="biblio-css3val">[CSS3VAL]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/">CSS Values and Units Module Level 3</a>. 29 September 2016. CR. URL: <a href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
   <dt id="biblio-cssom">[CSSOM]
   <dd>Simon Pieters; Glenn Adams. <a href="https://drafts.csswg.org/cssom/">CSS Object Model (CSSOM)</a>. URL: <a href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecma-262">[ECMA-262]
   <dd><a href="https://tc39.github.io/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-media-frags">[MEDIA-FRAGS]
   <dd>Raphaël Troncy; et al. <a href="https://www.w3.org/TR/media-frags/">Media Fragments URI 1.0 (basic)</a>. 25 September 2012. REC. URL: <a href="https://www.w3.org/TR/media-frags/">https://www.w3.org/TR/media-frags/</a>
   <dt id="biblio-navigation-timing">[NAVIGATION-TIMING]
   <dd>Zhiheng Wang. <a href="https://www.w3.org/TR/navigation-timing/">Navigation Timing</a>. 17 December 2012. REC. URL: <a href="https://www.w3.org/TR/navigation-timing/">https://www.w3.org/TR/navigation-timing/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-select">[SELECT]
   <dd>Tantek Çelik; et al. <a href="https://www.w3.org/TR/css3-selectors/">Selectors Level 3</a>. 29 September 2011. REC. URL: <a href="https://www.w3.org/TR/css3-selectors/">https://www.w3.org/TR/css3-selectors/</a>
   <dt id="biblio-svg11">[SVG11]
   <dd>Erik Dahlström; et al. <a href="https://www.w3.org/TR/SVG11/">Scalable Vector Graphics (SVG) 1.1 (Second Edition)</a>. 16 August 2011. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
   <dt id="biblio-svg2">[SVG2]
   <dd>Nikos Andronikos; et al. <a href="https://svgwg.org/svg2-draft/">Scalable Vector Graphics (SVG) 2</a>. URL: <a href="https://svgwg.org/svg2-draft/">https://svgwg.org/svg2-draft/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. <a href="https://heycam.github.io/webidl/">Web IDL</a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-animation-timing">[ANIMATION-TIMING]
   <dd>James Robinson; Cameron McCormack. <a href="https://w3c.github.io/animation-timing/">Timing control for script-based animations</a>. URL: <a href="https://w3c.github.io/animation-timing/">https://w3c.github.io/animation-timing/</a>
   <dt id="biblio-css3-animations">[CSS3-ANIMATIONS]
   <dd>Dean Jackson; et al. <a href="https://www.w3.org/TR/css3-animations/">CSS Animations</a>. 19 February 2013. WD. URL: <a href="https://www.w3.org/TR/css3-animations/">https://www.w3.org/TR/css3-animations/</a>
   <dt id="biblio-css3-images">[CSS3-IMAGES]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css3-images/">CSS Image Values and Replaced Content Module Level 3</a>. 17 April 2012. CR. URL: <a href="https://www.w3.org/TR/css3-images/">https://www.w3.org/TR/css3-images/</a>
   <dt id="biblio-css3-transitions">[CSS3-TRANSITIONS]
   <dd>Dean Jackson; et al. <a href="http://dev.w3.org/csswg/css-transitions/">CSS Transitions</a>. URL: <a href="http://dev.w3.org/csswg/css-transitions/">http://dev.w3.org/csswg/css-transitions/</a>
   <dt id="biblio-fund-comp-graphics">[FUND-COMP-GRAPHICS]
   <dd>Peter Shirley; Michael Ashikhmin; Steve Marschner. Fundamentals of Computer Graphics. 2009. 
   <dt id="biblio-hr-time">[HR-TIME]
   <dd>Jatinder Mann. <a href="https://www.w3.org/TR/hr-time/">High Resolution Time</a>. 17 December 2012. REC. URL: <a href="https://www.w3.org/TR/hr-time/">https://www.w3.org/TR/hr-time/</a>
   <dt id="biblio-smil-animation">[SMIL-ANIMATION]
   <dd>Patrick Schmitz; Aaron Cohen. <a href="https://www.w3.org/TR/smil-animation/">SMIL Animation</a>. 4 September 2001. REC. URL: <a href="https://www.w3.org/TR/smil-animation/">https://www.w3.org/TR/smil-animation/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def"><span class="kt">interface</span> <a class="nv" href="#animationtimeline">AnimationTimeline</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double?" href="#dom-animationtimeline-currenttime">currentTime</a>;
    <a class="n" data-link-type="idl-name" href="#animation">Animation</a>           <a class="nv idl-code" data-link-type="method" href="#dom-animationtimeline-play">play</a> (<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-animationtimeline-play-effect-effect">effect</a> = <span class="kt">null</span>);
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-documenttimelineoptions">DocumentTimelineOptions</a> {
  <a class="n" data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a> <a class="nv idl-code" data-default="0" data-link-type="dict-member" data-type="DOMHighResTimeStamp " href="#dom-documenttimelineoptions-origintime">originTime</a> = 0;
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-documenttimeline-documenttimeline">Constructor</a> (<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-documenttimelineoptions">DocumentTimelineOptions</a> <a class="nv idl-code" data-link-type="argument" href="#dom-documenttimeline-documenttimeline-options-options">options</a>)]
<span class="kt">interface</span> <a class="nv" href="#documenttimeline">DocumentTimeline</a> : <a class="n" data-link-type="idl-name" href="#animationtimeline">AnimationTimeline</a> {
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-animation-animation">Constructor</a> (<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-effect">effect</a> = <span class="kt">null</span>,
              <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#animationtimeline">AnimationTimeline</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-timeline">timeline</a>)]
<span class="kt">interface</span> <a class="nv" href="#animation">Animation</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
             <span class="kt">attribute</span> <span class="kt">DOMString</span>                <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-animation-id">id</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-type="AnimationEffectReadOnly?" href="#dom-animation-effect">effect</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationtimeline">AnimationTimeline</a>?       <a class="nv idl-code" data-link-type="attribute" data-type="AnimationTimeline?" href="#dom-animation-timeline">timeline</a>;
             <span class="kt">attribute</span> <span class="kt">double</span>?                  <a class="nv idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-starttime">startTime</a>;
             <span class="kt">attribute</span> <span class="kt">double</span>?                  <a class="nv idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-currenttime">currentTime</a>;
             <span class="kt">attribute</span> <span class="kt">double</span>                   <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animation-playbackrate">playbackRate</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-animationplaystate">AnimationPlayState</a>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationPlayState" href="#dom-animation-playstate">playState</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#animation">Animation</a>>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Promise<Animation>" href="#dom-animation-ready">ready</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#animation">Animation</a>>       <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Promise<Animation>" href="#dom-animation-finished">finished</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>             <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-onfinish">onfinish</a>;
             <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>             <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-oncancel">oncancel</a>;
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-cancel">cancel</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-finish">finish</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-play">play</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-pause">pause</a> ();
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animation-reverse">reverse</a> ();
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-animationplaystate">AnimationPlayState</a> { <a class="s" href="#dom-animationplaystate-idle">"idle"</a>, <a class="s" href="#dom-animationplaystate-pending">"pending"</a>, <a class="s" href="#dom-animationplaystate-running">"running"</a>, <a class="s" href="#dom-animationplaystate-paused">"paused"</a>, <a class="s" href="#dom-animationplaystate-finished">"finished"</a> };

<span class="kt">interface</span> <a class="nv" href="#animationeffectreadonly">AnimationEffectReadOnly</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffecttimingreadonly">AnimationEffectTimingReadOnly</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectTimingReadOnly" href="#dom-animationeffectreadonly-timing">timing</a>;
    <a class="n" data-link-type="idl-name" href="#dictdef-computedtimingproperties">ComputedTimingProperties</a> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectreadonly-getcomputedtiming">getComputedTiming</a>();
    // Timing hierarchy
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#groupeffectreadonly">GroupEffectReadOnly</a>?     <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="GroupEffectReadOnly?" href="#dom-animationeffectreadonly-parent">parent</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-animationeffectreadonly-previoussibling">previousSibling</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-animationeffectreadonly-nextsibling">nextSibling</a>;
};
[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>]
<span class="kt">interface</span> <a class="nv" href="#animationeffectmutable">AnimationEffectMutable</a> {
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-before">before</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>... <a class="nv" href="#dom-animationeffectmutable-before-effects-effects">effects</a>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-after">after</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>... <a class="nv" href="#dom-animationeffectmutable-after-effects-effects">effects</a>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-replace">replace</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>... <a class="nv" href="#dom-animationeffectmutable-replace-effects-effects">effects</a>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-animationeffectmutable-remove">remove</a> ();
};

<span class="kt">interface</span> <a class="nv" href="#animationeffecttimingreadonly">AnimationEffectTimingReadOnly</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-delay">delay</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-enddelay">endDelay</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-fillmode">FillMode</a>                           <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="FillMode" href="#dom-animationeffecttimingreadonly-fill">fill</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-iterationstart">iterationStart</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unrestricted</span> <span class="kt">double</span>                <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unrestricted double" href="#dom-animationeffecttimingreadonly-iterations">iterations</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <span class="kt">DOMString</span>) <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="(unrestricted double or DOMString)" href="#dom-animationeffecttimingreadonly-duration">duration</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double" href="#dom-animationeffecttimingreadonly-playbackrate">playbackRate</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-playbackdirection">PlaybackDirection</a>                  <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="PlaybackDirection" href="#dom-animationeffecttimingreadonly-direction">direction</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-animationeffecttimingreadonly-easing">easing</a>;
};

<span class="kt">interface</span> <a class="nv" href="#animationeffecttiming">AnimationEffectTiming</a> : <a class="n" data-link-type="idl-name" href="#animationeffecttimingreadonly">AnimationEffectTimingReadOnly</a> {
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-delay">delay</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-enddelay">endDelay</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-fillmode">FillMode</a>                           <a class="nv idl-code" data-link-type="attribute" data-type="FillMode" href="#dom-animationeffecttiming-fill">fill</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-iterationstart">iterationStart</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">unrestricted</span> <span class="kt">double</span>                <a class="nv idl-code" data-link-type="attribute" data-type="unrestricted double" href="#dom-animationeffecttiming-iterations">iterations</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <span class="kt">DOMString</span>) <a class="nv idl-code" data-link-type="attribute" data-type="(unrestricted double or DOMString)" href="#dom-animationeffecttiming-duration">duration</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">double</span>                             <a class="nv idl-code" data-link-type="attribute" data-type="double" href="#dom-animationeffecttiming-playbackrate">playbackRate</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-playbackdirection">PlaybackDirection</a>                  <a class="nv idl-code" data-link-type="attribute" data-type="PlaybackDirection" href="#dom-animationeffecttiming-direction">direction</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                          <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-animationeffecttiming-easing">easing</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-animationeffecttimingproperties">AnimationEffectTimingProperties</a> {
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-delay">delay</a> = 0;
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-enddelay">endDelay</a> = 0;
    <a class="n" data-link-type="idl-name" href="#enumdef-fillmode">FillMode</a>                           <a class="nv idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="FillMode                           " href="#dom-animationeffecttimingproperties-fill">fill</a> = "auto";
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="0.0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-iterationstart">iterationStart</a> = 0.0;
    <span class="kt">unrestricted</span> <span class="kt">double</span>                <a class="nv idl-code" data-default="1.0" data-link-type="dict-member" data-type="unrestricted double                " href="#dom-animationeffecttimingproperties-iterations">iterations</a> = 1.0;
    (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <span class="kt">DOMString</span>) <a class="nv idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="(unrestricted double or DOMString) " href="#dom-animationeffecttimingproperties-duration">duration</a> = "auto";
    <span class="kt">double</span>                             <a class="nv idl-code" data-default="1.0" data-link-type="dict-member" data-type="double                             " href="#dom-animationeffecttimingproperties-playbackrate">playbackRate</a> = 1.0;
    <a class="n" data-link-type="idl-name" href="#enumdef-playbackdirection">PlaybackDirection</a>                  <a class="nv idl-code" data-default="&quot;normal&quot;" data-link-type="dict-member" data-type="PlaybackDirection                  " href="#dom-animationeffecttimingproperties-direction">direction</a> = "normal";
    <span class="kt">DOMString</span>                          <a class="nv idl-code" data-default="&quot;linear&quot;" data-link-type="dict-member" data-type="DOMString                          " href="#dom-animationeffecttimingproperties-easing">easing</a> = "linear";
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-computedtimingproperties">ComputedTimingProperties</a> : <a class="n" data-link-type="idl-name" href="#dictdef-animationeffecttimingproperties">AnimationEffectTimingProperties</a> {
    <span class="kt">double</span>               <a class="nv idl-code" data-link-type="dict-member" data-type="double               " href="#dom-computedtimingproperties-starttime">startTime</a>;
    <span class="kt">unrestricted</span> <span class="kt">double</span>  <a class="nv idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedtimingproperties-endtime">endTime</a>;
    <span class="kt">unrestricted</span> <span class="kt">double</span>  <a class="nv idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedtimingproperties-activeduration">activeDuration</a>;
    <span class="kt">double</span>?              <a class="nv idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedtimingproperties-localtime">localTime</a>;
    <span class="kt">double</span>?              <a class="nv idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedtimingproperties-progress">progress</a>;
    <span class="kt">unrestricted</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="dict-member" data-type="unrestricted double? " href="#dom-computedtimingproperties-currentiteration">currentIteration</a>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-fillmode">FillMode</a> { <a class="s" href="#dom-fillmode-none">"none"</a>, <a class="s" href="#dom-fillmode-forwards">"forwards"</a>, <a class="s" href="#dom-fillmode-backwards">"backwards"</a>, <a class="s" href="#dom-fillmode-both">"both"</a>, <a class="s" href="#dom-fillmode-auto">"auto"</a> };

<span class="kt">enum</span> <a class="nv" href="#enumdef-playbackdirection">PlaybackDirection</a> { <a class="s" href="#dom-playbackdirection-normal">"normal"</a>, <a class="s" href="#dom-playbackdirection-reverse">"reverse"</a>, <a class="s" href="#dom-playbackdirection-alternate">"alternate"</a>, <a class="s" href="#dom-playbackdirection-alternate-reverse">"alternate-reverse"</a> };

[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <a class="nv" href="#groupeffectreadonly">GroupEffectReadOnly</a> : <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationnodelist">AnimationNodeList</a>      <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationNodeList" href="#dom-groupeffectreadonly-children">children</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-groupeffectreadonly-firstchild">firstChild</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="AnimationEffectReadOnly?" href="#dom-groupeffectreadonly-lastchild">lastChild</a>;
    <a class="n" data-link-type="idl-name" href="#groupeffect">GroupEffect</a> <a class="nv idl-code" data-link-type="method" href="#dom-groupeffectreadonly-clone">clone</a> ();
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>]
<span class="kt">interface</span> <a class="nv" href="#groupeffectmutable">GroupEffectMutable</a> {
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-groupeffectmutable-prepend">prepend</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>... <a class="nv" href="#dom-groupeffectmutable-prepend-effects-effects">effects</a>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-groupeffectmutable-append">append</a> (<a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>... <a class="nv" href="#dom-groupeffectmutable-append-effects-effects">effects</a>);
};

[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <a class="nv" href="#groupeffect">GroupEffect</a> : <a class="n" data-link-type="idl-name" href="#groupeffectreadonly">GroupEffectReadOnly</a> {
};
<a class="n" data-link-type="idl-name" href="#groupeffect">GroupEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animationeffectmutable">AnimationEffectMutable</a>;
<a class="n" data-link-type="idl-name" href="#groupeffect">GroupEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#groupeffectmutable">GroupEffectMutable</a>;

<span class="kt">interface</span> <a class="nv" href="#animationnodelist">AnimationNodeList</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long" href="#dom-animationnodelist-length">length</a>;
    <span class="kt">getter</span> <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a>? <a class="nv" href="#dom-animationnodelist-item">item</a> (<span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-animationnodelist-item-index-index">index</a>);
};

[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <a class="nv" href="#sequenceeffectreadonly">SequenceEffectReadOnly</a> : <a class="n" data-link-type="idl-name" href="#groupeffectreadonly">GroupEffectReadOnly</a> {
    <a class="n" data-link-type="idl-name" href="#sequenceeffect">SequenceEffect</a> <a class="nv idl-code" data-link-type="method" href="#dom-sequenceeffectreadonly-clone">clone</a> ();
};

[Constructor (sequence? children,
              optional (unrestricted double or AnimationEffectTimingProperties) timing)]
<span class="kt">interface</span> <a class="nv" href="#sequenceeffect">SequenceEffect</a> : <a class="n" data-link-type="idl-name" href="#sequenceeffectreadonly">SequenceEffectReadOnly</a> {
};
<a class="n" data-link-type="idl-name" href="#sequenceeffect">SequenceEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animationeffectmutable">AnimationEffectMutable</a>;
<a class="n" data-link-type="idl-name" href="#sequenceeffect">SequenceEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#groupeffectmutable">GroupEffectMutable</a>;

[<a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly">Constructor</a> (<a class="n" data-link-type="idl-name" href="#animatable">Animatable</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target">target</a>,
              <span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes">keyframes</a>,
              <span class="kt">optional</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#dictdef-keyframeeffectoptions">KeyframeEffectOptions</a>) <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options">options</a>),
 <a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source">Constructor</a> (<a class="n" data-link-type="idl-name" href="#keyframeeffectreadonly">KeyframeEffectReadOnly</a> <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source">source</a>)]
<span class="kt">interface</span> <a class="nv" href="#keyframeeffectreadonly">KeyframeEffectReadOnly</a> : <a class="n" data-link-type="idl-name" href="#animationeffectreadonly">AnimationEffectReadOnly</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animatable">Animatable</a>?                 <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Animatable?" href="#dom-keyframeeffectreadonly-target">target</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-iterationcompositeoperation">IterationCompositeOperation</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="IterationCompositeOperation" href="#dom-keyframeeffectreadonly-iterationcomposite">iterationComposite</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation">CompositeOperation</a>          <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="CompositeOperation" href="#dom-keyframeeffectreadonly-composite">composite</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                   <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-keyframeeffectreadonly-spacing">spacing</a>;
    <span class="kt">sequence</span>&lt;<span class="kt">object</span>> <a class="nv idl-code" data-link-type="method" href="#dom-keyframeeffectreadonly-getkeyframes">getKeyframes</a> ();
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect">Constructor</a> (<a class="n" data-link-type="idl-name" href="#animatable">Animatable</a>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">target</a>,
              <span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">keyframes</a>,
              <span class="kt">optional</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#dictdef-keyframeeffectoptions">KeyframeEffectOptions</a>) <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">options</a>),
 <a class="nv idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect-source">Constructor</a> (<a class="n" data-link-type="idl-name" href="#keyframeeffectreadonly">KeyframeEffectReadOnly</a> <a class="nv idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-source-source">source</a>)]
<span class="kt">interface</span> <a class="nv" href="#keyframeeffect">KeyframeEffect</a> : <a class="n" data-link-type="idl-name" href="#keyframeeffectreadonly">KeyframeEffectReadOnly</a> {
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#animatable">Animatable</a>?                 <a class="nv idl-code" data-link-type="attribute" data-type="Animatable?" href="#dom-keyframeeffect-target">target</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-iterationcompositeoperation">IterationCompositeOperation</a> <a class="nv idl-code" data-link-type="attribute" data-type="IterationCompositeOperation" href="#dom-keyframeeffect-iterationcomposite">iterationComposite</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation">CompositeOperation</a>          <a class="nv idl-code" data-link-type="attribute" data-type="CompositeOperation" href="#dom-keyframeeffect-composite">composite</a>;
    <span class="kt">inherit</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>                   <a class="nv idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-keyframeeffect-spacing">spacing</a>;
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-keyframeeffect-setkeyframes">setKeyframes</a> (<span class="kt">object</span>? <a class="nv" href="#dom-keyframeeffect-setkeyframes-keyframes-keyframes">keyframes</a>);
};
<a class="n" data-link-type="idl-name" href="#keyframeeffect">KeyframeEffect</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animationeffectmutable">AnimationEffectMutable</a>;

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-basecomputedkeyframe">BaseComputedKeyframe</a> {
     <span class="kt">double</span>?            <a class="nv" data-default="null" data-type="double?            " href="#dom-basecomputedkeyframe-offset">offset</a> = <span class="kt">null</span>;
     <span class="kt">double</span>             <a class="nv" data-type="double             " href="#dom-basecomputedkeyframe-computedoffset">computedOffset</a>;
     <span class="kt">DOMString</span>          <a class="nv" data-default="&quot;linear&quot;" data-type="DOMString          " href="#dom-basecomputedkeyframe-easing">easing</a> = "linear";
     <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation">CompositeOperation</a> <a class="nv" data-type="CompositeOperation " href="#dom-basecomputedkeyframe-composite">composite</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-basepropertyindexedkeyframe">BasePropertyIndexedKeyframe</a> {
    <span class="kt">DOMString</span>          <a class="nv" data-default="&quot;linear&quot;" data-type="DOMString          " href="#dom-basepropertyindexedkeyframe-easing">easing</a> = "linear";
    <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation">CompositeOperation</a> <a class="nv" data-type="CompositeOperation " href="#dom-basepropertyindexedkeyframe-composite">composite</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-basekeyframe">BaseKeyframe</a> {
    <span class="kt">double</span>?            <a class="nv" data-default="null" data-type="double?            " href="#dom-basekeyframe-offset">offset</a> = <span class="kt">null</span>;
    <span class="kt">DOMString</span>          <a class="nv" data-default="&quot;linear&quot;" data-type="DOMString          " href="#dom-basekeyframe-easing">easing</a> = "linear";
    <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation">CompositeOperation</a> <a class="nv" data-type="CompositeOperation " href="#dom-basekeyframe-composite">composite</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-keyframeeffectoptions">KeyframeEffectOptions</a> : <a class="n" data-link-type="idl-name" href="#dictdef-animationeffecttimingproperties">AnimationEffectTimingProperties</a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-iterationcompositeoperation">IterationCompositeOperation</a> <a class="nv idl-code" data-default="&quot;replace&quot;" data-link-type="dict-member" data-type="IterationCompositeOperation " href="#dom-keyframeeffectoptions-iterationcomposite">iterationComposite</a> = "replace";
    <a class="n" data-link-type="idl-name" href="#enumdef-compositeoperation">CompositeOperation</a>          <a class="nv idl-code" data-default="&quot;replace&quot;" data-link-type="dict-member" data-type="CompositeOperation          " href="#dom-keyframeeffectoptions-composite">composite</a> = "replace";
    <span class="kt">DOMString</span>                   <a class="nv idl-code" data-default="&quot;distribute&quot;" data-link-type="dict-member" data-type="DOMString                   " href="#dom-keyframeeffectoptions-spacing">spacing</a> = "distribute";
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-iterationcompositeoperation">IterationCompositeOperation</a> {<a class="s" href="#dom-iterationcompositeoperation-replace">"replace"</a>, <a class="s" href="#dom-iterationcompositeoperation-accumulate">"accumulate"</a>};

<span class="kt">enum</span> <a class="nv" href="#enumdef-compositeoperation">CompositeOperation</a> {<a class="s" href="#dom-compositeoperation-replace">"replace"</a>, <a class="s" href="#dom-compositeoperation-add">"add"</a>, <a class="s" href="#dom-compositeoperation-accumulate">"accumulate"</a>};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-sharedkeyframelist-sharedkeyframelist">Constructor</a> (<span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes">keyframes</a>)]
<span class="kt">interface</span> <a class="nv" href="#sharedkeyframelist">SharedKeyframeList</a> {
};

<span class="kt">callback</span> <a class="nv" href="#callbackdef-effectcallback">EffectCallback</a> = <span class="kt">void</span> (<span class="kt">double</span>? <a class="nv" href="#dom-effectcallback-progress">progress</a>, <a class="n" data-link-type="idl-name" href="#animatable">Animatable</a> <a class="nv" href="#dom-effectcallback-currenttarget">currentTarget</a>,
                                <a class="n" data-link-type="idl-name" href="#animation">Animation</a> <a class="nv" href="#dom-effectcallback-animation">animation</a>);

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#NoInterfaceObject">NoInterfaceObject</a>]
<span class="kt">interface</span> <a class="nv" href="#animatable">Animatable</a> {
    <a class="n" data-link-type="idl-name" href="#animation">Animation</a>           <a class="nv idl-code" data-link-type="method" href="#dom-animatable-animate">animate</a> (<span class="kt">object</span>? <a class="nv idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-keyframes">keyframes</a>,
                                 <span class="kt">optional</span> (<span class="kt">unrestricted</span> <span class="kt">double</span> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="#dictdef-keyframeanimationoptions">KeyframeAnimationOptions</a>) <a class="nv idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-options">options</a>);
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#animation">Animation</a>> <a class="nv idl-code" data-link-type="method" href="#dom-animatable-getanimations">getAnimations</a> ();
};
<span class="kt">dictionary</span> <a class="nv" href="#dictdef-keyframeanimationoptions">KeyframeAnimationOptions</a> : <a class="n" data-link-type="idl-name" href="#dictdef-keyframeeffectoptions">KeyframeEffectOptions</a> {
    <span class="kt">DOMString</span> <a class="nv idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-keyframeanimationoptions-id">id</a> = "";
};

<span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/#document">Document</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#documenttimeline">DocumentTimeline</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DocumentTimeline" href="#dom-document-timeline">timeline</a>;
    <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#animation">Animation</a>> <a class="nv idl-code" data-link-type="method" href="#dom-document-getanimations">getAnimations</a>();
};

<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animatable">Animatable</a>;

<a class="n" data-link-type="idl-name" href="https://drafts.csswg.org/css-pseudo-4/#csspseudoelement">CSSPseudoElement</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#animatable">Animatable</a>;

[<a class="nv idl-code" data-link-type="constructor" href="#dom-animationplaybackevent-animationplaybackevent">Constructor</a> (<span class="kt">DOMString</span> <a class="nv" href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-type">type</a>, <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-animationplaybackeventinit">AnimationPlaybackEventInit</a> <a class="nv" href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-eventinitdict">eventInitDict</a>)]
<span class="kt">interface</span> <a class="nv" href="#animationplaybackevent">AnimationPlaybackEvent</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double?" href="#dom-animationplaybackevent-currenttime">currentTime</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="double?" href="#dom-animationplaybackevent-timelinetime">timelineTime</a>;
};
<span class="kt">dictionary</span> <a class="nv" href="#dictdef-animationplaybackeventinit">AnimationPlaybackEventInit</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
    <span class="kt">double</span>? <a class="nv idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-currenttime">currentTime</a> = <span class="kt">null</span>;
    <span class="kt">double</span>? <a class="nv idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-timelinetime">timelineTime</a> = <span class="kt">null</span>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> If <var>new timeline</var> is null, we should ensure that <a data-link-type="dfn" href="#custom-effect">custom
effects</a> get called with an <a data-link-type="dfn" href="#unresolved">unresolved</a> <a data-link-type="dfn" href="#iteration-progress">iteration progress</a> (unless a subsequent change in the same script execution context makes this
redundant).<a href="#issue-1e79fd76"> ↵ </a></div>
   <div class="issue"> With the set of timelines defined in this level of this specification,
this situation is not expected to occur. As a result, this section will likely
be moved to a subsequent level of this specification.<a href="#issue-3c28434b"> ↵ </a></div>
   <div class="issue">
     This is not quite right. If <var>old effect</var> is attached to another
  animation in the same task then we should probably not do an extra
  callback with <a data-link-type="dfn" href="#unresolved">unresolved</a>. 
    <p>The definition of when <a data-link-type="dfn" href="#custom-effect">custom effects</a> gets called needs to be
  audited and probably rewritten.</p>
     <a href="#issue-7f716dd4"> ↵ </a>
   </div>
   <div class="issue"> If cancelable promises materialize, we should probably cancel here
instead of rejecting.<a href="#issue-9d75c2e3"> ↵ </a></div>
   <div class="issue"> We should queue a task here for sampling custom effects.
(This should happen before we resolve the ready promise.)<a href="#issue-97b24030"> ↵ </a></div>
   <div class="issue"> We should queue a task here for sampling custom effects
with the final current time.
(This should happen before we resolve the ready promise).<a href="#issue-c0dfc505"> ↵ </a></div>
   <div class="issue"> If cancelable promises materialize, we should cancel here instead
of rejecting.<a href="#issue-a2bb3b58"> ↵ </a></div>
   <div class="issue"> The procedures for calling custom effects need to be reworked.
       Currently they probably involve calling too often for changes that
       could be coalesced.<a href="#issue-574e6f13"> ↵ </a></div>
   <div class="issue">
     Currently <a data-link-type="dfn" href="#timing-function">timing functions</a> that generate results outside the
range [0, 1] will behave unexpectedly when applied to group
effects, as children will increase iterations or enter into fill mode
rather than continuing to extrapolate along their defined behavior
(which is what they would do if the timing function applied to them
directly). 
    <p>To fix this it is possible we will wish to introduce <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-overflow-4/#propdef-overflow">overflow</a> fill
modes that respond to time values larger than or smaller than the
active time range by extrapolating rather than filling.</p>
    <p>See <a href="http://lists.w3.org/Archives/Public/public-fx/2013AprJun/0184.html">section
15 (Overflowing fill) of minuted discussion from Tokyo 2013 F2F</a>.</p>
     <a href="#issue-5b9a5216"> ↵ </a>
   </div>
   <div class="issue">
     Currently, the set of <a data-link-type="dfn" href="#timing-function">timing functions</a> allowed on
a <a data-link-type="dfn" href="#group-effect">group effect</a> is not restricted.
This has raised concern about complexity of implementation and also
complexity of behavior with regards to fill modes.
As a result, allowing the full set of timing functions on group
effects is considered <strong>at risk</strong>. 
    <p>Alternatives are to either restrict timing functions on group
effects to the <a data-link-type="dfn" href="#linear-timing-function">linear timing function</a> or to a set of
“simple” timing functions that have properties that
alleviate some of the concerns with the more complex timing
functions.</p>
    <p>See <a href="http://lists.w3.org/Archives/Public/public-fx/2013JulSep/0076.html">section
2 of the discussion from August 2013</a>.</p>
    <a href="#issue-01e7fd29"> ↵ </a>
   </div>
   <div class="issue">
     It has been proposed to extend <code>cubic-bezier</code> to allow
multiple segments, using syntax such as the following: 
<pre><code>cubic-bezier( [ &lt;number>{6} ; ]* &lt;number>{4} )</code>
</pre>
    <p>(i.e. the curve starts at (0, 0); each segment is defined by six
numbers where the start point is the end of the previous segment and
the numbers define the two control points and the end point. The
last segment is defined by four numbers since the end point is fixed
at (1, 1).)</p>
    <p>This would provide a simple and compact syntax for tools trying to
map arbitrary curves (e.g. bounce functions) to timing functions.</p>
     <a href="#issue-9e5dcac9"> ↵ </a>
   </div>
   <div class="issue"> <code>step-middle</code> and the <code>middle</code> keyword will
likely be removed in favor of a <code>frames()</code> timing function.<a href="#issue-fc1dd2fc"> ↵ </a></div>
   <div class="issue"> The above doesn’t explain the animation type to use for of syntax
such as "&lt;length>+". We will fix this once the definition of animation
types has moved to CSS Values and Units where we should define generic handling
for list types etc.<a href="#issue-8c5dcd6e"> ↵ </a></div>
   <div class="issue"> This whole section needs to be rewritten to account for when we
have lengths and percentages. In short, we don’t expand these to
used values since that was deemed overly complex (without compelling use
cases) and makes calculating keyframe offsets dependent on layout. So we
should probably just use the square distance of each component, despite the
fact that it will rarely produce a useful result.<a href="#issue-1ec19ef8"> ↵ </a></div>
   <div class="issue"> We should probably expand 2d functions to their 3d
  equivalents before matching? <a href="#issue-3540bd4c"> ↵ </a></div>
   <div class="issue"> This needs to be more specific, e.g. when combining <code>translate(20px)</code> and <code>translate(30px
  10px)</code> we have to expand the first function to <code>translate(20px 0px)</code> first.
  Probably need to define unit conversion too. <a href="#issue-7c98bbea"> ↵ </a></div>
   <div class="issue">
    <p>For <a data-link-type="dfn" href="#distance-computation">distance computation</a> we previously defined it as follows:</p>
    <ol>
     <li data-md="">
      <p>Look only at the first component of the two lists</p>
     <li data-md="">
      <p>If both are translate → euclidean distance</p>
     <li data-md="">
      <p>If both are scale → absolute difference</p>
     <li data-md="">
      <p>If both are rotate → absolute difference</p>
     <li data-md="">
      <p>If both match but are something else → use linear</p>
     <li data-md="">
      <p>If they don’t match → use matrix decomposition and
euclidean distance between translate components</p>
    </ol>
    <p>This seems really arbitrary, especially part 5.</p>
    <p>Also, looking at only the first component seems odd.
    Going through each component, working out the distance and then
    getting the square of the distance also seems much more consistent
    with what we do elsewhere.</p>
     <a href="#issue-789f9fd1"> ↵ </a>
   </div>
   <div class="issue">
    <p>There are a bunch of CSS properties for which distance (and in
    some cases addition) is not defined or which need special
    handling.</p>
    <p>For example,</p>
    <ul>
     <li data-md="">
      <p>font-stretch (an enum but handled like an integer)</p>
     <li data-md="">
      <p>visibility (0 or 1 depending on if endpoints match or not)</p>
     <li data-md="">
      <p>flex-grow and flex-shrink which allow animation only if one of
the endpoints is 0)</p>
     <li data-md="">
      <p>value pairs, triples (use square distance)</p>
     <li data-md="">
      <p>rects (use square distance)</p>
     <li data-md="">
      <p>dash arrays (square distance but a bit weird due to
percentages)</p>
     <li data-md="">
      <p>shadows (square distance of components)</p>
     <li data-md="">
      <p>filters (undefined)</p>
     <li data-md="">
      <p>background-position (special list handling needed)</p>
     <li data-md="">
      <p>pair lists</p>
    </ul>
    <p>Should we define these here or in the CSS Transitions 2 spec?</p>
     <a href="#issue-b34a7893"> ↵ </a>
   </div>
   <div class="issue">
     In the presence of certain timing functions, the input iteration
    progress to an animation effect is not limited to the range [0, 1].
    Currently, however, keyframe offsets <em>are</em> limited to the
    range [0, 1] and property values are simply extrapolated for input
    iteration progress values outside this range. 
    <p>We have considered removing this restriction since some cases exist
    where it is useful to be able to specify non-linear
    changes in property values at iteration progress values outside the
    range [0, 1].
    One example is an animation that interpolates from green to yellow
    but has an overshoot timing function that makes it temporarily
    interpolate ‘beyond’ yellow to red before settling back
    to yellow.</p>
    <p>While this effect could be achieved by modification of the keyframes
    and timing function, this approach seems to break the model’s
    separation of timing concerns from animation effects.</p>
    <p>It is not clear how this effect should be achieved but we note that
    allowing keyframe offsets outside [0, 1] may make the currently
    specified behavior where keyframes at offset 0 and 1 are synthesized
    as necessary, inconsistent.</p>
    <p>See <a href="http://lists.w3.org/Archives/Public/public-fx/2013AprJun/0184.html">section
    4 (Keyframe offsets outside [0, 1]) of minuted discussion from Tokyo
      2013 F2F</a>.</p>
     <a href="#issue-e5c1f2ca"> ↵ </a>
   </div>
   <div class="issue"> This whole feature needs to be revisited. The current thinking is that
       rather than having custom effects, we should simply have an <code>onsample</code> callback on each <a data-link-type="dfn" href="#animation-effect">animation effect</a>.  That
       would allow, for example, augmenting an existing effect with a function
       that performs logging or triggers additional actions at certain times.
       With the current arrangement, doing this would require adding a parent
       group just to achieve this.<a href="#issue-621ca06d"> ↵ </a></div>
   <div class="issue">
     There may be use cases where an action needs to be triggered at
a specific point in an animation tree.
In many cases this can be achieved by inserting a custom effect with
a step-start easing that spans the period during which the action
should be triggered.
However, this can impose additional layout requirements on the
content which might be cumbersome to accomodate. 
    <p>Some alternatives under consideration:</p>
    <ul>
     <li data-md="">
      <p>Additional calling conditions could be defined to accommodate
zero-width custom effects. For example, it could be required
that the callback be called if (given infinite precision) there
was a time between the previous and current sample times that
aligned with the custom effect.</p>
     <li data-md="">
      <p>Instead of adding special calling conditions to custom effects,
a new type of animation effect, Trigger, could be introduced. The
trigger would only ever act as a zero-width custom effect as
described above, its constructor would take a callback function,
but not require a target or timing. It could also specify other
calling conventions, for example whether it should only trigger
in a specific playback direction.</p>
    </ul>
     <a href="#issue-70b6b88f"> ↵ </a>
   </div>
   <div class="issue"> Need to define this more precisely.
    Are styles flushed?
    Presumably they are.
    Can we suspend reflow for the duration of executing the script-based
    animation effects and just do it once afterwards?<a href="#issue-8b46f38c"> ↵ </a></div>
   <div class="issue"> It has been suggested this method be renamed, or even removed
(see <a href="https://github.com/w3ctag/spec-reviews/blob/master/2013/10/Web%20Animations.md#issue-play-method">TAG
feedback</a>).<a href="#issue-d0344606"> ↵ </a></div>
   <div class="issue"> Need to define the start behavior when <var>effect</var> is null.<a href="#issue-56fe90e0"> ↵ </a></div>
   <div class="issue"> This should become a cancelable promise when (if) such things exist.<a href="#issue-d29947cf"> ↵ </a></div>
   <div class="issue"> This should become a cancelable promise when (if) such things exist.<a href="#issue-d29947cf0"> ↵ </a></div>
   <div class="issue"> Should this be <code>parentGroup</code>?<a href="#issue-894adfa6"> ↵ </a></div>
   <div class="issue"> This interface needs a constructor.<a href="#issue-f6fa9df9"> ↵ </a></div>
   <div class="issue"> This interface needs a constructor.<a href="#issue-f6fa9df90"> ↵ </a></div>
   <div class="issue"> Make a constructor for <code class="idl"><a data-link-type="idl" href="#animationeffecttimingreadonly">AnimationEffectTimingReadOnly</a></code> and call
that here.<a href="#issue-c84185b9"> ↵ </a></div>
   <div class="issue"> If <var>source</var> is using a <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist">SharedKeyframeList</a></code> should
we continue to share it?<a href="#issue-ffa5fa19"> ↵ </a></div>
   <div class="issue"> What should we do if the [[type]] is <span class="esvalue">break</span>, <span class="esvalue">continue</span>, or <span class="esvalue">return</span>? Can it be?<a href="#issue-60682dbc"> ↵ </a></div>
   <div class="issue"> Do we need null offsets or is it enough to just test for the
absence of the property?<a href="#issue-361f2071"> ↵ </a></div>
   <div class="issue"> This procedure needs to be updated to correctly return
a <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist">SharedKeyframeList</a></code> object when specified. This is currently deferred
since <code class="idl"><a data-link-type="idl" href="#sharedkeyframelist">SharedKeyframeList</a></code> is awaiting implementation experience.<a href="#issue-78a48448"> ↵ </a></div>
   <div class="issue"> Both this method and <code class="idl"><a data-link-type="idl" href="#dom-animatable-getanimations">getAnimations()</a></code> on the <code class="idl"><a data-link-type="idl" href="#animatable">Animatable</a></code> interface require retaining forwards-filling <a data-link-type="dfn" href="#animation-effect">animation effects</a> and their <a data-link-type="dfn" href="#concept-animation">animations</a> such that a document that
       repeatedly produces forwards-filling animations will consume memory
       in an unbounded fashion.
       We may need to revise this definition (previously these methods
       only returned animations whose <a data-link-type="dfn" href="#target-effect">target effect</a> was <a data-link-type="dfn" href="#current">current</a>) or provide a loophole for implementations to discard
       old animations in such conditions.<a href="#issue-8748c168"> ↵ </a></div>
   <div class="issue"> Is this at odds with those <a data-link-type="dfn" href="#time-value">time values</a> being relative to <code>navigationStart</code> and with <code>requestAnimationFrame</code> using the same time as <code>document.timeline.currentTime</code>?<a href="#issue-d06e8e73"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="time-value">
   <b><a href="#time-value">#time-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-time-value-1">3.2. Timing model concepts</a> <a href="#ref-for-time-value-2">(2)</a> <a href="#ref-for-time-value-3">(3)</a> <a href="#ref-for-time-value-4">(4)</a> <a href="#ref-for-time-value-5">(5)</a>
    <li><a href="#ref-for-time-value-6">3.3. The global clock</a> <a href="#ref-for-time-value-7">(2)</a> <a href="#ref-for-time-value-8">(3)</a> <a href="#ref-for-time-value-9">(4)</a>
    <li><a href="#ref-for-time-value-10">3.4. Timelines</a> <a href="#ref-for-time-value-11">(2)</a> <a href="#ref-for-time-value-12">(3)</a> <a href="#ref-for-time-value-13">(4)</a> <a href="#ref-for-time-value-14">(5)</a> <a href="#ref-for-time-value-15">(6)</a> <a href="#ref-for-time-value-16">(7)</a>
    <li><a href="#ref-for-time-value-17">3.4.1. Document timelines</a>
    <li><a href="#ref-for-time-value-18">3.4.2. The default document timeline</a> <a href="#ref-for-time-value-19">(2)</a> <a href="#ref-for-time-value-20">(3)</a>
    <li><a href="#ref-for-time-value-21">3.5. Animations</a> <a href="#ref-for-time-value-22">(2)</a> <a href="#ref-for-time-value-23">(3)</a>
    <li><a href="#ref-for-time-value-24">3.5.4. The current time of an animation</a> <a href="#ref-for-time-value-25">(2)</a>
    <li><a href="#ref-for-time-value-26">3.5.5. Setting the current time of an animation</a>
    <li><a href="#ref-for-time-value-27">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-time-value-28">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-time-value-29">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-time-value-30">3.5.14. Updating the finished state</a> <a href="#ref-for-time-value-31">(2)</a>
    <li><a href="#ref-for-time-value-32">3.5.15. Finishing an animation</a>
    <li><a href="#ref-for-time-value-33">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-time-value-34">3.5.17. Speed control</a> <a href="#ref-for-time-value-35">(2)</a>
    <li><a href="#ref-for-time-value-36">3.6.4. Local time and inherited time</a> <a href="#ref-for-time-value-37">(2)</a>
    <li><a href="#ref-for-time-value-38">3.8.3. Iteration time space</a>
    <li><a href="#ref-for-time-value-39">3.10.3.1. Calculating the active time</a> <a href="#ref-for-time-value-40">(2)</a> <a href="#ref-for-time-value-41">(3)</a> <a href="#ref-for-time-value-42">(4)</a> <a href="#ref-for-time-value-43">(5)</a> <a href="#ref-for-time-value-44">(6)</a> <a href="#ref-for-time-value-45">(7)</a>
    <li><a href="#ref-for-time-value-46">5.1. 
Time values in the programming interface</a>
    <li><a href="#ref-for-time-value-47">5.2. The AnimationTimeline interface</a>
    <li><a href="#ref-for-time-value-48">5.23. Model liveness</a> <a href="#ref-for-time-value-49">(2)</a>
    <li><a href="#ref-for-time-value-50">7. Interaction with page display</a> <a href="#ref-for-time-value-51">(2)</a>
    <li><a href="#ref-for-time-value-52">8.1. Precision of time values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="unresolved">
   <b><a href="#unresolved">#unresolved</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-unresolved-1">3.4. Timelines</a> <a href="#ref-for-unresolved-2">(2)</a>
    <li><a href="#ref-for-unresolved-3">3.5. Animations</a> <a href="#ref-for-unresolved-4">(2)</a>
    <li><a href="#ref-for-unresolved-5">3.5.1. Setting the timeline of an animation</a> <a href="#ref-for-unresolved-6">(2)</a> <a href="#ref-for-unresolved-7">(3)</a>
    <li><a href="#ref-for-unresolved-8">3.5.2. Responding to a newly inactive
  timeline</a>
    <li><a href="#ref-for-unresolved-9">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-unresolved-10">(2)</a>
    <li><a href="#ref-for-unresolved-11">3.5.4. The current time of an animation</a> <a href="#ref-for-unresolved-12">(2)</a> <a href="#ref-for-unresolved-13">(3)</a>
    <li><a href="#ref-for-unresolved-14">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-unresolved-15">(2)</a> <a href="#ref-for-unresolved-16">(3)</a> <a href="#ref-for-unresolved-17">(4)</a> <a href="#ref-for-unresolved-18">(5)</a> <a href="#ref-for-unresolved-19">(6)</a> <a href="#ref-for-unresolved-20">(7)</a>
    <li><a href="#ref-for-unresolved-21">3.5.6. Setting the start time of an animation</a> <a href="#ref-for-unresolved-22">(2)</a> <a href="#ref-for-unresolved-23">(3)</a> <a href="#ref-for-unresolved-24">(4)</a> <a href="#ref-for-unresolved-25">(5)</a> <a href="#ref-for-unresolved-26">(6)</a> <a href="#ref-for-unresolved-27">(7)</a> <a href="#ref-for-unresolved-28">(8)</a> <a href="#ref-for-unresolved-29">(9)</a>
    <li><a href="#ref-for-unresolved-30">3.5.7. Waiting for the target effect</a> <a href="#ref-for-unresolved-31">(2)</a>
    <li><a href="#ref-for-unresolved-32">3.5.10. Playing an animation</a> <a href="#ref-for-unresolved-33">(2)</a> <a href="#ref-for-unresolved-34">(3)</a> <a href="#ref-for-unresolved-35">(4)</a> <a href="#ref-for-unresolved-36">(5)</a> <a href="#ref-for-unresolved-37">(6)</a> <a href="#ref-for-unresolved-38">(7)</a> <a href="#ref-for-unresolved-39">(8)</a>
    <li><a href="#ref-for-unresolved-40">3.5.11. Pausing an animation</a> <a href="#ref-for-unresolved-41">(2)</a> <a href="#ref-for-unresolved-42">(3)</a>
    <li><a href="#ref-for-unresolved-43">3.5.14. Updating the finished state</a> <a href="#ref-for-unresolved-44">(2)</a> <a href="#ref-for-unresolved-45">(3)</a> <a href="#ref-for-unresolved-46">(4)</a> <a href="#ref-for-unresolved-47">(5)</a> <a href="#ref-for-unresolved-48">(6)</a> <a href="#ref-for-unresolved-49">(7)</a> <a href="#ref-for-unresolved-50">(8)</a> <a href="#ref-for-unresolved-51">(9)</a> <a href="#ref-for-unresolved-52">(10)</a>
    <li><a href="#ref-for-unresolved-53">3.5.15. Finishing an animation</a> <a href="#ref-for-unresolved-54">(2)</a> <a href="#ref-for-unresolved-55">(3)</a> <a href="#ref-for-unresolved-56">(4)</a>
    <li><a href="#ref-for-unresolved-57">3.5.16. Canceling an animation</a> <a href="#ref-for-unresolved-58">(2)</a> <a href="#ref-for-unresolved-59">(3)</a> <a href="#ref-for-unresolved-60">(4)</a> <a href="#ref-for-unresolved-61">(5)</a>
    <li><a href="#ref-for-unresolved-62">3.5.17.1. Updating the playback rate of an animation</a>
    <li><a href="#ref-for-unresolved-63">3.5.19. Play states</a> <a href="#ref-for-unresolved-64">(2)</a> <a href="#ref-for-unresolved-65">(3)</a>
    <li><a href="#ref-for-unresolved-66">3.5.20.2. Event parameters</a> <a href="#ref-for-unresolved-67">(2)</a>
    <li><a href="#ref-for-unresolved-68">3.6.4. Local time and inherited time</a> <a href="#ref-for-unresolved-69">(2)</a> <a href="#ref-for-unresolved-70">(3)</a>
    <li><a href="#ref-for-unresolved-71">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-unresolved-72">(2)</a> <a href="#ref-for-unresolved-73">(3)</a> <a href="#ref-for-unresolved-74">(4)</a> <a href="#ref-for-unresolved-75">(5)</a>
    <li><a href="#ref-for-unresolved-76">3.7.1. Fill modes</a>
    <li><a href="#ref-for-unresolved-77">3.10.3.1. Calculating the active time</a> <a href="#ref-for-unresolved-78">(2)</a> <a href="#ref-for-unresolved-79">(3)</a> <a href="#ref-for-unresolved-80">(4)</a> <a href="#ref-for-unresolved-81">(5)</a> <a href="#ref-for-unresolved-82">(6)</a> <a href="#ref-for-unresolved-83">(7)</a> <a href="#ref-for-unresolved-84">(8)</a>
    <li><a href="#ref-for-unresolved-85">3.10.3.2. Calculating the overall progress</a> <a href="#ref-for-unresolved-86">(2)</a>
    <li><a href="#ref-for-unresolved-87">3.10.3.3. Calculating the simple iteration progress</a> <a href="#ref-for-unresolved-88">(2)</a>
    <li><a href="#ref-for-unresolved-89">3.10.4. Calculating the current iteration</a> <a href="#ref-for-unresolved-90">(2)</a>
    <li><a href="#ref-for-unresolved-91">3.11.1. Calculating the directed progress</a> <a href="#ref-for-unresolved-92">(2)</a>
    <li><a href="#ref-for-unresolved-93">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-unresolved-94">3.12.5. Calculating the transformed progress</a> <a href="#ref-for-unresolved-95">(2)</a>
    <li><a href="#ref-for-unresolved-96">3.12.6. Calculating the transformed time</a> <a href="#ref-for-unresolved-97">(2)</a>
    <li><a href="#ref-for-unresolved-98">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-unresolved-99">4.8.1. Sampling custom effects</a> <a href="#ref-for-unresolved-100">(2)</a>
    <li><a href="#ref-for-unresolved-101">5.1. 
Time values in the programming interface</a>
    <li><a href="#ref-for-unresolved-102">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sampling">
   <b><a href="#sampling">#sampling</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sampling-1">3.2. Timing model concepts</a>
    <li><a href="#ref-for-sampling-2">3.4.2. The default document timeline</a>
    <li><a href="#ref-for-sampling-3">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-sampling-4">3.5.19. Play states</a>
    <li><a href="#ref-for-sampling-5">4.8. Custom effects</a>
    <li><a href="#ref-for-sampling-6">5.17. The EffectCallback callback function</a>
    <li><a href="#ref-for-sampling-7">5.23. Model liveness</a> <a href="#ref-for-sampling-8">(2)</a> <a href="#ref-for-sampling-9">(3)</a> <a href="#ref-for-sampling-10">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="single-sample">
   <b><a href="#single-sample">#single-sample</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-single-sample-1">3.4. Timelines</a>
    <li><a href="#ref-for-single-sample-2">4.8.1. Sampling custom effects</a> <a href="#ref-for-single-sample-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="global-clock">
   <b><a href="#global-clock">#global-clock</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-global-clock-1">3.3. The global clock</a> <a href="#ref-for-global-clock-2">(2)</a> <a href="#ref-for-global-clock-3">(3)</a> <a href="#ref-for-global-clock-4">(4)</a> <a href="#ref-for-global-clock-5">(5)</a> <a href="#ref-for-global-clock-6">(6)</a>
    <li><a href="#ref-for-global-clock-7">3.4. Timelines</a> <a href="#ref-for-global-clock-8">(2)</a> <a href="#ref-for-global-clock-9">(3)</a> <a href="#ref-for-global-clock-10">(4)</a> <a href="#ref-for-global-clock-11">(5)</a>
    <li><a href="#ref-for-global-clock-12">3.4.1. Document timelines</a>
    <li><a href="#ref-for-global-clock-13">3.4.2. The default document timeline</a>
    <li><a href="#ref-for-global-clock-14">5.23. Model liveness</a>
    <li><a href="#ref-for-global-clock-15">7. Interaction with page display</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="timeline">
   <b><a href="#timeline">#timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-timeline-1">3.4. Timelines</a> <a href="#ref-for-timeline-2">(2)</a> <a href="#ref-for-timeline-3">(3)</a>
    <li><a href="#ref-for-timeline-4">3.4.1. Document timelines</a>
    <li><a href="#ref-for-timeline-5">3.5. Animations</a> <a href="#ref-for-timeline-6">(2)</a> <a href="#ref-for-timeline-7">(3)</a> <a href="#ref-for-timeline-8">(4)</a> <a href="#ref-for-timeline-9">(5)</a> <a href="#ref-for-timeline-10">(6)</a>
    <li><a href="#ref-for-timeline-11">3.5.1. Setting the timeline of an animation</a> <a href="#ref-for-timeline-12">(2)</a>
    <li><a href="#ref-for-timeline-13">3.5.2. Responding to a newly inactive
  timeline</a> <a href="#ref-for-timeline-14">(2)</a> <a href="#ref-for-timeline-15">(3)</a>
    <li><a href="#ref-for-timeline-16">3.5.4. The current time of an animation</a> <a href="#ref-for-timeline-17">(2)</a> <a href="#ref-for-timeline-18">(3)</a>
    <li><a href="#ref-for-timeline-19">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-timeline-20">(2)</a> <a href="#ref-for-timeline-21">(3)</a> <a href="#ref-for-timeline-22">(4)</a> <a href="#ref-for-timeline-23">(5)</a>
    <li><a href="#ref-for-timeline-24">3.5.6. Setting the start time of an animation</a> <a href="#ref-for-timeline-25">(2)</a>
    <li><a href="#ref-for-timeline-26">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-timeline-27">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-timeline-28">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-timeline-29">3.5.15. Finishing an animation</a> <a href="#ref-for-timeline-30">(2)</a>
    <li><a href="#ref-for-timeline-31">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-timeline-32">3.5.17. Speed control</a> <a href="#ref-for-timeline-33">(2)</a> <a href="#ref-for-timeline-34">(3)</a>
    <li><a href="#ref-for-timeline-35">3.5.18. Reversing an animation</a> <a href="#ref-for-timeline-36">(2)</a>
    <li><a href="#ref-for-timeline-37">3.5.20.2. Event parameters</a> <a href="#ref-for-timeline-38">(2)</a> <a href="#ref-for-timeline-39">(3)</a>
    <li><a href="#ref-for-timeline-40">5.2. The AnimationTimeline interface</a> <a href="#ref-for-timeline-41">(2)</a>
    <li><a href="#ref-for-timeline-42">5.4. The Animation interface</a> <a href="#ref-for-timeline-43">(2)</a> <a href="#ref-for-timeline-44">(3)</a>
    <li><a href="#ref-for-timeline-45">5.23. Model liveness</a> <a href="#ref-for-timeline-46">(2)</a>
    <li><a href="#ref-for-timeline-47">7. Interaction with page display</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="zero-time">
   <b><a href="#zero-time">#zero-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-zero-time-1">3.4. Timelines</a>
    <li><a href="#ref-for-zero-time-2">3.4.1. Document timelines</a>
    <li><a href="#ref-for-zero-time-3">5.3. The DocumentTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="inactive-timeline">
   <b><a href="#inactive-timeline">#inactive-timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inactive-timeline-1">3.4.1. Document timelines</a> <a href="#ref-for-inactive-timeline-2">(2)</a>
    <li><a href="#ref-for-inactive-timeline-3">3.5.2. Responding to a newly inactive
  timeline</a> <a href="#ref-for-inactive-timeline-4">(2)</a>
    <li><a href="#ref-for-inactive-timeline-5">3.5.4. The current time of an animation</a>
    <li><a href="#ref-for-inactive-timeline-6">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-inactive-timeline-7">(2)</a>
    <li><a href="#ref-for-inactive-timeline-8">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-inactive-timeline-9">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-inactive-timeline-10">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-inactive-timeline-11">3.5.15. Finishing an animation</a>
    <li><a href="#ref-for-inactive-timeline-12">3.5.18. Reversing an animation</a>
    <li><a href="#ref-for-inactive-timeline-13">3.5.20.2. Event parameters</a>
    <li><a href="#ref-for-inactive-timeline-14">5.2. The AnimationTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-timeline">
   <b><a href="#document-timeline">#document-timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-document-timeline-1">3.4.1. Document timelines</a> <a href="#ref-for-document-timeline-2">(2)</a> <a href="#ref-for-document-timeline-3">(3)</a>
    <li><a href="#ref-for-document-timeline-4">3.4.2. The default document timeline</a> <a href="#ref-for-document-timeline-5">(2)</a> <a href="#ref-for-document-timeline-6">(3)</a>
    <li><a href="#ref-for-document-timeline-7">5.3. The DocumentTimeline interface</a>
    <li><a href="#ref-for-document-timeline-8">5.23. Model liveness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="origin-time">
   <b><a href="#origin-time">#origin-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-origin-time-1">3.4.2. The default document timeline</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="default-document-timeline">
   <b><a href="#default-document-timeline">#default-document-timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-default-document-timeline-1">3.4.2. The default document timeline</a> <a href="#ref-for-default-document-timeline-2">(2)</a> <a href="#ref-for-default-document-timeline-3">(3)</a>
    <li><a href="#ref-for-default-document-timeline-4">3.8.3. Iteration time space</a>
    <li><a href="#ref-for-default-document-timeline-5">5.3. The DocumentTimeline interface</a>
    <li><a href="#ref-for-default-document-timeline-6">5.4. The Animation interface</a> <a href="#ref-for-default-document-timeline-7">(2)</a>
    <li><a href="#ref-for-default-document-timeline-8">5.18. The Animatable interface</a>
    <li><a href="#ref-for-default-document-timeline-9">5.19. Extensions to the Document interface</a>
    <li><a href="#ref-for-default-document-timeline-10">5.23. Model liveness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="concept-animation">
   <b><a href="#concept-animation">#concept-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-animation-1">3.5. Animations</a> <a href="#ref-for-concept-animation-2">(2)</a> <a href="#ref-for-concept-animation-3">(3)</a> <a href="#ref-for-concept-animation-4">(4)</a>
    <li><a href="#ref-for-concept-animation-5">3.5.2. Responding to a newly inactive
  timeline</a> <a href="#ref-for-concept-animation-6">(2)</a> <a href="#ref-for-concept-animation-7">(3)</a>
    <li><a href="#ref-for-concept-animation-8">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-concept-animation-9">3.5.4. The current time of an animation</a>
    <li><a href="#ref-for-concept-animation-10">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-concept-animation-11">3.5.7. Waiting for the target effect</a> <a href="#ref-for-concept-animation-12">(2)</a>
    <li><a href="#ref-for-concept-animation-13">3.5.9. The current ready promise</a>
    <li><a href="#ref-for-concept-animation-14">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-concept-animation-15">3.5.12. Reaching the end</a> <a href="#ref-for-concept-animation-16">(2)</a>
    <li><a href="#ref-for-concept-animation-17">3.5.14. Updating the finished state</a> <a href="#ref-for-concept-animation-18">(2)</a> <a href="#ref-for-concept-animation-19">(3)</a> <a href="#ref-for-concept-animation-20">(4)</a>
    <li><a href="#ref-for-concept-animation-21">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-concept-animation-22">3.5.17. Speed control</a>
    <li><a href="#ref-for-concept-animation-23">3.5.17.1. Updating the playback rate of an animation</a> <a href="#ref-for-concept-animation-24">(2)</a>
    <li><a href="#ref-for-concept-animation-25">3.5.18. Reversing an animation</a>
    <li><a href="#ref-for-concept-animation-26">3.5.19. Play states</a> <a href="#ref-for-concept-animation-27">(2)</a>
    <li><a href="#ref-for-concept-animation-28">3.5.20. Animation events</a> <a href="#ref-for-concept-animation-29">(2)</a>
    <li><a href="#ref-for-concept-animation-30">3.5.20.1. Types of animation events</a>
    <li><a href="#ref-for-concept-animation-31">3.5.20.2. Event parameters</a> <a href="#ref-for-concept-animation-32">(2)</a> <a href="#ref-for-concept-animation-33">(3)</a> <a href="#ref-for-concept-animation-34">(4)</a>
    <li><a href="#ref-for-concept-animation-35">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-concept-animation-36">(2)</a> <a href="#ref-for-concept-animation-37">(3)</a> <a href="#ref-for-concept-animation-38">(4)</a> <a href="#ref-for-concept-animation-39">(5)</a>
    <li><a href="#ref-for-concept-animation-40">3.6.4. Local time and inherited time</a> <a href="#ref-for-concept-animation-41">(2)</a>
    <li><a href="#ref-for-concept-animation-42">3.6.5. Animation effect phases and
states</a>
    <li><a href="#ref-for-concept-animation-43">3.9. Animation effect speed control</a> <a href="#ref-for-concept-animation-44">(2)</a> <a href="#ref-for-concept-animation-45">(3)</a> <a href="#ref-for-concept-animation-46">(4)</a> <a href="#ref-for-concept-animation-47">(5)</a>
    <li><a href="#ref-for-concept-animation-48">3.13. Grouping and synchronization</a> <a href="#ref-for-concept-animation-49">(2)</a>
    <li><a href="#ref-for-concept-animation-50">4.3.1. Not animatable</a>
    <li><a href="#ref-for-concept-animation-51">4.5.1. Animation classes</a>
    <li><a href="#ref-for-concept-animation-52">4.5.2. The effect stack</a> <a href="#ref-for-concept-animation-53">(2)</a>
    <li><a href="#ref-for-concept-animation-54">4.5.5. Applying the composited result</a> <a href="#ref-for-concept-animation-55">(2)</a>
    <li><a href="#ref-for-concept-animation-56">4.7. Side effects of animation</a>
    <li><a href="#ref-for-concept-animation-57">5.4. The Animation interface</a> <a href="#ref-for-concept-animation-58">(2)</a> <a href="#ref-for-concept-animation-59">(3)</a>
    <li><a href="#ref-for-concept-animation-60">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-concept-animation-61">5.10.2. Definitions for manipulating hierarchies</a> <a href="#ref-for-concept-animation-62">(2)</a>
    <li><a href="#ref-for-concept-animation-63">5.18. The Animatable interface</a> <a href="#ref-for-concept-animation-64">(2)</a>
    <li><a href="#ref-for-concept-animation-65">5.19. Extensions to the Document interface</a> <a href="#ref-for-concept-animation-66">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="target-effect">
   <b><a href="#target-effect">#target-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-target-effect-1">3.5. Animations</a> <a href="#ref-for-target-effect-2">(2)</a>
    <li><a href="#ref-for-target-effect-3">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-target-effect-4">(2)</a> <a href="#ref-for-target-effect-5">(3)</a>
    <li><a href="#ref-for-target-effect-6">3.5.4. The current time of an animation</a>
    <li><a href="#ref-for-target-effect-7">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-target-effect-8">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-target-effect-9">3.5.11. Pausing an animation</a> <a href="#ref-for-target-effect-10">(2)</a>
    <li><a href="#ref-for-target-effect-11">3.5.12. Reaching the end</a> <a href="#ref-for-target-effect-12">(2)</a> <a href="#ref-for-target-effect-13">(3)</a> <a href="#ref-for-target-effect-14">(4)</a> <a href="#ref-for-target-effect-15">(5)</a>
    <li><a href="#ref-for-target-effect-16">3.5.14. Updating the finished state</a> <a href="#ref-for-target-effect-17">(2)</a> <a href="#ref-for-target-effect-18">(3)</a>
    <li><a href="#ref-for-target-effect-19">3.5.16. Canceling an animation</a> <a href="#ref-for-target-effect-20">(2)</a>
    <li><a href="#ref-for-target-effect-21">3.5.20. Animation events</a>
    <li><a href="#ref-for-target-effect-22">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-target-effect-23">(2)</a> <a href="#ref-for-target-effect-24">(3)</a>
    <li><a href="#ref-for-target-effect-25">3.9. Animation effect speed control</a>
    <li><a href="#ref-for-target-effect-26">5.2. The AnimationTimeline interface</a> <a href="#ref-for-target-effect-27">(2)</a>
    <li><a href="#ref-for-target-effect-28">5.4. The Animation interface</a> <a href="#ref-for-target-effect-29">(2)</a> <a href="#ref-for-target-effect-30">(3)</a> <a href="#ref-for-target-effect-31">(4)</a> <a href="#ref-for-target-effect-32">(5)</a> <a href="#ref-for-target-effect-33">(6)</a>
    <li><a href="#ref-for-target-effect-34">5.18. The Animatable interface</a>
    <li><a href="#ref-for-target-effect-35">5.19. Extensions to the Document interface</a> <a href="#ref-for-target-effect-36">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-start-time">
   <b><a href="#animation-start-time">#animation-start-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-start-time-1">3.5. Animations</a>
    <li><a href="#ref-for-animation-start-time-2">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-animation-start-time-3">3.5.4. The current time of an animation</a> <a href="#ref-for-animation-start-time-4">(2)</a>
    <li><a href="#ref-for-animation-start-time-5">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-animation-start-time-6">(2)</a> <a href="#ref-for-animation-start-time-7">(3)</a> <a href="#ref-for-animation-start-time-8">(4)</a> <a href="#ref-for-animation-start-time-9">(5)</a> <a href="#ref-for-animation-start-time-10">(6)</a>
    <li><a href="#ref-for-animation-start-time-11">3.5.6. Setting the start time of an animation</a> <a href="#ref-for-animation-start-time-12">(2)</a> <a href="#ref-for-animation-start-time-13">(3)</a>
    <li><a href="#ref-for-animation-start-time-14">3.5.7. Waiting for the target effect</a> <a href="#ref-for-animation-start-time-15">(2)</a>
    <li><a href="#ref-for-animation-start-time-16">3.5.10. Playing an animation</a> <a href="#ref-for-animation-start-time-17">(2)</a> <a href="#ref-for-animation-start-time-18">(3)</a>
    <li><a href="#ref-for-animation-start-time-19">3.5.11. Pausing an animation</a> <a href="#ref-for-animation-start-time-20">(2)</a> <a href="#ref-for-animation-start-time-21">(3)</a> <a href="#ref-for-animation-start-time-22">(4)</a>
    <li><a href="#ref-for-animation-start-time-23">3.5.14. Updating the finished state</a> <a href="#ref-for-animation-start-time-24">(2)</a> <a href="#ref-for-animation-start-time-25">(3)</a>
    <li><a href="#ref-for-animation-start-time-26">3.5.15. Finishing an animation</a> <a href="#ref-for-animation-start-time-27">(2)</a> <a href="#ref-for-animation-start-time-28">(3)</a> <a href="#ref-for-animation-start-time-29">(4)</a>
    <li><a href="#ref-for-animation-start-time-30">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-animation-start-time-31">3.5.19. Play states</a> <a href="#ref-for-animation-start-time-32">(2)</a>
    <li><a href="#ref-for-animation-start-time-33">5.4. The Animation interface</a> <a href="#ref-for-animation-start-time-34">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="hold-time">
   <b><a href="#hold-time">#hold-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-hold-time-1">3.5. Animations</a>
    <li><a href="#ref-for-hold-time-2">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-hold-time-3">3.5.4. The current time of an animation</a> <a href="#ref-for-hold-time-4">(2)</a>
    <li><a href="#ref-for-hold-time-5">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-hold-time-6">(2)</a> <a href="#ref-for-hold-time-7">(3)</a> <a href="#ref-for-hold-time-8">(4)</a>
    <li><a href="#ref-for-hold-time-9">3.5.6. Setting the start time of an animation</a> <a href="#ref-for-hold-time-10">(2)</a> <a href="#ref-for-hold-time-11">(3)</a> <a href="#ref-for-hold-time-12">(4)</a>
    <li><a href="#ref-for-hold-time-13">3.5.10. Playing an animation</a> <a href="#ref-for-hold-time-14">(2)</a> <a href="#ref-for-hold-time-15">(3)</a> <a href="#ref-for-hold-time-16">(4)</a> <a href="#ref-for-hold-time-17">(5)</a> <a href="#ref-for-hold-time-18">(6)</a> <a href="#ref-for-hold-time-19">(7)</a>
    <li><a href="#ref-for-hold-time-20">3.5.11. Pausing an animation</a> <a href="#ref-for-hold-time-21">(2)</a> <a href="#ref-for-hold-time-22">(3)</a> <a href="#ref-for-hold-time-23">(4)</a> <a href="#ref-for-hold-time-24">(5)</a> <a href="#ref-for-hold-time-25">(6)</a>
    <li><a href="#ref-for-hold-time-26">3.5.14. Updating the finished state</a> <a href="#ref-for-hold-time-27">(2)</a> <a href="#ref-for-hold-time-28">(3)</a> <a href="#ref-for-hold-time-29">(4)</a> <a href="#ref-for-hold-time-30">(5)</a> <a href="#ref-for-hold-time-31">(6)</a> <a href="#ref-for-hold-time-32">(7)</a> <a href="#ref-for-hold-time-33">(8)</a> <a href="#ref-for-hold-time-34">(9)</a> <a href="#ref-for-hold-time-35">(10)</a>
    <li><a href="#ref-for-hold-time-36">3.5.15. Finishing an animation</a> <a href="#ref-for-hold-time-37">(2)</a>
    <li><a href="#ref-for-hold-time-38">3.5.16. Canceling an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="global-animation-list">
   <b><a href="#global-animation-list">#global-animation-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-global-animation-list-1">4.5.2. The effect stack</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-the-timeline-of-an-animation">
   <b><a href="#set-the-timeline-of-an-animation">#set-the-timeline-of-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-the-timeline-of-an-animation-1">5.4. The Animation interface</a> <a href="#ref-for-set-the-timeline-of-an-animation-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-the-target-effect-of-an-animation">
   <b><a href="#set-the-target-effect-of-an-animation">#set-the-target-effect-of-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-the-target-effect-of-an-animation-1">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-set-the-target-effect-of-an-animation-2">5.4. The Animation interface</a> <a href="#ref-for-set-the-target-effect-of-an-animation-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reset-an-animations-pending-tasks">
   <b><a href="#reset-an-animations-pending-tasks">#reset-an-animations-pending-tasks</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reset-an-animations-pending-tasks-1">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-reset-an-animations-pending-tasks-2">3.5.16. Canceling an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-time">
   <b><a href="#current-time">#current-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-time-1">3.5. Animations</a>
    <li><a href="#ref-for-current-time-2">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-current-time-3">3.5.4. The current time of an animation</a> <a href="#ref-for-current-time-4">(2)</a> <a href="#ref-for-current-time-5">(3)</a> <a href="#ref-for-current-time-6">(4)</a>
    <li><a href="#ref-for-current-time-7">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-current-time-8">(2)</a> <a href="#ref-for-current-time-9">(3)</a>
    <li><a href="#ref-for-current-time-10">3.5.6. Setting the start time of an animation</a> <a href="#ref-for-current-time-11">(2)</a> <a href="#ref-for-current-time-12">(3)</a> <a href="#ref-for-current-time-13">(4)</a>
    <li><a href="#ref-for-current-time-14">3.5.10. Playing an animation</a> <a href="#ref-for-current-time-15">(2)</a> <a href="#ref-for-current-time-16">(3)</a> <a href="#ref-for-current-time-17">(4)</a> <a href="#ref-for-current-time-18">(5)</a> <a href="#ref-for-current-time-19">(6)</a> <a href="#ref-for-current-time-20">(7)</a>
    <li><a href="#ref-for-current-time-21">3.5.11. Pausing an animation</a> <a href="#ref-for-current-time-22">(2)</a> <a href="#ref-for-current-time-23">(3)</a>
    <li><a href="#ref-for-current-time-24">3.5.12. Reaching the end</a> <a href="#ref-for-current-time-25">(2)</a> <a href="#ref-for-current-time-26">(3)</a> <a href="#ref-for-current-time-27">(4)</a> <a href="#ref-for-current-time-28">(5)</a> <a href="#ref-for-current-time-29">(6)</a> <a href="#ref-for-current-time-30">(7)</a>
    <li><a href="#ref-for-current-time-31">3.5.14. Updating the finished state</a> <a href="#ref-for-current-time-32">(2)</a> <a href="#ref-for-current-time-33">(3)</a> <a href="#ref-for-current-time-34">(4)</a> <a href="#ref-for-current-time-35">(5)</a> <a href="#ref-for-current-time-36">(6)</a> <a href="#ref-for-current-time-37">(7)</a> <a href="#ref-for-current-time-38">(8)</a> <a href="#ref-for-current-time-39">(9)</a> <a href="#ref-for-current-time-40">(10)</a>
    <li><a href="#ref-for-current-time-41">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-current-time-42">3.5.17. Speed control</a> <a href="#ref-for-current-time-43">(2)</a> <a href="#ref-for-current-time-44">(3)</a>
    <li><a href="#ref-for-current-time-45">3.5.17.1. Updating the playback rate of an animation</a> <a href="#ref-for-current-time-46">(2)</a>
    <li><a href="#ref-for-current-time-47">3.5.19. Play states</a> <a href="#ref-for-current-time-48">(2)</a> <a href="#ref-for-current-time-49">(3)</a> <a href="#ref-for-current-time-50">(4)</a> <a href="#ref-for-current-time-51">(5)</a> <a href="#ref-for-current-time-52">(6)</a> <a href="#ref-for-current-time-53">(7)</a>
    <li><a href="#ref-for-current-time-54">3.5.20.2. Event parameters</a>
    <li><a href="#ref-for-current-time-55">3.6.4. Local time and inherited time</a>
    <li><a href="#ref-for-current-time-56">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="silently-set-the-current-time">
   <b><a href="#silently-set-the-current-time">#silently-set-the-current-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-silently-set-the-current-time-1">3.5.2. Responding to a newly inactive
  timeline</a>
    <li><a href="#ref-for-silently-set-the-current-time-2">3.5.5. Setting the current time of an animation</a>
    <li><a href="#ref-for-silently-set-the-current-time-3">3.5.15. Finishing an animation</a>
    <li><a href="#ref-for-silently-set-the-current-time-4">3.5.17.1. Updating the playback rate of an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-the-current-time">
   <b><a href="#set-the-current-time">#set-the-current-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-the-current-time-1">3.5.14. Updating the finished state</a> <a href="#ref-for-set-the-current-time-2">(2)</a>
    <li><a href="#ref-for-set-the-current-time-3">3.5.17.1. Updating the playback rate of an animation</a> <a href="#ref-for-set-the-current-time-4">(2)</a>
    <li><a href="#ref-for-set-the-current-time-5">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-the-animation-start-time">
   <b><a href="#set-the-animation-start-time">#set-the-animation-start-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-the-animation-start-time-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ready">
   <b><a href="#ready">#ready</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ready-1">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-ready-2">(2)</a>
    <li><a href="#ref-for-ready-3">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-ready-4">3.5.10. Playing an animation</a> <a href="#ref-for-ready-5">(2)</a> <a href="#ref-for-ready-6">(3)</a>
    <li><a href="#ref-for-ready-7">5.2. The AnimationTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="resolve-a-promise">
   <b><a href="#resolve-a-promise">#resolve-a-promise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolve-a-promise-1">3.5.5. Setting the current time of an animation</a>
    <li><a href="#ref-for-resolve-a-promise-2">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-resolve-a-promise-3">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-resolve-a-promise-4">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-resolve-a-promise-5">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-resolve-a-promise-6">3.5.15. Finishing an animation</a> <a href="#ref-for-resolve-a-promise-7">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reject-a-promise">
   <b><a href="#reject-a-promise">#reject-a-promise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reject-a-promise-1">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-reject-a-promise-2">3.5.16. Canceling an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-new-resolved-promise">
   <b><a href="#create-a-new-resolved-promise">#create-a-new-resolved-promise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-create-a-new-resolved-promise-1">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-create-a-new-resolved-promise-2">3.5.9. The current ready promise</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-ready-promise">
   <b><a href="#current-ready-promise">#current-ready-promise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-ready-promise-1">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-current-ready-promise-2">(2)</a>
    <li><a href="#ref-for-current-ready-promise-3">3.5.5. Setting the current time of an animation</a>
    <li><a href="#ref-for-current-ready-promise-4">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-current-ready-promise-5">3.5.9. The current ready promise</a> <a href="#ref-for-current-ready-promise-6">(2)</a> <a href="#ref-for-current-ready-promise-7">(3)</a>
    <li><a href="#ref-for-current-ready-promise-8">3.5.10. Playing an animation</a> <a href="#ref-for-current-ready-promise-9">(2)</a> <a href="#ref-for-current-ready-promise-10">(3)</a>
    <li><a href="#ref-for-current-ready-promise-11">3.5.11. Pausing an animation</a> <a href="#ref-for-current-ready-promise-12">(2)</a>
    <li><a href="#ref-for-current-ready-promise-13">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-current-ready-promise-14">3.5.15. Finishing an animation</a> <a href="#ref-for-current-ready-promise-15">(2)</a>
    <li><a href="#ref-for-current-ready-promise-16">3.5.18. Reversing an animation</a>
    <li><a href="#ref-for-current-ready-promise-17">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="play-an-animation">
   <b><a href="#play-an-animation">#play-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-play-an-animation-1">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-play-an-animation-2">3.5.18. Reversing an animation</a>
    <li><a href="#ref-for-play-an-animation-3">5.2. The AnimationTimeline interface</a>
    <li><a href="#ref-for-play-an-animation-4">5.4. The Animation interface</a>
    <li><a href="#ref-for-play-an-animation-5">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pending-play-task">
   <b><a href="#pending-play-task">#pending-play-task</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pending-play-task-1">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-pending-play-task-2">(2)</a> <a href="#ref-for-pending-play-task-3">(3)</a>
    <li><a href="#ref-for-pending-play-task-4">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-pending-play-task-5">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-pending-play-task-6">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-pending-play-task-7">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-pending-play-task-8">3.5.15. Finishing an animation</a>
    <li><a href="#ref-for-pending-play-task-9">3.5.19. Play states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pause-an-animation">
   <b><a href="#pause-an-animation">#pause-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pause-an-animation-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pending-pause-task">
   <b><a href="#pending-pause-task">#pending-pause-task</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pending-pause-task-1">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-pending-pause-task-2">(2)</a> <a href="#ref-for-pending-pause-task-3">(3)</a>
    <li><a href="#ref-for-pending-pause-task-4">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-pending-pause-task-5">(2)</a>
    <li><a href="#ref-for-pending-pause-task-6">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-pending-pause-task-7">3.5.10. Playing an animation</a> <a href="#ref-for-pending-pause-task-8">(2)</a>
    <li><a href="#ref-for-pending-pause-task-9">3.5.11. Pausing an animation</a> <a href="#ref-for-pending-pause-task-10">(2)</a>
    <li><a href="#ref-for-pending-pause-task-11">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-pending-pause-task-12">3.5.15. Finishing an animation</a> <a href="#ref-for-pending-pause-task-13">(2)</a>
    <li><a href="#ref-for-pending-pause-task-14">3.5.19. Play states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-finished-promise">
   <b><a href="#current-finished-promise">#current-finished-promise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-finished-promise-1">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-current-finished-promise-2">3.5.13. The current finished promise</a>
    <li><a href="#ref-for-current-finished-promise-3">3.5.14. Updating the finished state</a> <a href="#ref-for-current-finished-promise-4">(2)</a> <a href="#ref-for-current-finished-promise-5">(3)</a> <a href="#ref-for-current-finished-promise-6">(4)</a> <a href="#ref-for-current-finished-promise-7">(5)</a> <a href="#ref-for-current-finished-promise-8">(6)</a>
    <li><a href="#ref-for-current-finished-promise-9">3.5.16. Canceling an animation</a> <a href="#ref-for-current-finished-promise-10">(2)</a>
    <li><a href="#ref-for-current-finished-promise-11">4.3.1. Not animatable</a>
    <li><a href="#ref-for-current-finished-promise-12">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="target-effect-end">
   <b><a href="#target-effect-end">#target-effect-end</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-target-effect-end-1">3.5.10. Playing an animation</a> <a href="#ref-for-target-effect-end-2">(2)</a> <a href="#ref-for-target-effect-end-3">(3)</a> <a href="#ref-for-target-effect-end-4">(4)</a>
    <li><a href="#ref-for-target-effect-end-5">3.5.11. Pausing an animation</a> <a href="#ref-for-target-effect-end-6">(2)</a>
    <li><a href="#ref-for-target-effect-end-7">3.5.14. Updating the finished state</a> <a href="#ref-for-target-effect-end-8">(2)</a> <a href="#ref-for-target-effect-end-9">(3)</a> <a href="#ref-for-target-effect-end-10">(4)</a> <a href="#ref-for-target-effect-end-11">(5)</a>
    <li><a href="#ref-for-target-effect-end-12">3.5.15. Finishing an animation</a> <a href="#ref-for-target-effect-end-13">(2)</a>
    <li><a href="#ref-for-target-effect-end-14">3.5.19. Play states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="previous-current-time">
   <b><a href="#previous-current-time">#previous-current-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-previous-current-time-1">3.5.2. Responding to a newly inactive
  timeline</a>
    <li><a href="#ref-for-previous-current-time-2">3.5.5. Setting the current time of an animation</a>
    <li><a href="#ref-for-previous-current-time-3">3.5.14. Updating the finished state</a> <a href="#ref-for-previous-current-time-4">(2)</a> <a href="#ref-for-previous-current-time-5">(3)</a> <a href="#ref-for-previous-current-time-6">(4)</a> <a href="#ref-for-previous-current-time-7">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="update-an-animations-finished-state">
   <b><a href="#update-an-animations-finished-state">#update-an-animations-finished-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-an-animations-finished-state-1">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-update-an-animations-finished-state-2">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-update-an-animations-finished-state-3">3.5.5. Setting the current time of an animation</a>
    <li><a href="#ref-for-update-an-animations-finished-state-4">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-update-an-animations-finished-state-5">3.5.10. Playing an animation</a> <a href="#ref-for-update-an-animations-finished-state-6">(2)</a>
    <li><a href="#ref-for-update-an-animations-finished-state-7">3.5.11. Pausing an animation</a> <a href="#ref-for-update-an-animations-finished-state-8">(2)</a>
    <li><a href="#ref-for-update-an-animations-finished-state-9">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-update-an-animations-finished-state-10">3.5.15. Finishing an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="finish-notification-steps">
   <b><a href="#finish-notification-steps">#finish-notification-steps</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-finish-notification-steps-1">3.5.14. Updating the finished state</a> <a href="#ref-for-finish-notification-steps-2">(2)</a> <a href="#ref-for-finish-notification-steps-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="finish-an-animation">
   <b><a href="#finish-an-animation">#finish-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-finish-an-animation-1">3.5.14. Updating the finished state</a> <a href="#ref-for-finish-an-animation-2">(2)</a>
    <li><a href="#ref-for-finish-an-animation-3">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cancel-an-animation">
   <b><a href="#cancel-an-animation">#cancel-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cancel-an-animation-1">3.5.2. Responding to a newly inactive
  timeline</a>
    <li><a href="#ref-for-cancel-an-animation-2">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-cancel-an-animation-3">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-playback-rate">
   <b><a href="#animation-playback-rate">#animation-playback-rate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-playback-rate-1">3.5.4. The current time of an animation</a> <a href="#ref-for-animation-playback-rate-2">(2)</a>
    <li><a href="#ref-for-animation-playback-rate-3">3.5.5. Setting the current time of an animation</a> <a href="#ref-for-animation-playback-rate-4">(2)</a>
    <li><a href="#ref-for-animation-playback-rate-5">3.5.6. Setting the start time of an animation</a>
    <li><a href="#ref-for-animation-playback-rate-6">3.5.10. Playing an animation</a> <a href="#ref-for-animation-playback-rate-7">(2)</a> <a href="#ref-for-animation-playback-rate-8">(3)</a> <a href="#ref-for-animation-playback-rate-9">(4)</a> <a href="#ref-for-animation-playback-rate-10">(5)</a> <a href="#ref-for-animation-playback-rate-11">(6)</a>
    <li><a href="#ref-for-animation-playback-rate-12">3.5.11. Pausing an animation</a> <a href="#ref-for-animation-playback-rate-13">(2)</a>
    <li><a href="#ref-for-animation-playback-rate-14">3.5.12. Reaching the end</a> <a href="#ref-for-animation-playback-rate-15">(2)</a>
    <li><a href="#ref-for-animation-playback-rate-16">3.5.14. Updating the finished state</a> <a href="#ref-for-animation-playback-rate-17">(2)</a> <a href="#ref-for-animation-playback-rate-18">(3)</a> <a href="#ref-for-animation-playback-rate-19">(4)</a> <a href="#ref-for-animation-playback-rate-20">(5)</a> <a href="#ref-for-animation-playback-rate-21">(6)</a>
    <li><a href="#ref-for-animation-playback-rate-22">3.5.15. Finishing an animation</a> <a href="#ref-for-animation-playback-rate-23">(2)</a> <a href="#ref-for-animation-playback-rate-24">(3)</a> <a href="#ref-for-animation-playback-rate-25">(4)</a>
    <li><a href="#ref-for-animation-playback-rate-26">3.5.17. Speed control</a> <a href="#ref-for-animation-playback-rate-27">(2)</a>
    <li><a href="#ref-for-animation-playback-rate-28">3.5.17.1. Updating the playback rate of an animation</a> <a href="#ref-for-animation-playback-rate-29">(2)</a> <a href="#ref-for-animation-playback-rate-30">(3)</a>
    <li><a href="#ref-for-animation-playback-rate-31">3.5.18. Reversing an animation</a>
    <li><a href="#ref-for-animation-playback-rate-32">3.5.19. Play states</a> <a href="#ref-for-animation-playback-rate-33">(2)</a> <a href="#ref-for-animation-playback-rate-34">(3)</a>
    <li><a href="#ref-for-animation-playback-rate-35">3.6.5. Animation effect phases and
states</a>
    <li><a href="#ref-for-animation-playback-rate-36">3.9. Animation effect speed control</a> <a href="#ref-for-animation-playback-rate-37">(2)</a> <a href="#ref-for-animation-playback-rate-38">(3)</a> <a href="#ref-for-animation-playback-rate-39">(4)</a>
    <li><a href="#ref-for-animation-playback-rate-40">5.4. The Animation interface</a> <a href="#ref-for-animation-playback-rate-41">(2)</a> <a href="#ref-for-animation-playback-rate-42">(3)</a> <a href="#ref-for-animation-playback-rate-43">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-the-animation-playback-rate">
   <b><a href="#set-the-animation-playback-rate">#set-the-animation-playback-rate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-the-animation-playback-rate-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="silently-set-the-animation-playback-rate">
   <b><a href="#silently-set-the-animation-playback-rate">#silently-set-the-animation-playback-rate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-silently-set-the-animation-playback-rate-1">3.5.18. Reversing an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reverse-an-animation">
   <b><a href="#reverse-an-animation">#reverse-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reverse-an-animation-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="play-state">
   <b><a href="#play-state">#play-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-play-state-1">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-play-state-2">3.5.14. Updating the finished state</a> <a href="#ref-for-play-state-3">(2)</a>
    <li><a href="#ref-for-play-state-4">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-play-state-5">3.5.17. Speed control</a>
    <li><a href="#ref-for-play-state-6">3.5.19. Play states</a>
    <li><a href="#ref-for-play-state-7">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pending-play-state">
   <b><a href="#pending-play-state">#pending-play-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pending-play-state-1">3.5.9. The current ready promise</a> <a href="#ref-for-pending-play-state-2">(2)</a>
    <li><a href="#ref-for-pending-play-state-3">3.5.10. Playing an animation</a>
    <li><a href="#ref-for-pending-play-state-4">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-pending-play-state-5">3.5.18. Reversing an animation</a>
    <li><a href="#ref-for-pending-play-state-6">3.5.19. Play states</a>
    <li><a href="#ref-for-pending-play-state-7">5.4.1. The AnimationPlayState enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="idle-play-state">
   <b><a href="#idle-play-state">#idle-play-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idle-play-state-1">3.5.2. Responding to a newly inactive
  timeline</a>
    <li><a href="#ref-for-idle-play-state-2">3.5.15. Finishing an animation</a>
    <li><a href="#ref-for-idle-play-state-3">3.5.16. Canceling an animation</a> <a href="#ref-for-idle-play-state-4">(2)</a>
    <li><a href="#ref-for-idle-play-state-5">3.5.19. Play states</a>
    <li><a href="#ref-for-idle-play-state-6">3.5.20.1. Types of animation events</a>
    <li><a href="#ref-for-idle-play-state-7">3.5.20.2. Event parameters</a>
    <li><a href="#ref-for-idle-play-state-8">5.4.1. The AnimationPlayState enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="paused-play-state">
   <b><a href="#paused-play-state">#paused-play-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-paused-play-state-1">3.5.11. Pausing an animation</a> <a href="#ref-for-paused-play-state-2">(2)</a>
    <li><a href="#ref-for-paused-play-state-3">3.5.17. Speed control</a>
    <li><a href="#ref-for-paused-play-state-4">3.5.19. Play states</a> <a href="#ref-for-paused-play-state-5">(2)</a> <a href="#ref-for-paused-play-state-6">(3)</a>
    <li><a href="#ref-for-paused-play-state-7">5.4.1. The AnimationPlayState enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="finished-play-state">
   <b><a href="#finished-play-state">#finished-play-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-finished-play-state-1">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-finished-play-state-2">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-finished-play-state-3">3.5.13. The current finished promise</a>
    <li><a href="#ref-for-finished-play-state-4">3.5.14. Updating the finished state</a> <a href="#ref-for-finished-play-state-5">(2)</a> <a href="#ref-for-finished-play-state-6">(3)</a> <a href="#ref-for-finished-play-state-7">(4)</a>
    <li><a href="#ref-for-finished-play-state-8">3.5.19. Play states</a> <a href="#ref-for-finished-play-state-9">(2)</a> <a href="#ref-for-finished-play-state-10">(3)</a>
    <li><a href="#ref-for-finished-play-state-11">3.5.20.1. Types of animation events</a>
    <li><a href="#ref-for-finished-play-state-12">3.6.5. Animation effect phases and
states</a>
    <li><a href="#ref-for-finished-play-state-13">5.4.1. The AnimationPlayState enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="running-play-state">
   <b><a href="#running-play-state">#running-play-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-running-play-state-1">3.5.9. The current ready promise</a>
    <li><a href="#ref-for-running-play-state-2">3.5.19. Play states</a>
    <li><a href="#ref-for-running-play-state-3">5.4.1. The AnimationPlayState enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-events">
   <b><a href="#animation-events">#animation-events</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-events-1">3.5.20. Animation events</a>
    <li><a href="#ref-for-animation-events-2">3.5.20.2. Event parameters</a>
    <li><a href="#ref-for-animation-events-3">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="finish-event">
   <b><a href="#finish-event">#finish-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-finish-event-1">3.5.14. Updating the finished state</a> <a href="#ref-for-finish-event-2">(2)</a>
    <li><a href="#ref-for-finish-event-3">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cancel-event">
   <b><a href="#cancel-event">#cancel-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cancel-event-1">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-cancel-event-2">3.5.16. Canceling an animation</a> <a href="#ref-for-cancel-event-3">(2)</a>
    <li><a href="#ref-for-cancel-event-4">3.5.20.1. Types of animation events</a>
    <li><a href="#ref-for-cancel-event-5">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="event-current-time">
   <b><a href="#event-current-time">#event-current-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-current-time-1">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-event-current-time-2">3.5.20.2. Event parameters</a>
    <li><a href="#ref-for-event-current-time-3">5.22. The AnimationPlaybackEvent interface</a> <a href="#ref-for-event-current-time-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="event-timeline-time">
   <b><a href="#event-timeline-time">#event-timeline-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-timeline-time-1">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-event-timeline-time-2">3.5.20.2. Event parameters</a>
    <li><a href="#ref-for-event-timeline-time-3">5.22. The AnimationPlaybackEvent interface</a> <a href="#ref-for-event-timeline-time-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-effect">
   <b><a href="#animation-effect">#animation-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-effect-1">1.2. Changes since level 1</a>
    <li><a href="#ref-for-animation-effect-2">3.5. Animations</a> <a href="#ref-for-animation-effect-3">(2)</a> <a href="#ref-for-animation-effect-4">(3)</a> <a href="#ref-for-animation-effect-5">(4)</a>
    <li><a href="#ref-for-animation-effect-6">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-animation-effect-7">3.5.17. Speed control</a>
    <li><a href="#ref-for-animation-effect-8">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-animation-effect-9">(2)</a> <a href="#ref-for-animation-effect-10">(3)</a> <a href="#ref-for-animation-effect-11">(4)</a> <a href="#ref-for-animation-effect-12">(5)</a> <a href="#ref-for-animation-effect-13">(6)</a> <a href="#ref-for-animation-effect-14">(7)</a> <a href="#ref-for-animation-effect-15">(8)</a>
    <li><a href="#ref-for-animation-effect-16">3.6.2. Types of animation effects</a> <a href="#ref-for-animation-effect-17">(2)</a>
    <li><a href="#ref-for-animation-effect-18">3.6.3. The active interval</a> <a href="#ref-for-animation-effect-19">(2)</a> <a href="#ref-for-animation-effect-20">(3)</a> <a href="#ref-for-animation-effect-21">(4)</a> <a href="#ref-for-animation-effect-22">(5)</a> <a href="#ref-for-animation-effect-23">(6)</a> <a href="#ref-for-animation-effect-24">(7)</a> <a href="#ref-for-animation-effect-25">(8)</a> <a href="#ref-for-animation-effect-26">(9)</a> <a href="#ref-for-animation-effect-27">(10)</a> <a href="#ref-for-animation-effect-28">(11)</a> <a href="#ref-for-animation-effect-29">(12)</a> <a href="#ref-for-animation-effect-30">(13)</a>
    <li><a href="#ref-for-animation-effect-31">3.6.4. Local time and inherited time</a> <a href="#ref-for-animation-effect-32">(2)</a> <a href="#ref-for-animation-effect-33">(3)</a> <a href="#ref-for-animation-effect-34">(4)</a> <a href="#ref-for-animation-effect-35">(5)</a> <a href="#ref-for-animation-effect-36">(6)</a> <a href="#ref-for-animation-effect-37">(7)</a> <a href="#ref-for-animation-effect-38">(8)</a> <a href="#ref-for-animation-effect-39">(9)</a>
    <li><a href="#ref-for-animation-effect-40">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-animation-effect-41">(2)</a> <a href="#ref-for-animation-effect-42">(3)</a> <a href="#ref-for-animation-effect-43">(4)</a> <a href="#ref-for-animation-effect-44">(5)</a> <a href="#ref-for-animation-effect-45">(6)</a> <a href="#ref-for-animation-effect-46">(7)</a> <a href="#ref-for-animation-effect-47">(8)</a> <a href="#ref-for-animation-effect-48">(9)</a> <a href="#ref-for-animation-effect-49">(10)</a> <a href="#ref-for-animation-effect-50">(11)</a> <a href="#ref-for-animation-effect-51">(12)</a> <a href="#ref-for-animation-effect-52">(13)</a> <a href="#ref-for-animation-effect-53">(14)</a> <a href="#ref-for-animation-effect-54">(15)</a> <a href="#ref-for-animation-effect-55">(16)</a> <a href="#ref-for-animation-effect-56">(17)</a> <a href="#ref-for-animation-effect-57">(18)</a> <a href="#ref-for-animation-effect-58">(19)</a> <a href="#ref-for-animation-effect-59">(20)</a> <a href="#ref-for-animation-effect-60">(21)</a> <a href="#ref-for-animation-effect-61">(22)</a> <a href="#ref-for-animation-effect-62">(23)</a> <a href="#ref-for-animation-effect-63">(24)</a> <a href="#ref-for-animation-effect-64">(25)</a> <a href="#ref-for-animation-effect-65">(26)</a> <a href="#ref-for-animation-effect-66">(27)</a> <a href="#ref-for-animation-effect-67">(28)</a> <a href="#ref-for-animation-effect-68">(29)</a> <a href="#ref-for-animation-effect-69">(30)</a> <a href="#ref-for-animation-effect-70">(31)</a>
    <li><a href="#ref-for-animation-effect-71">3.7. Fill behavior</a>
    <li><a href="#ref-for-animation-effect-72">3.8.1. Iteration intervals</a>
    <li><a href="#ref-for-animation-effect-73">3.8.2. Controlling iteration</a> <a href="#ref-for-animation-effect-74">(2)</a> <a href="#ref-for-animation-effect-75">(3)</a> <a href="#ref-for-animation-effect-76">(4)</a> <a href="#ref-for-animation-effect-77">(5)</a> <a href="#ref-for-animation-effect-78">(6)</a>
    <li><a href="#ref-for-animation-effect-79">3.9. Animation effect speed control</a> <a href="#ref-for-animation-effect-80">(2)</a> <a href="#ref-for-animation-effect-81">(3)</a> <a href="#ref-for-animation-effect-82">(4)</a> <a href="#ref-for-animation-effect-83">(5)</a> <a href="#ref-for-animation-effect-84">(6)</a> <a href="#ref-for-animation-effect-85">(7)</a> <a href="#ref-for-animation-effect-86">(8)</a> <a href="#ref-for-animation-effect-87">(9)</a> <a href="#ref-for-animation-effect-88">(10)</a> <a href="#ref-for-animation-effect-89">(11)</a> <a href="#ref-for-animation-effect-90">(12)</a> <a href="#ref-for-animation-effect-91">(13)</a> <a href="#ref-for-animation-effect-92">(14)</a>
    <li><a href="#ref-for-animation-effect-93">3.10.1. Overview</a>
    <li><a href="#ref-for-animation-effect-94">3.10.3.1. Calculating the active time</a>
    <li><a href="#ref-for-animation-effect-95">3.11. Direction control</a> <a href="#ref-for-animation-effect-96">(2)</a>
    <li><a href="#ref-for-animation-effect-97">3.12.1. Scaling the time</a> <a href="#ref-for-animation-effect-98">(2)</a> <a href="#ref-for-animation-effect-99">(3)</a> <a href="#ref-for-animation-effect-100">(4)</a>
    <li><a href="#ref-for-animation-effect-101">3.12.2. Timing functions</a> <a href="#ref-for-animation-effect-102">(2)</a> <a href="#ref-for-animation-effect-103">(3)</a>
    <li><a href="#ref-for-animation-effect-104">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-animation-effect-105">3.12.5. Calculating the transformed progress</a>
    <li><a href="#ref-for-animation-effect-106">3.13. Grouping and synchronization</a> <a href="#ref-for-animation-effect-107">(2)</a> <a href="#ref-for-animation-effect-108">(3)</a> <a href="#ref-for-animation-effect-109">(4)</a> <a href="#ref-for-animation-effect-110">(5)</a> <a href="#ref-for-animation-effect-111">(6)</a> <a href="#ref-for-animation-effect-112">(7)</a> <a href="#ref-for-animation-effect-113">(8)</a> <a href="#ref-for-animation-effect-114">(9)</a>
    <li><a href="#ref-for-animation-effect-115">3.13.1. Relationship of group time to child time</a> <a href="#ref-for-animation-effect-116">(2)</a> <a href="#ref-for-animation-effect-117">(3)</a> <a href="#ref-for-animation-effect-118">(4)</a>
    <li><a href="#ref-for-animation-effect-119">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-animation-effect-120">(2)</a>
    <li><a href="#ref-for-animation-effect-121">3.13.5. Calculating the iteration
  progress</a>
    <li><a href="#ref-for-animation-effect-122">4. Animation model</a>
    <li><a href="#ref-for-animation-effect-123">4.1. Introduction</a> <a href="#ref-for-animation-effect-124">(2)</a>
    <li><a href="#ref-for-animation-effect-125">4.3.1. Not animatable</a> <a href="#ref-for-animation-effect-126">(2)</a>
    <li><a href="#ref-for-animation-effect-127">4.4. Keyframe effects</a>
    <li><a href="#ref-for-animation-effect-128">4.5. Combining effects</a> <a href="#ref-for-animation-effect-129">(2)</a>
    <li><a href="#ref-for-animation-effect-130">4.5.2. The effect stack</a> <a href="#ref-for-animation-effect-131">(2)</a>
    <li><a href="#ref-for-animation-effect-132">4.7. Side effects of animation</a>
    <li><a href="#ref-for-animation-effect-133">4.8. Custom effects</a> <a href="#ref-for-animation-effect-134">(2)</a> <a href="#ref-for-animation-effect-135">(3)</a> <a href="#ref-for-animation-effect-136">(4)</a>
    <li><a href="#ref-for-animation-effect-137">4.8.1. Sampling custom effects</a> <a href="#ref-for-animation-effect-138">(2)</a> <a href="#ref-for-animation-effect-139">(3)</a> <a href="#ref-for-animation-effect-140">(4)</a> <a href="#ref-for-animation-effect-141">(5)</a>
    <li><a href="#ref-for-animation-effect-142">4.8.2. Execution order of custom effects</a> <a href="#ref-for-animation-effect-143">(2)</a> <a href="#ref-for-animation-effect-144">(3)</a> <a href="#ref-for-animation-effect-145">(4)</a>
    <li><a href="#ref-for-animation-effect-146">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-animation-effect-147">(2)</a> <a href="#ref-for-animation-effect-148">(3)</a> <a href="#ref-for-animation-effect-149">(4)</a> <a href="#ref-for-animation-effect-150">(5)</a> <a href="#ref-for-animation-effect-151">(6)</a> <a href="#ref-for-animation-effect-152">(7)</a> <a href="#ref-for-animation-effect-153">(8)</a> <a href="#ref-for-animation-effect-154">(9)</a> <a href="#ref-for-animation-effect-155">(10)</a> <a href="#ref-for-animation-effect-156">(11)</a> <a href="#ref-for-animation-effect-157">(12)</a> <a href="#ref-for-animation-effect-158">(13)</a> <a href="#ref-for-animation-effect-159">(14)</a> <a href="#ref-for-animation-effect-160">(15)</a> <a href="#ref-for-animation-effect-161">(16)</a> <a href="#ref-for-animation-effect-162">(17)</a> <a href="#ref-for-animation-effect-163">(18)</a>
    <li><a href="#ref-for-animation-effect-164">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-animation-effect-165">(2)</a> <a href="#ref-for-animation-effect-166">(3)</a> <a href="#ref-for-animation-effect-167">(4)</a> <a href="#ref-for-animation-effect-168">(5)</a> <a href="#ref-for-animation-effect-169">(6)</a> <a href="#ref-for-animation-effect-170">(7)</a> <a href="#ref-for-animation-effect-171">(8)</a> <a href="#ref-for-animation-effect-172">(9)</a> <a href="#ref-for-animation-effect-173">(10)</a>
    <li><a href="#ref-for-animation-effect-174">5.7. The AnimationEffectTiming interface</a> <a href="#ref-for-animation-effect-175">(2)</a>
    <li><a href="#ref-for-animation-effect-176">5.9. The
  ComputedTimingProperties dictionary</a> <a href="#ref-for-animation-effect-177">(2)</a> <a href="#ref-for-animation-effect-178">(3)</a> <a href="#ref-for-animation-effect-179">(4)</a> <a href="#ref-for-animation-effect-180">(5)</a> <a href="#ref-for-animation-effect-181">(6)</a> <a href="#ref-for-animation-effect-182">(7)</a> <a href="#ref-for-animation-effect-183">(8)</a>
    <li><a href="#ref-for-animation-effect-184">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-animation-effect-185">(2)</a> <a href="#ref-for-animation-effect-186">(3)</a> <a href="#ref-for-animation-effect-187">(4)</a>
    <li><a href="#ref-for-animation-effect-188">5.10.1. Processing a timing argument</a>
    <li><a href="#ref-for-animation-effect-189">5.10.2. Definitions for manipulating hierarchies</a> <a href="#ref-for-animation-effect-190">(2)</a>
    <li><a href="#ref-for-animation-effect-191">5.11. The AnimationNodeList interface</a> <a href="#ref-for-animation-effect-192">(2)</a> <a href="#ref-for-animation-effect-193">(3)</a>
    <li><a href="#ref-for-animation-effect-194">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-animation-effect-195">(2)</a> <a href="#ref-for-animation-effect-196">(3)</a>
    <li><a href="#ref-for-animation-effect-197">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-animation-effect-198">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-animation-effect-199">5.14. The IterationCompositeOperation enumeration</a> <a href="#ref-for-animation-effect-200">(2)</a>
    <li><a href="#ref-for-animation-effect-201">5.15. The CompositeOperation enumeration</a> <a href="#ref-for-animation-effect-202">(2)</a> <a href="#ref-for-animation-effect-203">(3)</a> <a href="#ref-for-animation-effect-204">(4)</a>
    <li><a href="#ref-for-animation-effect-205">5.18. The Animatable interface</a> <a href="#ref-for-animation-effect-206">(2)</a>
    <li><a href="#ref-for-animation-effect-207">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="directly-associated-with-an-animation">
   <b><a href="#directly-associated-with-an-animation">#directly-associated-with-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-directly-associated-with-an-animation-1">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-directly-associated-with-an-animation-2">(2)</a> <a href="#ref-for-directly-associated-with-an-animation-3">(3)</a>
    <li><a href="#ref-for-directly-associated-with-an-animation-4">3.6.4. Local time and inherited time</a>
    <li><a href="#ref-for-directly-associated-with-an-animation-5">3.6.5. Animation effect phases and
states</a>
    <li><a href="#ref-for-directly-associated-with-an-animation-6">3.13. Grouping and synchronization</a> <a href="#ref-for-directly-associated-with-an-animation-7">(2)</a>
    <li><a href="#ref-for-directly-associated-with-an-animation-8">5.10.2. Definitions for manipulating hierarchies</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="associated-with-an-animation">
   <b><a href="#associated-with-an-animation">#associated-with-an-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-associated-with-an-animation-1">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-associated-with-an-animation-2">(2)</a>
    <li><a href="#ref-for-associated-with-an-animation-3">3.6.5. Animation effect phases and
states</a>
    <li><a href="#ref-for-associated-with-an-animation-4">4.5.2. The effect stack</a>
    <li><a href="#ref-for-associated-with-an-animation-5">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="active-interval">
   <b><a href="#active-interval">#active-interval</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-interval-1">3.6.3. The active interval</a> <a href="#ref-for-active-interval-2">(2)</a> <a href="#ref-for-active-interval-3">(3)</a> <a href="#ref-for-active-interval-4">(4)</a> <a href="#ref-for-active-interval-5">(5)</a> <a href="#ref-for-active-interval-6">(6)</a> <a href="#ref-for-active-interval-7">(7)</a> <a href="#ref-for-active-interval-8">(8)</a> <a href="#ref-for-active-interval-9">(9)</a> <a href="#ref-for-active-interval-10">(10)</a>
    <li><a href="#ref-for-active-interval-11">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-active-interval-12">(2)</a> <a href="#ref-for-active-interval-13">(3)</a> <a href="#ref-for-active-interval-14">(4)</a>
    <li><a href="#ref-for-active-interval-15">3.7.1. Fill modes</a>
    <li><a href="#ref-for-active-interval-16">3.8.1. Iteration intervals</a> <a href="#ref-for-active-interval-17">(2)</a>
    <li><a href="#ref-for-active-interval-18">3.9. Animation effect speed control</a> <a href="#ref-for-active-interval-19">(2)</a> <a href="#ref-for-active-interval-20">(3)</a>
    <li><a href="#ref-for-active-interval-21">3.10.1. Overview</a>
    <li><a href="#ref-for-active-interval-22">3.10.3.3. Calculating the simple iteration progress</a> <a href="#ref-for-active-interval-23">(2)</a>
    <li><a href="#ref-for-active-interval-24">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-active-interval-25">3.13.1. Relationship of group time to child time</a> <a href="#ref-for-active-interval-26">(2)</a> <a href="#ref-for-active-interval-27">(3)</a> <a href="#ref-for-active-interval-28">(4)</a> <a href="#ref-for-active-interval-29">(5)</a>
    <li><a href="#ref-for-active-interval-30">3.13.3. The intrinsic
  iteration duration of a group effect</a>
    <li><a href="#ref-for-active-interval-31">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-active-interval-32">(2)</a> <a href="#ref-for-active-interval-33">(3)</a> <a href="#ref-for-active-interval-34">(4)</a>
    <li><a href="#ref-for-active-interval-35">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-active-interval-36">(2)</a> <a href="#ref-for-active-interval-37">(3)</a>
    <li><a href="#ref-for-active-interval-38">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-effect-start-time">
   <b><a href="#animation-effect-start-time">#animation-effect-start-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-effect-start-time-1">3.6.3. The active interval</a> <a href="#ref-for-animation-effect-start-time-2">(2)</a> <a href="#ref-for-animation-effect-start-time-3">(3)</a> <a href="#ref-for-animation-effect-start-time-4">(4)</a> <a href="#ref-for-animation-effect-start-time-5">(5)</a> <a href="#ref-for-animation-effect-start-time-6">(6)</a> <a href="#ref-for-animation-effect-start-time-7">(7)</a> <a href="#ref-for-animation-effect-start-time-8">(8)</a> <a href="#ref-for-animation-effect-start-time-9">(9)</a> <a href="#ref-for-animation-effect-start-time-10">(10)</a> <a href="#ref-for-animation-effect-start-time-11">(11)</a> <a href="#ref-for-animation-effect-start-time-12">(12)</a>
    <li><a href="#ref-for-animation-effect-start-time-13">3.6.4. Local time and inherited time</a> <a href="#ref-for-animation-effect-start-time-14">(2)</a> <a href="#ref-for-animation-effect-start-time-15">(3)</a> <a href="#ref-for-animation-effect-start-time-16">(4)</a> <a href="#ref-for-animation-effect-start-time-17">(5)</a>
    <li><a href="#ref-for-animation-effect-start-time-18">3.10.1. Overview</a>
    <li><a href="#ref-for-animation-effect-start-time-19">3.13.2. The start time of
  children of a group effect</a>
    <li><a href="#ref-for-animation-effect-start-time-20">3.13.4. Sequence effects</a>
    <li><a href="#ref-for-animation-effect-start-time-21">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-animation-effect-start-time-22">(2)</a> <a href="#ref-for-animation-effect-start-time-23">(3)</a> <a href="#ref-for-animation-effect-start-time-24">(4)</a> <a href="#ref-for-animation-effect-start-time-25">(5)</a> <a href="#ref-for-animation-effect-start-time-26">(6)</a>
    <li><a href="#ref-for-animation-effect-start-time-27">3.13.4.2. The intrinsic
  iteration duration of a sequence effect</a>
    <li><a href="#ref-for-animation-effect-start-time-28">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-animation-effect-start-time-29">(2)</a>
    <li><a href="#ref-for-animation-effect-start-time-30">5.9. The
  ComputedTimingProperties dictionary</a> <a href="#ref-for-animation-effect-start-time-31">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="start-delay">
   <b><a href="#start-delay">#start-delay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-start-delay-1">3.6.3. The active interval</a> <a href="#ref-for-start-delay-2">(2)</a> <a href="#ref-for-start-delay-3">(3)</a> <a href="#ref-for-start-delay-4">(4)</a> <a href="#ref-for-start-delay-5">(5)</a> <a href="#ref-for-start-delay-6">(6)</a> <a href="#ref-for-start-delay-7">(7)</a> <a href="#ref-for-start-delay-8">(8)</a>
    <li><a href="#ref-for-start-delay-9">3.6.4. Local time and inherited time</a> <a href="#ref-for-start-delay-10">(2)</a>
    <li><a href="#ref-for-start-delay-11">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-start-delay-12">(2)</a> <a href="#ref-for-start-delay-13">(3)</a> <a href="#ref-for-start-delay-14">(4)</a> <a href="#ref-for-start-delay-15">(5)</a>
    <li><a href="#ref-for-start-delay-16">3.9. Animation effect speed control</a>
    <li><a href="#ref-for-start-delay-17">3.10.1. Overview</a>
    <li><a href="#ref-for-start-delay-18">3.10.3.1. Calculating the active time</a> <a href="#ref-for-start-delay-19">(2)</a> <a href="#ref-for-start-delay-20">(3)</a> <a href="#ref-for-start-delay-21">(4)</a>
    <li><a href="#ref-for-start-delay-22">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-start-delay-23">(2)</a> <a href="#ref-for-start-delay-24">(3)</a> <a href="#ref-for-start-delay-25">(4)</a> <a href="#ref-for-start-delay-26">(5)</a> <a href="#ref-for-start-delay-27">(6)</a>
    <li><a href="#ref-for-start-delay-28">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-start-delay-29">5.9. The
  ComputedTimingProperties dictionary</a>
    <li><a href="#ref-for-start-delay-30">5.13.1. Creating a new KeyframeEffect object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="end-delay">
   <b><a href="#end-delay">#end-delay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-end-delay-1">3.6.3. The active interval</a> <a href="#ref-for-end-delay-2">(2)</a>
    <li><a href="#ref-for-end-delay-3">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-end-delay-4">(2)</a>
    <li><a href="#ref-for-end-delay-5">3.10.3.3. Calculating the simple iteration progress</a>
    <li><a href="#ref-for-end-delay-6">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-end-delay-7">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="end-time">
   <b><a href="#end-time">#end-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-end-time-1">3.5.12. Reaching the end</a> <a href="#ref-for-end-time-2">(2)</a>
    <li><a href="#ref-for-end-time-3">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-end-time-4">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-end-time-5">(2)</a> <a href="#ref-for-end-time-6">(3)</a> <a href="#ref-for-end-time-7">(4)</a>
    <li><a href="#ref-for-end-time-8">3.13.3. The intrinsic
  iteration duration of a group effect</a>
    <li><a href="#ref-for-end-time-9">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-end-time-10">(2)</a>
    <li><a href="#ref-for-end-time-11">5.4. The Animation interface</a>
    <li><a href="#ref-for-end-time-12">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-end-time-13">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="inherited-time">
   <b><a href="#inherited-time">#inherited-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inherited-time-1">3.6.3. The active interval</a> <a href="#ref-for-inherited-time-2">(2)</a>
    <li><a href="#ref-for-inherited-time-3">3.6.4. Local time and inherited time</a> <a href="#ref-for-inherited-time-4">(2)</a> <a href="#ref-for-inherited-time-5">(3)</a> <a href="#ref-for-inherited-time-6">(4)</a>
    <li><a href="#ref-for-inherited-time-7">3.8.3. Iteration time space</a>
    <li><a href="#ref-for-inherited-time-8">3.10.1. Overview</a> <a href="#ref-for-inherited-time-9">(2)</a> <a href="#ref-for-inherited-time-10">(3)</a>
    <li><a href="#ref-for-inherited-time-11">3.13. Grouping and synchronization</a>
    <li><a href="#ref-for-inherited-time-12">5.9. The
  ComputedTimingProperties dictionary</a> <a href="#ref-for-inherited-time-13">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="local-time">
   <b><a href="#local-time">#local-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-local-time-1">3.6.3. The active interval</a>
    <li><a href="#ref-for-local-time-2">3.6.4. Local time and inherited time</a> <a href="#ref-for-local-time-3">(2)</a> <a href="#ref-for-local-time-4">(3)</a> <a href="#ref-for-local-time-5">(4)</a>
    <li><a href="#ref-for-local-time-6">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-local-time-7">(2)</a> <a href="#ref-for-local-time-8">(3)</a> <a href="#ref-for-local-time-9">(4)</a> <a href="#ref-for-local-time-10">(5)</a> <a href="#ref-for-local-time-11">(6)</a> <a href="#ref-for-local-time-12">(7)</a> <a href="#ref-for-local-time-13">(8)</a> <a href="#ref-for-local-time-14">(9)</a> <a href="#ref-for-local-time-15">(10)</a> <a href="#ref-for-local-time-16">(11)</a>
    <li><a href="#ref-for-local-time-17">3.8.3. Iteration time space</a>
    <li><a href="#ref-for-local-time-18">3.9. Animation effect speed control</a> <a href="#ref-for-local-time-19">(2)</a> <a href="#ref-for-local-time-20">(3)</a>
    <li><a href="#ref-for-local-time-21">3.10.1. Overview</a> <a href="#ref-for-local-time-22">(2)</a> <a href="#ref-for-local-time-23">(3)</a>
    <li><a href="#ref-for-local-time-24">3.10.3.1. Calculating the active time</a> <a href="#ref-for-local-time-25">(2)</a> <a href="#ref-for-local-time-26">(3)</a> <a href="#ref-for-local-time-27">(4)</a> <a href="#ref-for-local-time-28">(5)</a>
    <li><a href="#ref-for-local-time-29">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-local-time-30">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-direction">
   <b><a href="#animation-direction">#animation-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-direction-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-animation-direction-2">(2)</a> <a href="#ref-for-animation-direction-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="before-active-boundary-time">
   <b><a href="#before-active-boundary-time">#before-active-boundary-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-before-active-boundary-time-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-before-active-boundary-time-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="active-after-boundary-time">
   <b><a href="#active-after-boundary-time">#active-after-boundary-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-after-boundary-time-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-active-after-boundary-time-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="before-phase">
   <b><a href="#before-phase">#before-phase</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-before-phase-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-before-phase-2">(2)</a> <a href="#ref-for-before-phase-3">(3)</a> <a href="#ref-for-before-phase-4">(4)</a>
    <li><a href="#ref-for-before-phase-5">3.7.1. Fill modes</a> <a href="#ref-for-before-phase-6">(2)</a> <a href="#ref-for-before-phase-7">(3)</a>
    <li><a href="#ref-for-before-phase-8">3.10.3.1. Calculating the active time</a> <a href="#ref-for-before-phase-9">(2)</a> <a href="#ref-for-before-phase-10">(3)</a>
    <li><a href="#ref-for-before-phase-11">3.10.3.2. Calculating the overall progress</a>
    <li><a href="#ref-for-before-phase-12">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-before-phase-13">4.7. Side effects of animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="after-phase">
   <b><a href="#after-phase">#after-phase</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-after-phase-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-after-phase-2">(2)</a>
    <li><a href="#ref-for-after-phase-3">3.7.1. Fill modes</a> <a href="#ref-for-after-phase-4">(2)</a> <a href="#ref-for-after-phase-5">(3)</a>
    <li><a href="#ref-for-after-phase-6">3.10.3.1. Calculating the active time</a> <a href="#ref-for-after-phase-7">(2)</a> <a href="#ref-for-after-phase-8">(3)</a>
    <li><a href="#ref-for-after-phase-9">3.10.3.3. Calculating the simple iteration progress</a>
    <li><a href="#ref-for-after-phase-10">3.10.4. Calculating the current iteration</a>
    <li><a href="#ref-for-after-phase-11">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-after-phase-12">4.7. Side effects of animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="active-phase">
   <b><a href="#active-phase">#active-phase</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-phase-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-active-phase-2">(2)</a> <a href="#ref-for-active-phase-3">(3)</a> <a href="#ref-for-active-phase-4">(4)</a> <a href="#ref-for-active-phase-5">(5)</a> <a href="#ref-for-active-phase-6">(6)</a> <a href="#ref-for-active-phase-7">(7)</a>
    <li><a href="#ref-for-active-phase-8">3.7.1. Fill modes</a> <a href="#ref-for-active-phase-9">(2)</a> <a href="#ref-for-active-phase-10">(3)</a>
    <li><a href="#ref-for-active-phase-11">3.10.3.1. Calculating the active time</a>
    <li><a href="#ref-for-active-phase-12">4.7. Side effects of animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="in-play">
   <b><a href="#in-play">#in-play</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-play-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-in-play-2">(2)</a> <a href="#ref-for-in-play-3">(3)</a> <a href="#ref-for-in-play-4">(4)</a> <a href="#ref-for-in-play-5">(5)</a> <a href="#ref-for-in-play-6">(6)</a> <a href="#ref-for-in-play-7">(7)</a> <a href="#ref-for-in-play-8">(8)</a> <a href="#ref-for-in-play-9">(9)</a>
    <li><a href="#ref-for-in-play-10">3.7. Fill behavior</a>
    <li><a href="#ref-for-in-play-11">3.7.1. Fill modes</a> <a href="#ref-for-in-play-12">(2)</a> <a href="#ref-for-in-play-13">(3)</a> <a href="#ref-for-in-play-14">(4)</a> <a href="#ref-for-in-play-15">(5)</a>
    <li><a href="#ref-for-in-play-16">3.8.4. Interval timing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current">
   <b><a href="#current">#current</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-current-2">(2)</a>
    <li><a href="#ref-for-current-3">4.7. Side effects of animation</a>
    <li><a href="#ref-for-current-4">5.18. The Animatable interface</a>
    <li><a href="#ref-for-current-5">5.19. Extensions to the Document interface</a> <a href="#ref-for-current-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="in-effect">
   <b><a href="#in-effect">#in-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-effect-1">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-in-effect-2">(2)</a>
    <li><a href="#ref-for-in-effect-3">4.5. Combining effects</a> <a href="#ref-for-in-effect-4">(2)</a>
    <li><a href="#ref-for-in-effect-5">4.7. Side effects of animation</a>
    <li><a href="#ref-for-in-effect-6">4.8.1. Sampling custom effects</a> <a href="#ref-for-in-effect-7">(2)</a> <a href="#ref-for-in-effect-8">(3)</a> <a href="#ref-for-in-effect-9">(4)</a> <a href="#ref-for-in-effect-10">(5)</a> <a href="#ref-for-in-effect-11">(6)</a>
    <li><a href="#ref-for-in-effect-12">5.9. The
  ComputedTimingProperties dictionary</a>
    <li><a href="#ref-for-in-effect-13">5.18. The Animatable interface</a>
    <li><a href="#ref-for-in-effect-14">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fill-mode">
   <b><a href="#fill-mode">#fill-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fill-mode-1">3.6.3. The active interval</a>
    <li><a href="#ref-for-fill-mode-2">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-fill-mode-3">(2)</a>
    <li><a href="#ref-for-fill-mode-4">3.7. Fill behavior</a>
    <li><a href="#ref-for-fill-mode-5">3.7.1. Fill modes</a>
    <li><a href="#ref-for-fill-mode-6">3.9. Animation effect speed control</a>
    <li><a href="#ref-for-fill-mode-7">3.10.3.1. Calculating the active time</a> <a href="#ref-for-fill-mode-8">(2)</a> <a href="#ref-for-fill-mode-9">(3)</a> <a href="#ref-for-fill-mode-10">(4)</a> <a href="#ref-for-fill-mode-11">(5)</a>
    <li><a href="#ref-for-fill-mode-12">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-fill-mode-13">4.7. Side effects of animation</a>
    <li><a href="#ref-for-fill-mode-14">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-fill-mode-15">(2)</a> <a href="#ref-for-fill-mode-16">(3)</a> <a href="#ref-for-fill-mode-17">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-interval">
   <b><a href="#iteration-interval">#iteration-interval</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-interval-1">3.8.1. Iteration intervals</a>
    <li><a href="#ref-for-iteration-interval-2">3.8.2. Controlling iteration</a>
    <li><a href="#ref-for-iteration-interval-3">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-duration">
   <b><a href="#iteration-duration">#iteration-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-duration-1">3.8.1. Iteration intervals</a> <a href="#ref-for-iteration-duration-2">(2)</a> <a href="#ref-for-iteration-duration-3">(3)</a> <a href="#ref-for-iteration-duration-4">(4)</a> <a href="#ref-for-iteration-duration-5">(5)</a> <a href="#ref-for-iteration-duration-6">(6)</a> <a href="#ref-for-iteration-duration-7">(7)</a>
    <li><a href="#ref-for-iteration-duration-8">3.10.1. Overview</a> <a href="#ref-for-iteration-duration-9">(2)</a>
    <li><a href="#ref-for-iteration-duration-10">3.10.2. Calculating the active duration</a> <a href="#ref-for-iteration-duration-11">(2)</a>
    <li><a href="#ref-for-iteration-duration-12">3.10.3.2. Calculating the overall progress</a> <a href="#ref-for-iteration-duration-13">(2)</a> <a href="#ref-for-iteration-duration-14">(3)</a>
    <li><a href="#ref-for-iteration-duration-15">3.10.3.3. Calculating the simple iteration progress</a> <a href="#ref-for-iteration-duration-16">(2)</a>
    <li><a href="#ref-for-iteration-duration-17">3.12.6. Calculating the transformed time</a> <a href="#ref-for-iteration-duration-18">(2)</a>
    <li><a href="#ref-for-iteration-duration-19">3.13.1. Relationship of group time to child time</a>
    <li><a href="#ref-for-iteration-duration-20">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-iteration-duration-21">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-iteration-duration-22">(2)</a>
    <li><a href="#ref-for-iteration-duration-23">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-iteration-duration-24">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-iteration-duration-25">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-iteration-duration-26">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="intrinsic-iteration-duration">
   <b><a href="#intrinsic-iteration-duration">#intrinsic-iteration-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-intrinsic-iteration-duration-1">3.8.1. Iteration intervals</a> <a href="#ref-for-intrinsic-iteration-duration-2">(2)</a>
    <li><a href="#ref-for-intrinsic-iteration-duration-3">3.13.3. The intrinsic
  iteration duration of a group effect</a> <a href="#ref-for-intrinsic-iteration-duration-4">(2)</a> <a href="#ref-for-intrinsic-iteration-duration-5">(3)</a> <a href="#ref-for-intrinsic-iteration-duration-6">(4)</a>
    <li><a href="#ref-for-intrinsic-iteration-duration-7">3.13.4.2. The intrinsic
  iteration duration of a sequence effect</a> <a href="#ref-for-intrinsic-iteration-duration-8">(2)</a> <a href="#ref-for-intrinsic-iteration-duration-9">(3)</a>
    <li><a href="#ref-for-intrinsic-iteration-duration-10">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-intrinsic-iteration-duration-11">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-intrinsic-iteration-duration-12">5.13.1. Creating a new KeyframeEffect object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-count">
   <b><a href="#iteration-count">#iteration-count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-count-1">3.8.1. Iteration intervals</a>
    <li><a href="#ref-for-iteration-count-2">3.8.2. Controlling iteration</a> <a href="#ref-for-iteration-count-3">(2)</a> <a href="#ref-for-iteration-count-4">(3)</a> <a href="#ref-for-iteration-count-5">(4)</a> <a href="#ref-for-iteration-count-6">(5)</a> <a href="#ref-for-iteration-count-7">(6)</a> <a href="#ref-for-iteration-count-8">(7)</a>
    <li><a href="#ref-for-iteration-count-9">3.10.1. Overview</a>
    <li><a href="#ref-for-iteration-count-10">3.10.2. Calculating the active duration</a> <a href="#ref-for-iteration-count-11">(2)</a>
    <li><a href="#ref-for-iteration-count-12">3.10.3.2. Calculating the overall progress</a>
    <li><a href="#ref-for-iteration-count-13">3.10.3.3. Calculating the simple iteration progress</a> <a href="#ref-for-iteration-count-14">(2)</a>
    <li><a href="#ref-for-iteration-count-15">3.10.4. Calculating the current iteration</a>
    <li><a href="#ref-for-iteration-count-16">3.13.1. Relationship of group time to child time</a> <a href="#ref-for-iteration-count-17">(2)</a> <a href="#ref-for-iteration-count-18">(3)</a> <a href="#ref-for-iteration-count-19">(4)</a> <a href="#ref-for-iteration-count-20">(5)</a> <a href="#ref-for-iteration-count-21">(6)</a> <a href="#ref-for-iteration-count-22">(7)</a>
    <li><a href="#ref-for-iteration-count-23">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-start">
   <b><a href="#iteration-start">#iteration-start</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-start-1">3.8.2. Controlling iteration</a> <a href="#ref-for-iteration-start-2">(2)</a> <a href="#ref-for-iteration-start-3">(3)</a> <a href="#ref-for-iteration-start-4">(4)</a> <a href="#ref-for-iteration-start-5">(5)</a> <a href="#ref-for-iteration-start-6">(6)</a>
    <li><a href="#ref-for-iteration-start-7">3.10.1. Overview</a>
    <li><a href="#ref-for-iteration-start-8">3.10.3.2. Calculating the overall progress</a>
    <li><a href="#ref-for-iteration-start-9">3.10.3.3. Calculating the simple iteration progress</a>
    <li><a href="#ref-for-iteration-start-10">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-effect-playback-rate">
   <b><a href="#animation-effect-playback-rate">#animation-effect-playback-rate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-effect-playback-rate-1">1.2. Changes since level 1</a>
    <li><a href="#ref-for-animation-effect-playback-rate-2">3.5.17. Speed control</a>
    <li><a href="#ref-for-animation-effect-playback-rate-3">3.9. Animation effect speed control</a> <a href="#ref-for-animation-effect-playback-rate-4">(2)</a> <a href="#ref-for-animation-effect-playback-rate-5">(3)</a> <a href="#ref-for-animation-effect-playback-rate-6">(4)</a> <a href="#ref-for-animation-effect-playback-rate-7">(5)</a> <a href="#ref-for-animation-effect-playback-rate-8">(6)</a> <a href="#ref-for-animation-effect-playback-rate-9">(7)</a> <a href="#ref-for-animation-effect-playback-rate-10">(8)</a>
    <li><a href="#ref-for-animation-effect-playback-rate-11">3.10.1. Overview</a> <a href="#ref-for-animation-effect-playback-rate-12">(2)</a>
    <li><a href="#ref-for-animation-effect-playback-rate-13">3.10.2. Calculating the active duration</a> <a href="#ref-for-animation-effect-playback-rate-14">(2)</a>
    <li><a href="#ref-for-animation-effect-playback-rate-15">3.10.3.2. Calculating the overall progress</a> <a href="#ref-for-animation-effect-playback-rate-16">(2)</a> <a href="#ref-for-animation-effect-playback-rate-17">(3)</a> <a href="#ref-for-animation-effect-playback-rate-18">(4)</a>
    <li><a href="#ref-for-animation-effect-playback-rate-19">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-animation-effect-playback-rate-20">3.13.1. Relationship of group time to child time</a>
    <li><a href="#ref-for-animation-effect-playback-rate-21">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="repeated-duration">
   <b><a href="#repeated-duration">#repeated-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-repeated-duration-1">3.10.2. Calculating the active duration</a> <a href="#ref-for-repeated-duration-2">(2)</a> <a href="#ref-for-repeated-duration-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="active-duration">
   <b><a href="#active-duration">#active-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-duration-1">3.6.3. The active interval</a> <a href="#ref-for-active-duration-2">(2)</a> <a href="#ref-for-active-duration-3">(3)</a> <a href="#ref-for-active-duration-4">(4)</a>
    <li><a href="#ref-for-active-duration-5">3.6.5. Animation effect phases and
states</a>
    <li><a href="#ref-for-active-duration-6">3.8.1. Iteration intervals</a> <a href="#ref-for-active-duration-7">(2)</a> <a href="#ref-for-active-duration-8">(3)</a> <a href="#ref-for-active-duration-9">(4)</a>
    <li><a href="#ref-for-active-duration-10">3.8.2. Controlling iteration</a>
    <li><a href="#ref-for-active-duration-11">3.9. Animation effect speed control</a> <a href="#ref-for-active-duration-12">(2)</a> <a href="#ref-for-active-duration-13">(3)</a>
    <li><a href="#ref-for-active-duration-14">3.10.1. Overview</a> <a href="#ref-for-active-duration-15">(2)</a> <a href="#ref-for-active-duration-16">(3)</a> <a href="#ref-for-active-duration-17">(4)</a>
    <li><a href="#ref-for-active-duration-18">3.10.2. Calculating the active duration</a>
    <li><a href="#ref-for-active-duration-19">3.10.3.1. Calculating the active time</a>
    <li><a href="#ref-for-active-duration-20">3.10.3.2. Calculating the overall progress</a>
    <li><a href="#ref-for-active-duration-21">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-active-duration-22">(2)</a>
    <li><a href="#ref-for-active-duration-23">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="active-time">
   <b><a href="#active-time">#active-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-time-1">3.6.3. The active interval</a>
    <li><a href="#ref-for-active-time-2">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-active-time-3">(2)</a> <a href="#ref-for-active-time-4">(3)</a> <a href="#ref-for-active-time-5">(4)</a>
    <li><a href="#ref-for-active-time-6">3.7. Fill behavior</a>
    <li><a href="#ref-for-active-time-7">3.7.1. Fill modes</a>
    <li><a href="#ref-for-active-time-8">3.8.3. Iteration time space</a> <a href="#ref-for-active-time-9">(2)</a> <a href="#ref-for-active-time-10">(3)</a>
    <li><a href="#ref-for-active-time-11">3.10.1. Overview</a> <a href="#ref-for-active-time-12">(2)</a>
    <li><a href="#ref-for-active-time-13">3.10.3.2. Calculating the overall progress</a> <a href="#ref-for-active-time-14">(2)</a> <a href="#ref-for-active-time-15">(3)</a>
    <li><a href="#ref-for-active-time-16">3.10.3.3. Calculating the simple iteration progress</a> <a href="#ref-for-active-time-17">(2)</a>
    <li><a href="#ref-for-active-time-18">3.10.4. Calculating the current iteration</a>
    <li><a href="#ref-for-active-time-19">3.12.4. Timing in discrete steps</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="overall-progress">
   <b><a href="#overall-progress">#overall-progress</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-overall-progress-1">3.10.1. Overview</a> <a href="#ref-for-overall-progress-2">(2)</a>
    <li><a href="#ref-for-overall-progress-3">3.10.3.2. Calculating the overall progress</a>
    <li><a href="#ref-for-overall-progress-4">3.10.3.3. Calculating the simple iteration progress</a> <a href="#ref-for-overall-progress-5">(2)</a> <a href="#ref-for-overall-progress-6">(3)</a>
    <li><a href="#ref-for-overall-progress-7">3.10.4. Calculating the current iteration</a> <a href="#ref-for-overall-progress-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="simple-iteration-progress">
   <b><a href="#simple-iteration-progress">#simple-iteration-progress</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-simple-iteration-progress-1">3.10.1. Overview</a> <a href="#ref-for-simple-iteration-progress-2">(2)</a>
    <li><a href="#ref-for-simple-iteration-progress-3">3.10.4. Calculating the current iteration</a>
    <li><a href="#ref-for-simple-iteration-progress-4">3.11.1. Calculating the directed progress</a> <a href="#ref-for-simple-iteration-progress-5">(2)</a> <a href="#ref-for-simple-iteration-progress-6">(3)</a> <a href="#ref-for-simple-iteration-progress-7">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-iteration">
   <b><a href="#current-iteration">#current-iteration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-iteration-1">3.8.1. Iteration intervals</a>
    <li><a href="#ref-for-current-iteration-2">3.11.1. Calculating the directed progress</a>
    <li><a href="#ref-for-current-iteration-3">4. Animation model</a>
    <li><a href="#ref-for-current-iteration-4">4.1. Introduction</a>
    <li><a href="#ref-for-current-iteration-5">4.8. Custom effects</a>
    <li><a href="#ref-for-current-iteration-6">4.8.1. Sampling custom effects</a>
    <li><a href="#ref-for-current-iteration-7">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-current-iteration-8">5.9. The
  ComputedTimingProperties dictionary</a> <a href="#ref-for-current-iteration-9">(2)</a>
    <li><a href="#ref-for-current-iteration-10">5.14. The IterationCompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="playback-direction">
   <b><a href="#playback-direction">#playback-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-playback-direction-1">3.10.1. Overview</a>
    <li><a href="#ref-for-playback-direction-2">3.10.3.3. Calculating the simple iteration progress</a>
    <li><a href="#ref-for-playback-direction-3">3.11.1. Calculating the directed progress</a> <a href="#ref-for-playback-direction-4">(2)</a> <a href="#ref-for-playback-direction-5">(3)</a>
    <li><a href="#ref-for-playback-direction-6">3.13.1. Relationship of group time to child time</a>
    <li><a href="#ref-for-playback-direction-7">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="directed-progress">
   <b><a href="#directed-progress">#directed-progress</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-directed-progress-1">3.10.1. Overview</a> <a href="#ref-for-directed-progress-2">(2)</a>
    <li><a href="#ref-for-directed-progress-3">3.11. Direction control</a>
    <li><a href="#ref-for-directed-progress-4">3.12.5. Calculating the transformed progress</a> <a href="#ref-for-directed-progress-5">(2)</a> <a href="#ref-for-directed-progress-6">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="timing-function">
   <b><a href="#timing-function">#timing-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-timing-function-1">3.7.1. Fill modes</a>
    <li><a href="#ref-for-timing-function-2">3.10.3.3. Calculating the simple iteration progress</a>
    <li><a href="#ref-for-timing-function-3">3.12.1. Scaling the time</a> <a href="#ref-for-timing-function-4">(2)</a> <a href="#ref-for-timing-function-5">(3)</a>
    <li><a href="#ref-for-timing-function-6">3.12.2. Timing functions</a> <a href="#ref-for-timing-function-7">(2)</a> <a href="#ref-for-timing-function-8">(3)</a>
    <li><a href="#ref-for-timing-function-9">3.12.3. Scaling using a cubic Bézier curve</a>
    <li><a href="#ref-for-timing-function-10">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-timing-function-11">3.12.5. Calculating the transformed progress</a>
    <li><a href="#ref-for-timing-function-12">3.13.1. Relationship of group time to child time</a>
    <li><a href="#ref-for-timing-function-13">4.2. Procedures for animating properties</a>
    <li><a href="#ref-for-timing-function-14">4.4.1. Keyframes</a> <a href="#ref-for-timing-function-15">(2)</a>
    <li><a href="#ref-for-timing-function-16">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-timing-function-17">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-timing-function-18">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-timing-function-19">(2)</a>
    <li><a href="#ref-for-timing-function-20">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-timing-function-21">(2)</a> <a href="#ref-for-timing-function-22">(3)</a> <a href="#ref-for-timing-function-23">(4)</a> <a href="#ref-for-timing-function-24">(5)</a> <a href="#ref-for-timing-function-25">(6)</a> <a href="#ref-for-timing-function-26">(7)</a> <a href="#ref-for-timing-function-27">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="linear-timing-function">
   <b><a href="#linear-timing-function">#linear-timing-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-linear-timing-function-1">3.12.2. Timing functions</a> <a href="#ref-for-linear-timing-function-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cubic-bzier-timing-function">
   <b><a href="#cubic-bzier-timing-function">#cubic-bzier-timing-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cubic-bzier-timing-function-1">3.12.3. Scaling using a cubic Bézier curve</a> <a href="#ref-for-cubic-bzier-timing-function-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedef-cubic-bezier-timing-function">
   <b><a href="#typedef-cubic-bezier-timing-function">#typedef-cubic-bezier-timing-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedef-cubic-bezier-timing-function-1">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="step-timing-function">
   <b><a href="#step-timing-function">#step-timing-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-step-timing-function-1">3.12.4. Timing in discrete steps</a> <a href="#ref-for-step-timing-function-2">(2)</a> <a href="#ref-for-step-timing-function-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="before-flag">
   <b><a href="#before-flag">#before-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-before-flag-1">3.12.4. Timing in discrete steps</a> <a href="#ref-for-before-flag-2">(2)</a> <a href="#ref-for-before-flag-3">(3)</a> <a href="#ref-for-before-flag-4">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedef-step-timing-function">
   <b><a href="#typedef-step-timing-function">#typedef-step-timing-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedef-step-timing-function-1">5.6. The AnimationEffectTimingReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transformed-progress">
   <b><a href="#transformed-progress">#transformed-progress</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transformed-progress-1">3.10.1. Overview</a> <a href="#ref-for-transformed-progress-2">(2)</a>
    <li><a href="#ref-for-transformed-progress-3">3.12.6. Calculating the transformed time</a> <a href="#ref-for-transformed-progress-4">(2)</a> <a href="#ref-for-transformed-progress-5">(3)</a>
    <li><a href="#ref-for-transformed-progress-6">3.13.5. Calculating the iteration
  progress</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transformed-time">
   <b><a href="#transformed-time">#transformed-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transformed-time-1">3.6.4. Local time and inherited time</a>
    <li><a href="#ref-for-transformed-time-2">3.9. Animation effect speed control</a>
    <li><a href="#ref-for-transformed-time-3">3.12.6. Calculating the transformed time</a> <a href="#ref-for-transformed-time-4">(2)</a>
    <li><a href="#ref-for-transformed-time-5">3.13.1. Relationship of group time to child time</a> <a href="#ref-for-transformed-time-6">(2)</a> <a href="#ref-for-transformed-time-7">(3)</a> <a href="#ref-for-transformed-time-8">(4)</a> <a href="#ref-for-transformed-time-9">(5)</a>
    <li><a href="#ref-for-transformed-time-10">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="group-effect">
   <b><a href="#group-effect">#group-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-group-effect-1">1.2. Changes since level 1</a>
    <li><a href="#ref-for-group-effect-2">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-group-effect-3">(2)</a>
    <li><a href="#ref-for-group-effect-4">3.6.2. Types of animation effects</a>
    <li><a href="#ref-for-group-effect-5">3.6.4. Local time and inherited time</a>
    <li><a href="#ref-for-group-effect-6">3.8.1. Iteration intervals</a>
    <li><a href="#ref-for-group-effect-7">3.12.2. Timing functions</a>
    <li><a href="#ref-for-group-effect-8">3.13. Grouping and synchronization</a> <a href="#ref-for-group-effect-9">(2)</a> <a href="#ref-for-group-effect-10">(3)</a> <a href="#ref-for-group-effect-11">(4)</a> <a href="#ref-for-group-effect-12">(5)</a>
    <li><a href="#ref-for-group-effect-13">3.13.1. Relationship of group time to child time</a> <a href="#ref-for-group-effect-14">(2)</a> <a href="#ref-for-group-effect-15">(3)</a> <a href="#ref-for-group-effect-16">(4)</a> <a href="#ref-for-group-effect-17">(5)</a> <a href="#ref-for-group-effect-18">(6)</a> <a href="#ref-for-group-effect-19">(7)</a> <a href="#ref-for-group-effect-20">(8)</a> <a href="#ref-for-group-effect-21">(9)</a> <a href="#ref-for-group-effect-22">(10)</a>
    <li><a href="#ref-for-group-effect-23">3.13.2. The start time of
  children of a group effect</a> <a href="#ref-for-group-effect-24">(2)</a>
    <li><a href="#ref-for-group-effect-25">3.13.3. The intrinsic
  iteration duration of a group effect</a> <a href="#ref-for-group-effect-26">(2)</a>
    <li><a href="#ref-for-group-effect-27">3.13.4. Sequence effects</a> <a href="#ref-for-group-effect-28">(2)</a> <a href="#ref-for-group-effect-29">(3)</a> <a href="#ref-for-group-effect-30">(4)</a> <a href="#ref-for-group-effect-31">(5)</a> <a href="#ref-for-group-effect-32">(6)</a> <a href="#ref-for-group-effect-33">(7)</a> <a href="#ref-for-group-effect-34">(8)</a> <a href="#ref-for-group-effect-35">(9)</a>
    <li><a href="#ref-for-group-effect-36">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-group-effect-37">(2)</a> <a href="#ref-for-group-effect-38">(3)</a> <a href="#ref-for-group-effect-39">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="child-effect">
   <b><a href="#child-effect">#child-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-child-effect-1">3.13. Grouping and synchronization</a> <a href="#ref-for-child-effect-2">(2)</a> <a href="#ref-for-child-effect-3">(3)</a>
    <li><a href="#ref-for-child-effect-4">3.13.2. The start time of
  children of a group effect</a>
    <li><a href="#ref-for-child-effect-5">3.13.3. The intrinsic
  iteration duration of a group effect</a> <a href="#ref-for-child-effect-6">(2)</a> <a href="#ref-for-child-effect-7">(3)</a> <a href="#ref-for-child-effect-8">(4)</a>
    <li><a href="#ref-for-child-effect-9">3.13.4. Sequence effects</a> <a href="#ref-for-child-effect-10">(2)</a>
    <li><a href="#ref-for-child-effect-11">3.13.4.1. The start time of
  children of a sequence effect</a>
    <li><a href="#ref-for-child-effect-12">3.13.4.2. The intrinsic
  iteration duration of a sequence effect</a> <a href="#ref-for-child-effect-13">(2)</a>
    <li><a href="#ref-for-child-effect-14">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-child-effect-15">5.10.2. Definitions for manipulating hierarchies</a> <a href="#ref-for-child-effect-16">(2)</a> <a href="#ref-for-child-effect-17">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="parent-group">
   <b><a href="#parent-group">#parent-group</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-parent-group-1">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-parent-group-2">(2)</a>
    <li><a href="#ref-for-parent-group-3">3.6.1. Relationship between animation effects
  and animations</a> <a href="#ref-for-parent-group-4">(2)</a>
    <li><a href="#ref-for-parent-group-5">3.6.3. The active interval</a> <a href="#ref-for-parent-group-6">(2)</a> <a href="#ref-for-parent-group-7">(3)</a>
    <li><a href="#ref-for-parent-group-8">3.6.4. Local time and inherited time</a> <a href="#ref-for-parent-group-9">(2)</a> <a href="#ref-for-parent-group-10">(3)</a>
    <li><a href="#ref-for-parent-group-11">3.6.5. Animation effect phases and
states</a> <a href="#ref-for-parent-group-12">(2)</a> <a href="#ref-for-parent-group-13">(3)</a> <a href="#ref-for-parent-group-14">(4)</a>
    <li><a href="#ref-for-parent-group-15">3.10.3.1. Calculating the active time</a> <a href="#ref-for-parent-group-16">(2)</a> <a href="#ref-for-parent-group-17">(3)</a> <a href="#ref-for-parent-group-18">(4)</a> <a href="#ref-for-parent-group-19">(5)</a>
    <li><a href="#ref-for-parent-group-20">3.13. Grouping and synchronization</a> <a href="#ref-for-parent-group-21">(2)</a> <a href="#ref-for-parent-group-22">(3)</a>
    <li><a href="#ref-for-parent-group-23">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-parent-group-24">(2)</a> <a href="#ref-for-parent-group-25">(3)</a> <a href="#ref-for-parent-group-26">(4)</a> <a href="#ref-for-parent-group-27">(5)</a> <a href="#ref-for-parent-group-28">(6)</a> <a href="#ref-for-parent-group-29">(7)</a> <a href="#ref-for-parent-group-30">(8)</a>
    <li><a href="#ref-for-parent-group-31">5.9. The
  ComputedTimingProperties dictionary</a> <a href="#ref-for-parent-group-32">(2)</a>
    <li><a href="#ref-for-parent-group-33">5.10.2. Definitions for manipulating hierarchies</a> <a href="#ref-for-parent-group-34">(2)</a> <a href="#ref-for-parent-group-35">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="tree-order">
   <b><a href="#tree-order">#tree-order</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tree-order-1">4.5.2. The effect stack</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="root">
   <b><a href="#root">#root</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-root-1">3.6.1. Relationship between animation effects
  and animations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ancestor">
   <b><a href="#ancestor">#ancestor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ancestor-1">3.6.1. Relationship between animation effects
  and animations</a>
    <li><a href="#ref-for-ancestor-2">3.7.1. Fill modes</a> <a href="#ref-for-ancestor-3">(2)</a> <a href="#ref-for-ancestor-4">(3)</a> <a href="#ref-for-ancestor-5">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="descendant">
   <b><a href="#descendant">#descendant</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-descendant-1">3.1.2. Hierarchical</a>
    <li><a href="#ref-for-descendant-2">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="inclusive-ancestor">
   <b><a href="#inclusive-ancestor">#inclusive-ancestor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inclusive-ancestor-1">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-inclusive-ancestor-2">(2)</a> <a href="#ref-for-inclusive-ancestor-3">(3)</a> <a href="#ref-for-inclusive-ancestor-4">(4)</a>
    <li><a href="#ref-for-inclusive-ancestor-5">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-inclusive-ancestor-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="inclusive-descendant">
   <b><a href="#inclusive-descendant">#inclusive-descendant</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inclusive-descendant-1">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-inclusive-descendant-2">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-inclusive-descendant-3">3.5.11. Pausing an animation</a>
    <li><a href="#ref-for-inclusive-descendant-4">3.5.16. Canceling an animation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="next-sibling">
   <b><a href="#next-sibling">#next-sibling</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-next-sibling-1">3.6.3. The active interval</a>
    <li><a href="#ref-for-next-sibling-2">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-next-sibling-3">5.10.2. Definitions for manipulating hierarchies</a> <a href="#ref-for-next-sibling-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="previous-sibling">
   <b><a href="#previous-sibling">#previous-sibling</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-previous-sibling-1">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-previous-sibling-2">(2)</a>
    <li><a href="#ref-for-previous-sibling-3">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="first-child">
   <b><a href="#first-child">#first-child</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-first-child-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-first-child-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="last-child">
   <b><a href="#last-child">#last-child</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-last-child-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sequence-effect">
   <b><a href="#sequence-effect">#sequence-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sequence-effect-1">1.2. Changes since level 1</a>
    <li><a href="#ref-for-sequence-effect-2">3.6.3. The active interval</a> <a href="#ref-for-sequence-effect-3">(2)</a> <a href="#ref-for-sequence-effect-4">(3)</a>
    <li><a href="#ref-for-sequence-effect-5">3.9. Animation effect speed control</a>
    <li><a href="#ref-for-sequence-effect-6">3.13.4. Sequence effects</a> <a href="#ref-for-sequence-effect-7">(2)</a> <a href="#ref-for-sequence-effect-8">(3)</a> <a href="#ref-for-sequence-effect-9">(4)</a> <a href="#ref-for-sequence-effect-10">(5)</a> <a href="#ref-for-sequence-effect-11">(6)</a>
    <li><a href="#ref-for-sequence-effect-12">3.13.4.1. The start time of
  children of a sequence effect</a> <a href="#ref-for-sequence-effect-13">(2)</a> <a href="#ref-for-sequence-effect-14">(3)</a> <a href="#ref-for-sequence-effect-15">(4)</a>
    <li><a href="#ref-for-sequence-effect-16">3.13.4.2. The intrinsic
  iteration duration of a sequence effect</a> <a href="#ref-for-sequence-effect-17">(2)</a>
    <li><a href="#ref-for-sequence-effect-18">4.3.1. Not animatable</a>
    <li><a href="#ref-for-sequence-effect-19">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-sequence-effect-20">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a> <a href="#ref-for-sequence-effect-21">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-progress">
   <b><a href="#iteration-progress">#iteration-progress</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-progress-1">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-iteration-progress-2">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-iteration-progress-3">3.7.1. Fill modes</a> <a href="#ref-for-iteration-progress-4">(2)</a> <a href="#ref-for-iteration-progress-5">(3)</a>
    <li><a href="#ref-for-iteration-progress-6">3.8.3. Iteration time space</a>
    <li><a href="#ref-for-iteration-progress-7">3.8.4. Interval timing</a> <a href="#ref-for-iteration-progress-8">(2)</a>
    <li><a href="#ref-for-iteration-progress-9">3.10.1. Overview</a> <a href="#ref-for-iteration-progress-10">(2)</a>
    <li><a href="#ref-for-iteration-progress-11">4. Animation model</a>
    <li><a href="#ref-for-iteration-progress-12">4.1. Introduction</a>
    <li><a href="#ref-for-iteration-progress-13">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-iteration-progress-14">(2)</a>
    <li><a href="#ref-for-iteration-progress-15">4.8. Custom effects</a>
    <li><a href="#ref-for-iteration-progress-16">4.8.1. Sampling custom effects</a> <a href="#ref-for-iteration-progress-17">(2)</a> <a href="#ref-for-iteration-progress-18">(3)</a> <a href="#ref-for-iteration-progress-19">(4)</a>
    <li><a href="#ref-for-iteration-progress-20">5.9. The
  ComputedTimingProperties dictionary</a>
    <li><a href="#ref-for-iteration-progress-21">5.17. The EffectCallback callback function</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="target-property">
   <b><a href="#target-property">#target-property</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-target-property-1">4.1. Introduction</a>
    <li><a href="#ref-for-target-property-2">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-target-property-3">4.5. Combining effects</a> <a href="#ref-for-target-property-4">(2)</a> <a href="#ref-for-target-property-5">(3)</a> <a href="#ref-for-target-property-6">(4)</a>
    <li><a href="#ref-for-target-property-7">4.5.2. The effect stack</a>
    <li><a href="#ref-for-target-property-8">4.5.5. Applying the composited result</a> <a href="#ref-for-target-property-9">(2)</a>
    <li><a href="#ref-for-target-property-10">4.8.2. Execution order of custom effects</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="effect-value">
   <b><a href="#effect-value">#effect-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-effect-value-1">4.4.1. Keyframes</a>
    <li><a href="#ref-for-effect-value-2">4.4.3. Calculating computed keyframes</a>
    <li><a href="#ref-for-effect-value-3">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-effect-value-4">(2)</a>
    <li><a href="#ref-for-effect-value-5">4.5. Combining effects</a> <a href="#ref-for-effect-value-6">(2)</a> <a href="#ref-for-effect-value-7">(3)</a> <a href="#ref-for-effect-value-8">(4)</a> <a href="#ref-for-effect-value-9">(5)</a>
    <li><a href="#ref-for-effect-value-10">4.5.3. Calculating the result of an effect stack</a> <a href="#ref-for-effect-value-11">(2)</a> <a href="#ref-for-effect-value-12">(3)</a>
    <li><a href="#ref-for-effect-value-13">4.5.4. Effect composition</a> <a href="#ref-for-effect-value-14">(2)</a> <a href="#ref-for-effect-value-15">(3)</a> <a href="#ref-for-effect-value-16">(4)</a> <a href="#ref-for-effect-value-17">(5)</a> <a href="#ref-for-effect-value-18">(6)</a> <a href="#ref-for-effect-value-19">(7)</a> <a href="#ref-for-effect-value-20">(8)</a>
    <li><a href="#ref-for-effect-value-21">4.6. Effect accumulation</a> <a href="#ref-for-effect-value-22">(2)</a>
    <li><a href="#ref-for-effect-value-23">5.14. The IterationCompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="concept-animatable">
   <b><a href="#concept-animatable">#concept-animatable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-animatable-1">4.1. Introduction</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-interpolation">
   <b><a href="#animation-interpolation">#animation-interpolation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-interpolation-1">4.2. Procedures for animating properties</a>
    <li><a href="#ref-for-animation-interpolation-2">4.3.1. Not animatable</a>
    <li><a href="#ref-for-animation-interpolation-3">4.3.2. Discrete</a>
    <li><a href="#ref-for-animation-interpolation-4">4.3.3. Real number</a>
    <li><a href="#ref-for-animation-interpolation-5">4.3.4. Length, percentage, or
calc</a>
    <li><a href="#ref-for-animation-interpolation-6">4.3.5. Color</a>
    <li><a href="#ref-for-animation-interpolation-7">4.3.6. Transform list</a>
    <li><a href="#ref-for-animation-interpolation-8">4.4.4. The effect value of
  a keyframe effect</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-addition">
   <b><a href="#animation-addition">#animation-addition</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-addition-1">4.2. Procedures for animating properties</a> <a href="#ref-for-animation-addition-2">(2)</a> <a href="#ref-for-animation-addition-3">(3)</a> <a href="#ref-for-animation-addition-4">(4)</a>
    <li><a href="#ref-for-animation-addition-5">4.3. Animation types</a> <a href="#ref-for-animation-addition-6">(2)</a> <a href="#ref-for-animation-addition-7">(3)</a>
    <li><a href="#ref-for-animation-addition-8">4.3.1. Not animatable</a>
    <li><a href="#ref-for-animation-addition-9">4.3.3. Real number</a>
    <li><a href="#ref-for-animation-addition-10">4.3.4. Length, percentage, or
calc</a>
    <li><a href="#ref-for-animation-addition-11">4.3.5. Color</a>
    <li><a href="#ref-for-animation-addition-12">4.3.6. Transform list</a> <a href="#ref-for-animation-addition-13">(2)</a>
    <li><a href="#ref-for-animation-addition-14">4.5.4. Effect composition</a> <a href="#ref-for-animation-addition-15">(2)</a>
    <li><a href="#ref-for-animation-addition-16">5.15. The CompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-accumulation">
   <b><a href="#animation-accumulation">#animation-accumulation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-accumulation-1">4.2. Procedures for animating properties</a> <a href="#ref-for-animation-accumulation-2">(2)</a> <a href="#ref-for-animation-accumulation-3">(3)</a>
    <li><a href="#ref-for-animation-accumulation-4">4.3. Animation types</a> <a href="#ref-for-animation-accumulation-5">(2)</a>
    <li><a href="#ref-for-animation-accumulation-6">4.3.6. Transform list</a>
    <li><a href="#ref-for-animation-accumulation-7">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-animation-accumulation-8">4.5.4. Effect composition</a> <a href="#ref-for-animation-accumulation-9">(2)</a>
    <li><a href="#ref-for-animation-accumulation-10">4.6. Effect accumulation</a>
    <li><a href="#ref-for-animation-accumulation-11">5.15. The CompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="distance-computation">
   <b><a href="#distance-computation">#distance-computation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-distance-computation-1">4.3. Animation types</a> <a href="#ref-for-distance-computation-2">(2)</a>
    <li><a href="#ref-for-distance-computation-3">4.3.1. Not animatable</a>
    <li><a href="#ref-for-distance-computation-4">4.3.3. Real number</a>
    <li><a href="#ref-for-distance-computation-5">4.3.4. Length, percentage, or
calc</a> <a href="#ref-for-distance-computation-6">(2)</a>
    <li><a href="#ref-for-distance-computation-7">4.3.5. Color</a>
    <li><a href="#ref-for-distance-computation-8">4.3.6. Transform list</a> <a href="#ref-for-distance-computation-9">(2)</a>
    <li><a href="#ref-for-distance-computation-10">4.4.2. Spacing keyframes</a>
    <li><a href="#ref-for-distance-computation-11">4.4.2.1. Applying spacing to keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-type">
   <b><a href="#animation-type">#animation-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-type-1">4.1. Introduction</a>
    <li><a href="#ref-for-animation-type-2">4.3. Animation types</a> <a href="#ref-for-animation-type-3">(2)</a> <a href="#ref-for-animation-type-4">(3)</a> <a href="#ref-for-animation-type-5">(4)</a> <a href="#ref-for-animation-type-6">(5)</a> <a href="#ref-for-animation-type-7">(6)</a> <a href="#ref-for-animation-type-8">(7)</a> <a href="#ref-for-animation-type-9">(8)</a> <a href="#ref-for-animation-type-10">(9)</a> <a href="#ref-for-animation-type-11">(10)</a>
    <li><a href="#ref-for-animation-type-12">4.3.1. Not animatable</a> <a href="#ref-for-animation-type-13">(2)</a>
    <li><a href="#ref-for-animation-type-14">4.3.2. Discrete</a>
    <li><a href="#ref-for-animation-type-15">4.3.3. Real number</a>
    <li><a href="#ref-for-animation-type-16">4.3.4. Length, percentage, or
calc</a> <a href="#ref-for-animation-type-17">(2)</a>
    <li><a href="#ref-for-animation-type-18">4.3.5. Color</a>
    <li><a href="#ref-for-animation-type-19">4.3.6. Transform list</a>
    <li><a href="#ref-for-animation-type-20">4.3.7. Other animation types</a>
    <li><a href="#ref-for-animation-type-21">4.4.2. Spacing keyframes</a>
    <li><a href="#ref-for-animation-type-22">4.4.2.1. Applying spacing to keyframes</a>
    <li><a href="#ref-for-animation-type-23">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-animation-type-24">(2)</a> <a href="#ref-for-animation-type-25">(3)</a>
    <li><a href="#ref-for-animation-type-26">4.5.4. Effect composition</a> <a href="#ref-for-animation-type-27">(2)</a>
    <li><a href="#ref-for-animation-type-28">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-animation-type-29">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="not-paceable">
   <b><a href="#not-paceable">#not-paceable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-not-paceable-1">4.3.4. Length, percentage, or
calc</a> <a href="#ref-for-not-paceable-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="concept-not-animatable">
   <b><a href="#concept-not-animatable">#concept-not-animatable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-not-animatable-1">4.3.1. Not animatable</a> <a href="#ref-for-concept-not-animatable-2">(2)</a> <a href="#ref-for-concept-not-animatable-3">(3)</a>
    <li><a href="#ref-for-concept-not-animatable-4">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-concept-not-animatable-5">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-concept-not-animatable-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="discrete-animation-type">
   <b><a href="#discrete-animation-type">#discrete-animation-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-discrete-animation-type-1">4.3. Animation types</a> <a href="#ref-for-discrete-animation-type-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="real-number-animation-type">
   <b><a href="#real-number-animation-type">#real-number-animation-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-real-number-animation-type-1">4.3.4. Length, percentage, or
calc</a>
    <li><a href="#ref-for-real-number-animation-type-2">4.3.5. Color</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframe-effect">
   <b><a href="#keyframe-effect">#keyframe-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframe-effect-1">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-keyframe-effect-2">3.6.2. Types of animation effects</a>
    <li><a href="#ref-for-keyframe-effect-3">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-keyframe-effect-4">4.3.4. Length, percentage, or
calc</a>
    <li><a href="#ref-for-keyframe-effect-5">4.4.1. Keyframes</a> <a href="#ref-for-keyframe-effect-6">(2)</a> <a href="#ref-for-keyframe-effect-7">(3)</a> <a href="#ref-for-keyframe-effect-8">(4)</a>
    <li><a href="#ref-for-keyframe-effect-9">4.4.2. Spacing keyframes</a> <a href="#ref-for-keyframe-effect-10">(2)</a>
    <li><a href="#ref-for-keyframe-effect-11">4.4.3. Calculating computed keyframes</a> <a href="#ref-for-keyframe-effect-12">(2)</a> <a href="#ref-for-keyframe-effect-13">(3)</a>
    <li><a href="#ref-for-keyframe-effect-14">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-keyframe-effect-15">(2)</a> <a href="#ref-for-keyframe-effect-16">(3)</a> <a href="#ref-for-keyframe-effect-17">(4)</a> <a href="#ref-for-keyframe-effect-18">(5)</a>
    <li><a href="#ref-for-keyframe-effect-19">4.5. Combining effects</a> <a href="#ref-for-keyframe-effect-20">(2)</a> <a href="#ref-for-keyframe-effect-21">(3)</a> <a href="#ref-for-keyframe-effect-22">(4)</a> <a href="#ref-for-keyframe-effect-23">(5)</a> <a href="#ref-for-keyframe-effect-24">(6)</a> <a href="#ref-for-keyframe-effect-25">(7)</a>
    <li><a href="#ref-for-keyframe-effect-26">4.5.2. The effect stack</a> <a href="#ref-for-keyframe-effect-27">(2)</a> <a href="#ref-for-keyframe-effect-28">(3)</a>
    <li><a href="#ref-for-keyframe-effect-29">4.5.3. Calculating the result of an effect stack</a> <a href="#ref-for-keyframe-effect-30">(2)</a> <a href="#ref-for-keyframe-effect-31">(3)</a> <a href="#ref-for-keyframe-effect-32">(4)</a> <a href="#ref-for-keyframe-effect-33">(5)</a>
    <li><a href="#ref-for-keyframe-effect-34">4.5.4. Effect composition</a>
    <li><a href="#ref-for-keyframe-effect-35">4.6. Effect accumulation</a>
    <li><a href="#ref-for-keyframe-effect-36">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-keyframe-effect-37">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframe-effect-38">(2)</a> <a href="#ref-for-keyframe-effect-39">(3)</a> <a href="#ref-for-keyframe-effect-40">(4)</a> <a href="#ref-for-keyframe-effect-41">(5)</a> <a href="#ref-for-keyframe-effect-42">(6)</a> <a href="#ref-for-keyframe-effect-43">(7)</a> <a href="#ref-for-keyframe-effect-44">(8)</a> <a href="#ref-for-keyframe-effect-45">(9)</a> <a href="#ref-for-keyframe-effect-46">(10)</a> <a href="#ref-for-keyframe-effect-47">(11)</a> <a href="#ref-for-keyframe-effect-48">(12)</a>
    <li><a href="#ref-for-keyframe-effect-49">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-keyframe-effect-50">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-keyframe-effect-51">(2)</a> <a href="#ref-for-keyframe-effect-52">(3)</a>
    <li><a href="#ref-for-keyframe-effect-53">5.13.5. Computed-offset keyframes</a>
    <li><a href="#ref-for-keyframe-effect-54">5.21. Extensions to the CSSPseudoElement interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="target-element">
   <b><a href="#target-element">#target-element</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-target-element-1">4.3.4. Length, percentage, or
calc</a>
    <li><a href="#ref-for-target-element-2">4.4.3. Calculating computed keyframes</a> <a href="#ref-for-target-element-3">(2)</a> <a href="#ref-for-target-element-4">(3)</a>
    <li><a href="#ref-for-target-element-5">4.7. Side effects of animation</a> <a href="#ref-for-target-element-6">(2)</a>
    <li><a href="#ref-for-target-element-7">4.8.1. Sampling custom effects</a> <a href="#ref-for-target-element-8">(2)</a> <a href="#ref-for-target-element-9">(3)</a> <a href="#ref-for-target-element-10">(4)</a> <a href="#ref-for-target-element-11">(5)</a>
    <li><a href="#ref-for-target-element-12">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-target-element-13">(2)</a> <a href="#ref-for-target-element-14">(3)</a>
    <li><a href="#ref-for-target-element-15">5.13.5. Computed-offset keyframes</a> <a href="#ref-for-target-element-16">(2)</a> <a href="#ref-for-target-element-17">(3)</a>
    <li><a href="#ref-for-target-element-18">5.17. The EffectCallback callback function</a> <a href="#ref-for-target-element-19">(2)</a> <a href="#ref-for-target-element-20">(3)</a> <a href="#ref-for-target-element-21">(4)</a> <a href="#ref-for-target-element-22">(5)</a>
    <li><a href="#ref-for-target-element-23">5.18. The Animatable interface</a> <a href="#ref-for-target-element-24">(2)</a>
    <li><a href="#ref-for-target-element-25">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframe">
   <b><a href="#keyframe">#keyframe</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframe-1">3.12.4. Timing in discrete steps</a>
    <li><a href="#ref-for-keyframe-2">4.4.1. Keyframes</a> <a href="#ref-for-keyframe-3">(2)</a> <a href="#ref-for-keyframe-4">(3)</a> <a href="#ref-for-keyframe-5">(4)</a> <a href="#ref-for-keyframe-6">(5)</a> <a href="#ref-for-keyframe-7">(6)</a> <a href="#ref-for-keyframe-8">(7)</a>
    <li><a href="#ref-for-keyframe-9">4.4.2. Spacing keyframes</a> <a href="#ref-for-keyframe-10">(2)</a> <a href="#ref-for-keyframe-11">(3)</a>
    <li><a href="#ref-for-keyframe-12">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-keyframe-13">(2)</a> <a href="#ref-for-keyframe-14">(3)</a> <a href="#ref-for-keyframe-15">(4)</a> <a href="#ref-for-keyframe-16">(5)</a> <a href="#ref-for-keyframe-17">(6)</a> <a href="#ref-for-keyframe-18">(7)</a> <a href="#ref-for-keyframe-19">(8)</a> <a href="#ref-for-keyframe-20">(9)</a> <a href="#ref-for-keyframe-21">(10)</a> <a href="#ref-for-keyframe-22">(11)</a> <a href="#ref-for-keyframe-23">(12)</a>
    <li><a href="#ref-for-keyframe-24">4.4.3. Calculating computed keyframes</a> <a href="#ref-for-keyframe-25">(2)</a> <a href="#ref-for-keyframe-26">(3)</a> <a href="#ref-for-keyframe-27">(4)</a>
    <li><a href="#ref-for-keyframe-28">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-keyframe-29">(2)</a> <a href="#ref-for-keyframe-30">(3)</a> <a href="#ref-for-keyframe-31">(4)</a> <a href="#ref-for-keyframe-32">(5)</a> <a href="#ref-for-keyframe-33">(6)</a> <a href="#ref-for-keyframe-34">(7)</a> <a href="#ref-for-keyframe-35">(8)</a> <a href="#ref-for-keyframe-36">(9)</a> <a href="#ref-for-keyframe-37">(10)</a> <a href="#ref-for-keyframe-38">(11)</a> <a href="#ref-for-keyframe-39">(12)</a> <a href="#ref-for-keyframe-40">(13)</a> <a href="#ref-for-keyframe-41">(14)</a> <a href="#ref-for-keyframe-42">(15)</a> <a href="#ref-for-keyframe-43">(16)</a> <a href="#ref-for-keyframe-44">(17)</a> <a href="#ref-for-keyframe-45">(18)</a> <a href="#ref-for-keyframe-46">(19)</a> <a href="#ref-for-keyframe-47">(20)</a>
    <li><a href="#ref-for-keyframe-48">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframe-49">(2)</a> <a href="#ref-for-keyframe-50">(3)</a> <a href="#ref-for-keyframe-51">(4)</a> <a href="#ref-for-keyframe-52">(5)</a> <a href="#ref-for-keyframe-53">(6)</a> <a href="#ref-for-keyframe-54">(7)</a> <a href="#ref-for-keyframe-55">(8)</a> <a href="#ref-for-keyframe-56">(9)</a> <a href="#ref-for-keyframe-57">(10)</a>
    <li><a href="#ref-for-keyframe-58">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-keyframe-59">(2)</a> <a href="#ref-for-keyframe-60">(3)</a> <a href="#ref-for-keyframe-61">(4)</a> <a href="#ref-for-keyframe-62">(5)</a> <a href="#ref-for-keyframe-63">(6)</a> <a href="#ref-for-keyframe-64">(7)</a> <a href="#ref-for-keyframe-65">(8)</a> <a href="#ref-for-keyframe-66">(9)</a> <a href="#ref-for-keyframe-67">(10)</a>
    <li><a href="#ref-for-keyframe-68">5.13.4. The KeyframeEffectOptions dictionary</a> <a href="#ref-for-keyframe-69">(2)</a>
    <li><a href="#ref-for-keyframe-70">5.16. The SharedKeyframeList interface</a> <a href="#ref-for-keyframe-71">(2)</a>
    <li><a href="#ref-for-keyframe-72">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframe-offset">
   <b><a href="#keyframe-offset">#keyframe-offset</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframe-offset-1">4.4.1. Keyframes</a> <a href="#ref-for-keyframe-offset-2">(2)</a>
    <li><a href="#ref-for-keyframe-offset-3">4.4.2. Spacing keyframes</a> <a href="#ref-for-keyframe-offset-4">(2)</a> <a href="#ref-for-keyframe-offset-5">(3)</a> <a href="#ref-for-keyframe-offset-6">(4)</a> <a href="#ref-for-keyframe-offset-7">(5)</a> <a href="#ref-for-keyframe-offset-8">(6)</a> <a href="#ref-for-keyframe-offset-9">(7)</a> <a href="#ref-for-keyframe-offset-10">(8)</a> <a href="#ref-for-keyframe-offset-11">(9)</a>
    <li><a href="#ref-for-keyframe-offset-12">4.4.2.1. Applying spacing to keyframes</a>
    <li><a href="#ref-for-keyframe-offset-13">4.4.3. Calculating computed keyframes</a>
    <li><a href="#ref-for-keyframe-offset-14">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframe-offset-15">(2)</a>
    <li><a href="#ref-for-keyframe-offset-16">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-keyframe-offset-17">(2)</a> <a href="#ref-for-keyframe-offset-18">(3)</a> <a href="#ref-for-keyframe-offset-19">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="loosely-sorted-by-offset">
   <b><a href="#loosely-sorted-by-offset">#loosely-sorted-by-offset</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-loosely-sorted-by-offset-1">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframe-specific-composite-operation">
   <b><a href="#keyframe-specific-composite-operation">#keyframe-specific-composite-operation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframe-specific-composite-operation-1">4.4.1. Keyframes</a>
    <li><a href="#ref-for-keyframe-specific-composite-operation-2">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframe-specific-composite-operation-3">(2)</a>
    <li><a href="#ref-for-keyframe-specific-composite-operation-4">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-keyframe-specific-composite-operation-5">(2)</a>
    <li><a href="#ref-for-keyframe-specific-composite-operation-6">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframe-spacing-mode">
   <b><a href="#keyframe-spacing-mode">#keyframe-spacing-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframe-spacing-mode-1">4.4.2.1. Applying spacing to keyframes</a>
    <li><a href="#ref-for-keyframe-spacing-mode-2">4.4.3. Calculating computed keyframes</a>
    <li><a href="#ref-for-keyframe-spacing-mode-3">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframe-spacing-mode-4">(2)</a> <a href="#ref-for-keyframe-spacing-mode-5">(3)</a> <a href="#ref-for-keyframe-spacing-mode-6">(4)</a> <a href="#ref-for-keyframe-spacing-mode-7">(5)</a> <a href="#ref-for-keyframe-spacing-mode-8">(6)</a> <a href="#ref-for-keyframe-spacing-mode-9">(7)</a>
    <li><a href="#ref-for-keyframe-spacing-mode-10">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-keyframe-spacing-mode-11">(2)</a> <a href="#ref-for-keyframe-spacing-mode-12">(3)</a>
    <li><a href="#ref-for-keyframe-spacing-mode-13">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-keyframe-spacing-mode-14">5.13.5. Computed-offset keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="distribute-keyframe-spacing-mode">
   <b><a href="#distribute-keyframe-spacing-mode">#distribute-keyframe-spacing-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-distribute-keyframe-spacing-mode-1">4.4.2. Spacing keyframes</a> <a href="#ref-for-distribute-keyframe-spacing-mode-2">(2)</a>
    <li><a href="#ref-for-distribute-keyframe-spacing-mode-3">4.4.2.1. Applying spacing to keyframes</a>
    <li><a href="#ref-for-distribute-keyframe-spacing-mode-4">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-distribute-keyframe-spacing-mode-5">(2)</a>
    <li><a href="#ref-for-distribute-keyframe-spacing-mode-6">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-distribute-keyframe-spacing-mode-7">5.13.5. Computed-offset keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="paced-keyframe-spacing-mode">
   <b><a href="#paced-keyframe-spacing-mode">#paced-keyframe-spacing-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-paced-keyframe-spacing-mode-1">4.4.2. Spacing keyframes</a> <a href="#ref-for-paced-keyframe-spacing-mode-2">(2)</a> <a href="#ref-for-paced-keyframe-spacing-mode-3">(3)</a> <a href="#ref-for-paced-keyframe-spacing-mode-4">(4)</a> <a href="#ref-for-paced-keyframe-spacing-mode-5">(5)</a>
    <li><a href="#ref-for-paced-keyframe-spacing-mode-6">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-paced-keyframe-spacing-mode-7">(2)</a>
    <li><a href="#ref-for-paced-keyframe-spacing-mode-8">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="paced-property">
   <b><a href="#paced-property">#paced-property</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-paced-property-1">4.4.2. Spacing keyframes</a>
    <li><a href="#ref-for-paced-property-2">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-paced-property-3">(2)</a> <a href="#ref-for-paced-property-4">(3)</a>
    <li><a href="#ref-for-paced-property-5">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-paced-property-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="computed-keyframe-offset">
   <b><a href="#computed-keyframe-offset">#computed-keyframe-offset</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-computed-keyframe-offset-1">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-computed-keyframe-offset-2">(2)</a> <a href="#ref-for-computed-keyframe-offset-3">(3)</a> <a href="#ref-for-computed-keyframe-offset-4">(4)</a> <a href="#ref-for-computed-keyframe-offset-5">(5)</a> <a href="#ref-for-computed-keyframe-offset-6">(6)</a> <a href="#ref-for-computed-keyframe-offset-7">(7)</a> <a href="#ref-for-computed-keyframe-offset-8">(8)</a> <a href="#ref-for-computed-keyframe-offset-9">(9)</a> <a href="#ref-for-computed-keyframe-offset-10">(10)</a> <a href="#ref-for-computed-keyframe-offset-11">(11)</a> <a href="#ref-for-computed-keyframe-offset-12">(12)</a> <a href="#ref-for-computed-keyframe-offset-13">(13)</a> <a href="#ref-for-computed-keyframe-offset-14">(14)</a> <a href="#ref-for-computed-keyframe-offset-15">(15)</a>
    <li><a href="#ref-for-computed-keyframe-offset-16">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-computed-keyframe-offset-17">(2)</a> <a href="#ref-for-computed-keyframe-offset-18">(3)</a> <a href="#ref-for-computed-keyframe-offset-19">(4)</a> <a href="#ref-for-computed-keyframe-offset-20">(5)</a> <a href="#ref-for-computed-keyframe-offset-21">(6)</a> <a href="#ref-for-computed-keyframe-offset-22">(7)</a> <a href="#ref-for-computed-keyframe-offset-23">(8)</a> <a href="#ref-for-computed-keyframe-offset-24">(9)</a> <a href="#ref-for-computed-keyframe-offset-25">(10)</a> <a href="#ref-for-computed-keyframe-offset-26">(11)</a> <a href="#ref-for-computed-keyframe-offset-27">(12)</a>
    <li><a href="#ref-for-computed-keyframe-offset-28">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-computed-keyframe-offset-29">(2)</a>
    <li><a href="#ref-for-computed-keyframe-offset-30">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-computed-keyframe-offset-31">(2)</a>
    <li><a href="#ref-for-computed-keyframe-offset-32">5.13.5. Computed-offset keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="evenly-distributing-a-keyframe">
   <b><a href="#evenly-distributing-a-keyframe">#evenly-distributing-a-keyframe</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-evenly-distributing-a-keyframe-1">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-evenly-distributing-a-keyframe-2">(2)</a> <a href="#ref-for-evenly-distributing-a-keyframe-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="offsetk">
   <b><a href="#offsetk">#offsetk</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-offsetk-1">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-offsetk-2">(2)</a> <a href="#ref-for-offsetk-3">(3)</a> <a href="#ref-for-offsetk-4">(4)</a> <a href="#ref-for-offsetk-5">(5)</a> <a href="#ref-for-offsetk-6">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apply-spacing-to-a-series-of-keyframes">
   <b><a href="#apply-spacing-to-a-series-of-keyframes">#apply-spacing-to-a-series-of-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apply-spacing-to-a-series-of-keyframes-1">4.4.3. Calculating computed keyframes</a>
    <li><a href="#ref-for-apply-spacing-to-a-series-of-keyframes-2">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-apply-spacing-to-a-series-of-keyframes-3">5.13.5. Computed-offset keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="paceable">
   <b><a href="#paceable">#paceable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-paceable-1">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-paceable-2">(2)</a> <a href="#ref-for-paceable-3">(3)</a> <a href="#ref-for-paceable-4">(4)</a> <a href="#ref-for-paceable-5">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="distk">
   <b><a href="#distk">#distk</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-distk-1">4.4.2.1. Applying spacing to keyframes</a> <a href="#ref-for-distk-2">(2)</a> <a href="#ref-for-distk-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="computed-keyframes">
   <b><a href="#computed-keyframes">#computed-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-computed-keyframes-1">4.4.3. Calculating computed keyframes</a>
    <li><a href="#ref-for-computed-keyframes-2">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-computed-keyframes-3">(2)</a>
    <li><a href="#ref-for-computed-keyframes-4">5.13.5. Computed-offset keyframes</a> <a href="#ref-for-computed-keyframes-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="neutral-value-for-composition">
   <b><a href="#neutral-value-for-composition">#neutral-value-for-composition</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-neutral-value-for-composition-1">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-neutral-value-for-composition-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composition">
   <b><a href="#composition">#composition</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composition-1">4.3.5. Color</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-class">
   <b><a href="#animation-class">#animation-class</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-class-1">3.5. Animations</a>
    <li><a href="#ref-for-animation-class-2">4.5.1. Animation classes</a>
    <li><a href="#ref-for-animation-class-3">4.5.2. The effect stack</a> <a href="#ref-for-animation-class-4">(2)</a>
    <li><a href="#ref-for-animation-class-5">4.5.5. Applying the composited result</a> <a href="#ref-for-animation-class-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="effect-stack">
   <b><a href="#effect-stack">#effect-stack</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-effect-stack-1">4. Animation model</a>
    <li><a href="#ref-for-effect-stack-2">4.5. Combining effects</a> <a href="#ref-for-effect-stack-3">(2)</a> <a href="#ref-for-effect-stack-4">(3)</a>
    <li><a href="#ref-for-effect-stack-5">4.5.2. The effect stack</a> <a href="#ref-for-effect-stack-6">(2)</a>
    <li><a href="#ref-for-effect-stack-7">4.5.3. Calculating the result of an effect stack</a> <a href="#ref-for-effect-stack-8">(2)</a> <a href="#ref-for-effect-stack-9">(3)</a>
    <li><a href="#ref-for-effect-stack-10">4.5.5. Applying the composited result</a> <a href="#ref-for-effect-stack-11">(2)</a> <a href="#ref-for-effect-stack-12">(3)</a> <a href="#ref-for-effect-stack-13">(4)</a>
    <li><a href="#ref-for-effect-stack-14">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-effect-stack-15">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="associated-animation-of-an-animation-effect">
   <b><a href="#associated-animation-of-an-animation-effect">#associated-animation-of-an-animation-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-associated-animation-of-an-animation-effect-1">4.5.5. Applying the composited result</a> <a href="#ref-for-associated-animation-of-an-animation-effect-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="underlying-value">
   <b><a href="#underlying-value">#underlying-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-underlying-value-1">4.1. Introduction</a>
    <li><a href="#ref-for-underlying-value-2">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-underlying-value-3">(2)</a>
    <li><a href="#ref-for-underlying-value-4">4.5.3. Calculating the result of an effect stack</a> <a href="#ref-for-underlying-value-5">(2)</a> <a href="#ref-for-underlying-value-6">(3)</a>
    <li><a href="#ref-for-underlying-value-7">4.5.4. Effect composition</a> <a href="#ref-for-underlying-value-8">(2)</a> <a href="#ref-for-underlying-value-9">(3)</a> <a href="#ref-for-underlying-value-10">(4)</a> <a href="#ref-for-underlying-value-11">(5)</a> <a href="#ref-for-underlying-value-12">(6)</a>
    <li><a href="#ref-for-underlying-value-13">4.5.5. Applying the composited result</a>
    <li><a href="#ref-for-underlying-value-14">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-underlying-value-15">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-underlying-value-16">5.15. The CompositeOperation enumeration</a> <a href="#ref-for-underlying-value-17">(2)</a> <a href="#ref-for-underlying-value-18">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composited-value">
   <b><a href="#composited-value">#composited-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composited-value-1">4.5.5. Applying the composited result</a> <a href="#ref-for-composited-value-2">(2)</a> <a href="#ref-for-composited-value-3">(3)</a> <a href="#ref-for-composited-value-4">(4)</a> <a href="#ref-for-composited-value-5">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composite-operation">
   <b><a href="#composite-operation">#composite-operation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composite-operation-1">4.4.1. Keyframes</a> <a href="#ref-for-composite-operation-2">(2)</a>
    <li><a href="#ref-for-composite-operation-3">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-composite-operation-4">(2)</a> <a href="#ref-for-composite-operation-5">(3)</a> <a href="#ref-for-composite-operation-6">(4)</a> <a href="#ref-for-composite-operation-7">(5)</a> <a href="#ref-for-composite-operation-8">(6)</a> <a href="#ref-for-composite-operation-9">(7)</a> <a href="#ref-for-composite-operation-10">(8)</a>
    <li><a href="#ref-for-composite-operation-11">4.5. Combining effects</a>
    <li><a href="#ref-for-composite-operation-12">4.5.4. Effect composition</a>
    <li><a href="#ref-for-composite-operation-13">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-composite-operation-14">(2)</a> <a href="#ref-for-composite-operation-15">(3)</a> <a href="#ref-for-composite-operation-16">(4)</a>
    <li><a href="#ref-for-composite-operation-17">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-composite-operation-18">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-composite-operation-19">5.15. The CompositeOperation enumeration</a> <a href="#ref-for-composite-operation-20">(2)</a> <a href="#ref-for-composite-operation-21">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composite-operation-replace">
   <b><a href="#composite-operation-replace">#composite-operation-replace</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composite-operation-replace-1">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-composite-operation-replace-2">(2)</a>
    <li><a href="#ref-for-composite-operation-replace-3">5.15. The CompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composite-operation-add">
   <b><a href="#composite-operation-add">#composite-operation-add</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composite-operation-add-1">4.4.4. The effect value of
  a keyframe effect</a> <a href="#ref-for-composite-operation-add-2">(2)</a> <a href="#ref-for-composite-operation-add-3">(3)</a>
    <li><a href="#ref-for-composite-operation-add-4">5.15. The CompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composite-operation-accumulate">
   <b><a href="#composite-operation-accumulate">#composite-operation-accumulate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composite-operation-accumulate-1">5.15. The CompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-composite-operation">
   <b><a href="#iteration-composite-operation">#iteration-composite-operation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-composite-operation-1">3.8.2. Controlling iteration</a>
    <li><a href="#ref-for-iteration-composite-operation-2">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-iteration-composite-operation-3">4.6. Effect accumulation</a> <a href="#ref-for-iteration-composite-operation-4">(2)</a>
    <li><a href="#ref-for-iteration-composite-operation-5">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-iteration-composite-operation-6">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-iteration-composite-operation-7">(2)</a> <a href="#ref-for-iteration-composite-operation-8">(3)</a>
    <li><a href="#ref-for-iteration-composite-operation-9">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-iteration-composite-operation-10">5.14. The IterationCompositeOperation enumeration</a> <a href="#ref-for-iteration-composite-operation-11">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-composite-operation-replace">
   <b><a href="#iteration-composite-operation-replace">#iteration-composite-operation-replace</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-composite-operation-replace-1">5.14. The IterationCompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration-composite-operation-accumulate">
   <b><a href="#iteration-composite-operation-accumulate">#iteration-composite-operation-accumulate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-composite-operation-accumulate-1">3.8.2. Controlling iteration</a>
    <li><a href="#ref-for-iteration-composite-operation-accumulate-2">4.4.4. The effect value of
  a keyframe effect</a>
    <li><a href="#ref-for-iteration-composite-operation-accumulate-3">5.14. The IterationCompositeOperation enumeration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="custom-effect">
   <b><a href="#custom-effect">#custom-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-custom-effect-1">1.2. Changes since level 1</a>
    <li><a href="#ref-for-custom-effect-2">3.5.1. Setting the timeline of an animation</a>
    <li><a href="#ref-for-custom-effect-3">3.5.3. Setting the target effect of an
  animation</a> <a href="#ref-for-custom-effect-4">(2)</a>
    <li><a href="#ref-for-custom-effect-5">3.5.7. Waiting for the target effect</a>
    <li><a href="#ref-for-custom-effect-6">3.5.16. Canceling an animation</a>
    <li><a href="#ref-for-custom-effect-7">4.8. Custom effects</a> <a href="#ref-for-custom-effect-8">(2)</a>
    <li><a href="#ref-for-custom-effect-9">4.8.1. Sampling custom effects</a> <a href="#ref-for-custom-effect-10">(2)</a> <a href="#ref-for-custom-effect-11">(3)</a>
    <li><a href="#ref-for-custom-effect-12">4.8.2. Execution order of custom effects</a> <a href="#ref-for-custom-effect-13">(2)</a> <a href="#ref-for-custom-effect-14">(3)</a>
    <li><a href="#ref-for-custom-effect-15">5.17. The EffectCallback callback function</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationtimeline">
   <b><a href="#animationtimeline">#animationtimeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationtimeline-1">5.2. The AnimationTimeline interface</a> <a href="#ref-for-animationtimeline-2">(2)</a>
    <li><a href="#ref-for-animationtimeline-3">5.3. The DocumentTimeline interface</a>
    <li><a href="#ref-for-animationtimeline-4">5.4. The Animation interface</a> <a href="#ref-for-animationtimeline-5">(2)</a> <a href="#ref-for-animationtimeline-6">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationtimeline-currenttime">
   <b><a href="#dom-animationtimeline-currenttime">#dom-animationtimeline-currenttime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationtimeline-currenttime-1">5.2. The AnimationTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationtimeline-play">
   <b><a href="#dom-animationtimeline-play">#dom-animationtimeline-play</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationtimeline-play-1">5.2. The AnimationTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationtimeline-play-effect-effect">
   <b><a href="#dom-animationtimeline-play-effect-effect">#dom-animationtimeline-play-effect-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationtimeline-play-effect-effect-1">5.2. The AnimationTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-documenttimelineoptions">
   <b><a href="#dictdef-documenttimelineoptions">#dictdef-documenttimelineoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-documenttimelineoptions-1">5.3. The DocumentTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="documenttimeline">
   <b><a href="#documenttimeline">#documenttimeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-documenttimeline-1">5.3. The DocumentTimeline interface</a> <a href="#ref-for-documenttimeline-2">(2)</a>
    <li><a href="#ref-for-documenttimeline-3">5.19. Extensions to the Document interface</a> <a href="#ref-for-documenttimeline-4">(2)</a> <a href="#ref-for-documenttimeline-5">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-documenttimelineoptions-origintime">
   <b><a href="#dom-documenttimelineoptions-origintime">#dom-documenttimelineoptions-origintime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-documenttimelineoptions-origintime-1">5.3. The DocumentTimeline interface</a> <a href="#ref-for-dom-documenttimelineoptions-origintime-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-documenttimeline-documenttimeline">
   <b><a href="#dom-documenttimeline-documenttimeline">#dom-documenttimeline-documenttimeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-documenttimeline-documenttimeline-1">5.3. The DocumentTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-documenttimeline-documenttimeline-options-options">
   <b><a href="#dom-documenttimeline-documenttimeline-options-options">#dom-documenttimeline-documenttimeline-options-options</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-documenttimeline-documenttimeline-options-options-1">5.3. The DocumentTimeline interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation">
   <b><a href="#animation">#animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-1">5.2. The AnimationTimeline interface</a> <a href="#ref-for-animation-2">(2)</a> <a href="#ref-for-animation-3">(3)</a> <a href="#ref-for-animation-4">(4)</a> <a href="#ref-for-animation-5">(5)</a>
    <li><a href="#ref-for-animation-6">5.4. The Animation interface</a> <a href="#ref-for-animation-7">(2)</a> <a href="#ref-for-animation-8">(3)</a> <a href="#ref-for-animation-9">(4)</a> <a href="#ref-for-animation-10">(5)</a> <a href="#ref-for-animation-11">(6)</a> <a href="#ref-for-animation-12">(7)</a>
    <li><a href="#ref-for-animation-13">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-animation-14">5.17. The EffectCallback callback function</a> <a href="#ref-for-animation-15">(2)</a>
    <li><a href="#ref-for-animation-16">5.18. The Animatable interface</a> <a href="#ref-for-animation-17">(2)</a> <a href="#ref-for-animation-18">(3)</a> <a href="#ref-for-animation-19">(4)</a> <a href="#ref-for-animation-20">(5)</a> <a href="#ref-for-animation-21">(6)</a>
    <li><a href="#ref-for-animation-22">5.19. Extensions to the Document interface</a> <a href="#ref-for-animation-23">(2)</a>
    <li><a href="#ref-for-animation-24">5.23. Model liveness</a> <a href="#ref-for-animation-25">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-animation">
   <b><a href="#dom-animation-animation">#dom-animation-animation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-animation-1">5.2. The AnimationTimeline interface</a>
    <li><a href="#ref-for-dom-animation-animation-2">5.4. The Animation interface</a>
    <li><a href="#ref-for-dom-animation-animation-3">5.8. The AnimationEffectTimingProperties dictionary</a>
    <li><a href="#ref-for-dom-animation-animation-4">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-animation-effect-timeline-effect">
   <b><a href="#dom-animation-animation-effect-timeline-effect">#dom-animation-animation-effect-timeline-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-animation-effect-timeline-effect-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-animation-effect-timeline-timeline">
   <b><a href="#dom-animation-animation-effect-timeline-timeline">#dom-animation-animation-effect-timeline-timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-animation-effect-timeline-timeline-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-id">
   <b><a href="#dom-animation-id">#dom-animation-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-id-1">5.4. The Animation interface</a>
    <li><a href="#ref-for-dom-animation-id-2">5.18. The Animatable interface</a> <a href="#ref-for-dom-animation-id-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-effect">
   <b><a href="#dom-animation-effect">#dom-animation-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-effect-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-timeline">
   <b><a href="#dom-animation-timeline">#dom-animation-timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-timeline-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-starttime">
   <b><a href="#dom-animation-starttime">#dom-animation-starttime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-starttime-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-currenttime">
   <b><a href="#dom-animation-currenttime">#dom-animation-currenttime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-currenttime-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-playbackrate">
   <b><a href="#dom-animation-playbackrate">#dom-animation-playbackrate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-playbackrate-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-playstate">
   <b><a href="#dom-animation-playstate">#dom-animation-playstate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-playstate-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-ready">
   <b><a href="#dom-animation-ready">#dom-animation-ready</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-ready-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-finished">
   <b><a href="#dom-animation-finished">#dom-animation-finished</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-finished-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-onfinish">
   <b><a href="#dom-animation-onfinish">#dom-animation-onfinish</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-onfinish-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-oncancel">
   <b><a href="#dom-animation-oncancel">#dom-animation-oncancel</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-oncancel-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-cancel">
   <b><a href="#dom-animation-cancel">#dom-animation-cancel</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-cancel-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-finish">
   <b><a href="#dom-animation-finish">#dom-animation-finish</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-finish-1">3.5.14. Updating the finished state</a>
    <li><a href="#ref-for-dom-animation-finish-2">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-play">
   <b><a href="#dom-animation-play">#dom-animation-play</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-play-1">5.4. The Animation interface</a> <a href="#ref-for-dom-animation-play-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-pause">
   <b><a href="#dom-animation-pause">#dom-animation-pause</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-pause-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animation-reverse">
   <b><a href="#dom-animation-reverse">#dom-animation-reverse</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animation-reverse-1">5.4. The Animation interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-animationplaystate">
   <b><a href="#enumdef-animationplaystate">#enumdef-animationplaystate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-animationplaystate-1">5.4. The Animation interface</a> <a href="#ref-for-enumdef-animationplaystate-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationeffectreadonly">
   <b><a href="#animationeffectreadonly">#animationeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationeffectreadonly-1">5.2. The AnimationTimeline interface</a>
    <li><a href="#ref-for-animationeffectreadonly-2">5.4. The Animation interface</a> <a href="#ref-for-animationeffectreadonly-3">(2)</a> <a href="#ref-for-animationeffectreadonly-4">(3)</a>
    <li><a href="#ref-for-animationeffectreadonly-5">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-animationeffectreadonly-6">(2)</a> <a href="#ref-for-animationeffectreadonly-7">(3)</a> <a href="#ref-for-animationeffectreadonly-8">(4)</a> <a href="#ref-for-animationeffectreadonly-9">(5)</a> <a href="#ref-for-animationeffectreadonly-10">(6)</a> <a href="#ref-for-animationeffectreadonly-11">(7)</a> <a href="#ref-for-animationeffectreadonly-12">(8)</a> <a href="#ref-for-animationeffectreadonly-13">(9)</a> <a href="#ref-for-animationeffectreadonly-14">(10)</a>
    <li><a href="#ref-for-animationeffectreadonly-15">5.8. The AnimationEffectTimingProperties dictionary</a> <a href="#ref-for-animationeffectreadonly-16">(2)</a>
    <li><a href="#ref-for-animationeffectreadonly-17">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-animationeffectreadonly-18">(2)</a> <a href="#ref-for-animationeffectreadonly-19">(3)</a> <a href="#ref-for-animationeffectreadonly-20">(4)</a> <a href="#ref-for-animationeffectreadonly-21">(5)</a> <a href="#ref-for-animationeffectreadonly-22">(6)</a> <a href="#ref-for-animationeffectreadonly-23">(7)</a> <a href="#ref-for-animationeffectreadonly-24">(8)</a>
    <li><a href="#ref-for-animationeffectreadonly-25">5.10.1. Processing a timing argument</a>
    <li><a href="#ref-for-animationeffectreadonly-26">5.11. The AnimationNodeList interface</a>
    <li><a href="#ref-for-animationeffectreadonly-27">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationeffectmutable">
   <b><a href="#animationeffectmutable">#animationeffectmutable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationeffectmutable-1">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-animationeffectmutable-2">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-animationeffectmutable-3">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a>
    <li><a href="#ref-for-animationeffectmutable-4">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectreadonly-timing">
   <b><a href="#dom-animationeffectreadonly-timing">#dom-animationeffectreadonly-timing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectreadonly-timing-1">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-dom-animationeffectreadonly-timing-2">(2)</a>
    <li><a href="#ref-for-dom-animationeffectreadonly-timing-3">5.10.1. Processing a timing argument</a>
    <li><a href="#ref-for-dom-animationeffectreadonly-timing-4">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-animationeffectreadonly-timing-5">(2)</a> <a href="#ref-for-dom-animationeffectreadonly-timing-6">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectreadonly-getcomputedtiming">
   <b><a href="#dom-animationeffectreadonly-getcomputedtiming">#dom-animationeffectreadonly-getcomputedtiming</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectreadonly-getcomputedtiming-1">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffectreadonly-getcomputedtiming-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectreadonly-parent">
   <b><a href="#dom-animationeffectreadonly-parent">#dom-animationeffectreadonly-parent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectreadonly-parent-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectreadonly-previoussibling">
   <b><a href="#dom-animationeffectreadonly-previoussibling">#dom-animationeffectreadonly-previoussibling</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectreadonly-previoussibling-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectreadonly-nextsibling">
   <b><a href="#dom-animationeffectreadonly-nextsibling">#dom-animationeffectreadonly-nextsibling</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectreadonly-nextsibling-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectmutable-before">
   <b><a href="#dom-animationeffectmutable-before">#dom-animationeffectmutable-before</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectmutable-before-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectmutable-after">
   <b><a href="#dom-animationeffectmutable-after">#dom-animationeffectmutable-after</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectmutable-after-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectmutable-replace">
   <b><a href="#dom-animationeffectmutable-replace">#dom-animationeffectmutable-replace</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectmutable-replace-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffectmutable-remove">
   <b><a href="#dom-animationeffectmutable-remove">#dom-animationeffectmutable-remove</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffectmutable-remove-1">5.5. The AnimationEffectReadOnly interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationeffecttimingreadonly">
   <b><a href="#animationeffecttimingreadonly">#animationeffecttimingreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationeffecttimingreadonly-1">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-animationeffecttimingreadonly-2">(2)</a> <a href="#ref-for-animationeffecttimingreadonly-3">(3)</a>
    <li><a href="#ref-for-animationeffecttimingreadonly-4">5.7. The AnimationEffectTiming interface</a> <a href="#ref-for-animationeffecttimingreadonly-5">(2)</a> <a href="#ref-for-animationeffecttimingreadonly-6">(3)</a> <a href="#ref-for-animationeffecttimingreadonly-7">(4)</a> <a href="#ref-for-animationeffecttimingreadonly-8">(5)</a> <a href="#ref-for-animationeffecttimingreadonly-9">(6)</a> <a href="#ref-for-animationeffecttimingreadonly-10">(7)</a> <a href="#ref-for-animationeffecttimingreadonly-11">(8)</a> <a href="#ref-for-animationeffecttimingreadonly-12">(9)</a> <a href="#ref-for-animationeffecttimingreadonly-13">(10)</a> <a href="#ref-for-animationeffecttimingreadonly-14">(11)</a>
    <li><a href="#ref-for-animationeffecttimingreadonly-15">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-animationeffecttimingreadonly-16">(2)</a>
    <li><a href="#ref-for-animationeffecttimingreadonly-17">5.10.1. Processing a timing argument</a> <a href="#ref-for-animationeffecttimingreadonly-18">(2)</a>
    <li><a href="#ref-for-animationeffecttimingreadonly-19">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-animationeffecttimingreadonly-20">(2)</a> <a href="#ref-for-animationeffecttimingreadonly-21">(3)</a> <a href="#ref-for-animationeffecttimingreadonly-22">(4)</a> <a href="#ref-for-animationeffecttimingreadonly-23">(5)</a> <a href="#ref-for-animationeffecttimingreadonly-24">(6)</a>
    <li><a href="#ref-for-animationeffecttimingreadonly-25">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-delay">
   <b><a href="#dom-animationeffecttimingreadonly-delay">#dom-animationeffecttimingreadonly-delay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-delay-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-delay-2">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-enddelay">
   <b><a href="#dom-animationeffecttimingreadonly-enddelay">#dom-animationeffecttimingreadonly-enddelay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-enddelay-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-enddelay-2">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-fill">
   <b><a href="#dom-animationeffecttimingreadonly-fill">#dom-animationeffecttimingreadonly-fill</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-fill-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-fill-2">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-iterationstart">
   <b><a href="#dom-animationeffecttimingreadonly-iterationstart">#dom-animationeffecttimingreadonly-iterationstart</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-iterationstart-1">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-dom-animationeffecttimingreadonly-iterationstart-2">(2)</a> <a href="#ref-for-dom-animationeffecttimingreadonly-iterationstart-3">(3)</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-iterationstart-4">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-iterations">
   <b><a href="#dom-animationeffecttimingreadonly-iterations">#dom-animationeffecttimingreadonly-iterations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-iterations-1">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-dom-animationeffecttimingreadonly-iterations-2">(2)</a> <a href="#ref-for-dom-animationeffecttimingreadonly-iterations-3">(3)</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-iterations-4">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-duration">
   <b><a href="#dom-animationeffecttimingreadonly-duration">#dom-animationeffecttimingreadonly-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-duration-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-duration-2">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-playbackrate">
   <b><a href="#dom-animationeffecttimingreadonly-playbackrate">#dom-animationeffecttimingreadonly-playbackrate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-playbackrate-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-playbackrate-2">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-direction">
   <b><a href="#dom-animationeffecttimingreadonly-direction">#dom-animationeffecttimingreadonly-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-direction-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-direction-2">5.7. The AnimationEffectTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingreadonly-easing">
   <b><a href="#dom-animationeffecttimingreadonly-easing">#dom-animationeffecttimingreadonly-easing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-easing-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-easing-2">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttimingreadonly-easing-3">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationeffecttiming">
   <b><a href="#animationeffecttiming">#animationeffecttiming</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationeffecttiming-1">3.12.3. Scaling using a cubic Bézier curve</a>
    <li><a href="#ref-for-animationeffecttiming-2">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-animationeffecttiming-3">5.8. The AnimationEffectTimingProperties dictionary</a> <a href="#ref-for-animationeffecttiming-4">(2)</a> <a href="#ref-for-animationeffecttiming-5">(3)</a> <a href="#ref-for-animationeffecttiming-6">(4)</a> <a href="#ref-for-animationeffecttiming-7">(5)</a> <a href="#ref-for-animationeffecttiming-8">(6)</a> <a href="#ref-for-animationeffecttiming-9">(7)</a> <a href="#ref-for-animationeffecttiming-10">(8)</a> <a href="#ref-for-animationeffecttiming-11">(9)</a> <a href="#ref-for-animationeffecttiming-12">(10)</a>
    <li><a href="#ref-for-animationeffecttiming-13">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-animationeffecttiming-14">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-animationeffecttiming-15">(2)</a> <a href="#ref-for-animationeffecttiming-16">(3)</a> <a href="#ref-for-animationeffecttiming-17">(4)</a>
    <li><a href="#ref-for-animationeffecttiming-18">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-delay">
   <b><a href="#dom-animationeffecttiming-delay">#dom-animationeffecttiming-delay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-delay-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-delay-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-enddelay">
   <b><a href="#dom-animationeffecttiming-enddelay">#dom-animationeffecttiming-enddelay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-enddelay-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-enddelay-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-fill">
   <b><a href="#dom-animationeffecttiming-fill">#dom-animationeffecttiming-fill</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-fill-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-fill-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-iterationstart">
   <b><a href="#dom-animationeffecttiming-iterationstart">#dom-animationeffecttiming-iterationstart</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-iterationstart-1">5.6. The AnimationEffectTimingReadOnly interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-iterationstart-2">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-iterationstart-3">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-iterations">
   <b><a href="#dom-animationeffecttiming-iterations">#dom-animationeffecttiming-iterations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-iterations-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-iterations-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-duration">
   <b><a href="#dom-animationeffecttiming-duration">#dom-animationeffecttiming-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-duration-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-duration-2">5.8. The AnimationEffectTimingProperties dictionary</a>
    <li><a href="#ref-for-dom-animationeffecttiming-duration-3">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-playbackrate">
   <b><a href="#dom-animationeffecttiming-playbackrate">#dom-animationeffecttiming-playbackrate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-playbackrate-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-playbackrate-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-direction">
   <b><a href="#dom-animationeffecttiming-direction">#dom-animationeffecttiming-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-direction-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-direction-2">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttiming-easing">
   <b><a href="#dom-animationeffecttiming-easing">#dom-animationeffecttiming-easing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttiming-easing-1">3.12.3. Scaling using a cubic Bézier curve</a>
    <li><a href="#ref-for-dom-animationeffecttiming-easing-2">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-dom-animationeffecttiming-easing-3">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-animationeffecttimingproperties">
   <b><a href="#dictdef-animationeffecttimingproperties">#dictdef-animationeffecttimingproperties</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-1">5.8. The AnimationEffectTimingProperties dictionary</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-2">(2)</a>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-3">5.9. The
  ComputedTimingProperties dictionary</a>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-4">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-5">5.10.1. Processing a timing argument</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-6">(2)</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-7">(3)</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-8">(4)</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-9">(5)</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-10">(6)</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-11">(7)</a>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-12">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dictdef-animationeffecttimingproperties-13">(2)</a>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-14">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-dictdef-animationeffecttimingproperties-15">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-delay">
   <b><a href="#dom-animationeffecttimingproperties-delay">#dom-animationeffecttimingproperties-delay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-delay-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-enddelay">
   <b><a href="#dom-animationeffecttimingproperties-enddelay">#dom-animationeffecttimingproperties-enddelay</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-enddelay-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-fill">
   <b><a href="#dom-animationeffecttimingproperties-fill">#dom-animationeffecttimingproperties-fill</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-fill-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-iterationstart">
   <b><a href="#dom-animationeffecttimingproperties-iterationstart">#dom-animationeffecttimingproperties-iterationstart</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-iterationstart-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-iterations">
   <b><a href="#dom-animationeffecttimingproperties-iterations">#dom-animationeffecttimingproperties-iterations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-iterations-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-duration">
   <b><a href="#dom-animationeffecttimingproperties-duration">#dom-animationeffecttimingproperties-duration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-duration-1">5.8. The AnimationEffectTimingProperties dictionary</a>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-duration-2">5.10.1. Processing a timing argument</a>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-duration-3">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-playbackrate">
   <b><a href="#dom-animationeffecttimingproperties-playbackrate">#dom-animationeffecttimingproperties-playbackrate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-playbackrate-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-direction">
   <b><a href="#dom-animationeffecttimingproperties-direction">#dom-animationeffecttimingproperties-direction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-direction-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationeffecttimingproperties-easing">
   <b><a href="#dom-animationeffecttimingproperties-easing">#dom-animationeffecttimingproperties-easing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationeffecttimingproperties-easing-1">5.8. The AnimationEffectTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-computedtimingproperties">
   <b><a href="#dictdef-computedtimingproperties">#dictdef-computedtimingproperties</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-computedtimingproperties-1">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-dictdef-computedtimingproperties-2">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-computedtimingproperties-starttime">
   <b><a href="#dom-computedtimingproperties-starttime">#dom-computedtimingproperties-starttime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-computedtimingproperties-starttime-1">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-computedtimingproperties-endtime">
   <b><a href="#dom-computedtimingproperties-endtime">#dom-computedtimingproperties-endtime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-computedtimingproperties-endtime-1">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-computedtimingproperties-activeduration">
   <b><a href="#dom-computedtimingproperties-activeduration">#dom-computedtimingproperties-activeduration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-computedtimingproperties-activeduration-1">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-computedtimingproperties-localtime">
   <b><a href="#dom-computedtimingproperties-localtime">#dom-computedtimingproperties-localtime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-computedtimingproperties-localtime-1">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-computedtimingproperties-progress">
   <b><a href="#dom-computedtimingproperties-progress">#dom-computedtimingproperties-progress</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-computedtimingproperties-progress-1">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-computedtimingproperties-currentiteration">
   <b><a href="#dom-computedtimingproperties-currentiteration">#dom-computedtimingproperties-currentiteration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-computedtimingproperties-currentiteration-1">5.9. The
  ComputedTimingProperties dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-fillmode">
   <b><a href="#enumdef-fillmode">#enumdef-fillmode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-fillmode-1">5.5. The AnimationEffectReadOnly interface</a>
    <li><a href="#ref-for-enumdef-fillmode-2">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-enumdef-fillmode-3">(2)</a>
    <li><a href="#ref-for-enumdef-fillmode-4">5.7. The AnimationEffectTiming interface</a> <a href="#ref-for-enumdef-fillmode-5">(2)</a>
    <li><a href="#ref-for-enumdef-fillmode-6">5.8. The AnimationEffectTimingProperties dictionary</a> <a href="#ref-for-enumdef-fillmode-7">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-playbackdirection">
   <b><a href="#enumdef-playbackdirection">#enumdef-playbackdirection</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-playbackdirection-1">5.6. The AnimationEffectTimingReadOnly interface</a> <a href="#ref-for-enumdef-playbackdirection-2">(2)</a>
    <li><a href="#ref-for-enumdef-playbackdirection-3">5.7. The AnimationEffectTiming interface</a> <a href="#ref-for-enumdef-playbackdirection-4">(2)</a>
    <li><a href="#ref-for-enumdef-playbackdirection-5">5.8. The AnimationEffectTimingProperties dictionary</a> <a href="#ref-for-enumdef-playbackdirection-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="groupeffectreadonly">
   <b><a href="#groupeffectreadonly">#groupeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-groupeffectreadonly-1">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-groupeffectreadonly-2">(2)</a>
    <li><a href="#ref-for-groupeffectreadonly-3">5.9.1. The FillMode enumeration</a>
    <li><a href="#ref-for-groupeffectreadonly-4">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-groupeffectreadonly-5">(2)</a> <a href="#ref-for-groupeffectreadonly-6">(3)</a> <a href="#ref-for-groupeffectreadonly-7">(4)</a> <a href="#ref-for-groupeffectreadonly-8">(5)</a> <a href="#ref-for-groupeffectreadonly-9">(6)</a> <a href="#ref-for-groupeffectreadonly-10">(7)</a>
    <li><a href="#ref-for-groupeffectreadonly-11">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a> <a href="#ref-for-groupeffectreadonly-12">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="groupeffectmutable">
   <b><a href="#groupeffectmutable">#groupeffectmutable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-groupeffectmutable-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-groupeffectmutable-2">(2)</a>
    <li><a href="#ref-for-groupeffectmutable-3">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="groupeffect">
   <b><a href="#groupeffect">#groupeffect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-groupeffect-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-groupeffect-2">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-groupeffect-3">(2)</a> <a href="#ref-for-groupeffect-4">(3)</a> <a href="#ref-for-groupeffect-5">(4)</a> <a href="#ref-for-groupeffect-6">(5)</a> <a href="#ref-for-groupeffect-7">(6)</a> <a href="#ref-for-groupeffect-8">(7)</a>
    <li><a href="#ref-for-groupeffect-9">5.23. Model liveness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-groupeffectreadonly">
   <b><a href="#dom-groupeffectreadonly-groupeffectreadonly">#dom-groupeffectreadonly-groupeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-groupeffectreadonly-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-dom-groupeffectreadonly-groupeffectreadonly-2">5.10.1. Processing a timing argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-groupeffectreadonly-children-timing-children">
   <b><a href="#dom-groupeffectreadonly-groupeffectreadonly-children-timing-children">#dom-groupeffectreadonly-groupeffectreadonly-children-timing-children</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-groupeffectreadonly-children-timing-children-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing">
   <b><a href="#dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing">#dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-groupeffectreadonly-children-timing-timing-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffect-groupeffect">
   <b><a href="#dom-groupeffect-groupeffect">#dom-groupeffect-groupeffect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffect-groupeffect-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-dom-groupeffect-groupeffect-2">5.10.1. Processing a timing argument</a>
    <li><a href="#ref-for-dom-groupeffect-groupeffect-3">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-children">
   <b><a href="#dom-groupeffectreadonly-children">#dom-groupeffectreadonly-children</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-children-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-firstchild">
   <b><a href="#dom-groupeffectreadonly-firstchild">#dom-groupeffectreadonly-firstchild</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-firstchild-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-lastchild">
   <b><a href="#dom-groupeffectreadonly-lastchild">#dom-groupeffectreadonly-lastchild</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-lastchild-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectmutable-prepend">
   <b><a href="#dom-groupeffectmutable-prepend">#dom-groupeffectmutable-prepend</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectmutable-prepend-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectmutable-append">
   <b><a href="#dom-groupeffectmutable-append">#dom-groupeffectmutable-append</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectmutable-append-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-dom-groupeffectmutable-append-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-groupeffectreadonly-clone">
   <b><a href="#dom-groupeffectreadonly-clone">#dom-groupeffectreadonly-clone</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-groupeffectreadonly-clone-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
    <li><a href="#ref-for-dom-groupeffectreadonly-clone-2">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="process-a-timing-argument">
   <b><a href="#process-a-timing-argument">#process-a-timing-argument</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-timing-argument-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="next-sibling-not-included">
   <b><a href="#next-sibling-not-included">#next-sibling-not-included</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-next-sibling-not-included-1">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-next-sibling-not-included-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="remove-an-animation-effect">
   <b><a href="#remove-an-animation-effect">#remove-an-animation-effect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remove-an-animation-effect-1">3.5.3. Setting the target effect of an
  animation</a>
    <li><a href="#ref-for-remove-an-animation-effect-2">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-remove-an-animation-effect-3">(2)</a>
    <li><a href="#ref-for-remove-an-animation-effect-4">5.10.2. Definitions for manipulating hierarchies</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="insert-children">
   <b><a href="#insert-children">#insert-children</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-insert-children-1">5.5. The AnimationEffectReadOnly interface</a> <a href="#ref-for-insert-children-2">(2)</a> <a href="#ref-for-insert-children-3">(3)</a>
    <li><a href="#ref-for-insert-children-4">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-insert-children-5">(2)</a> <a href="#ref-for-insert-children-6">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationnodelist">
   <b><a href="#animationnodelist">#animationnodelist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationnodelist-1">5.10. The GroupEffectReadOnly
  and GroupEffect interfaces</a> <a href="#ref-for-animationnodelist-2">(2)</a>
    <li><a href="#ref-for-animationnodelist-3">5.11. The AnimationNodeList interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationnodelist-length">
   <b><a href="#dom-animationnodelist-length">#dom-animationnodelist-length</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationnodelist-length-1">5.11. The AnimationNodeList interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sequenceeffectreadonly">
   <b><a href="#sequenceeffectreadonly">#sequenceeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sequenceeffectreadonly-1">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a> <a href="#ref-for-sequenceeffectreadonly-2">(2)</a> <a href="#ref-for-sequenceeffectreadonly-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sequenceeffect">
   <b><a href="#sequenceeffect">#sequenceeffect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sequenceeffect-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-sequenceeffect-2">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a> <a href="#ref-for-sequenceeffect-3">(2)</a> <a href="#ref-for-sequenceeffect-4">(3)</a> <a href="#ref-for-sequenceeffect-5">(4)</a> <a href="#ref-for-sequenceeffect-6">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sequenceeffect-sequenceeffect">
   <b><a href="#dom-sequenceeffect-sequenceeffect">#dom-sequenceeffect-sequenceeffect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sequenceeffect-sequenceeffect-1">5.10.1. Processing a timing argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sequenceeffectreadonly-sequenceeffectreadonly">
   <b><a href="#dom-sequenceeffectreadonly-sequenceeffectreadonly">#dom-sequenceeffectreadonly-sequenceeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sequenceeffectreadonly-sequenceeffectreadonly-1">5.10.1. Processing a timing argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sequenceeffectreadonly-clone">
   <b><a href="#dom-sequenceeffectreadonly-clone">#dom-sequenceeffectreadonly-clone</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sequenceeffectreadonly-clone-1">5.12. The
SequenceEffectReadOnly and SequenceEffect
interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframeeffectreadonly">
   <b><a href="#keyframeeffectreadonly">#keyframeeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframeeffectreadonly-1">5.9.1. The FillMode enumeration</a>
    <li><a href="#ref-for-keyframeeffectreadonly-2">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframeeffectreadonly-3">(2)</a> <a href="#ref-for-keyframeeffectreadonly-4">(3)</a> <a href="#ref-for-keyframeeffectreadonly-5">(4)</a> <a href="#ref-for-keyframeeffectreadonly-6">(5)</a> <a href="#ref-for-keyframeeffectreadonly-7">(6)</a> <a href="#ref-for-keyframeeffectreadonly-8">(7)</a> <a href="#ref-for-keyframeeffectreadonly-9">(8)</a> <a href="#ref-for-keyframeeffectreadonly-10">(9)</a> <a href="#ref-for-keyframeeffectreadonly-11">(10)</a>
    <li><a href="#ref-for-keyframeeffectreadonly-12">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-keyframeeffectreadonly-13">5.17. The EffectCallback callback function</a>
    <li><a href="#ref-for-keyframeeffectreadonly-14">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="keyframeeffect">
   <b><a href="#keyframeeffect">#keyframeeffect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyframeeffect-1">5.7. The AnimationEffectTiming interface</a>
    <li><a href="#ref-for-keyframeeffect-2">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-keyframeeffect-3">(2)</a> <a href="#ref-for-keyframeeffect-4">(3)</a> <a href="#ref-for-keyframeeffect-5">(4)</a> <a href="#ref-for-keyframeeffect-6">(5)</a> <a href="#ref-for-keyframeeffect-7">(6)</a> <a href="#ref-for-keyframeeffect-8">(7)</a>
    <li><a href="#ref-for-keyframeeffect-9">5.13.1. Creating a new KeyframeEffect object</a> <a href="#ref-for-keyframeeffect-10">(2)</a> <a href="#ref-for-keyframeeffect-11">(3)</a>
    <li><a href="#ref-for-keyframeeffect-12">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-keyframeeffect-13">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-keyframeeffect-14">5.13.5. Computed-offset keyframes</a>
    <li><a href="#ref-for-keyframeeffect-15">5.16. The SharedKeyframeList interface</a> <a href="#ref-for-keyframeeffect-16">(2)</a>
    <li><a href="#ref-for-keyframeeffect-17">5.18. The Animatable interface</a> <a href="#ref-for-keyframeeffect-18">(2)</a>
    <li><a href="#ref-for-keyframeeffect-19">5.23. Model liveness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-keyframeeffectreadonly">
   <b><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly">#dom-keyframeeffectreadonly-keyframeeffectreadonly</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-2">(2)</a> <a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-3">(3)</a>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-4">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-5">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-6">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target">
   <b><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target">#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-target-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">
   <b><a href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-target-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes">
   <b><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes">#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-keyframes-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">
   <b><a href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options">
   <b><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options">#dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-target-keyframes-options-options-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">
   <b><a href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-options-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-keyframeeffectreadonly-source">
   <b><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source">#dom-keyframeeffectreadonly-keyframeeffectreadonly-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source">
   <b><a href="#dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source">#dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffectreadonly-keyframeeffectreadonly-source-source-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-source-source">
   <b><a href="#dom-keyframeeffect-keyframeeffect-source-source">#dom-keyframeeffect-keyframeeffect-source-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-source-source-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect">
   <b><a href="#dom-keyframeeffect-keyframeeffect">#dom-keyframeeffect-keyframeeffect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-2">5.13.1. Creating a new KeyframeEffect object</a>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-3">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-4">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-5">5.18. The Animatable interface</a> <a href="#ref-for-dom-keyframeeffect-keyframeeffect-6">(2)</a> <a href="#ref-for-dom-keyframeeffect-keyframeeffect-7">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-source">
   <b><a href="#dom-keyframeeffect-keyframeeffect-source">#dom-keyframeeffect-keyframeeffect-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-source-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffect-keyframeeffect-source-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-target">
   <b><a href="#dom-keyframeeffectreadonly-target">#dom-keyframeeffectreadonly-target</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-target-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-target">
   <b><a href="#dom-keyframeeffect-target">#dom-keyframeeffect-target</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-target-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-iterationcomposite">
   <b><a href="#dom-keyframeeffectreadonly-iterationcomposite">#dom-keyframeeffectreadonly-iterationcomposite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-iterationcomposite-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffectreadonly-iterationcomposite-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-iterationcomposite">
   <b><a href="#dom-keyframeeffect-iterationcomposite">#dom-keyframeeffect-iterationcomposite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-iterationcomposite-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-composite">
   <b><a href="#dom-keyframeeffectreadonly-composite">#dom-keyframeeffectreadonly-composite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-composite-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffectreadonly-composite-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-composite">
   <b><a href="#dom-keyframeeffect-composite">#dom-keyframeeffect-composite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-composite-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-spacing">
   <b><a href="#dom-keyframeeffectreadonly-spacing">#dom-keyframeeffectreadonly-spacing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-spacing-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffectreadonly-spacing-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-spacing">
   <b><a href="#dom-keyframeeffect-spacing">#dom-keyframeeffect-spacing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-spacing-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-dom-keyframeeffect-spacing-2">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectreadonly-getkeyframes">
   <b><a href="#dom-keyframeeffectreadonly-getkeyframes">#dom-keyframeeffectreadonly-getkeyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-getkeyframes-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-getkeyframes-2">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-dom-keyframeeffectreadonly-getkeyframes-3">(2)</a> <a href="#ref-for-dom-keyframeeffectreadonly-getkeyframes-4">(3)</a>
    <li><a href="#ref-for-dom-keyframeeffectreadonly-getkeyframes-5">5.13.5. Computed-offset keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-offset">
   <b><a href="#dom-basecomputedkeyframe-offset">#dom-basecomputedkeyframe-offset</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-basecomputedkeyframe-offset-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-computedoffset">
   <b><a href="#dom-basecomputedkeyframe-computedoffset">#dom-basecomputedkeyframe-computedoffset</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-basecomputedkeyframe-computedoffset-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-easing">
   <b><a href="#dom-basecomputedkeyframe-easing">#dom-basecomputedkeyframe-easing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-basecomputedkeyframe-easing-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-composite">
   <b><a href="#dom-basecomputedkeyframe-composite">#dom-basecomputedkeyframe-composite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-basecomputedkeyframe-composite-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffect-setkeyframes">
   <b><a href="#dom-keyframeeffect-setkeyframes">#dom-keyframeeffect-setkeyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffect-setkeyframes-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dom-keyframeeffect-setkeyframes-2">(2)</a>
    <li><a href="#ref-for-dom-keyframeeffect-setkeyframes-3">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-dom-keyframeeffect-setkeyframes-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animation-property-name-to-idl-attribute-name">
   <b><a href="#animation-property-name-to-idl-attribute-name">#animation-property-name-to-idl-attribute-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animation-property-name-to-idl-attribute-name-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-animation-property-name-to-idl-attribute-name-2">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="idl-attribute-name-to-animation-property-name">
   <b><a href="#idl-attribute-name-to-animation-property-name">#idl-attribute-name-to-animation-property-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-attribute-name-to-animation-property-name-1">5.13.3. Processing a keyframes
argument</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="check-the-completion-record">
   <b><a href="#check-the-completion-record">#check-the-completion-record</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-check-the-completion-record-1">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-check-the-completion-record-2">(2)</a> <a href="#ref-for-check-the-completion-record-3">(3)</a> <a href="#ref-for-check-the-completion-record-4">(4)</a> <a href="#ref-for-check-the-completion-record-5">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="process-a-keyframe-like-object">
   <b><a href="#process-a-keyframe-like-object">#process-a-keyframe-like-object</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-keyframe-like-object-1">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-process-a-keyframe-like-object-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="process-a-keyframes-argument">
   <b><a href="#process-a-keyframes-argument">#process-a-keyframes-argument</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-keyframes-argument-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-process-a-keyframes-argument-2">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-process-a-keyframes-argument-3">5.13.5. Computed-offset keyframes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-keyframeeffectoptions">
   <b><a href="#dictdef-keyframeeffectoptions">#dictdef-keyframeeffectoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-keyframeeffectoptions-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-dictdef-keyframeeffectoptions-2">(2)</a> <a href="#ref-for-dictdef-keyframeeffectoptions-3">(3)</a> <a href="#ref-for-dictdef-keyframeeffectoptions-4">(4)</a>
    <li><a href="#ref-for-dictdef-keyframeeffectoptions-5">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-dictdef-keyframeeffectoptions-6">5.13.4. The KeyframeEffectOptions dictionary</a>
    <li><a href="#ref-for-dictdef-keyframeeffectoptions-7">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectoptions-iterationcomposite">
   <b><a href="#dom-keyframeeffectoptions-iterationcomposite">#dom-keyframeeffectoptions-iterationcomposite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectoptions-iterationcomposite-1">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectoptions-composite">
   <b><a href="#dom-keyframeeffectoptions-composite">#dom-keyframeeffectoptions-composite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectoptions-composite-1">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeeffectoptions-spacing">
   <b><a href="#dom-keyframeeffectoptions-spacing">#dom-keyframeeffectoptions-spacing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeeffectoptions-spacing-1">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="computed-offset-keyframes">
   <b><a href="#computed-offset-keyframes">#computed-offset-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-computed-offset-keyframes-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-computed-offset-keyframes-2">(2)</a> <a href="#ref-for-computed-offset-keyframes-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iterationcompositeoperation">
   <b><a href="#iterationcompositeoperation">#iterationcompositeoperation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iterationcompositeoperation-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-iterationcompositeoperation">
   <b><a href="#enumdef-iterationcompositeoperation">#enumdef-iterationcompositeoperation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-iterationcompositeoperation-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-enumdef-iterationcompositeoperation-2">(2)</a> <a href="#ref-for-enumdef-iterationcompositeoperation-3">(3)</a>
    <li><a href="#ref-for-enumdef-iterationcompositeoperation-4">5.13.4. The KeyframeEffectOptions dictionary</a> <a href="#ref-for-enumdef-iterationcompositeoperation-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compositeoperation">
   <b><a href="#compositeoperation">#compositeoperation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compositeoperation-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-compositeoperation-2">5.13.4. The KeyframeEffectOptions dictionary</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-compositeoperation">
   <b><a href="#enumdef-compositeoperation">#enumdef-compositeoperation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-compositeoperation-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-enumdef-compositeoperation-2">(2)</a> <a href="#ref-for-enumdef-compositeoperation-3">(3)</a> <a href="#ref-for-enumdef-compositeoperation-4">(4)</a>
    <li><a href="#ref-for-enumdef-compositeoperation-5">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-enumdef-compositeoperation-6">(2)</a>
    <li><a href="#ref-for-enumdef-compositeoperation-7">5.13.4. The KeyframeEffectOptions dictionary</a> <a href="#ref-for-enumdef-compositeoperation-8">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sharedkeyframelist">
   <b><a href="#sharedkeyframelist">#sharedkeyframelist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sharedkeyframelist-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a>
    <li><a href="#ref-for-sharedkeyframelist-2">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-sharedkeyframelist-3">(2)</a>
    <li><a href="#ref-for-sharedkeyframelist-4">5.13.5. Computed-offset keyframes</a> <a href="#ref-for-sharedkeyframelist-5">(2)</a>
    <li><a href="#ref-for-sharedkeyframelist-6">5.16. The SharedKeyframeList interface</a> <a href="#ref-for-sharedkeyframelist-7">(2)</a> <a href="#ref-for-sharedkeyframelist-8">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sharedkeyframelist-sharedkeyframelist">
   <b><a href="#dom-sharedkeyframelist-sharedkeyframelist">#dom-sharedkeyframelist-sharedkeyframelist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sharedkeyframelist-sharedkeyframelist-1">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-dom-sharedkeyframelist-sharedkeyframelist-2">5.16. The SharedKeyframeList interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes">
   <b><a href="#dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes">#dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sharedkeyframelist-sharedkeyframelist-keyframes-keyframes-1">5.16. The SharedKeyframeList interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="callbackdef-effectcallback">
   <b><a href="#callbackdef-effectcallback">#callbackdef-effectcallback</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-callbackdef-effectcallback-1">5.17. The EffectCallback callback function</a> <a href="#ref-for-callbackdef-effectcallback-2">(2)</a>
    <li><a href="#ref-for-callbackdef-effectcallback-3">5.23. Model liveness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animatable">
   <b><a href="#animatable">#animatable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animatable-1">5.13. The KeyframeEffectReadOnly
  and KeyframeEffect interfaces</a> <a href="#ref-for-animatable-2">(2)</a> <a href="#ref-for-animatable-3">(3)</a> <a href="#ref-for-animatable-4">(4)</a> <a href="#ref-for-animatable-5">(5)</a>
    <li><a href="#ref-for-animatable-6">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-animatable-7">(2)</a>
    <li><a href="#ref-for-animatable-8">5.17. The EffectCallback callback function</a>
    <li><a href="#ref-for-animatable-9">5.18. The Animatable interface</a>
    <li><a href="#ref-for-animatable-10">5.19. Extensions to the Document interface</a>
    <li><a href="#ref-for-animatable-11">5.20. Extensions to the Element interface</a>
    <li><a href="#ref-for-animatable-12">5.21. Extensions to the CSSPseudoElement interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-keyframeanimationoptions">
   <b><a href="#dictdef-keyframeanimationoptions">#dictdef-keyframeanimationoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-keyframeanimationoptions-1">5.13.3. Processing a keyframes
argument</a>
    <li><a href="#ref-for-dictdef-keyframeanimationoptions-2">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animatable-animate">
   <b><a href="#dom-animatable-animate">#dom-animatable-animate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animatable-animate-1">5.13.3. Processing a keyframes
argument</a> <a href="#ref-for-dom-animatable-animate-2">(2)</a>
    <li><a href="#ref-for-dom-animatable-animate-3">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animatable-animate-keyframes-options-keyframes">
   <b><a href="#dom-animatable-animate-keyframes-options-keyframes">#dom-animatable-animate-keyframes-options-keyframes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animatable-animate-keyframes-options-keyframes-1">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animatable-animate-keyframes-options-options">
   <b><a href="#dom-animatable-animate-keyframes-options-options">#dom-animatable-animate-keyframes-options-options</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animatable-animate-keyframes-options-options-1">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animatable-getanimations">
   <b><a href="#dom-animatable-getanimations">#dom-animatable-getanimations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animatable-getanimations-1">5.18. The Animatable interface</a>
    <li><a href="#ref-for-dom-animatable-getanimations-2">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-keyframeanimationoptions-id">
   <b><a href="#dom-keyframeanimationoptions-id">#dom-keyframeanimationoptions-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyframeanimationoptions-id-1">5.18. The Animatable interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-document-timeline">
   <b><a href="#dom-document-timeline">#dom-document-timeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-timeline-1">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-document-getanimations">
   <b><a href="#dom-document-getanimations">#dom-document-getanimations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-getanimations-1">5.19. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="animationplaybackevent">
   <b><a href="#animationplaybackevent">#animationplaybackevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-animationplaybackevent-1">5.22. The AnimationPlaybackEvent interface</a> <a href="#ref-for-animationplaybackevent-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-animationplaybackeventinit">
   <b><a href="#dictdef-animationplaybackeventinit">#dictdef-animationplaybackeventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-animationplaybackeventinit-1">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationplaybackevent-animationplaybackevent">
   <b><a href="#dom-animationplaybackevent-animationplaybackevent">#dom-animationplaybackevent-animationplaybackevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationplaybackevent-animationplaybackevent-1">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationplaybackevent-currenttime">
   <b><a href="#dom-animationplaybackevent-currenttime">#dom-animationplaybackevent-currenttime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationplaybackevent-currenttime-1">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationplaybackevent-timelinetime">
   <b><a href="#dom-animationplaybackevent-timelinetime">#dom-animationplaybackevent-timelinetime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationplaybackevent-timelinetime-1">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationplaybackeventinit-currenttime">
   <b><a href="#dom-animationplaybackeventinit-currenttime">#dom-animationplaybackeventinit-currenttime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationplaybackeventinit-currenttime-1">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-animationplaybackeventinit-timelinetime">
   <b><a href="#dom-animationplaybackeventinit-timelinetime">#dom-animationplaybackeventinit-timelinetime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-animationplaybackeventinit-timelinetime-1">5.22. The AnimationPlaybackEvent interface</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>